const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/babylon-vendor-BzM3sUAk.js","assets/ionic-vendor-B-pzXrvp.js","assets/react-vendor-ikNeKBg6.js"])))=>i.map(i=>d[i]);
import{a as ce,t as Km,b as Tc,j as p,I as Mn,c as vn,d as Ct,e as se,f as He,g as Ve,h as la,i as De,k as N1,l as ca,m as an,n as on,o as Nn,p as qi,q as ln,r as Jm,s as $m,u as ep,v as tp,w as cl,x as xe,y as np,z as ip,A as M1,B as nt,C as it,D as rp,E as sp,F as ji,_ as B1,G as ap,H as op,J as lp,K as du,L as k1,M as qf,N as pr,O as Js,P as ar,Q as cp,R as Xf,S as up,T as ul,U as hp,V as dp,W as fu,X as fp,Y as gp,Z as xp,$ as mp}from"./ionic-vendor-B-pzXrvp.js";import{r as ie,b as pp,g as wp,u as jo,h as Pa,i as yp,j as bp,c as qn,k as Wf,R as Yf}from"./react-vendor-ikNeKBg6.js";import{u as di,i as vp,B as Ap,a as Ep}from"./i18n-vendor-fP-_IOJE.js";import{E as _p,S as Cp,C as Sp,A as Tp,V as j1,H as Op,M as Rp,a as Ip,b as L1,W as Dp}from"./babylon-vendor-BzM3sUAk.js";function ab(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}function Qf(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(s,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Zf={exports:{}},Oc={},Kf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,ne){var ye=ee.length;ee.push(ne);e:for(;0<ye;){var ze=ye-1>>>1,We=ee[ze];if(0<o(We,ne))ee[ze]=ne,ee[ye]=We,ye=ze;else break e}}function n(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var ne=ee[0],ye=ee.pop();if(ye!==ne){ee[0]=ye;e:for(var ze=0,We=ee.length,kr=We>>>1;ze<kr;){var St=2*(ze+1)-1,ni=ee[St],ht=St+1,Ji=ee[ht];if(0>o(ni,ye))ht<We&&0>o(Ji,ni)?(ee[ze]=Ji,ee[ht]=ye,ze=ht):(ee[ze]=ni,ee[St]=ye,ze=St);else if(ht<We&&0>o(Ji,ye))ee[ze]=Ji,ee[ht]=ye,ze=ht;else break e}}return ne}function o(ee,ne){var ye=ee.sortIndex-ne.sortIndex;return ye!==0?ye:ee.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,x=d.now();t.unstable_now=function(){return d.now()-x}}var w=[],y=[],E=1,C=null,T=3,R=!1,k=!1,L=!1,P=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function O(ee){for(var ne=n(y);ne!==null;){if(ne.callback===null)s(y);else if(ne.startTime<=ee)s(y),ne.sortIndex=ne.expirationTime,e(w,ne);else break;ne=n(y)}}function M(ee){if(L=!1,O(ee),!k)if(n(w)!==null)k=!0,Te();else{var ne=n(y);ne!==null&&X(M,ne.startTime-ee)}}var W=!1,H=-1,U=5,Z=-1;function V(){return!(t.unstable_now()-Z<U)}function we(){if(W){var ee=t.unstable_now();Z=ee;var ne=!0;try{e:{k=!1,L&&(L=!1,D(H),H=-1),R=!0;var ye=T;try{t:{for(O(ee),C=n(w);C!==null&&!(C.expirationTime>ee&&V());){var ze=C.callback;if(typeof ze=="function"){C.callback=null,T=C.priorityLevel;var We=ze(C.expirationTime<=ee);if(ee=t.unstable_now(),typeof We=="function"){C.callback=We,O(ee),ne=!0;break t}C===n(w)&&s(w),O(ee)}else s(w);C=n(w)}if(C!==null)ne=!0;else{var kr=n(y);kr!==null&&X(M,kr.startTime-ee),ne=!1}}break e}finally{C=null,T=ye,R=!1}ne=void 0}}finally{ne?je():W=!1}}}var je;if(typeof _=="function")je=function(){_(we)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,be=he.port2;he.port1.onmessage=we,je=function(){be.postMessage(null)}}else je=function(){P(we,0)};function Te(){W||(W=!0,je())}function X(ee,ne){H=P(function(){ee(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){k||R||(k=!0,Te())},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(w)},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ne=3;break;default:ne=T}var ye=T;T=ne;try{return ee()}finally{T=ye}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ne){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ye=T;T=ee;try{return ne()}finally{T=ye}},t.unstable_scheduleCallback=function(ee,ne,ye){var ze=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ze+ye:ze):ye=ze,ee){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=ye+We,ee={id:E++,callback:ne,priorityLevel:ee,startTime:ye,expirationTime:We,sortIndex:-1},ye>ze?(ee.sortIndex=ye,e(y,ee),n(w)===null&&ee===n(y)&&(L?(D(H),H=-1):L=!0,X(M,ye-ze))):(ee.sortIndex=We,e(w,ee),k||R||(k=!0,Te())),ee},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ee){var ne=T;return function(){var ye=T;T=ne;try{return ee.apply(this,arguments)}finally{T=ye}}}})(Jf);Kf.exports=Jf;var Np=Kf.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ut=Np,$f=ie,Mp=pp;function Y(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var Bp=Symbol.for("react.element"),hl=Symbol.for("react.transitional.element"),Ya=Symbol.for("react.portal"),zs=Symbol.for("react.fragment"),t2=Symbol.for("react.strict_mode"),ih=Symbol.for("react.profiler"),kp=Symbol.for("react.provider"),n2=Symbol.for("react.consumer"),zi=Symbol.for("react.context"),u0=Symbol.for("react.forward_ref"),rh=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),h0=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),i2=Symbol.for("react.offscreen"),jp=Symbol.for("react.memo_cache_sentinel"),U1=Symbol.iterator;function za(t){return t===null||typeof t!="object"?null:(t=U1&&t[U1]||t["@@iterator"],typeof t=="function"?t:null)}var Lp=Symbol.for("react.client.reference");function ah(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Lp?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zs:return"Fragment";case Ya:return"Portal";case ih:return"Profiler";case t2:return"StrictMode";case rh:return"Suspense";case sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zi:return(t.displayName||"Context")+".Provider";case n2:return(t._context.displayName||"Context")+".Consumer";case u0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case h0:return e=t.displayName||null,e!==null?e:ah(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return ah(t(e))}catch(n){}}return null}var Ae=$f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=Object.assign,gu,P1;function Qa(t){if(gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gu=e&&e[1]||"",P1=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+gu+t+P1}var xu=!1;function mu(t,e){if(!t||xu)return"";xu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var C=function(){throw Error()};if(Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(R){var T=R}Reflect.construct(t,[],C)}else{try{C.call()}catch(R){T=R}t.call(C.prototype)}}else{try{throw Error()}catch(R){T=R}(C=t())&&typeof C.catch=="function"&&C.catch(function(){})}}catch(R){if(R&&T&&typeof R.stack=="string")return[R.stack,T.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),d=c[0],x=c[1];if(d&&x){var w=d.split("\n"),y=x.split("\n");for(o=s=0;s<w.length&&!w[s].includes("DetermineComponentFrameRoot");)s++;for(;o<y.length&&!y[o].includes("DetermineComponentFrameRoot");)o++;if(s===w.length||o===y.length)for(s=w.length-1,o=y.length-1;1<=s&&0<=o&&w[s]!==y[o];)o--;for(;1<=s&&0<=o;s--,o--)if(w[s]!==y[o]){if(s!==1||o!==1)do if(s--,o--,0>o||w[s]!==y[o]){var E="\n"+w[s].replace(" at new "," at ");return t.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",t.displayName)),E}while(1<=s&&0<=o);break}}}finally{xu=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Qa(n):""}function Up(t){switch(t.tag){case 26:case 27:case 5:return Qa(t.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 15:return t=mu(t.type,!1),t;case 11:return t=mu(t.type.render,!1),t;case 1:return t=mu(t.type,!0),t;default:return""}}function z1(t){try{var e="";do e+=Up(t),t=t.return;while(t);return e}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ya(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function r2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function F1(t){if(ya(t)!==t)throw Error(Y(188))}function Pp(t){var e=t.alternate;if(!e){if(e=ya(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,s=e;;){var o=n.return;if(o===null)break;var c=o.alternate;if(c===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===n)return F1(o),t;if(c===s)return F1(o),e;c=c.sibling}throw Error(Y(188))}if(n.return!==s.return)n=o,s=c;else{for(var d=!1,x=o.child;x;){if(x===n){d=!0,n=o,s=c;break}if(x===s){d=!0,s=o,n=c;break}x=x.sibling}if(!d){for(x=c.child;x;){if(x===n){d=!0,n=c,s=o;break}if(x===s){d=!0,s=c,n=o;break}x=x.sibling}if(!d)throw Error(Y(189))}}if(n.alternate!==s)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function s2(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=s2(t),e!==null)return e;t=t.sibling}return null}var Za=Array.isArray,ot=Mp.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ts={pending:!1,data:null,method:null,action:null},oh=[],Fs=-1;function Ti(t){return{current:t}}function qt(t){0>Fs||(t.current=oh[Fs],oh[Fs]=null,Fs--)}function ut(t,e){Fs++,oh[Fs]=t.current,t.current=e}var Ei=Ti(null),wo=Ti(null),br=Ti(null),Wl=Ti(null);function Yl(t,e){switch(ut(br,e),ut(wo,t),ut(Ei,null),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)&&(e=e.namespaceURI)?Hd(e):0;break;default:if(t=t===8?e.parentNode:e,e=t.tagName,t=t.namespaceURI)t=Hd(t),e=px(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}qt(Ei),ut(Ei,e)}function ua(){qt(Ei),qt(wo),qt(br)}function lh(t){t.memoizedState!==null&&ut(Wl,t);var e=Ei.current,n=px(e,t.type);e!==n&&(ut(wo,t),ut(Ei,n))}function Ql(t){wo.current===t&&(qt(Ei),qt(wo)),Wl.current===t&&(qt(Wl),Ro._currentValue=ts)}var ch=Object.prototype.hasOwnProperty,d0=Ut.unstable_scheduleCallback,pu=Ut.unstable_cancelCallback,zp=Ut.unstable_shouldYield,Fp=Ut.unstable_requestPaint,_i=Ut.unstable_now,Hp=Ut.unstable_getCurrentPriorityLevel,a2=Ut.unstable_ImmediatePriority,o2=Ut.unstable_UserBlockingPriority,Zl=Ut.unstable_NormalPriority,Vp=Ut.unstable_LowPriority,l2=Ut.unstable_IdlePriority,Gp=Ut.log,qp=Ut.unstable_setDisableYieldValue,Lo=null,Bn=null;function Xp(t){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Lo,t,void 0,(t.current.flags&128)===128)}catch(e){}}function wr(t){if(typeof Gp=="function"&&qp(t),Bn&&typeof Bn.setStrictMode=="function")try{Bn.setStrictMode(Lo,t)}catch(e){}}var kn=Math.clz32?Math.clz32:Qp,Wp=Math.log,Yp=Math.LN2;function Qp(t){return t>>>=0,t===0?32:31-(Wp(t)/Yp|0)|0}var dl=128,fl=4194304;function qr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,o=t.suspendedLanes,c=t.pingedLanes,d=t.warmLanes;t=t.finishedLanes!==0;var x=n&134217727;return x!==0?(n=x&~o,n!==0?s=qr(n):(c&=x,c!==0?s=qr(c):t||(d=x&~d,d!==0&&(s=qr(d))))):(x=n&~o,x!==0?s=qr(x):c!==0?s=qr(c):t||(d=n&~d,d!==0&&(s=qr(d)))),s===0?0:e!==0&&e!==s&&!(e&o)&&(o=s&-s,d=e&-e,o>=d||o===32&&(d&4194176)!==0)?e:s}function Uo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Zp(t,e){switch(t){case 1:case 2:case 4:case 8:return e+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c2(){var t=dl;return dl<<=1,!(dl&4194176)&&(dl=128),t}function u2(){var t=fl;return fl<<=1,!(fl&62914560)&&(fl=4194304),t}function wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Po(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Kp(t,e,n,s,o,c){var d=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var x=t.entanglements,w=t.expirationTimes,y=t.hiddenUpdates;for(n=d&~n;0<n;){var E=31-kn(n),C=1<<E;x[E]=0,w[E]=-1;var T=y[E];if(T!==null)for(y[E]=null,E=0;E<T.length;E++){var R=T[E];R!==null&&(R.lane&=-536870913)}n&=~C}s!==0&&h2(t,s,0),c!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=c&~(d&~e))}function h2(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-kn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&4194218}function d2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-kn(n),o=1<<s;o&e|t[s]&e&&(t[s]|=e),n&=~o}}function f2(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function g2(){var t=ot.p;return t!==0?t:(t=window.event,t===void 0?32:Tx(t.type))}function Jp(t,e){var n=ot.p;try{return ot.p=t,e()}finally{ot.p=n}}var Nr=Math.random().toString(36).slice(2),rn="__reactFiber$"+Nr,An="__reactProps$"+Nr,ba="__reactContainer$"+Nr,uh="__reactEvents$"+Nr,$p="__reactListeners$"+Nr,e3="__reactHandles$"+Nr,H1="__reactResources$"+Nr,yo="__reactMarker$"+Nr;function f0(t){delete t[rn],delete t[An],delete t[uh],delete t[$p],delete t[e3]}function Jr(t){var e=t[rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ba]||n[rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gd(t);t!==null;){if(n=t[rn])return n;t=Gd(t)}return e}t=n,n=t.parentNode}return null}function va(t){if(t=t[rn]||t[ba]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Ka(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(Y(33))}function $s(t){var e=t[H1];return e||(e=t[H1]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Vt(t){t[yo]=!0}var x2=new Set,m2={};function ds(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(m2[t]=e,t=0;t<e.length;t++)x2.add(e[t])}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),t3=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),V1={},G1={};function n3(t){return ch.call(G1,t)?!0:ch.call(V1,t)?!1:t3.test(t)?G1[t]=!0:(V1[t]=!0,!1)}function kl(t,e,n){if(n3(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function gl(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Ii(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Wn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function p2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i3(t){var e=p2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,c=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){s=""+d,c.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=i3(t))}function w2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=p2(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch(e){return t.body}}var r3=/[\n"\\]/g;function Zn(t){return t.replace(r3,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function hh(t,e,n,s,o,c,d,x){t.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?t.type=d:t.removeAttribute("type"),e!=null?d==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Wn(e)):t.value!==""+Wn(e)&&(t.value=""+Wn(e)):d!=="submit"&&d!=="reset"||t.removeAttribute("value"),e!=null?dh(t,d,Wn(e)):n!=null?dh(t,d,Wn(n)):s!=null&&t.removeAttribute("value"),o==null&&c!=null&&(t.defaultChecked=!!c),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.name=""+Wn(x):t.removeAttribute("name")}function y2(t,e,n,s,o,c,d,x){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(t.type=c),e!=null||n!=null){if(!(c!=="submit"&&c!=="reset"||e!=null))return;n=n!=null?""+Wn(n):"",e=e!=null?""+Wn(e):n,x||e===t.value||(t.value=e),t.defaultValue=e}s=s!=null?s:o,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=x?t.checked:!!s,t.defaultChecked=!!s,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.name=d)}function dh(t,e,n){e==="number"&&Jl(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ea(t,e,n,s){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Wn(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,s&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function b2(t,e,n){if(e!=null&&(e=""+Wn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Wn(n):""}function v2(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(Y(92));if(Za(s)){if(1<s.length)throw Error(Y(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Wn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s)}function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var s3=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function q1(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||s3.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function A2(t,e,n){if(e!=null&&typeof e!="object")throw Error(Y(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var o in e)s=e[o],e.hasOwnProperty(o)&&n[o]!==s&&q1(t,o,s)}else for(var c in e)e.hasOwnProperty(c)&&q1(t,c,e[c])}function g0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a3=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),o3=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(t){return o3.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var fh=null;function x0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hs=null,ta=null;function X1(t){var e=va(t);if(e&&(t=e.stateNode)){var n=t[An]||null;e:switch(t=e.stateNode,e.type){case"input":if(hh(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Zn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var o=s[An]||null;if(!o)throw Error(Y(90));hh(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&w2(s)}break e;case"textarea":b2(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}}}var yu=!1;function E2(t,e,n){if(yu)return t(e,n);yu=!0;try{var s=t(e);return s}finally{if(yu=!1,(Hs!==null||ta!==null)&&(Pc(),Hs&&(e=Hs,t=ta,ta=Hs=null,X1(e),t)))for(e=0;e<t.length;e++)X1(t[e])}}function bo(t,e){var n=t.stateNode;if(n===null)return null;var s=n[An]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var gh=!1;if(Wi)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){gh=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch(t){gh=!1}var yr=null,m0=null,Ll=null;function _2(){if(Ll)return Ll;var t,e=m0,n=e.length,s,o="value"in yr?yr.value:yr.textContent,c=o.length;for(t=0;t<n&&e[t]===o[t];t++);var d=n-t;for(s=1;s<=d&&e[n-s]===o[c-s];s++);return Ll=o.slice(t,1<s?1-s:void 0)}function Ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xl(){return!0}function W1(){return!1}function En(t){function e(n,s,o,c,d){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(n=t[x],this[x]=n?n(c):c[x]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?xl:W1,this.isPropagationStopped=W1,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),e}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=En(fs),zo=lt({},fs,{view:0,detail:0}),l3=En(zo),bu,vu,Ha,Dc=lt({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(bu=t.screenX-Ha.screenX,vu=t.screenY-Ha.screenY):vu=bu=0,Ha=t),bu)},movementY:function(t){return"movementY"in t?t.movementY:vu}}),Y1=En(Dc),c3=lt({},Dc,{dataTransfer:0}),u3=En(c3),h3=lt({},zo,{relatedTarget:0}),Au=En(h3),d3=lt({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),f3=En(d3),g3=lt({},fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),x3=En(g3),m3=lt({},fs,{data:0}),Q1=En(m3),p3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=y3[t])?!!e[t]:!1}function p0(){return b3}var v3=lt({},zo,{key:function(t){if(t.key){var e=p3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?w3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p0,charCode:function(t){return t.type==="keypress"?Ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A3=En(v3),E3=lt({},Dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z1=En(E3),_3=lt({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p0}),C3=En(_3),S3=lt({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),T3=En(S3),O3=lt({},Dc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R3=En(O3),I3=lt({},fs,{newState:0,oldState:0}),D3=En(I3),N3=[9,13,27,32],w0=Wi&&"CompositionEvent"in window,eo=null;Wi&&"documentMode"in document&&(eo=document.documentMode);var M3=Wi&&"TextEvent"in window&&!eo,C2=Wi&&(!w0||eo&&8<eo&&11>=eo),K1=" ",J1=!1;function S2(t,e){switch(t){case"keyup":return N3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function B3(t,e){switch(t){case"compositionend":return T2(e);case"keypress":return e.which!==32?null:(J1=!0,K1);case"textInput":return t=e.data,t===K1&&J1?null:t;default:return null}}function k3(t,e){if(Vs)return t==="compositionend"||!w0&&S2(t,e)?(t=_2(),Ll=m0=yr=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C2&&e.locale!=="ko"?null:e.data;default:return null}}var j3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!j3[t.type]:e==="textarea"}function O2(t,e,n,s){Hs?ta?ta.push(s):ta=[s]:Hs=s,e=gc(e,"onChange"),0<e.length&&(n=new Ic("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var to=null,vo=null;function L3(t){gx(t,0)}function Nc(t){var e=Ka(t);if(w2(e))return t}function ed(t,e){if(t==="change")return e}var R2=!1;if(Wi){var Eu;if(Wi){var _u="oninput"in document;if(!_u){var td=document.createElement("div");td.setAttribute("oninput","return;"),_u=typeof td.oninput=="function"}Eu=_u}else Eu=!1;R2=Eu&&(!document.documentMode||9<document.documentMode)}function nd(){to&&(to.detachEvent("onpropertychange",I2),vo=to=null)}function I2(t){if(t.propertyName==="value"&&Nc(vo)){var e=[];O2(e,vo,t,x0(t)),E2(L3,e)}}function U3(t,e,n){t==="focusin"?(nd(),to=e,vo=n,to.attachEvent("onpropertychange",I2)):t==="focusout"&&nd()}function P3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nc(vo)}function z3(t,e){if(t==="click")return Nc(e)}function F3(t,e){if(t==="input"||t==="change")return Nc(e)}function H3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:H3;function Ao(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!ch.call(e,o)||!Ln(t[o],e[o]))return!1}return!0}function id(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rd(t,e){var n=id(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=id(n)}}function D2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N2(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Jl(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(s){n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function V3(t,e){var n=N2(e);e=t.focusedElem;var s=t.selectionRange;if(n!==e&&e&&e.ownerDocument&&D2(e.ownerDocument.documentElement,e)){if(s!==null&&y0(e)){if(t=s.start,n=s.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var o=e.textContent.length,c=Math.min(s.start,o);s=s.end===void 0?c:Math.min(s.end,o),!n.extend&&c>s&&(o=s,s=c,c=o),o=rd(e,c);var d=rd(e,s);o&&d&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==d.node||n.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),n.removeAllRanges(),c>s?(n.addRange(t),n.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var G3=Wi&&"documentMode"in document&&11>=document.documentMode,Gs=null,xh=null,no=null,mh=!1;function sd(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mh||Gs==null||Gs!==Jl(s)||(s=Gs,"selectionStart"in s&&y0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),no&&Ao(no,s)||(no=s,s=gc(xh,"onSelect"),0<s.length&&(e=new Ic("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Gs)))}function Hr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:Hr("Animation","AnimationEnd"),animationiteration:Hr("Animation","AnimationIteration"),animationstart:Hr("Animation","AnimationStart"),transitionrun:Hr("Transition","TransitionRun"),transitionstart:Hr("Transition","TransitionStart"),transitioncancel:Hr("Transition","TransitionCancel"),transitionend:Hr("Transition","TransitionEnd")},Cu={},M2={};Wi&&(M2=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function gs(t){if(Cu[t])return Cu[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in M2)return Cu[t]=e[n];return t}var B2=gs("animationend"),k2=gs("animationiteration"),j2=gs("animationstart"),q3=gs("transitionrun"),X3=gs("transitionstart"),W3=gs("transitioncancel"),L2=gs("transitionend"),U2=new Map,ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function fi(t,e){U2.set(t,e),ds(e,[t])}var Xn=[],Xs=0,b0=0;function Mc(){for(var t=Xs,e=b0=Xs=0;e<t;){var n=Xn[e];Xn[e++]=null;var s=Xn[e];Xn[e++]=null;var o=Xn[e];Xn[e++]=null;var c=Xn[e];if(Xn[e++]=null,s!==null&&o!==null){var d=s.pending;d===null?o.next=o:(o.next=d.next,d.next=o),s.pending=o}c!==0&&P2(n,o,c)}}function Bc(t,e,n,s){Xn[Xs++]=t,Xn[Xs++]=e,Xn[Xs++]=n,Xn[Xs++]=s,b0|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function v0(t,e,n,s){return Bc(t,e,n,s),$l(t)}function Or(t,e){return Bc(t,null,null,e),$l(t)}function P2(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var o=!1,c=t.return;c!==null;)c.childLanes|=n,s=c.alternate,s!==null&&(s.childLanes|=n),c.tag===22&&(t=c.stateNode,t===null||t._visibility&1||(o=!0)),t=c,c=c.return;o&&e!==null&&t.tag===3&&(c=t.stateNode,o=31-kn(n),c=c.hiddenUpdates,t=c[o],t===null?c[o]=[e]:t.push(e),e.lane=n|536870912)}function $l(t){if(50<xo)throw xo=0,Uh=null,Error(Y(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ws={},od=new WeakMap;function Kn(t,e){if(typeof t=="object"&&t!==null){var n=od.get(t);return n!==void 0?n:(e={value:t,source:e,stack:z1(e)},od.set(t,e),e)}return{value:t,source:e,stack:z1(e)}}var Ys=[],Qs=0,ec=null,tc=0,Yn=[],Qn=0,ns=null,Fi=1,Hi="";function Xr(t,e){Ys[Qs++]=tc,Ys[Qs++]=ec,ec=t,tc=e}function z2(t,e,n){Yn[Qn++]=Fi,Yn[Qn++]=Hi,Yn[Qn++]=ns,ns=t;var s=Fi;t=Hi;var o=32-kn(s)-1;s&=~(1<<o),n+=1;var c=32-kn(e)+o;if(30<c){var d=o-o%5;c=(s&(1<<d)-1).toString(32),s>>=d,o-=d,Fi=1<<32-kn(e)+o|n<<o|s,Hi=c+t}else Fi=1<<c|n<<o|s,Hi=t}function A0(t){t.return!==null&&(Xr(t,1),z2(t,1,0))}function E0(t){for(;t===ec;)ec=Ys[--Qs],Ys[Qs]=null,tc=Ys[--Qs],Ys[Qs]=null;for(;t===ns;)ns=Yn[--Qn],Yn[Qn]=null,Hi=Yn[--Qn],Yn[Qn]=null,Fi=Yn[--Qn],Yn[Qn]=null}var dn=null,Jt=null,ke=!1,ui=null,vi=!1,ph=Error(Y(519));function os(t){var e=Error(Y(418,""));throw Eo(Kn(e,t)),ph}function ld(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[rn]=t,e[An]=s,n){case"dialog":Ie("cancel",e),Ie("close",e);break;case"iframe":case"object":case"embed":Ie("load",e);break;case"video":case"audio":for(n=0;n<So.length;n++)Ie(So[n],e);break;case"source":Ie("error",e);break;case"img":case"image":case"link":Ie("error",e),Ie("load",e);break;case"details":Ie("toggle",e);break;case"input":Ie("invalid",e),y2(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Kl(e);break;case"select":Ie("invalid",e);break;case"textarea":Ie("invalid",e),v2(e,s.value,s.defaultValue,s.children),Kl(e)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||mx(e.textContent,n)?(s.popover!=null&&(Ie("beforetoggle",e),Ie("toggle",e)),s.onScroll!=null&&Ie("scroll",e),s.onScrollEnd!=null&&Ie("scrollend",e),s.onClick!=null&&(e.onclick=Fc),e=!0):e=!1,e||os(t)}function cd(t){for(dn=t.return;dn;)switch(dn.tag){case 3:case 27:vi=!0;return;case 5:case 13:vi=!1;return;default:dn=dn.return}}function Va(t){if(t!==dn)return!1;if(!ke)return cd(t),ke=!0,!1;var e=!1,n;if((n=t.tag!==3&&t.tag!==27)&&((n=t.tag===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||qh(t.type,t.memoizedProps)),n=!n),n&&(e=!0),e&&Jt&&os(t),cd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Jt=hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Jt=null}}else Jt=dn?hi(t.stateNode.nextSibling):null;return!0}function Fo(){Jt=dn=null,ke=!1}function Eo(t){ui===null?ui=[t]:ui.push(t)}var io=Error(Y(460)),F2=Error(Y(474)),wh={then:function(){}};function ud(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ml(){}function H2(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ml,ml),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===io?Error(Y(483)):t;default:if(typeof e.status=="string")e.then(ml,ml);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(Y(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=s}},function(s){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===io?Error(Y(483)):t}throw ro=e,io}}var ro=null;function hd(){if(ro===null)throw Error(Y(459));var t=ro;return ro=null,t}var na=null,_o=0;function pl(t){var e=_o;return _o+=1,na===null&&(na=[]),H2(na,t,e)}function Ga(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function wl(t,e){throw e.$$typeof===Bp?Error(Y(525)):(t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function dd(t){var e=t._init;return e(t._payload)}function V2(t){function e(D,_){if(t){var O=D.deletions;O===null?(D.deletions=[_],D.flags|=16):O.push(_)}}function n(D,_){if(!t)return null;for(;_!==null;)e(D,_),_=_.sibling;return null}function s(D){for(var _=new Map;D!==null;)D.key!==null?_.set(D.key,D):_.set(D.index,D),D=D.sibling;return _}function o(D,_){return D=Er(D,_),D.index=0,D.sibling=null,D}function c(D,_,O){return D.index=O,t?(O=D.alternate,O!==null?(O=O.index,O<_?(D.flags|=33554434,_):O):(D.flags|=33554434,_)):(D.flags|=1048576,_)}function d(D){return t&&D.alternate===null&&(D.flags|=33554434),D}function x(D,_,O,M){return _===null||_.tag!==6?(_=Lu(O,D.mode,M),_.return=D,_):(_=o(_,O),_.return=D,_)}function w(D,_,O,M){var W=O.type;return W===zs?E(D,_,O.props.children,M,O.key):_!==null&&(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ur&&dd(W)===_.type)?(_=o(_,O.props),Ga(_,O),_.return=D,_):(_=Vl(O.type,O.key,O.props,null,D.mode,M),Ga(_,O),_.return=D,_)}function y(D,_,O,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==O.containerInfo||_.stateNode.implementation!==O.implementation?(_=Uu(O,D.mode,M),_.return=D,_):(_=o(_,O.children||[]),_.return=D,_)}function E(D,_,O,M,W){return _===null||_.tag!==7?(_=rs(O,D.mode,M,W),_.return=D,_):(_=o(_,O),_.return=D,_)}function C(D,_,O){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Lu(""+_,D.mode,O),_.return=D,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hl:return O=Vl(_.type,_.key,_.props,null,D.mode,O),Ga(O,_),O.return=D,O;case Ya:return _=Uu(_,D.mode,O),_.return=D,_;case ur:var M=_._init;return _=M(_._payload),C(D,_,O)}if(Za(_)||za(_))return _=rs(_,D.mode,O,null),_.return=D,_;if(typeof _.then=="function")return C(D,pl(_),O);if(_.$$typeof===zi)return C(D,yl(D,_),O);wl(D,_)}return null}function T(D,_,O,M){var W=_!==null?_.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return W!==null?null:x(D,_,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case hl:return O.key===W?w(D,_,O,M):null;case Ya:return O.key===W?y(D,_,O,M):null;case ur:return W=O._init,O=W(O._payload),T(D,_,O,M)}if(Za(O)||za(O))return W!==null?null:E(D,_,O,M,null);if(typeof O.then=="function")return T(D,_,pl(O),M);if(O.$$typeof===zi)return T(D,_,yl(D,O),M);wl(D,O)}return null}function R(D,_,O,M,W){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return D=D.get(O)||null,x(_,D,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case hl:return D=D.get(M.key===null?O:M.key)||null,w(_,D,M,W);case Ya:return D=D.get(M.key===null?O:M.key)||null,y(_,D,M,W);case ur:var H=M._init;return M=H(M._payload),R(D,_,O,M,W)}if(Za(M)||za(M))return D=D.get(O)||null,E(_,D,M,W,null);if(typeof M.then=="function")return R(D,_,O,pl(M),W);if(M.$$typeof===zi)return R(D,_,O,yl(_,M),W);wl(_,M)}return null}function k(D,_,O,M){for(var W=null,H=null,U=_,Z=_=0,V=null;U!==null&&Z<O.length;Z++){U.index>Z?(V=U,U=null):V=U.sibling;var we=T(D,U,O[Z],M);if(we===null){U===null&&(U=V);break}t&&U&&we.alternate===null&&e(D,U),_=c(we,_,Z),H===null?W=we:H.sibling=we,H=we,U=V}if(Z===O.length)return n(D,U),ke&&Xr(D,Z),W;if(U===null){for(;Z<O.length;Z++)U=C(D,O[Z],M),U!==null&&(_=c(U,_,Z),H===null?W=U:H.sibling=U,H=U);return ke&&Xr(D,Z),W}for(U=s(U);Z<O.length;Z++)V=R(U,D,Z,O[Z],M),V!==null&&(t&&V.alternate!==null&&U.delete(V.key===null?Z:V.key),_=c(V,_,Z),H===null?W=V:H.sibling=V,H=V);return t&&U.forEach(function(je){return e(D,je)}),ke&&Xr(D,Z),W}function L(D,_,O,M){if(O==null)throw Error(Y(151));for(var W=null,H=null,U=_,Z=_=0,V=null,we=O.next();U!==null&&!we.done;Z++,we=O.next()){U.index>Z?(V=U,U=null):V=U.sibling;var je=T(D,U,we.value,M);if(je===null){U===null&&(U=V);break}t&&U&&je.alternate===null&&e(D,U),_=c(je,_,Z),H===null?W=je:H.sibling=je,H=je,U=V}if(we.done)return n(D,U),ke&&Xr(D,Z),W;if(U===null){for(;!we.done;Z++,we=O.next())we=C(D,we.value,M),we!==null&&(_=c(we,_,Z),H===null?W=we:H.sibling=we,H=we);return ke&&Xr(D,Z),W}for(U=s(U);!we.done;Z++,we=O.next())we=R(U,D,Z,we.value,M),we!==null&&(t&&we.alternate!==null&&U.delete(we.key===null?Z:we.key),_=c(we,_,Z),H===null?W=we:H.sibling=we,H=we);return t&&U.forEach(function(he){return e(D,he)}),ke&&Xr(D,Z),W}function P(D,_,O,M){if(typeof O=="object"&&O!==null&&O.type===zs&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case hl:e:{for(var W=O.key;_!==null;){if(_.key===W){if(W=O.type,W===zs){if(_.tag===7){n(D,_.sibling),M=o(_,O.props.children),M.return=D,D=M;break e}}else if(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ur&&dd(W)===_.type){n(D,_.sibling),M=o(_,O.props),Ga(M,O),M.return=D,D=M;break e}n(D,_);break}else e(D,_);_=_.sibling}O.type===zs?(M=rs(O.props.children,D.mode,M,O.key),M.return=D,D=M):(M=Vl(O.type,O.key,O.props,null,D.mode,M),Ga(M,O),M.return=D,D=M)}return d(D);case Ya:e:{for(W=O.key;_!==null;){if(_.key===W)if(_.tag===4&&_.stateNode.containerInfo===O.containerInfo&&_.stateNode.implementation===O.implementation){n(D,_.sibling),M=o(_,O.children||[]),M.return=D,D=M;break e}else{n(D,_);break}else e(D,_);_=_.sibling}M=Uu(O,D.mode,M),M.return=D,D=M}return d(D);case ur:return W=O._init,O=W(O._payload),P(D,_,O,M)}if(Za(O))return k(D,_,O,M);if(za(O)){if(W=za(O),typeof W!="function")throw Error(Y(150));return O=W.call(O),L(D,_,O,M)}if(typeof O.then=="function")return P(D,_,pl(O),M);if(O.$$typeof===zi)return P(D,_,yl(D,O),M);wl(D,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,_!==null&&_.tag===6?(n(D,_.sibling),M=o(_,O),M.return=D,D=M):(n(D,_),M=Lu(O,D.mode,M),M.return=D,D=M),d(D)):n(D,_)}return function(D,_,O,M){try{_o=0;var W=P(D,_,O,M);return na=null,W}catch(U){if(U===io)throw U;var H=Jn(29,U,null,D.mode);return H.lanes=M,H.return=D,H}finally{}}}var ls=V2(!0),G2=V2(!1),fa=Ti(null),nc=Ti(0);function fd(t,e){t=Zi,ut(nc,t),ut(fa,e),Zi=t|e.baseLanes}function yh(){ut(nc,Zi),ut(fa,fa.current)}function _0(){Zi=nc.current,qt(fa),qt(nc)}var ei=Ti(null),Ci=null;function dr(t){var e=t.alternate;ut(Lt,Lt.current&1),ut(ei,t),Ci===null&&(e===null||fa.current!==null||e.memoizedState!==null)&&(Ci=t)}function q2(t){if(t.tag===22){if(ut(Lt,Lt.current),ut(ei,t),Ci===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Ci=t)}}else fr()}function fr(){ut(Lt,Lt.current),ut(ei,ei.current)}function Vi(t){qt(ei),Ci===t&&(Ci=null),qt(Lt)}var Lt=Ti(0);function ic(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Y3=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Q3=Ut.unstable_scheduleCallback,Z3=Ut.unstable_NormalPriority,jt={$$typeof:zi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function C0(){return{controller:new Y3,data:new Map,refCount:0}}function Ho(t){t.refCount--,t.refCount===0&&Q3(Z3,function(){t.controller.abort()})}var so=null,bh=0,ga=0,ia=null;function K3(t,e){if(so===null){var n=so=[];bh=0,ga=Y0(),ia={status:"pending",value:void 0,then:function(s){n.push(s)}}}return bh++,e.then(gd,gd),e}function gd(){if(--bh===0&&so!==null){ia!==null&&(ia.status="fulfilled");var t=so;so=null,ga=0,ia=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function J3(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(s.status="rejected",s.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),s}var xd=Ae.S;Ae.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&K3(t,e),xd!==null&&xd(t,e)};var is=Ti(null);function S0(){var t=is.current;return t!==null?t:rt.pooledCache}function Pl(t,e){e===null?ut(is,is.current):ut(is,e.pool)}function X2(){var t=S0();return t===null?null:{parent:jt._currentValue,pool:t}}var Rr=0,Ce=null,Xe=null,It=null,rc=!1,ra=!1,cs=!1,sc=0,Co=0,sa=null,$3=0;function _t(){throw Error(Y(321))}function T0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function O0(t,e,n,s,o,c){return Rr=c,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ae.H=t===null||t.memoizedState===null?xs:Mr,cs=!1,c=n(s,o),cs=!1,ra&&(c=Y2(e,n,s,o)),W2(t),c}function W2(t){Ae.H=Si;var e=Xe!==null&&Xe.next!==null;if(Rr=0,It=Xe=Ce=null,rc=!1,Co=0,sa=null,e)throw Error(Y(300));t===null||Gt||(t=t.dependencies,t!==null&&lc(t)&&(Gt=!0))}function Y2(t,e,n,s){Ce=t;var o=0;do{if(ra&&(sa=null),Co=0,ra=!1,25<=o)throw Error(Y(301));if(o+=1,It=Xe=null,t.updateQueue!=null){var c=t.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}Ae.H=ms,c=e(n,s)}while(ra);return c}function e4(){var t=Ae.H,e=t.useState()[0];return e=typeof e.then=="function"?Vo(e):e,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ce.flags|=1024),e}function R0(){var t=sc!==0;return sc=0,t}function I0(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function D0(t){if(rc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}rc=!1}Rr=0,It=Xe=Ce=null,ra=!1,Co=sc=0,sa=null}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ce.memoizedState=It=t:It=It.next=t,It}function Dt(){if(Xe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=It===null?Ce.memoizedState:It.next;if(e!==null)It=e,Xe=t;else{if(t===null)throw Ce.alternate===null?Error(Y(467)):Error(Y(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},It===null?Ce.memoizedState=It=t:It=It.next=t}return It}var kc;kc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Vo(t){var e=Co;return Co+=1,sa===null&&(sa=[]),t=H2(sa,t,e),e=Ce,(It===null?e.memoizedState:It.next)===null&&(e=e.alternate,Ae.H=e===null||e.memoizedState===null?xs:Mr),t}function jc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vo(t);if(t.$$typeof===zi)return sn(t)}throw Error(Y(438,String(t)))}function N0(t){var e=null,n=Ce.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=Ce.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=kc(),Ce.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=jp;return e.index++,n}function Yi(t,e){return typeof e=="function"?e(t):e}function zl(t){var e=Dt();return M0(e,Xe,t)}function M0(t,e,n){var s=t.queue;if(s===null)throw Error(Y(311));s.lastRenderedReducer=n;var o=t.baseQueue,c=s.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}e.baseQueue=o=c,s.pending=null}if(c=t.baseState,o===null)t.memoizedState=c;else{e=o.next;var x=d=null,w=null,y=e,E=!1;do{var C=y.lane&-536870913;if(C!==y.lane?(Ne&C)===C:(Rr&C)===C){var T=y.revertLane;if(T===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),C===ga&&(E=!0);else if((Rr&T)===T){y=y.next,T===ga&&(E=!0);continue}else C={lane:0,revertLane:y.revertLane,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},w===null?(x=w=C,d=c):w=w.next=C,Ce.lanes|=T,Dr|=T;C=y.action,cs&&n(c,C),c=y.hasEagerState?y.eagerState:n(c,C)}else T={lane:C,revertLane:y.revertLane,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null},w===null?(x=w=T,d=c):w=w.next=T,Ce.lanes|=C,Dr|=C;y=y.next}while(y!==null&&y!==e);if(w===null?d=c:w.next=x,!Ln(c,t.memoizedState)&&(Gt=!0,E&&(n=ia,n!==null)))throw n;t.memoizedState=c,t.baseState=d,t.baseQueue=w,s.lastRenderedState=c}return o===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Su(t){var e=Dt(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var s=n.dispatch,o=n.pending,c=e.memoizedState;if(o!==null){n.pending=null;var d=o=o.next;do c=t(c,d.action),d=d.next;while(d!==o);Ln(c,e.memoizedState)||(Gt=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),n.lastRenderedState=c}return[c,s]}function Q2(t,e,n){var s=Ce,o=Dt(),c=ke;if(c){if(n===void 0)throw Error(Y(407));n=n()}else n=e();var d=!Ln((Xe||o).memoizedState,n);if(d&&(o.memoizedState=n,Gt=!0),o=o.queue,B0(J2.bind(null,s,o,t),[t]),o.getSnapshot!==e||d||It!==null&&It.memoizedState.tag&1){if(s.flags|=2048,xa(9,K2.bind(null,s,o,n,e),{destroy:void 0},null),rt===null)throw Error(Y(349));c||Rr&60||Z2(s,e,n)}return n}function Z2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e=kc(),Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function K2(t,e,n,s){e.value=n,e.getSnapshot=s,$2(e)&&eg(t)}function J2(t,e,n){return n(function(){$2(e)&&eg(t)})}function $2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch(s){return!0}}function eg(t){var e=Or(t,2);e!==null&&fn(e,t,2)}function vh(t){var e=bn();if(typeof t=="function"){var n=t;if(t=n(),cs){wr(!0);try{n()}finally{wr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},e}function tg(t,e,n,s){return t.baseState=n,M0(t,Xe,typeof s=="function"?s:Yi)}function t4(t,e,n,s,o){if(Uc(t))throw Error(Y(485));if(t=e.action,t!==null){var c={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){c.listeners.push(d)}};Ae.T!==null?n(!0):c.isTransition=!1,s(c),n=e.pending,n===null?(c.next=e.pending=c,ng(e,c)):(c.next=n.next,e.pending=n.next=c)}}function ng(t,e){var n=e.action,s=e.payload,o=t.state;if(e.isTransition){var c=Ae.T,d={};Ae.T=d;try{var x=n(o,s),w=Ae.S;w!==null&&w(d,x),md(t,e,x)}catch(y){Ah(t,e,y)}finally{Ae.T=c}}else try{c=n(o,s),md(t,e,c)}catch(y){Ah(t,e,y)}}function md(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){pd(t,e,s)},function(s){return Ah(t,e,s)}):pd(t,e,n)}function pd(t,e,n){e.status="fulfilled",e.value=n,ig(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,ng(t,n)))}function Ah(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,ig(e),e=e.next;while(e!==s)}t.action=null}function ig(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function rg(t,e){return e}function sg(t,e){if(ke){var n=rt.formState;if(n!==null){e:{var s=Ce;if(ke){if(Jt){t:{for(var o=Jt,c=vi;o.nodeType!==8;){if(!c){o=null;break t}if(o=hi(o.nextSibling),o===null){o=null;break t}}c=o.data,o=c==="F!"||c==="F"?o:null}if(o){Jt=hi(o.nextSibling),s=o.data==="F!";break e}}os(s)}s=!1}s&&(e=n[0])}}return n=bn(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rg,lastRenderedState:e},n.queue=s,n=Ag.bind(null,Ce,s),s.dispatch=n,s=vh(!1),c=U0.bind(null,Ce,!1,s.queue),s=bn(),o={state:e,dispatch:null,action:t,pending:null},s.queue=o,n=t4.bind(null,Ce,o,c,n),o.dispatch=n,s.memoizedState=t,[e,n,!1]}function ag(t){var e=Dt();return og(e,Xe,t)}function og(t,e,n){e=M0(t,e,rg)[0],t=zl(Yi)[0],e=typeof e=="object"&&e!==null&&typeof e.then=="function"?Vo(e):e;var s=Dt(),o=s.queue,c=o.dispatch;return n!==s.memoizedState&&(Ce.flags|=2048,xa(9,n4.bind(null,o,n),{destroy:void 0},null)),[e,c,t]}function n4(t,e){t.action=e}function lg(t){var e=Dt(),n=Xe;if(n!==null)return og(e,n,t);Dt(),e=e.memoizedState,n=Dt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function xa(t,e,n,s){return t={tag:t,create:e,inst:n,deps:s,next:null},e=Ce.updateQueue,e===null&&(e=kc(),Ce.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function cg(){return Dt().memoizedState}function Fl(t,e,n,s){var o=bn();Ce.flags|=t,o.memoizedState=xa(1|e,n,{destroy:void 0},s===void 0?null:s)}function Lc(t,e,n,s){var o=Dt();s=s===void 0?null:s;var c=o.memoizedState.inst;Xe!==null&&s!==null&&T0(s,Xe.memoizedState.deps)?o.memoizedState=xa(e,n,c,s):(Ce.flags|=t,o.memoizedState=xa(1|e,n,c,s))}function wd(t,e){Fl(8390656,8,t,e)}function B0(t,e){Lc(2048,8,t,e)}function ug(t,e){return Lc(4,2,t,e)}function hg(t,e){return Lc(4,4,t,e)}function dg(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fg(t,e,n){n=n!=null?n.concat([t]):null,Lc(4,4,dg.bind(null,e,t),n)}function k0(){}function gg(t,e){var n=Dt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&T0(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function xg(t,e){var n=Dt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&T0(e,s[1]))return s[0];if(s=t(),cs){wr(!0);try{t()}finally{wr(!1)}}return n.memoizedState=[s,e],s}function j0(t,e,n){return n===void 0||Rr&1073741824?t.memoizedState=e:(t.memoizedState=n,t=ix(),Ce.lanes|=t,Dr|=t,n)}function mg(t,e,n,s){return Ln(n,e)?n:fa.current!==null?(t=j0(t,n,s),Ln(t,e)||(Gt=!0),t):Rr&42?(t=ix(),Ce.lanes|=t,Dr|=t,e):(Gt=!0,t.memoizedState=n)}function pg(t,e,n,s,o){var c=ot.p;ot.p=c!==0&&8>c?c:8;var d=Ae.T,x={};Ae.T=x,U0(t,!1,e,n);try{var w=o(),y=Ae.S;if(y!==null&&y(x,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=J3(w,s);ao(t,e,E,jn(t))}else ao(t,e,s,jn(t))}catch(C){ao(t,e,{then:function(){},status:"rejected",reason:C},jn())}finally{ot.p=c,Ae.T=d}}function i4(){}function Eh(t,e,n,s){if(t.tag!==5)throw Error(Y(476));var o=wg(t).queue;pg(t,o,e,ts,n===null?i4:function(){return yg(t),n(s)})}function wg(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ts,baseState:ts,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:ts},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function yg(t){var e=wg(t).next.queue;ao(t,e,{},jn())}function L0(){return sn(Ro)}function bg(){return Dt().memoizedState}function vg(){return Dt().memoizedState}function r4(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=jn();t=vr(n);var s=Ar(e,t,n);s!==null&&(fn(s,e,n),lo(s,e,n)),e={cache:C0()},t.payload=e;return}e=e.return}}function s4(t,e,n){var s=jn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Uc(t)?Eg(e,n):(n=v0(t,e,n,s),n!==null&&(fn(n,t,s),_g(n,e,s)))}function Ag(t,e,n){var s=jn();ao(t,e,n,s)}function ao(t,e,n,s){var o={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uc(t))Eg(e,o);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,x=c(d,n);if(o.hasEagerState=!0,o.eagerState=x,Ln(x,d))return Bc(t,e,o,0),rt===null&&Mc(),!1}catch(w){}finally{}if(n=v0(t,e,o,s),n!==null)return fn(n,t,s),_g(n,e,s),!0}return!1}function U0(t,e,n,s){if(s={lane:2,revertLane:Y0(),action:s,hasEagerState:!1,eagerState:null,next:null},Uc(t)){if(e)throw Error(Y(479))}else e=v0(t,n,s,2),e!==null&&fn(e,t,2)}function Uc(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function Eg(t,e){ra=rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _g(t,e,n){if(n&4194176){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,d2(t,n)}}var Si={readContext:sn,use:jc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t};Si.useCacheRefresh=_t;Si.useMemoCache=_t;Si.useHostTransitionStatus=_t;Si.useFormState=_t;Si.useActionState=_t;Si.useOptimistic=_t;var xs={readContext:sn,use:jc,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:wd,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Fl(4194308,4,dg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fl(4194308,4,t,e)},useInsertionEffect:function(t,e){Fl(4,2,t,e)},useMemo:function(t,e){var n=bn();e=e===void 0?null:e;var s=t();if(cs){wr(!0);try{t()}finally{wr(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=bn();if(n!==void 0){var o=n(e);if(cs){wr(!0);try{n(e)}finally{wr(!1)}}}else o=e;return s.memoizedState=s.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},s.queue=t,t=t.dispatch=s4.bind(null,Ce,t),[s.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:function(t){t=vh(t);var e=t.queue,n=Ag.bind(null,Ce,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:k0,useDeferredValue:function(t,e){var n=bn();return j0(n,t,e)},useTransition:function(){var t=vh(!1);return t=pg.bind(null,Ce,t.queue,!0,!1),bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=Ce,o=bn();if(ke){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),rt===null)throw Error(Y(349));Ne&60||Z2(s,e,n)}o.memoizedState=n;var c={value:n,getSnapshot:e};return o.queue=c,wd(J2.bind(null,s,c,t),[t]),s.flags|=2048,xa(9,K2.bind(null,s,c,n,e),{destroy:void 0},null),n},useId:function(){var t=bn(),e=rt.identifierPrefix;if(ke){var n=Hi,s=Fi;n=(s&~(1<<32-kn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},useCacheRefresh:function(){return bn().memoizedState=r4.bind(null,Ce)}};xs.useMemoCache=N0;xs.useHostTransitionStatus=L0;xs.useFormState=sg;xs.useActionState=sg;xs.useOptimistic=function(t){var e=bn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=U0.bind(null,Ce,!0,n),n.dispatch=e,[t,e]};var Mr={readContext:sn,use:jc,useCallback:gg,useContext:sn,useEffect:B0,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:hg,useMemo:xg,useReducer:zl,useRef:cg,useState:function(){return zl(Yi)},useDebugValue:k0,useDeferredValue:function(t,e){var n=Dt();return mg(n,Xe.memoizedState,t,e)},useTransition:function(){var t=zl(Yi)[0],e=Dt().memoizedState;return[typeof t=="boolean"?t:Vo(t),e]},useSyncExternalStore:Q2,useId:bg};Mr.useCacheRefresh=vg;Mr.useMemoCache=N0;Mr.useHostTransitionStatus=L0;Mr.useFormState=ag;Mr.useActionState=ag;Mr.useOptimistic=function(t,e){var n=Dt();return tg(n,Xe,t,e)};var ms={readContext:sn,use:jc,useCallback:gg,useContext:sn,useEffect:B0,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:hg,useMemo:xg,useReducer:Su,useRef:cg,useState:function(){return Su(Yi)},useDebugValue:k0,useDeferredValue:function(t,e){var n=Dt();return Xe===null?j0(n,t,e):mg(n,Xe.memoizedState,t,e)},useTransition:function(){var t=Su(Yi)[0],e=Dt().memoizedState;return[typeof t=="boolean"?t:Vo(t),e]},useSyncExternalStore:Q2,useId:bg};ms.useCacheRefresh=vg;ms.useMemoCache=N0;ms.useHostTransitionStatus=L0;ms.useFormState=lg;ms.useActionState=lg;ms.useOptimistic=function(t,e){var n=Dt();return Xe!==null?tg(n,Xe,t,e):(n.baseState=t,[t,n.queue.dispatch])};function Tu(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _h={isMounted:function(t){return(t=t._reactInternals)?ya(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=jn(),o=vr(s);o.payload=e,n!=null&&(o.callback=n),e=Ar(t,o,s),e!==null&&(fn(e,t,s),lo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=jn(),o=vr(s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ar(t,o,s),e!==null&&(fn(e,t,s),lo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),s=vr(n);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,n),e!==null&&(fn(e,t,n),lo(e,t,n))}};function yd(t,e,n,s,o,c,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ao(n,s)||!Ao(o,c):!0}function bd(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&_h.enqueueReplaceState(e,e.state,null)}function us(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=lt({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}var ac=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Cg(t){ac(t)}function Sg(t){console.error(t)}function Tg(t){ac(t)}function oc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function vd(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Ch(t,e,n){return n=vr(n),n.tag=3,n.payload={element:null},n.callback=function(){oc(t,e)},n}function Og(t){return t=vr(t),t.tag=3,t}function Rg(t,e,n,s){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var c=s.value;t.payload=function(){return o(c)},t.callback=function(){vd(e,n,s)}}var d=n.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(t.callback=function(){vd(e,n,s),typeof o!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})})}function a4(t,e,n,s,o){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Go(e,n,o,!0),n=ei.current,n!==null){switch(n.tag){case 13:return Ci===null?zh():n.alternate===null&&vt===0&&(vt=3),n.flags&=-257,n.flags|=65536,n.lanes=o,s===wh?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),zu(t,s,o)),!1;case 22:return n.flags|=65536,s===wh?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),zu(t,s,o)),!1}throw Error(Y(435,n.tag))}return zu(t,s,o),zh(),!1}if(ke)return e=ei.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=o,s!==ph&&(t=Error(Y(422),{cause:s}),Eo(Kn(t,n)))):(s!==ph&&(e=Error(Y(423),{cause:s}),Eo(Kn(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,s=Kn(s,n),o=Ch(t.stateNode,s,o),Mu(t,o),vt!==4&&(vt=2)),!1;var c=Error(Y(520),{cause:s});if(c=Kn(c,n),fo===null?fo=[c]:fo.push(c),vt!==4&&(vt=2),e===null)return!0;s=Kn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=Ch(n.stateNode,s,t),Mu(n,t),!1;case 1:if(e=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(_r===null||!_r.has(c))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Og(o),Rg(o,t,n,s),Mu(n,o),!1}n=n.return}while(n!==null);return!1}var Ig=Error(Y(461)),Gt=!1;function Kt(t,e,n,s){e.child=t===null?G2(e,null,n,s):ls(e,t.child,n,s)}function Ad(t,e,n,s,o){n=n.render;var c=e.ref;if("ref"in s){var d={};for(var x in s)x!=="ref"&&(d[x]=s[x])}else d=s;return hs(e),s=O0(t,e,n,d,c,o),x=R0(),t!==null&&!Gt?(I0(t,e,o),Qi(t,e,o)):(ke&&x&&A0(e),e.flags|=1,Kt(t,e,s,o),e.child)}function Ed(t,e,n,s,o){if(t===null){var c=n.type;return typeof c=="function"&&!V0(c)&&c.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=c,Dg(t,e,c,s,o)):(t=Vl(n.type,null,s,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(c=t.child,!P0(t,o)){var d=c.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(d,s)&&t.ref===e.ref)return Qi(t,e,o)}return e.flags|=1,t=Er(c,s),t.ref=e.ref,t.return=e,e.child=t}function Dg(t,e,n,s,o){if(t!==null){var c=t.memoizedProps;if(Ao(c,s)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=s=c,P0(t,o))t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,Qi(t,e,o)}return Sh(t,e,n,s,o)}function Ng(t,e,n){var s=e.pendingProps,o=s.children,c=(e.stateNode._pendingVisibility&2)!==0,d=t!==null?t.memoizedState:null;if(oo(t,e),s.mode==="hidden"||c){if(e.flags&128){if(s=d!==null?d.baseLanes|n:n,t!==null){for(o=e.child=t.child,c=0;o!==null;)c=c|o.lanes|o.childLanes,o=o.sibling;e.childLanes=c&~s}else e.childLanes=0,e.child=null;return _d(t,e,s,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Pl(e,d!==null?d.cachePool:null),d!==null?fd(e,d):yh(),q2(e);else return e.lanes=e.childLanes=536870912,_d(t,e,d!==null?d.baseLanes|n:n,n)}else d!==null?(Pl(e,d.cachePool),fd(e,d),fr(),e.memoizedState=null):(t!==null&&Pl(e,null),yh(),fr());return Kt(t,e,o,n),e.child}function _d(t,e,n,s){var o=S0();return o=o===null?null:{parent:jt._currentValue,pool:o},e.memoizedState={baseLanes:n,cachePool:o},t!==null&&Pl(e,null),yh(),q2(e),t!==null&&Go(t,e,s,!0),null}function oo(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(Y(284));(t===null||t.ref!==n)&&(e.flags|=2097664)}}function Sh(t,e,n,s,o){return hs(e),n=O0(t,e,n,s,void 0,o),s=R0(),t!==null&&!Gt?(I0(t,e,o),Qi(t,e,o)):(ke&&s&&A0(e),e.flags|=1,Kt(t,e,n,o),e.child)}function Cd(t,e,n,s,o,c){return hs(e),e.updateQueue=null,n=Y2(e,s,n,o),W2(t),s=R0(),t!==null&&!Gt?(I0(t,e,c),Qi(t,e,c)):(ke&&s&&A0(e),e.flags|=1,Kt(t,e,n,c),e.child)}function Sd(t,e,n,s,o){if(hs(e),e.stateNode===null){var c=Ws,d=n.contextType;typeof d=="object"&&d!==null&&(c=sn(d)),c=new n(s,c),e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=_h,e.stateNode=c,c._reactInternals=e,c=e.stateNode,c.props=s,c.state=e.memoizedState,c.refs={},z0(e),d=n.contextType,c.context=typeof d=="object"&&d!==null?sn(d):Ws,c.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(Tu(e,n,d,s),c.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(d=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),d!==c.state&&_h.enqueueReplaceState(c,c.state,null),uo(e,s,c,o),co(),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){c=e.stateNode;var x=e.memoizedProps,w=us(n,x);c.props=w;var y=c.context,E=n.contextType;d=Ws,typeof E=="object"&&E!==null&&(d=sn(E));var C=n.getDerivedStateFromProps;E=typeof C=="function"||typeof c.getSnapshotBeforeUpdate=="function",x=e.pendingProps!==x,E||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(x||y!==d)&&bd(e,c,s,d),hr=!1;var T=e.memoizedState;c.state=T,uo(e,s,c,o),co(),y=e.memoizedState,x||T!==y||hr?(typeof C=="function"&&(Tu(e,n,C,s),y=e.memoizedState),(w=hr||yd(e,n,w,s,T,y,d))?(E||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=y),c.props=s,c.state=y,c.context=d,s=w):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{c=e.stateNode,Nh(t,e),d=e.memoizedProps,E=us(n,d),c.props=E,C=e.pendingProps,T=c.context,y=n.contextType,w=Ws,typeof y=="object"&&y!==null&&(w=sn(y)),x=n.getDerivedStateFromProps,(y=typeof x=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==C||T!==w)&&bd(e,c,s,w),hr=!1,T=e.memoizedState,c.state=T,uo(e,s,c,o),co();var R=e.memoizedState;d!==C||T!==R||hr||t!==null&&t.dependencies!==null&&lc(t.dependencies)?(typeof x=="function"&&(Tu(e,n,x,s),R=e.memoizedState),(E=hr||yd(e,n,E,s,T,R,w)||t!==null&&t.dependencies!==null&&lc(t.dependencies))?(y||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,R,w),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,R,w)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=R),c.props=s,c.state=R,c.context=w,s=E):(typeof c.componentDidUpdate!="function"||d===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),s=!1)}return c=s,oo(t,e),s=(e.flags&128)!==0,c||s?(c=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:c.render(),e.flags|=1,t!==null&&s?(e.child=ls(e,t.child,null,o),e.child=ls(e,null,n,o)):Kt(t,e,n,o),e.memoizedState=c.state,t=e.child):t=Qi(t,e,o),t}function Td(t,e,n,s){return Fo(),e.flags|=256,Kt(t,e,n,s),e.child}var Ou={dehydrated:null,treeContext:null,retryLane:0};function Ru(t){return{baseLanes:t,cachePool:X2()}}function Iu(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=$n),t}function Mg(t,e,n){var s=e.pendingProps,o=!1,c=(e.flags&128)!==0,d;if((d=c)||(d=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),d&&(o=!0,e.flags&=-129),d=(e.flags&32)!==0,e.flags&=-33,t===null){if(ke){if(o?dr(e):fr(),ke){var x=Jt,w;if(w=x){e:{for(w=x,x=vi;w.nodeType!==8;){if(!x){x=null;break e}if(w=hi(w.nextSibling),w===null){x=null;break e}}x=w}x!==null?(e.memoizedState={dehydrated:x,treeContext:ns!==null?{id:Fi,overflow:Hi}:null,retryLane:536870912},w=Jn(18,null,null,0),w.stateNode=x,w.return=e,e.child=w,dn=e,Jt=null,w=!0):w=!1}w||os(e)}if(x=e.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return x.data==="$!"?e.lanes=16:e.lanes=536870912,null;Vi(e)}return x=s.children,s=s.fallback,o?(fr(),o=e.mode,x=Oh({mode:"hidden",children:x},o),s=rs(s,o,n,null),x.return=e,s.return=e,x.sibling=s,e.child=x,o=e.child,o.memoizedState=Ru(n),o.childLanes=Iu(t,d,n),e.memoizedState=Ou,s):(dr(e),Th(e,x))}if(w=t.memoizedState,w!==null&&(x=w.dehydrated,x!==null)){if(c)e.flags&256?(dr(e),e.flags&=-257,e=Du(t,e,n)):e.memoizedState!==null?(fr(),e.child=t.child,e.flags|=128,e=null):(fr(),o=s.fallback,x=e.mode,s=Oh({mode:"visible",children:s.children},x),o=rs(o,x,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,ls(e,t.child,null,n),s=e.child,s.memoizedState=Ru(n),s.childLanes=Iu(t,d,n),e.memoizedState=Ou,e=o);else if(dr(e),x.data==="$!"){if(d=x.nextSibling&&x.nextSibling.dataset,d)var y=d.dgst;d=y,s=Error(Y(419)),s.stack="",s.digest=d,Eo({value:s,source:null,stack:null}),e=Du(t,e,n)}else if(Gt||Go(t,e,n,!1),d=(n&t.childLanes)!==0,Gt||d){if(d=rt,d!==null){if(s=n&-n,s&42)s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(s=s&(d.suspendedLanes|n)?0:s,s!==0&&s!==w.retryLane)throw w.retryLane=s,Or(t,s),fn(d,t,s),Ig}x.data==="$?"||zh(),e=Du(t,e,n)}else x.data==="$?"?(e.flags|=128,e.child=t.child,e=v4.bind(null,t),x._reactRetry=e,e=null):(t=w.treeContext,Jt=hi(x.nextSibling),dn=e,ke=!0,ui=null,vi=!1,t!==null&&(Yn[Qn++]=Fi,Yn[Qn++]=Hi,Yn[Qn++]=ns,Fi=t.id,Hi=t.overflow,ns=e),e=Th(e,s.children),e.flags|=4096);return e}return o?(fr(),o=s.fallback,x=e.mode,w=t.child,y=w.sibling,s=Er(w,{mode:"hidden",children:s.children}),s.subtreeFlags=w.subtreeFlags&31457280,y!==null?o=Er(y,o):(o=rs(o,x,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,x=t.child.memoizedState,x===null?x=Ru(n):(w=x.cachePool,w!==null?(y=jt._currentValue,w=w.parent!==y?{parent:y,pool:y}:w):w=X2(),x={baseLanes:x.baseLanes|n,cachePool:w}),o.memoizedState=x,o.childLanes=Iu(t,d,n),e.memoizedState=Ou,s):(dr(e),n=t.child,t=n.sibling,n=Er(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(d=e.deletions,d===null?(e.deletions=[t],e.flags|=16):d.push(t)),e.child=n,e.memoizedState=null,n)}function Th(t,e){return e=Oh({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Oh(t,e){return tx(t,e,0,null)}function Du(t,e,n){return ls(e,t.child,null,n),t=Th(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Od(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Ih(t.return,e,n)}function Nu(t,e,n,s,o){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=n,c.tailMode=o)}function Bg(t,e,n){var s=e.pendingProps,o=s.revealOrder,c=s.tail;if(Kt(t,e,s.children,n),s=Lt.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Od(t,n,e);else if(t.tag===19)Od(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(ut(Lt,s),o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&ic(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Nu(e,!1,o,n,c);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&ic(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Nu(e,!0,n,null,c);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dr|=e.lanes,!(n&e.childLanes))if(t!==null){if(Go(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function P0(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&lc(t)))}function o4(t,e,n){switch(e.tag){case 3:Yl(e,e.stateNode.containerInfo),gr(e,jt,t.memoizedState.cache),Fo();break;case 27:case 5:lh(e);break;case 4:Yl(e,e.stateNode.containerInfo);break;case 10:gr(e,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(dr(e),e.flags|=128,null):n&e.child.childLanes?Mg(t,e,n):(dr(e),t=Qi(t,e,n),t!==null?t.sibling:null);dr(e);break;case 19:var o=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Go(t,e,n,!1),s=(n&e.childLanes)!==0),o){if(s)return Bg(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ut(Lt,Lt.current),s)break;return null;case 22:case 23:return e.lanes=0,Ng(t,e,n);case 24:gr(e,jt,t.memoizedState.cache)}return Qi(t,e,n)}function kg(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Gt=!0;else{if(!P0(t,n)&&!(e.flags&128))return Gt=!1,o4(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,ke&&e.flags&1048576&&z2(e,tc,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var s=e.elementType,o=s._init;if(s=o(s._payload),e.type=s,typeof s=="function")V0(s)?(t=us(s,t),e.tag=1,e=Sd(null,e,s,t,n)):(e.tag=0,e=Sh(null,e,s,t,n));else{if(s!=null){if(o=s.$$typeof,o===u0){e.tag=11,e=Ad(null,e,s,t,n);break e}else if(o===h0){e.tag=14,e=Ed(null,e,s,t,n);break e}}throw e=ah(s)||s,Error(Y(306,e,""))}}return e;case 0:return Sh(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,o=us(s,e.pendingProps),Sd(t,e,s,o,n);case 3:e:{if(Yl(e,e.stateNode.containerInfo),t===null)throw Error(Y(387));var c=e.pendingProps;o=e.memoizedState,s=o.element,Nh(t,e),uo(e,c,null,n);var d=e.memoizedState;if(c=d.cache,gr(e,jt,c),c!==o.cache&&Dh(e,[jt],n,!0),co(),c=d.element,o.isDehydrated)if(o={element:c,isDehydrated:!1,cache:d.cache},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){e=Td(t,e,c,n);break e}else if(c!==s){s=Kn(Error(Y(424)),e),Eo(s),e=Td(t,e,c,n);break e}else for(Jt=hi(e.stateNode.containerInfo.firstChild),dn=e,ke=!0,ui=null,vi=!0,n=G2(e,null,c,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fo(),c===s){e=Qi(t,e,n);break e}Kt(t,e,c,n)}e=e.child}return e;case 26:return oo(t,e),t===null?(n=Xd(e.type,null,e.pendingProps,null))?e.memoizedState=n:ke||(n=e.type,t=e.pendingProps,s=xc(br.current).createElement(n),s[rn]=e,s[An]=t,$t(s,n,t),Vt(s),e.stateNode=s):e.memoizedState=Xd(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return lh(e),t===null&&ke&&(s=e.stateNode=yx(e.type,e.pendingProps,br.current),dn=e,vi=!0,Jt=hi(s.firstChild)),s=e.pendingProps.children,t!==null||ke?Kt(t,e,s,n):e.child=ls(e,null,s,n),oo(t,e),e.child;case 5:return t===null&&ke&&((o=s=Jt)&&(s=L4(s,e.type,e.pendingProps,vi),s!==null?(e.stateNode=s,dn=e,Jt=hi(s.firstChild),vi=!1,o=!0):o=!1),o||os(e)),lh(e),o=e.type,c=e.pendingProps,d=t!==null?t.memoizedProps:null,s=c.children,qh(o,c)?s=null:d!==null&&qh(o,d)&&(e.flags|=32),e.memoizedState!==null&&(o=O0(t,e,e4,null,null,n),Ro._currentValue=o),oo(t,e),Kt(t,e,s,n),e.child;case 6:return t===null&&ke&&((t=n=Jt)&&(n=U4(n,e.pendingProps,vi),n!==null?(e.stateNode=n,dn=e,Jt=null,t=!0):t=!1),t||os(e)),null;case 13:return Mg(t,e,n);case 4:return Yl(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=ls(e,null,s,n):Kt(t,e,s,n),e.child;case 11:return Ad(t,e,e.type,e.pendingProps,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,gr(e,e.type,s.value),Kt(t,e,s.children,n),e.child;case 9:return o=e.type._context,s=e.pendingProps.children,hs(e),o=sn(o),s=s(o),e.flags|=1,Kt(t,e,s,n),e.child;case 14:return Ed(t,e,e.type,e.pendingProps,n);case 15:return Dg(t,e,e.type,e.pendingProps,n);case 19:return Bg(t,e,n);case 22:return Ng(t,e,n);case 24:return hs(e),s=sn(jt),t===null?(o=S0(),o===null&&(o=rt,c=C0(),o.pooledCache=c,c.refCount++,c!==null&&(o.pooledCacheLanes|=n),o=c),e.memoizedState={parent:s,cache:o},z0(e),gr(e,jt,o)):(t.lanes&n&&(Nh(t,e),uo(e,null,null,n),co()),o=t.memoizedState,c=e.memoizedState,o.parent!==s?(o={parent:s,cache:s},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),gr(e,jt,s)):(s=c.cache,gr(e,jt,s),s!==o.cache&&Dh(e,[jt],n,!0))),Kt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(Y(156,e.tag))}var Rh=Ti(null),ps=null,Gi=null;function gr(t,e,n){ut(Rh,e._currentValue),e._currentValue=n}function Xi(t){t._currentValue=Rh.current,qt(Rh)}function Ih(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Dh(t,e,n,s){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){var d=o.child;c=c.firstContext;e:for(;c!==null;){var x=c;c=o;for(var w=0;w<e.length;w++)if(x.context===e[w]){c.lanes|=n,x=c.alternate,x!==null&&(x.lanes|=n),Ih(c.return,n,t),s||(d=null);break e}c=x.next}}else if(o.tag===18){if(d=o.return,d===null)throw Error(Y(341));d.lanes|=n,c=d.alternate,c!==null&&(c.lanes|=n),Ih(d,n,t),d=null}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}}function Go(t,e,n,s){t=null;for(var o=e,c=!1;o!==null;){if(!c){if(o.flags&524288)c=!0;else if(o.flags&262144)break}if(o.tag===10){var d=o.alternate;if(d===null)throw Error(Y(387));if(d=d.memoizedProps,d!==null){var x=o.type;Ln(o.pendingProps.value,d.value)||(t!==null?t.push(x):t=[x])}}else if(o===Wl.current){if(d=o.alternate,d===null)throw Error(Y(387));d.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(Ro):t=[Ro])}o=o.return}t!==null&&Dh(e,t,n,s),e.flags|=262144}function lc(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function hs(t){ps=t,Gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return jg(ps,t)}function yl(t,e){return ps===null&&hs(t),jg(t,e)}function jg(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Gi===null){if(t===null)throw Error(Y(308));Gi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Gi=Gi.next=e;return n}var hr=!1;function z0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,xt&2){var o=s.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e,e=$l(t),P2(t,null,n),e}return Bc(t,s,e,n),$l(t)}function lo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194176)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,d2(t,n)}}function Mu(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var d={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?o=c=d:c=c.next=d,n=n.next}while(n!==null);c===null?o=c=e:c=c.next=e}else o=c=e;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Mh=!1;function co(){if(Mh){var t=ia;if(t!==null)throw t}}function uo(t,e,n,s){Mh=!1;var o=t.updateQueue;hr=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,x=o.shared.pending;if(x!==null){o.shared.pending=null;var w=x,y=w.next;w.next=null,d===null?c=y:d.next=y,d=w;var E=t.alternate;E!==null&&(E=E.updateQueue,x=E.lastBaseUpdate,x!==d&&(x===null?E.firstBaseUpdate=y:x.next=y,E.lastBaseUpdate=w))}if(c!==null){var C=o.baseState;d=0,E=y=w=null,x=c;do{var T=x.lane&-536870913,R=T!==x.lane;if(R?(Ne&T)===T:(s&T)===T){T!==0&&T===ga&&(Mh=!0),E!==null&&(E=E.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var k=t,L=x;T=e;var P=n;switch(L.tag){case 1:if(k=L.payload,typeof k=="function"){C=k.call(P,C,T);break e}C=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=L.payload,T=typeof k=="function"?k.call(P,C,T):k,T==null)break e;C=lt({},C,T);break e;case 2:hr=!0}}T=x.callback,T!==null&&(t.flags|=64,R&&(t.flags|=8192),R=o.callbacks,R===null?o.callbacks=[T]:R.push(T))}else R={lane:T,tag:x.tag,payload:x.payload,callback:x.callback,next:null},E===null?(y=E=R,w=C):E=E.next=R,d|=T;if(x=x.next,x===null){if(x=o.shared.pending,x===null)break;R=x,x=R.next,R.next=null,o.lastBaseUpdate=R,o.shared.pending=null}}while(!0);E===null&&(w=C),o.baseState=w,o.firstBaseUpdate=y,o.lastBaseUpdate=E,c===null&&(o.shared.lanes=0),Dr|=d,t.lanes=d,t.memoizedState=C}}function Lg(t,e){if(typeof t!="function")throw Error(Y(191,t));t.call(e)}function Ug(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Lg(n[t],e)}function qo(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var o=s.next;n=o;do{if((n.tag&t)===t){s=void 0;var c=n.create,d=n.inst;s=c(),d.destroy=s}n=n.next}while(n!==o)}}catch(x){Ke(e,e.return,x)}}function Ir(t,e,n){try{var s=e.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var c=o.next;s=c;do{if((s.tag&t)===t){var d=s.inst,x=d.destroy;if(x!==void 0){d.destroy=void 0,o=e;var w=n;try{x()}catch(y){Ke(o,w,y)}}}s=s.next}while(s!==c)}}catch(y){Ke(e,e.return,y)}}function Pg(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Ug(e,n)}catch(s){Ke(t,t.return,s)}}}function zg(t,e,n){n.props=us(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ke(t,e,s)}}function $r(t,e){try{var n=t.ref;if(n!==null){var s=t.stateNode;switch(t.tag){case 26:case 27:case 5:var o=s;break;default:o=s}typeof n=="function"?t.refCleanup=n(o):n.current=o}}catch(c){Ke(t,e,c)}}function Rn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(o){Ke(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Ke(t,e,o)}else n.current=null}function Fg(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(o){Ke(t,t.return,o)}}function Rd(t,e,n){try{var s=t.stateNode;N4(s,t.type,n,e),s[An]=e}catch(o){Ke(t,t.return,o)}}function Hg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function Bu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fc));else if(s!==4&&s!==27&&(t=t.child,t!==null))for(Bh(t,e,n),t=t.sibling;t!==null;)Bh(t,e,n),t=t.sibling}function cc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&s!==27&&(t=t.child,t!==null))for(cc(t,e,n),t=t.sibling;t!==null;)cc(t,e,n),t=t.sibling}var Li=!1,bt=!1,ku=!1,Id=typeof WeakSet=="function"?WeakSet:Set,Ht=null,Dd=!1;function l4(t,e){if(t=t.containerInfo,Vh=yc,t=N2(t),y0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{n.nodeType,c.nodeType}catch(L){n=null;break e}var d=0,x=-1,w=-1,y=0,E=0,C=t,T=null;t:for(;;){for(var R;C!==n||o!==0&&C.nodeType!==3||(x=d+o),C!==c||s!==0&&C.nodeType!==3||(w=d+s),C.nodeType===3&&(d+=C.nodeValue.length),(R=C.firstChild)!==null;)T=C,C=R;for(;;){if(C===t)break t;if(T===n&&++y===o&&(x=d),T===c&&++E===s&&(w=d),(R=C.nextSibling)!==null)break;C=T,T=C.parentNode}C=R}n=x===-1||w===-1?null:{start:x,end:w}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gh={focusedElem:t,selectionRange:n},yc=!1,Ht=e;Ht!==null;)if(e=Ht,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ht=t;else for(;Ht!==null;){switch(e=Ht,c=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&c!==null){t=void 0,n=e,o=c.memoizedProps,c=c.memoizedState,s=n.stateNode;try{var k=us(n.type,o,n.elementType===n.type);t=s.getSnapshotBeforeUpdate(k,c),s.__reactInternalSnapshotBeforeUpdate=t}catch(L){Ke(n,n.return,L)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Xh(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(Y(163))}if(t=e.sibling,t!==null){t.return=e.return,Ht=t;break}Ht=e.return}return k=Dd,Dd=!1,k}function Vg(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Ni(t,n),s&4&&qo(5,n);break;case 1:if(Ni(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(x){Ke(n,n.return,x)}else{var o=us(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Ke(n,n.return,x)}}s&64&&Pg(n),s&512&&$r(n,n.return);break;case 3:if(Ni(t,n),s&64&&(s=n.updateQueue,s!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ug(s,t)}catch(x){Ke(n,n.return,x)}}break;case 26:Ni(t,n),s&512&&$r(n,n.return);break;case 27:case 5:Ni(t,n),e===null&&s&4&&Fg(n),s&512&&$r(n,n.return);break;case 12:Ni(t,n);break;case 13:Ni(t,n),s&4&&Xg(t,n);break;case 22:if(o=n.memoizedState!==null||Li,!o){e=e!==null&&e.memoizedState!==null||bt;var c=Li,d=bt;Li=o,(bt=e)&&!d?cr(t,n,(n.subtreeFlags&8772)!==0):Ni(t,n),Li=c,bt=d}s&512&&(n.memoizedProps.mode==="manual"?$r(n,n.return):Rn(n,n.return));break;default:Ni(t,n)}}function Gg(t){var e=t.alternate;e!==null&&(t.alternate=null,Gg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&f0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ot=null,Tn=!1;function Di(t,e,n){for(n=n.child;n!==null;)qg(t,e,n),n=n.sibling}function qg(t,e,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Lo,n)}catch(d){}switch(n.tag){case 26:bt||Rn(n,e),Di(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:bt||Rn(n,e);var s=Ot,o=Tn;for(Ot=n.stateNode,Di(t,e,n),n=n.stateNode,e=n.attributes;e.length;)n.removeAttributeNode(e[0]);f0(n),Ot=s,Tn=o;break;case 5:bt||Rn(n,e);case 6:o=Ot;var c=Tn;if(Ot=null,Di(t,e,n),Ot=o,Tn=c,Ot!==null)if(Tn)try{t=Ot,s=n.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)}catch(d){Ke(n,e,d)}else try{Ot.removeChild(n.stateNode)}catch(d){Ke(n,e,d)}break;case 18:Ot!==null&&(Tn?(e=Ot,n=n.stateNode,e.nodeType===8?Wu(e.parentNode,n):e.nodeType===1&&Wu(e,n),No(e)):Wu(Ot,n.stateNode));break;case 4:s=Ot,o=Tn,Ot=n.stateNode.containerInfo,Tn=!0,Di(t,e,n),Ot=s,Tn=o;break;case 0:case 11:case 14:case 15:bt||Ir(2,n,e),bt||Ir(4,n,e),Di(t,e,n);break;case 1:bt||(Rn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&zg(n,e,s)),Di(t,e,n);break;case 21:Di(t,e,n);break;case 22:bt||Rn(n,e),bt=(s=bt)||n.memoizedState!==null,Di(t,e,n),bt=s;break;default:Di(t,e,n)}}function Xg(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{No(t)}catch(n){Ke(e,e.return,n)}}function c4(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Id),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Id),e;default:throw Error(Y(435,t.tag))}}function ju(t,e){var n=c4(t);e.forEach(function(s){var o=A4.bind(null,t,s);n.has(s)||(n.add(s),s.then(o,o))})}function Hn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s],c=t,d=e,x=d;e:for(;x!==null;){switch(x.tag){case 27:case 5:Ot=x.stateNode,Tn=!1;break e;case 3:Ot=x.stateNode.containerInfo,Tn=!0;break e;case 4:Ot=x.stateNode.containerInfo,Tn=!0;break e}x=x.return}if(Ot===null)throw Error(Y(160));qg(c,d,o),Ot=null,Tn=!1,c=o.alternate,c!==null&&(c.return=null),o.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)Wg(e,t),e=e.sibling}var li=null;function Wg(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Hn(e,t),Vn(t),s&4&&(Ir(3,t,t.return),qo(3,t),Ir(5,t,t.return));break;case 1:Hn(e,t),Vn(t),s&512&&(bt||n===null||Rn(n,n.return)),s&64&&Li&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var o=li;if(Hn(e,t),Vn(t),s&512&&(bt||n===null||Rn(n,n.return)),s&4){var c=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,o=o.ownerDocument||o;t:switch(s){case"title":c=o.getElementsByTagName("title")[0],(!c||c[yo]||c[rn]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=o.createElement(s),o.head.insertBefore(c,o.querySelector("head > title"))),$t(c,s,n),c[rn]=t,Vt(c),s=c;break e;case"link":var d=Yd("link","href",o).get(s+(n.href||""));if(d){for(var x=0;x<d.length;x++)if(c=d[x],c.getAttribute("href")===(n.href==null?null:n.href)&&c.getAttribute("rel")===(n.rel==null?null:n.rel)&&c.getAttribute("title")===(n.title==null?null:n.title)&&c.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){d.splice(x,1);break t}}c=o.createElement(s),$t(c,s,n),o.head.appendChild(c);break;case"meta":if(d=Yd("meta","content",o).get(s+(n.content||""))){for(x=0;x<d.length;x++)if(c=d[x],c.getAttribute("content")===(n.content==null?null:""+n.content)&&c.getAttribute("name")===(n.name==null?null:n.name)&&c.getAttribute("property")===(n.property==null?null:n.property)&&c.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&c.getAttribute("charset")===(n.charSet==null?null:n.charSet)){d.splice(x,1);break t}}c=o.createElement(s),$t(c,s,n),o.head.appendChild(c);break;default:throw Error(Y(468,s))}c[rn]=t,Vt(c),s=c}t.stateNode=s}else Qd(o,t.type,t.stateNode);else t.stateNode=Wd(o,s,t.memoizedProps);else c!==s?(c===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):c.count--,s===null?Qd(o,t.type,t.stateNode):Wd(o,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Rd(t,t.memoizedProps,n.memoizedProps)}break;case 27:if(s&4&&t.alternate===null){o=t.stateNode,c=t.memoizedProps;try{for(var w=o.firstChild;w;){var y=w.nextSibling,E=w.nodeName;w[yo]||E==="HEAD"||E==="BODY"||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=y}for(var C=t.type,T=o.attributes;T.length;)o.removeAttributeNode(T[0]);$t(o,C,c),o[rn]=t,o[An]=c}catch(k){Ke(t,t.return,k)}}case 5:if(Hn(e,t),Vn(t),s&512&&(bt||n===null||Rn(n,n.return)),t.flags&32){o=t.stateNode;try{da(o,"")}catch(k){Ke(t,t.return,k)}}s&4&&t.stateNode!=null&&(o=t.memoizedProps,Rd(t,o,n!==null?n.memoizedProps:o)),s&1024&&(ku=!0);break;case 6:if(Hn(e,t),Vn(t),s&4){if(t.stateNode===null)throw Error(Y(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(k){Ke(t,t.return,k)}}break;case 3:if(ql=null,o=li,li=mc(e.containerInfo),Hn(e,t),li=o,Vn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{No(e.containerInfo)}catch(k){Ke(t,t.return,k)}ku&&(ku=!1,Yg(t));break;case 4:s=li,li=mc(t.stateNode.containerInfo),Hn(e,t),Vn(t),li=s;break;case 12:Hn(e,t),Vn(t);break;case 13:Hn(e,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(X0=_i()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,ju(t,s)));break;case 22:if(s&512&&(bt||n===null||Rn(n,n.return)),w=t.memoizedState!==null,y=n!==null&&n.memoizedState!==null,E=Li,C=bt,Li=E||w,bt=C||y,Hn(e,t),bt=C,Li=E,Vn(t),e=t.stateNode,e._current=t,e._visibility&=-3,e._visibility|=e._pendingVisibility&2,s&8192&&(e._visibility=w?e._visibility&-2:e._visibility|1,w&&(e=Li||bt,n===null||y||e||ks(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(n=null,e=t;;){if(e.tag===5||e.tag===26||e.tag===27){if(n===null){y=n=e;try{if(o=y.stateNode,w)c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{d=y.stateNode,x=y.memoizedProps.style;var R=x!=null&&x.hasOwnProperty("display")?x.display:null;d.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(k){Ke(y,y.return,k)}}}else if(e.tag===6){if(n===null){y=e;try{y.stateNode.nodeValue=w?"":y.memoizedProps}catch(k){Ke(y,y.return,k)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,ju(t,n))));break;case 19:Hn(e,t),Vn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,ju(t,s)));break;case 21:break;default:Hn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{if(t.tag!==27){e:{for(var n=t.return;n!==null;){if(Hg(n)){var s=n;break e}n=n.return}throw Error(Y(160))}switch(s.tag){case 27:var o=s.stateNode,c=Bu(t);cc(t,c,o);break;case 5:var d=s.stateNode;s.flags&32&&(da(d,""),s.flags&=-33);var x=Bu(t);cc(t,x,d);break;case 3:case 4:var w=s.stateNode.containerInfo,y=Bu(t);Bh(t,y,w);break;default:throw Error(Y(161))}}}catch(E){Ke(t,t.return,E)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Yg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Yg(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ni(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Vg(t,e.alternate,e),e=e.sibling}function ks(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ir(4,e,e.return),ks(e);break;case 1:Rn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&zg(e,e.return,n),ks(e);break;case 26:case 27:case 5:Rn(e,e.return),ks(e);break;case 22:Rn(e,e.return),e.memoizedState===null&&ks(e);break;default:ks(e)}t=t.sibling}}function cr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,o=t,c=e,d=c.flags;switch(c.tag){case 0:case 11:case 15:cr(o,c,n),qo(4,c);break;case 1:if(cr(o,c,n),s=c,o=s.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(y){Ke(s,s.return,y)}if(s=c,o=s.updateQueue,o!==null){var x=s.stateNode;try{var w=o.shared.hiddenCallbacks;if(w!==null)for(o.shared.hiddenCallbacks=null,o=0;o<w.length;o++)Lg(w[o],x)}catch(y){Ke(s,s.return,y)}}n&&d&64&&Pg(c),$r(c,c.return);break;case 26:case 27:case 5:cr(o,c,n),n&&s===null&&d&4&&Fg(c),$r(c,c.return);break;case 12:cr(o,c,n);break;case 13:cr(o,c,n),n&&d&4&&Xg(o,c);break;case 22:c.memoizedState===null&&cr(o,c,n),$r(c,c.return);break;default:cr(o,c,n)}e=e.sibling}}function F0(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ho(n))}function H0(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ho(t))}function or(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Qg(t,e,n,s),e=e.sibling}function Qg(t,e,n,s){var o=e.flags;switch(e.tag){case 0:case 11:case 15:or(t,e,n,s),o&2048&&qo(9,e);break;case 3:or(t,e,n,s),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ho(t)));break;case 12:if(o&2048){or(t,e,n,s),t=e.stateNode;try{var c=e.memoizedProps,d=c.id,x=c.onPostCommit;typeof x=="function"&&x(d,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(w){Ke(e,e.return,w)}}else or(t,e,n,s);break;case 23:break;case 22:c=e.stateNode,e.memoizedState!==null?c._visibility&4?or(t,e,n,s):ho(t,e):c._visibility&4?or(t,e,n,s):(c._visibility|=4,js(t,e,n,s,(e.subtreeFlags&10256)!==0)),o&2048&&F0(e.alternate,e);break;case 24:or(t,e,n,s),o&2048&&H0(e.alternate,e);break;default:or(t,e,n,s)}}function js(t,e,n,s,o){for(o=o&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var c=t,d=e,x=n,w=s,y=d.flags;switch(d.tag){case 0:case 11:case 15:js(c,d,x,w,o),qo(8,d);break;case 23:break;case 22:var E=d.stateNode;d.memoizedState!==null?E._visibility&4?js(c,d,x,w,o):ho(c,d):(E._visibility|=4,js(c,d,x,w,o)),o&&y&2048&&F0(d.alternate,d);break;case 24:js(c,d,x,w,o),o&&y&2048&&H0(d.alternate,d);break;default:js(c,d,x,w,o)}e=e.sibling}}function ho(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,o=s.flags;switch(s.tag){case 22:ho(n,s),o&2048&&F0(s.alternate,s);break;case 24:ho(n,s),o&2048&&H0(s.alternate,s);break;default:ho(n,s)}e=e.sibling}}var Ja=8192;function Os(t){if(t.subtreeFlags&Ja)for(t=t.child;t!==null;)Zg(t),t=t.sibling}function Zg(t){switch(t.tag){case 26:Os(t),t.flags&Ja&&t.memoizedState!==null&&K4(li,t.memoizedState,t.memoizedProps);break;case 5:Os(t);break;case 3:case 4:var e=li;li=mc(t.stateNode.containerInfo),Os(t),li=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Ja,Ja=16777216,Os(t),Ja=e):Os(t));break;default:Os(t)}}function Kg(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function qa(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ht=s,$g(s,t)}Kg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jg(t),t=t.sibling}function Jg(t){switch(t.tag){case 0:case 11:case 15:qa(t),t.flags&2048&&Ir(9,t,t.return);break;case 3:qa(t);break;case 12:qa(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&4&&(t.return===null||t.return.tag!==13)?(e._visibility&=-5,Hl(t)):qa(t);break;default:qa(t)}}function Hl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ht=s,$g(s,t)}Kg(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ir(8,e,e.return),Hl(e);break;case 22:n=e.stateNode,n._visibility&4&&(n._visibility&=-5,Hl(e));break;default:Hl(e)}t=t.sibling}}function $g(t,e){for(;Ht!==null;){var n=Ht;switch(n.tag){case 0:case 11:case 15:Ir(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ho(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Ht=s;else e:for(n=t;Ht!==null;){s=Ht;var o=s.sibling,c=s.return;if(Gg(s),s===n){Ht=null;break e}if(o!==null){o.return=c,Ht=o;break e}Ht=c}}}function u4(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(t,e,n,s){return new u4(t,e,n,s)}function V0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Er(t,e){var n=t.alternate;return n===null?(n=Jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&31457280,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ex(t,e){t.flags&=31457282;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Vl(t,e,n,s,o,c){var d=0;if(s=t,typeof t=="function")V0(t)&&(d=1);else if(typeof t=="string")d=Q4(t,n,Ei.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case zs:return rs(n.children,o,c,e);case t2:d=8,o|=24;break;case ih:return t=Jn(12,n,e,o|2),t.elementType=ih,t.lanes=c,t;case rh:return t=Jn(13,n,e,o),t.elementType=rh,t.lanes=c,t;case sh:return t=Jn(19,n,e,o),t.elementType=sh,t.lanes=c,t;case i2:return tx(n,o,c,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kp:case zi:d=10;break e;case n2:d=9;break e;case u0:d=11;break e;case h0:d=14;break e;case ur:d=16,s=null;break e}d=29,n=Error(Y(130,t===null?"null":typeof t,"")),s=null}return e=Jn(d,n,e,o),e.elementType=t,e.type=s,e.lanes=c,e}function rs(t,e,n,s){return t=Jn(7,t,s,e),t.lanes=n,t}function tx(t,e,n,s){t=Jn(22,t,s,e),t.elementType=i2,t.lanes=n;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var c=o._current;if(c===null)throw Error(Y(456));if(!(o._pendingVisibility&2)){var d=Or(c,2);d!==null&&(o._pendingVisibility|=2,fn(d,c,2))}},attach:function(){var c=o._current;if(c===null)throw Error(Y(456));if(o._pendingVisibility&2){var d=Or(c,2);d!==null&&(o._pendingVisibility&=-3,fn(d,c,2))}}};return t.stateNode=o,t}function Lu(t,e,n){return t=Jn(6,t,null,e),t.lanes=n,t}function Uu(t,e,n){return e=Jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mi(t){t.flags|=4}function Nd(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Ax(e)){if(e=ei.current,e!==null&&((Ne&4194176)===Ne?Ci!==null:(Ne&62914560)!==Ne&&!(Ne&536870912)||e!==Ci))throw ro=wh,F2;t.flags|=8192}}function bl(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?u2():536870912,t.lanes|=e,ma|=e)}function Xa(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&31457280,s|=o.flags&31457280,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function h4(t,e,n){var s=e.pendingProps;switch(E0(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return ft(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Xi(jt),ua(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Va(e)?Mi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(Ph(ui),ui=null))),ft(e),null;case 26:return n=e.memoizedState,t===null?(Mi(e),n!==null?(ft(e),Nd(e,n)):(ft(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Mi(e),ft(e),Nd(e,n)):(ft(e),e.flags&=-16777217):(t.memoizedProps!==s&&Mi(e),ft(e),e.flags&=-16777217),null;case 27:Ql(e),n=br.current;var o=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Mi(e);else{if(!s){if(e.stateNode===null)throw Error(Y(166));return ft(e),null}t=Ei.current,Va(e)?ld(e):(t=yx(o,s,n),e.stateNode=t,Mi(e))}return ft(e),null;case 5:if(Ql(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Mi(e);else{if(!s){if(e.stateNode===null)throw Error(Y(166));return ft(e),null}if(t=Ei.current,Va(e))ld(e);else{switch(o=xc(br.current),t){case 1:t=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?o.createElement(n,{is:s.is}):o.createElement(n)}}t[rn]=e,t[An]=s;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=t;e:switch($t(t,n,s),n){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Mi(e)}}return ft(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Mi(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Y(166));if(t=br.current,Va(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,o=dn,o!==null)switch(o.tag){case 27:case 5:s=o.memoizedProps}t[rn]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||mx(t.nodeValue,n)),t||os(e)}else t=xc(t).createTextNode(s),t[rn]=e,e.stateNode=t}return ft(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=Va(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[rn]=e}else Fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),o=!1}else ui!==null&&(Ph(ui),ui=null),o=!0;if(!o)return e.flags&256?(Vi(e),e):(Vi(e),null)}if(Vi(e),e.flags&128)return e.lanes=n,e;if(n=s!==null,t=t!==null&&t.memoizedState!==null,n){s=e.child,o=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(o=s.alternate.memoizedState.cachePool.pool);var c=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),bl(e,e.updateQueue),ft(e),null;case 4:return ua(),t===null&&Q0(e.stateNode.containerInfo),ft(e),null;case 10:return Xi(e.type),ft(e),null;case 19:if(qt(Lt),o=e.memoizedState,o===null)return ft(e),null;if(s=(e.flags&128)!==0,c=o.rendering,c===null)if(s)Xa(o,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=ic(t),c!==null){for(e.flags|=128,Xa(o,!1),t=c.updateQueue,e.updateQueue=t,bl(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ex(n,t),n=n.sibling;return ut(Lt,Lt.current&1|2),e.child}t=t.sibling}o.tail!==null&&_i()>uc&&(e.flags|=128,s=!0,Xa(o,!1),e.lanes=4194304)}else{if(!s)if(t=ic(c),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,bl(e,t),Xa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!ke)return ft(e),null}else 2*_i()-o.renderingStartTime>uc&&n!==536870912&&(e.flags|=128,s=!0,Xa(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(t=o.last,t!==null?t.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=_i(),e.sibling=null,t=Lt.current,ut(Lt,s?t&1|2:t&1),e):(ft(e),null);case 22:case 23:return Vi(e),_0(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),n=e.updateQueue,n!==null&&bl(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&qt(is),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Xi(jt),ft(e),null;case 25:return null}throw Error(Y(156,e.tag))}function d4(t,e){switch(E0(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(jt),ua(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Ql(e),null;case 13:if(Vi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qt(Lt),null;case 4:return ua(),null;case 10:return Xi(e.type),null;case 22:case 23:return Vi(e),_0(),t!==null&&qt(is),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Xi(jt),null;case 25:return null;default:return null}}function nx(t,e){switch(E0(e),e.tag){case 3:Xi(jt),ua();break;case 26:case 27:case 5:Ql(e);break;case 4:ua();break;case 13:Vi(e);break;case 19:qt(Lt);break;case 10:Xi(e.type);break;case 22:case 23:Vi(e),_0(),t!==null&&qt(is);break;case 24:Xi(jt)}}var f4={getCacheForType:function(t){var e=sn(jt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},g4=typeof WeakMap=="function"?WeakMap:Map,xt=0,rt=null,Se=null,Ne=0,tt=0,On=null,Ui=!1,Aa=!1,G0=!1,Zi=0,vt=0,Dr=0,ss=0,q0=0,$n=0,ma=0,fo=null,Ai=null,kh=!1,X0=0,uc=1/0,hc=null,_r=null,vl=!1,Yr=null,go=0,jh=0,Lh=null,xo=0,Uh=null;function jn(){if(xt&2&&Ne!==0)return Ne&-Ne;if(Ae.T!==null){var t=ga;return t!==0?t:Y0()}return g2()}function ix(){$n===0&&($n=!(Ne&536870912)||ke?c2():536870912);var t=ei.current;return t!==null&&(t.flags|=32),$n}function fn(t,e,n){(t===rt&&tt===2||t.cancelPendingCommit!==null)&&(pa(t,0),Pi(t,Ne,$n,!1)),Po(t,n),(!(xt&2)||t!==rt)&&(t===rt&&(!(xt&2)&&(ss|=n),vt===4&&Pi(t,Ne,$n,!1)),Oi(t))}function rx(t,e,n){if(xt&6)throw Error(Y(327));var s=!n&&(e&60)===0&&(e&t.expiredLanes)===0||Uo(t,e),o=s?p4(t,e):Pu(t,e,!0),c=s;do{if(o===0){Aa&&!s&&Pi(t,e,0,!1);break}else if(o===6)Pi(t,e,0,!Ui);else{if(n=t.current.alternate,c&&!x4(n)){o=Pu(t,e,!1),c=!1;continue}if(o===2){if(c=e,t.errorRecoveryDisabledLanes&c)var d=0;else d=t.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){e=d;e:{var x=t;o=fo;var w=x.current.memoizedState.isDehydrated;if(w&&(pa(x,d).flags|=256),d=Pu(x,d,!1),d!==2){if(G0&&!w){x.errorRecoveryDisabledLanes|=c,ss|=c,o=4;break e}c=Ai,Ai=o,c!==null&&Ph(c)}o=d}if(c=!1,o!==2)continue}}if(o===1){pa(t,0),Pi(t,e,0,!0);break}e:{switch(s=t,o){case 0:case 1:throw Error(Y(345));case 4:if((e&4194176)===e){Pi(s,e,$n,!Ui);break e}break;case 2:Ai=null;break;case 3:case 5:break;default:throw Error(Y(329))}if(s.finishedWork=n,s.finishedLanes=e,(e&62914560)===e&&(c=X0+300-_i(),10<c)){if(Pi(s,e,$n,!Ui),Rc(s,0)!==0)break e;s.timeoutHandle=wx(Md.bind(null,s,n,Ai,hc,kh,e,$n,ss,ma,Ui,2,-0,0),c);break e}Md(s,n,Ai,hc,kh,e,$n,ss,ma,Ui,0,-0,0)}}break}while(!0);Oi(t)}function Ph(t){Ai===null?Ai=t:Ai.push.apply(Ai,t)}function Md(t,e,n,s,o,c,d,x,w,y,E,C,T){var R=e.subtreeFlags;if((R&8192||(R&16785408)===16785408)&&(Oo={stylesheets:null,count:0,unsuspend:Z4},Zg(e),e=J4(),e!==null)){t.cancelPendingCommit=e(kd.bind(null,t,n,s,o,d,x,w,1,C,T)),Pi(t,c,d,!y);return}kd(t,n,s,o,d,x,w,E,C,T)}function x4(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var o=n[s],c=o.getSnapshot;o=o.value;try{if(!Ln(c(),o))return!1}catch(d){return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pi(t,e,n,s){e&=~q0,e&=~ss,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var o=e;0<o;){var c=31-kn(o),d=1<<c;s[c]=-1,o&=~d}n!==0&&h2(t,n,e)}function Pc(){return xt&6?!0:(Xo(0),!1)}function W0(){if(Se!==null){if(tt===0)var t=Se.return;else t=Se,Gi=ps=null,D0(t),na=null,_o=0,t=Se;for(;t!==null;)nx(t.alternate,t),t=t.return;Se=null}}function pa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,B4(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),W0(),rt=t,Se=n=Er(t.current,null),Ne=e,tt=0,On=null,Ui=!1,Aa=Uo(t,e),G0=!1,ma=$n=q0=ss=Dr=vt=0,Ai=fo=null,kh=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var o=31-kn(s),c=1<<o;e|=t[o],s&=~c}return Zi=e,Mc(),n}function sx(t,e){Ce=null,Ae.H=Si,e===io?(e=hd(),tt=3):e===F2?(e=hd(),tt=4):tt=e===Ig?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,On=e,Se===null&&(vt=1,oc(t,Kn(e,t.current)))}function ax(){var t=Ae.H;return Ae.H=Si,t===null?Si:t}function ox(){var t=Ae.A;return Ae.A=f4,t}function zh(){vt=4,Ui||(Ne&4194176)!==Ne&&ei.current!==null||(Aa=!0),!(Dr&134217727)&&!(ss&134217727)||rt===null||Pi(rt,Ne,$n,!1)}function Pu(t,e,n){var s=xt;xt|=2;var o=ax(),c=ox();(rt!==t||Ne!==e)&&(hc=null,pa(t,e)),e=!1;var d=vt;e:do try{if(tt!==0&&Se!==null){var x=Se,w=On;switch(tt){case 8:W0(),d=6;break e;case 3:case 2:case 6:ei.current===null&&(e=!0);var y=tt;if(tt=0,On=null,Zs(t,x,w,y),n&&Aa){d=0;break e}break;default:y=tt,tt=0,On=null,Zs(t,x,w,y)}}m4(),d=vt;break}catch(E){sx(t,E)}while(!0);return e&&t.shellSuspendCounter++,Gi=ps=null,xt=s,Ae.H=o,Ae.A=c,Se===null&&(rt=null,Ne=0,Mc()),d}function m4(){for(;Se!==null;)lx(Se)}function p4(t,e){var n=xt;xt|=2;var s=ax(),o=ox();rt!==t||Ne!==e?(hc=null,uc=_i()+500,pa(t,e)):Aa=Uo(t,e);e:do try{if(tt!==0&&Se!==null){e=Se;var c=On;t:switch(tt){case 1:tt=0,On=null,Zs(t,e,c,1);break;case 2:if(ud(c)){tt=0,On=null,Bd(e);break}e=function(){tt===2&&rt===t&&(tt=7),Oi(t)},c.then(e,e);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:ud(c)?(tt=0,On=null,Bd(e)):(tt=0,On=null,Zs(t,e,c,7));break;case 5:var d=null;switch(Se.tag){case 26:d=Se.memoizedState;case 5:case 27:var x=Se;if(!d||Ax(d)){tt=0,On=null;var w=x.sibling;if(w!==null)Se=w;else{var y=x.return;y!==null?(Se=y,zc(y)):Se=null}break t}}tt=0,On=null,Zs(t,e,c,5);break;case 6:tt=0,On=null,Zs(t,e,c,6);break;case 8:W0(),vt=6;break e;default:throw Error(Y(462))}}w4();break}catch(E){sx(t,E)}while(!0);return Gi=ps=null,Ae.H=s,Ae.A=o,xt=n,Se!==null?0:(rt=null,Ne=0,Mc(),vt)}function w4(){for(;Se!==null&&!zp();)lx(Se)}function lx(t){var e=kg(t.alternate,t,Zi);t.memoizedProps=t.pendingProps,e===null?zc(t):Se=e}function Bd(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Cd(n,e,e.pendingProps,e.type,void 0,Ne);break;case 11:e=Cd(n,e,e.pendingProps,e.type.render,e.ref,Ne);break;case 5:D0(e);default:nx(n,e),e=Se=ex(e,Zi),e=kg(n,e,Zi)}t.memoizedProps=t.pendingProps,e===null?zc(t):Se=e}function Zs(t,e,n,s){Gi=ps=null,D0(e),na=null,_o=0;var o=e.return;try{if(a4(t,o,e,n,Ne)){vt=1,oc(t,Kn(n,t.current)),Se=null;return}}catch(c){if(o!==null)throw Se=o,c;vt=1,oc(t,Kn(n,t.current)),Se=null;return}e.flags&32768?(ke||s===1?t=!0:Aa||Ne&536870912?t=!1:(Ui=t=!0,(s===2||s===3||s===6)&&(s=ei.current,s!==null&&s.tag===13&&(s.flags|=16384))),cx(e,t)):zc(e)}function zc(t){var e=t;do{if(e.flags&32768){cx(e,Ui);return}t=e.return;var n=h4(e.alternate,e,Zi);if(n!==null){Se=n;return}if(e=e.sibling,e!==null){Se=e;return}Se=e=t}while(e!==null);vt===0&&(vt=5)}function cx(t,e){do{var n=d4(t.alternate,t);if(n!==null){n.flags&=32767,Se=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Se=t;return}Se=t=n}while(t!==null);vt=6,Se=null}function kd(t,e,n,s,o,c,d,x,w,y){var E=Ae.T,C=ot.p;try{ot.p=2,Ae.T=null,y4(t,e,n,s,C,o,c,d,x,w,y)}finally{Ae.T=E,ot.p=C}}function y4(t,e,n,s,o,c,d,x){do aa();while(Yr!==null);if(xt&6)throw Error(Y(327));var w=t.finishedWork;if(s=t.finishedLanes,w===null)return null;if(t.finishedWork=null,t.finishedLanes=0,w===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var y=w.lanes|w.childLanes;if(y|=b0,Kp(t,s,y,c,d,x),t===rt&&(Se=rt=null,Ne=0),!(w.subtreeFlags&10256)&&!(w.flags&10256)||vl||(vl=!0,jh=y,Lh=n,E4(Zl,function(){return aa(),null})),n=(w.flags&15990)!==0,w.subtreeFlags&15990||n?(n=Ae.T,Ae.T=null,c=ot.p,ot.p=2,d=xt,xt|=4,l4(t,w),Wg(w,t),V3(Gh,t.containerInfo),yc=!!Vh,Gh=Vh=null,t.current=w,Vg(t,w.alternate,w),Fp(),xt=d,ot.p=c,Ae.T=n):t.current=w,vl?(vl=!1,Yr=t,go=s):ux(t,y),y=t.pendingLanes,y===0&&(_r=null),Xp(w.stateNode),Oi(t),e!==null)for(o=t.onRecoverableError,w=0;w<e.length;w++)y=e[w],o(y.value,{componentStack:y.stack});return go&3&&aa(),y=t.pendingLanes,s&4194218&&y&42?t===Uh?xo++:(xo=0,Uh=t):xo=0,Xo(0),null}function ux(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ho(e)))}function aa(){if(Yr!==null){var t=Yr,e=jh;jh=0;var n=f2(go),s=Ae.T,o=ot.p;try{if(ot.p=32>n?32:n,Ae.T=null,Yr===null)var c=!1;else{n=Lh,Lh=null;var d=Yr,x=go;if(Yr=null,go=0,xt&6)throw Error(Y(331));var w=xt;if(xt|=4,Jg(d.current),Qg(d,d.current,x,n),xt=w,Xo(0,!1),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Lo,d)}catch(y){}c=!0}return c}finally{ot.p=o,Ae.T=s,ux(t,e)}}return!1}function jd(t,e,n){e=Kn(n,e),e=Ch(t.stateNode,e,2),t=Ar(t,e,2),t!==null&&(Po(t,2),Oi(t))}function Ke(t,e,n){if(t.tag===3)jd(t,t,n);else for(;e!==null;){if(e.tag===3){jd(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(_r===null||!_r.has(s))){t=Kn(n,t),n=Og(2),s=Ar(e,n,2),s!==null&&(Rg(n,s,e,t),Po(s,2),Oi(s));break}}e=e.return}}function zu(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new g4;var o=new Set;s.set(e,o)}else o=s.get(e),o===void 0&&(o=new Set,s.set(e,o));o.has(n)||(G0=!0,o.add(n),t=b4.bind(null,t,e,n),e.then(t,t))}function b4(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,rt===t&&(Ne&n)===n&&(vt===4||vt===3&&(Ne&62914560)===Ne&&300>_i()-X0?!(xt&2)&&pa(t,0):q0|=n,ma===Ne&&(ma=0)),Oi(t)}function hx(t,e){e===0&&(e=u2()),t=Or(t,e),t!==null&&(Po(t,e),Oi(t))}function v4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hx(t,n)}function A4(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(Y(314))}s!==null&&s.delete(e),hx(t,n)}function E4(t,e){return d0(t,e)}var dc=null,Ls=null,Fh=!1,fc=!1,Fu=!1,as=0;function Oi(t){t!==Ls&&t.next===null&&(Ls===null?dc=Ls=t:Ls=Ls.next=t),fc=!0,Fh||(Fh=!0,C4(_4))}function Xo(t,e){if(!Fu&&fc){Fu=!0;do for(var n=!1,s=dc;s!==null;){if(t!==0){var o=s.pendingLanes;if(o===0)var c=0;else{var d=s.suspendedLanes,x=s.pingedLanes;c=(1<<31-kn(42|t)+1)-1,c&=o&~(d&~x),c=c&201326677?c&201326677|1:c?c|2:0}c!==0&&(n=!0,Ld(s,c))}else c=Ne,c=Rc(s,s===rt?c:0),!(c&3)||Uo(s,c)||(n=!0,Ld(s,c));s=s.next}while(n);Fu=!1}}function _4(){fc=Fh=!1;var t=0;as!==0&&(M4()&&(t=as),as=0);for(var e=_i(),n=null,s=dc;s!==null;){var o=s.next,c=dx(s,e);c===0?(s.next=null,n===null?dc=o:n.next=o,o===null&&(Ls=n)):(n=s,(t!==0||c&3)&&(fc=!0)),s=o}Xo(t)}function dx(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,o=t.expirationTimes,c=t.pendingLanes&-62914561;0<c;){var d=31-kn(c),x=1<<d,w=o[d];w===-1?(!(x&n)||x&s)&&(o[d]=Zp(x,e)):w<=e&&(t.expiredLanes|=x),c&=~x}if(e=rt,n=Ne,n=Rc(t,t===e?n:0),s=t.callbackNode,n===0||t===e&&tt===2||t.cancelPendingCommit!==null)return s!==null&&s!==null&&pu(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Uo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&pu(s),f2(n)){case 2:case 8:n=o2;break;case 32:n=Zl;break;case 268435456:n=l2;break;default:n=Zl}return s=fx.bind(null,t),n=d0(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&pu(s),t.callbackPriority=2,t.callbackNode=null,2}function fx(t,e){var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var s=Ne;return s=Rc(t,t===rt?s:0),s===0?null:(rx(t,s,e),dx(t,_i()),t.callbackNode!=null&&t.callbackNode===n?fx.bind(null,t):null)}function Ld(t,e){if(aa())return null;rx(t,e,!0)}function C4(t){k4(function(){xt&6?d0(a2,t):t()})}function Y0(){return as===0&&(as=c2()),as}function Ud(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:jl(""+t)}function Pd(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function S4(t,e,n,s,o){if(e==="submit"&&n&&n.stateNode===o){var c=Ud((o[An]||null).action),d=s.submitter;d&&(e=(e=d[An]||null)?Ud(e.formAction):d.getAttribute("formAction"),e!==null&&(c=e,d=null));var x=new Ic("action","action",null,s,o);t.push({event:x,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(as!==0){var w=d?Pd(o,d):new FormData(o);Eh(n,{pending:!0,data:w,method:o.method,action:c},null,w)}}else typeof c=="function"&&(x.preventDefault(),w=d?Pd(o,d):new FormData(o),Eh(n,{pending:!0,data:w,method:o.method,action:c},c,w))},currentTarget:o}]})}}for(var Hu=0;Hu<ad.length;Hu++){var Vu=ad[Hu],T4=Vu.toLowerCase(),O4=Vu[0].toUpperCase()+Vu.slice(1);fi(T4,"on"+O4)}fi(B2,"onAnimationEnd");fi(k2,"onAnimationIteration");fi(j2,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(q3,"onTransitionRun");fi(X3,"onTransitionStart");fi(W3,"onTransitionCancel");fi(L2,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(So));function gx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],o=s.event;s=s.listeners;e:{var c=void 0;if(e)for(var d=s.length-1;0<=d;d--){var x=s[d],w=x.instance,y=x.currentTarget;if(x=x.listener,w!==c&&o.isPropagationStopped())break e;c=x,o.currentTarget=y;try{c(o)}catch(E){ac(E)}o.currentTarget=null,c=w}else for(d=0;d<s.length;d++){if(x=s[d],w=x.instance,y=x.currentTarget,x=x.listener,w!==c&&o.isPropagationStopped())break e;c=x,o.currentTarget=y;try{c(o)}catch(E){ac(E)}o.currentTarget=null,c=w}}}}function Ie(t,e){var n=e[uh];n===void 0&&(n=e[uh]=new Set);var s=t+"__bubble";n.has(s)||(xx(e,t,2,!1),n.add(s))}function Gu(t,e,n){var s=0;e&&(s|=4),xx(n,t,s,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Q0(t){if(!t[Al]){t[Al]=!0,x2.forEach(function(n){n!=="selectionchange"&&(R4.has(n)||Gu(n,!1,t),Gu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Al]||(e[Al]=!0,Gu("selectionchange",!1,e))}}function xx(t,e,n,s){switch(Tx(e)){case 2:var o=tw;break;case 8:o=nw;break;default:o=$0}n=o.bind(null,e,n,t),o=void 0,!gh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),s?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function qu(t,e,n,s,o){var c=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var x=s.stateNode.containerInfo;if(x===o||x.nodeType===8&&x.parentNode===o)break;if(d===4)for(d=s.return;d!==null;){var w=d.tag;if((w===3||w===4)&&(w=d.stateNode.containerInfo,w===o||w.nodeType===8&&w.parentNode===o))return;d=d.return}for(;x!==null;){if(d=Jr(x),d===null)return;if(w=d.tag,w===5||w===6||w===26||w===27){s=c=d;continue e}x=x.parentNode}}s=s.return}E2(function(){var y=c,E=x0(n),C=[];e:{var T=U2.get(t);if(T!==void 0){var R=Ic,k=t;switch(t){case"keypress":if(Ul(n)===0)break e;case"keydown":case"keyup":R=A3;break;case"focusin":k="focus",R=Au;break;case"focusout":k="blur",R=Au;break;case"beforeblur":case"afterblur":R=Au;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Y1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=u3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=C3;break;case B2:case k2:case j2:R=f3;break;case L2:R=T3;break;case"scroll":case"scrollend":R=l3;break;case"wheel":R=R3;break;case"copy":case"cut":case"paste":R=x3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Z1;break;case"toggle":case"beforetoggle":R=D3}var L=(e&4)!==0,P=!L&&(t==="scroll"||t==="scrollend"),D=L?T!==null?T+"Capture":null:T;L=[];for(var _=y,O;_!==null;){var M=_;if(O=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||O===null||D===null||(M=bo(_,D),M!=null&&L.push(To(_,M,O))),P)break;_=_.return}0<L.length&&(T=new R(T,k,null,n,E),C.push({event:T,listeners:L}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",T&&n!==fh&&(k=n.relatedTarget||n.fromElement)&&(Jr(k)||k[ba]))break e;if((R||T)&&(T=E.window===E?E:(T=E.ownerDocument)?T.defaultView||T.parentWindow:window,R?(k=n.relatedTarget||n.toElement,R=y,k=k?Jr(k):null,k!==null&&(P=ya(k),L=k.tag,k!==P||L!==5&&L!==27&&L!==6)&&(k=null)):(R=null,k=y),R!==k)){if(L=Y1,M="onMouseLeave",D="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(L=Z1,M="onPointerLeave",D="onPointerEnter",_="pointer"),P=R==null?T:Ka(R),O=k==null?T:Ka(k),T=new L(M,_+"leave",R,n,E),T.target=P,T.relatedTarget=O,M=null,Jr(E)===y&&(L=new L(D,_+"enter",k,n,E),L.target=O,L.relatedTarget=P,M=L),P=M,R&&k)t:{for(L=R,D=k,_=0,O=L;O;O=Rs(O))_++;for(O=0,M=D;M;M=Rs(M))O++;for(;0<_-O;)L=Rs(L),_--;for(;0<O-_;)D=Rs(D),O--;for(;_--;){if(L===D||D!==null&&L===D.alternate)break t;L=Rs(L),D=Rs(D)}L=null}else L=null;R!==null&&zd(C,T,R,L,!1),k!==null&&P!==null&&zd(C,P,k,L,!0)}}e:{if(T=y?Ka(y):window,R=T.nodeName&&T.nodeName.toLowerCase(),R==="select"||R==="input"&&T.type==="file")var W=ed;else if($1(T))if(R2)W=F3;else{W=P3;var H=U3}else R=T.nodeName,!R||R.toLowerCase()!=="input"||T.type!=="checkbox"&&T.type!=="radio"?y&&g0(y.elementType)&&(W=ed):W=z3;if(W&&(W=W(t,y))){O2(C,W,n,E);break e}H&&H(t,T,y),t==="focusout"&&y&&T.type==="number"&&y.memoizedProps.value!=null&&dh(T,"number",T.value)}switch(H=y?Ka(y):window,t){case"focusin":($1(H)||H.contentEditable==="true")&&(Gs=H,xh=y,no=null);break;case"focusout":no=xh=Gs=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,sd(C,n,E);break;case"selectionchange":if(G3)break;case"keydown":case"keyup":sd(C,n,E)}var U;if(w0)e:{switch(t){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else Vs?S2(t,n)&&(Z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Z="onCompositionStart");Z&&(C2&&n.locale!=="ko"&&(Vs||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&Vs&&(U=_2()):(yr=E,m0="value"in yr?yr.value:yr.textContent,Vs=!0)),H=gc(y,Z),0<H.length&&(Z=new Q1(Z,t,null,n,E),C.push({event:Z,listeners:H}),U?Z.data=U:(U=T2(n),U!==null&&(Z.data=U)))),(U=M3?B3(t,n):k3(t,n))&&(Z=gc(y,"onBeforeInput"),0<Z.length&&(H=new Q1("onBeforeInput","beforeinput",null,n,E),C.push({event:H,listeners:Z}),H.data=U)),S4(C,t,y,n,E)}gx(C,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gc(t,e){for(var n=e+"Capture",s=[];t!==null;){var o=t,c=o.stateNode;o=o.tag,o!==5&&o!==26&&o!==27||c===null||(o=bo(t,n),o!=null&&s.unshift(To(t,o,c)),o=bo(t,e),o!=null&&s.push(To(t,o,c))),t=t.return}return s}function Rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function zd(t,e,n,s,o){for(var c=e._reactName,d=[];n!==null&&n!==s;){var x=n,w=x.alternate,y=x.stateNode;if(x=x.tag,w!==null&&w===s)break;x!==5&&x!==26&&x!==27||y===null||(w=y,o?(y=bo(n,c),y!=null&&d.unshift(To(n,y,w))):o||(y=bo(n,c),y!=null&&d.push(To(n,y,w)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var I4=/\r\n?/g,D4=/\u0000|\uFFFD/g;function Fd(t){return(typeof t=="string"?t:""+t).replace(I4,"\n").replace(D4,"")}function mx(t,e){return e=Fd(e),Fd(t)===e}function Fc(){}function qe(t,e,n,s,o,c){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||da(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&da(t,""+s);break;case"className":gl(t,"class",s);break;case"tabIndex":gl(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":gl(t,n,s);break;case"style":A2(t,s,c);break;case"data":if(e!=="object"){gl(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=jl(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(n==="formAction"?(e!=="input"&&qe(t,e,"name",o.name,o,null),qe(t,e,"formEncType",o.formEncType,o,null),qe(t,e,"formMethod",o.formMethod,o,null),qe(t,e,"formTarget",o.formTarget,o,null)):(qe(t,e,"encType",o.encType,o,null),qe(t,e,"method",o.method,o,null),qe(t,e,"target",o.target,o,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=jl(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Fc);break;case"onScroll":s!=null&&Ie("scroll",t);break;case"onScrollEnd":s!=null&&Ie("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(Y(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=jl(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":Ie("beforetoggle",t),Ie("toggle",t),kl(t,"popover",s);break;case"xlinkActuate":Ii(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Ii(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Ii(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Ii(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Ii(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Ii(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Ii(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Ii(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Ii(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":kl(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=a3.get(n)||n,kl(t,n,s))}}function Hh(t,e,n,s,o,c){switch(n){case"style":A2(t,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Y(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(Y(60));t.innerHTML=n}}break;case"children":typeof s=="string"?da(t,s):(typeof s=="number"||typeof s=="bigint")&&da(t,""+s);break;case"onScroll":s!=null&&Ie("scroll",t);break;case"onScrollEnd":s!=null&&Ie("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!m2.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),c=t[An]||null,c=c!=null?c[n]:null,typeof c=="function"&&t.removeEventListener(e,c,o),typeof s=="function")){typeof c!="function"&&c!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,o);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):kl(t,n,s)}}}function $t(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",t),Ie("load",t);var s=!1,o=!1,c;for(c in n)if(n.hasOwnProperty(c)){var d=n[c];if(d!=null)switch(c){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,e));default:qe(t,e,c,d,n,null)}}o&&qe(t,e,"srcSet",n.srcSet,n,null),s&&qe(t,e,"src",n.src,n,null);return;case"input":Ie("invalid",t);var x=c=d=o=null,w=null,y=null;for(s in n)if(n.hasOwnProperty(s)){var E=n[s];if(E!=null)switch(s){case"name":o=E;break;case"type":d=E;break;case"checked":w=E;break;case"defaultChecked":y=E;break;case"value":c=E;break;case"defaultValue":x=E;break;case"children":case"dangerouslySetInnerHTML":if(E!=null)throw Error(Y(137,e));break;default:qe(t,e,s,E,n,null)}}y2(t,c,x,w,y,d,o,!1),Kl(t);return;case"select":Ie("invalid",t),s=d=c=null;for(o in n)if(n.hasOwnProperty(o)&&(x=n[o],x!=null))switch(o){case"value":c=x;break;case"defaultValue":d=x;break;case"multiple":s=x;default:qe(t,e,o,x,n,null)}e=c,n=d,t.multiple=!!s,e!=null?ea(t,!!s,e,!1):n!=null&&ea(t,!!s,n,!0);return;case"textarea":Ie("invalid",t),c=o=s=null;for(d in n)if(n.hasOwnProperty(d)&&(x=n[d],x!=null))switch(d){case"value":s=x;break;case"defaultValue":o=x;break;case"children":c=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(Y(91));break;default:qe(t,e,d,x,n,null)}v2(t,s,o,c),Kl(t);return;case"option":for(w in n)if(n.hasOwnProperty(w)&&(s=n[w],s!=null))switch(w){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:qe(t,e,w,s,n,null)}return;case"dialog":Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":Ie("load",t);break;case"video":case"audio":for(s=0;s<So.length;s++)Ie(So[s],t);break;case"image":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"embed":case"source":case"link":Ie("error",t),Ie("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(y in n)if(n.hasOwnProperty(y)&&(s=n[y],s!=null))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(Y(137,e));default:qe(t,e,y,s,n,null)}return;default:if(g0(e)){for(E in n)n.hasOwnProperty(E)&&(s=n[E],s!==void 0&&Hh(t,e,E,s,n,void 0));return}}for(x in n)n.hasOwnProperty(x)&&(s=n[x],s!=null&&qe(t,e,x,s,n,null))}function N4(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,c=null,d=null,x=null,w=null,y=null,E=null;for(R in n){var C=n[R];if(n.hasOwnProperty(R)&&C!=null)switch(R){case"checked":break;case"value":break;case"defaultValue":w=C;default:s.hasOwnProperty(R)||qe(t,e,R,null,s,C)}}for(var T in s){var R=s[T];if(C=n[T],s.hasOwnProperty(T)&&(R!=null||C!=null))switch(T){case"type":c=R;break;case"name":o=R;break;case"checked":y=R;break;case"defaultChecked":E=R;break;case"value":d=R;break;case"defaultValue":x=R;break;case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(Y(137,e));break;default:R!==C&&qe(t,e,T,R,s,C)}}hh(t,d,x,w,y,E,c,o);return;case"select":R=d=x=T=null;for(c in n)if(w=n[c],n.hasOwnProperty(c)&&w!=null)switch(c){case"value":break;case"multiple":R=w;default:s.hasOwnProperty(c)||qe(t,e,c,null,s,w)}for(o in s)if(c=s[o],w=n[o],s.hasOwnProperty(o)&&(c!=null||w!=null))switch(o){case"value":T=c;break;case"defaultValue":x=c;break;case"multiple":d=c;default:c!==w&&qe(t,e,o,c,s,w)}e=x,n=d,s=R,T!=null?ea(t,!!n,T,!1):!!s!=!!n&&(e!=null?ea(t,!!n,e,!0):ea(t,!!n,n?[]:"",!1));return;case"textarea":R=T=null;for(x in n)if(o=n[x],n.hasOwnProperty(x)&&o!=null&&!s.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:qe(t,e,x,null,s,o)}for(d in s)if(o=s[d],c=n[d],s.hasOwnProperty(d)&&(o!=null||c!=null))switch(d){case"value":T=o;break;case"defaultValue":R=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(Y(91));break;default:o!==c&&qe(t,e,d,o,s,c)}b2(t,T,R);return;case"option":for(var k in n)if(T=n[k],n.hasOwnProperty(k)&&T!=null&&!s.hasOwnProperty(k))switch(k){case"selected":t.selected=!1;break;default:qe(t,e,k,null,s,T)}for(w in s)if(T=s[w],R=n[w],s.hasOwnProperty(w)&&T!==R&&(T!=null||R!=null))switch(w){case"selected":t.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:qe(t,e,w,T,s,R)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var L in n)T=n[L],n.hasOwnProperty(L)&&T!=null&&!s.hasOwnProperty(L)&&qe(t,e,L,null,s,T);for(y in s)if(T=s[y],R=n[y],s.hasOwnProperty(y)&&T!==R&&(T!=null||R!=null))switch(y){case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(Y(137,e));break;default:qe(t,e,y,T,s,R)}return;default:if(g0(e)){for(var P in n)T=n[P],n.hasOwnProperty(P)&&T!==void 0&&!s.hasOwnProperty(P)&&Hh(t,e,P,void 0,s,T);for(E in s)T=s[E],R=n[E],!s.hasOwnProperty(E)||T===R||T===void 0&&R===void 0||Hh(t,e,E,T,s,R);return}}for(var D in n)T=n[D],n.hasOwnProperty(D)&&T!=null&&!s.hasOwnProperty(D)&&qe(t,e,D,null,s,T);for(C in s)T=s[C],R=n[C],!s.hasOwnProperty(C)||T===R||T==null&&R==null||qe(t,e,C,T,s,R)}var Vh=null,Gh=null;function xc(t){return t.nodeType===9?t:t.ownerDocument}function Hd(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function px(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xu=null;function M4(){var t=window.event;return t&&t.type==="popstate"?t===Xu?!1:(Xu=t,!0):(Xu=null,!1)}var wx=typeof setTimeout=="function"?setTimeout:void 0,B4=typeof clearTimeout=="function"?clearTimeout:void 0,Vd=typeof Promise=="function"?Promise:void 0,k4=typeof queueMicrotask=="function"?queueMicrotask:typeof Vd<"u"?function(t){return Vd.resolve(null).then(t).catch(j4)}:wx;function j4(t){setTimeout(function(){throw t})}function Wu(t,e){var n=e,s=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(s===0){t.removeChild(o),No(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=o}while(n);No(e)}function Xh(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Xh(n),f0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function L4(t,e,n,s){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[yo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(c=t.getAttribute("rel"),c==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(c!==o.rel||t.getAttribute("href")!==(o.href==null?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(c=t.getAttribute("src"),(c!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&c&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var c=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===c)return t}else return t;if(t=hi(t.nextSibling),t===null)break}return null}function U4(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=hi(t.nextSibling),t===null))return null;return t}function hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}function Gd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function yx(t,e,n){switch(e=xc(n),t){case"html":if(t=e.documentElement,!t)throw Error(Y(452));return t;case"head":if(t=e.head,!t)throw Error(Y(453));return t;case"body":if(t=e.body,!t)throw Error(Y(454));return t;default:throw Error(Y(451))}}var ti=new Map,qd=new Set;function mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var Ki=ot.d;ot.d={f:P4,r:z4,D:F4,C:H4,L:V4,m:G4,X:X4,S:q4,M:W4};function P4(){var t=Ki.f(),e=Pc();return t||e}function z4(t){var e=va(t);e!==null&&e.tag===5&&e.type==="form"?yg(e):Ki.r(t)}var Ea=typeof document>"u"?null:document;function bx(t,e,n){var s=Ea;if(s&&typeof e=="string"&&e){var o=Zn(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),qd.has(o)||(qd.add(o),t={rel:t,crossOrigin:n,href:e},s.querySelector(o)===null&&(e=s.createElement("link"),$t(e,"link",t),Vt(e),s.head.appendChild(e)))}}function F4(t){Ki.D(t),bx("dns-prefetch",t,null)}function H4(t,e){Ki.C(t,e),bx("preconnect",t,e)}function V4(t,e,n){Ki.L(t,e,n);var s=Ea;if(s&&t&&e){var o='link[rel="preload"][as="'+Zn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Zn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Zn(n.imageSizes)+'"]')):o+='[href="'+Zn(t)+'"]';var c=o;switch(e){case"style":c=wa(t);break;case"script":c=_a(t)}ti.has(c)||(t=lt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ti.set(c,t),s.querySelector(o)!==null||e==="style"&&s.querySelector(Wo(c))||e==="script"&&s.querySelector(Yo(c))||(e=s.createElement("link"),$t(e,"link",t),Vt(e),s.head.appendChild(e)))}}function G4(t,e){Ki.m(t,e);var n=Ea;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+Zn(s)+'"][href="'+Zn(t)+'"]',c=o;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=_a(t)}if(!ti.has(c)&&(t=lt({rel:"modulepreload",href:t},e),ti.set(c,t),n.querySelector(o)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yo(c)))return}s=n.createElement("link"),$t(s,"link",t),Vt(s),n.head.appendChild(s)}}}function q4(t,e,n){Ki.S(t,e,n);var s=Ea;if(s&&t){var o=$s(s).hoistableStyles,c=wa(t);e=e||"default";var d=o.get(c);if(!d){var x={loading:0,preload:null};if(d=s.querySelector(Wo(c)))x.loading=5;else{t=lt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ti.get(c))&&Z0(t,n);var w=d=s.createElement("link");Vt(w),$t(w,"link",t),w._p=new Promise(function(y,E){w.onload=y,w.onerror=E}),w.addEventListener("load",function(){x.loading|=1}),w.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Gl(d,e,s)}d={type:"stylesheet",instance:d,count:1,state:x},o.set(c,d)}}}function X4(t,e){Ki.X(t,e);var n=Ea;if(n&&t){var s=$s(n).hoistableScripts,o=_a(t),c=s.get(o);c||(c=n.querySelector(Yo(o)),c||(t=lt({src:t,async:!0},e),(e=ti.get(o))&&K0(t,e),c=n.createElement("script"),Vt(c),$t(c,"link",t),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(o,c))}}function W4(t,e){Ki.M(t,e);var n=Ea;if(n&&t){var s=$s(n).hoistableScripts,o=_a(t),c=s.get(o);c||(c=n.querySelector(Yo(o)),c||(t=lt({src:t,async:!0,type:"module"},e),(e=ti.get(o))&&K0(t,e),c=n.createElement("script"),Vt(c),$t(c,"link",t),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(o,c))}}function Xd(t,e,n,s){var o=(o=br.current)?mc(o):null;if(!o)throw Error(Y(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=wa(n.href),n=$s(o).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=wa(n.href);var c=$s(o).hoistableStyles,d=c.get(t);if(d||(o=o.ownerDocument||o,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(t,d),(c=o.querySelector(Wo(t)))&&!c._p&&(d.instance=c,d.state.loading=5),ti.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ti.set(t,n),c||Y4(o,t,n,d.state))),e&&s===null)throw Error(Y(528,""));return d}if(e&&s!==null)throw Error(Y(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=_a(n),n=$s(o).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(Y(444,t))}}function wa(t){return'href="'+Zn(t)+'"'}function Wo(t){return'link[rel="stylesheet"]['+t+"]"}function vx(t){return lt({},t,{"data-precedence":t.precedence,precedence:null})}function Y4(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),$t(e,"link",n),Vt(e),t.head.appendChild(e))}function _a(t){return'[src="'+Zn(t)+'"]'}function Yo(t){return"script[async]"+t}function Wd(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+Zn(n.href)+'"]');if(s)return e.instance=s,Vt(s),s;var o=lt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Vt(s),$t(s,"style",o),Gl(s,n.precedence,t),e.instance=s;case"stylesheet":o=wa(n.href);var c=t.querySelector(Wo(o));if(c)return e.state.loading|=4,e.instance=c,Vt(c),c;s=vx(n),(o=ti.get(o))&&Z0(s,o),c=(t.ownerDocument||t).createElement("link"),Vt(c);var d=c;return d._p=new Promise(function(x,w){d.onload=x,d.onerror=w}),$t(c,"link",s),e.state.loading|=4,Gl(c,n.precedence,t),e.instance=c;case"script":return c=_a(n.src),(o=t.querySelector(Yo(c)))?(e.instance=o,Vt(o),o):(s=n,(o=ti.get(c))&&(s=lt({},n),K0(s,o)),t=t.ownerDocument||t,o=t.createElement("script"),Vt(o),$t(o,"link",s),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(Y(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Gl(s,n.precedence,t));return e.instance}function Gl(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=s.length?s[s.length-1]:null,c=o,d=0;d<s.length;d++){var x=s[d];if(x.dataset.precedence===e)c=x;else if(c!==o)break}c?c.parentNode.insertBefore(t,c.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Z0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function K0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var ql=null;function Yd(t,e,n){if(ql===null){var s=new Map,o=ql=new Map;o.set(n,s)}else o=ql,s=o.get(n),s||(s=new Map,o.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var c=n[o];if(!(c[yo]||c[rn]||t==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var d=c.getAttribute(e)||"";d=t+d;var x=s.get(d);x?x.push(c):s.set(d,[c])}}return s}function Qd(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Q4(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Ax(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Oo=null;function Z4(){}function K4(t,e,n){if(Oo===null)throw Error(Y(475));var s=Oo;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var o=wa(n.href),c=t.querySelector(Wo(o));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=pc.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=c,Vt(c);return}c=t.ownerDocument||t,n=vx(n),(o=ti.get(o))&&Z0(n,o),c=c.createElement("link"),Vt(c);var d=c;d._p=new Promise(function(x,w){d.onload=x,d.onerror=w}),$t(c,"link",n),e.instance=c}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(s.count++,e=pc.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}function J4(){if(Oo===null)throw Error(Y(475));var t=Oo;return t.stylesheets&&t.count===0&&Wh(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Wh(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function pc(){if(this.count--,this.count===0){if(this.stylesheets)Wh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wc=null;function Wh(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wc=new Map,e.forEach($4,t),wc=null,pc.call(t))}function $4(t,e){if(!(e.state.loading&4)){var n=wc.get(t);if(n)var s=n.get(null);else{n=new Map,wc.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<o.length;c++){var d=o[c];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(n.set(d.dataset.precedence,d),s=d)}s&&n.set(null,s)}o=e.instance,d=o.getAttribute("data-precedence"),c=n.get(d)||s,c===s&&n.set(null,o),n.set(d,o),this.count++,s=pc.bind(this),o.addEventListener("load",s),o.addEventListener("error",s),c?c.parentNode.insertBefore(o,c.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var Ro={$$typeof:zi,Provider:null,Consumer:null,_currentValue:ts,_currentValue2:ts,_threadCount:0};function ew(t,e,n,s,o,c,d,x){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.hiddenUpdates=wu(null),this.identifierPrefix=s,this.onUncaughtError=o,this.onCaughtError=c,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Ex(t,e,n,s,o,c,d,x,w,y,E,C){return t=new ew(t,e,n,d,x,w,y,C),e=1,c===!0&&(e|=24),c=Jn(3,null,null,e),t.current=c,c.stateNode=t,e=C0(),e.refCount++,t.pooledCache=e,e.refCount++,c.memoizedState={element:s,isDehydrated:n,cache:e},z0(c),t}function _x(t){return t?(t=Ws,t):Ws}function Cx(t,e,n,s,o,c){o=_x(o),s.context===null?s.context=o:s.pendingContext=o,s=vr(e),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=Ar(t,s,e),n!==null&&(fn(n,t,e),lo(n,t,e))}function Zd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function J0(t,e){Zd(t,e),(t=t.alternate)&&Zd(t,e)}function Sx(t){if(t.tag===13){var e=Or(t,67108864);e!==null&&fn(e,t,67108864),J0(t,67108864)}}var yc=!0;function tw(t,e,n,s){var o=Ae.T;Ae.T=null;var c=ot.p;try{ot.p=2,$0(t,e,n,s)}finally{ot.p=c,Ae.T=o}}function nw(t,e,n,s){var o=Ae.T;Ae.T=null;var c=ot.p;try{ot.p=8,$0(t,e,n,s)}finally{ot.p=c,Ae.T=o}}function $0(t,e,n,s){if(yc){var o=Yh(s);if(o===null)qu(t,e,s,bc,n),Kd(t,s);else if(rw(o,t,e,n,s))s.stopPropagation();else if(Kd(t,s),e&4&&-1<iw.indexOf(t)){for(;o!==null;){var c=va(o);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var d=qr(c.pendingLanes);if(d!==0){var x=c;for(x.pendingLanes|=2,x.entangledLanes|=2;d;){var w=1<<31-kn(d);x.entanglements[1]|=w,d&=~w}Oi(c),!(xt&6)&&(uc=_i()+500,Xo(0))}}break;case 13:x=Or(c,2),x!==null&&fn(x,c,2),Pc(),J0(c,2)}if(c=Yh(s),c===null&&qu(t,e,s,bc,n),c===o)break;o=c}o!==null&&s.stopPropagation()}else qu(t,e,s,null,n)}}function Yh(t){return t=x0(t),e1(t)}var bc=null;function e1(t){if(bc=null,t=Jr(t),t!==null){var e=ya(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=r2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return bc=t,null}function Tx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hp()){case a2:return 2;case o2:return 8;case Zl:case Vp:return 32;case l2:return 268435456;default:return 32}default:return 32}}var Qh=!1,Cr=null,Sr=null,Tr=null,Io=new Map,Do=new Map,xr=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kd(t,e){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Io.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(e.pointerId)}}function Wa(t,e,n,s,o,c){return t===null||t.nativeEvent!==c?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:c,targetContainers:[o]},e!==null&&(e=va(e),e!==null&&Sx(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function rw(t,e,n,s,o){switch(e){case"focusin":return Cr=Wa(Cr,t,e,n,s,o),!0;case"dragenter":return Sr=Wa(Sr,t,e,n,s,o),!0;case"mouseover":return Tr=Wa(Tr,t,e,n,s,o),!0;case"pointerover":var c=o.pointerId;return Io.set(c,Wa(Io.get(c)||null,t,e,n,s,o)),!0;case"gotpointercapture":return c=o.pointerId,Do.set(c,Wa(Do.get(c)||null,t,e,n,s,o)),!0}return!1}function Ox(t){var e=Jr(t.target);if(e!==null){var n=ya(e);if(n!==null){if(e=n.tag,e===13){if(e=r2(n),e!==null){t.blockedOn=e,Jp(t.priority,function(){if(n.tag===13){var s=jn(),o=Or(n,s);o!==null&&fn(o,n,s),J0(n,s)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yh(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);fh=s,n.target.dispatchEvent(s),fh=null}else return e=va(n),e!==null&&Sx(e),t.blockedOn=n,!1;e.shift()}return!0}function Jd(t,e,n){Xl(t)&&n.delete(e)}function sw(){Qh=!1,Cr!==null&&Xl(Cr)&&(Cr=null),Sr!==null&&Xl(Sr)&&(Sr=null),Tr!==null&&Xl(Tr)&&(Tr=null),Io.forEach(Jd),Do.forEach(Jd)}function El(t,e){t.blockedOn===e&&(t.blockedOn=null,Qh||(Qh=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,sw)))}var _l=null;function $d(t){_l!==t&&(_l=t,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,function(){_l===t&&(_l=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],o=t[e+2];if(typeof s!="function"){if(e1(s||n)===null)continue;break}var c=va(n);c!==null&&(t.splice(e,3),e-=3,Eh(c,{pending:!0,data:o,method:n.method,action:s},s,o))}}))}function No(t){function e(w){return El(w,t)}Cr!==null&&El(Cr,t),Sr!==null&&El(Sr,t),Tr!==null&&El(Tr,t),Io.forEach(e),Do.forEach(e);for(var n=0;n<xr.length;n++){var s=xr[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&xr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],d=o[An]||null;if(typeof c=="function")d||$d(n);else if(d){var x=null;if(c&&c.hasAttribute("formAction")){if(o=c,d=c[An]||null)x=d.formAction;else if(e1(o)!==null)continue}else x=d.action;typeof x=="function"?n[s+1]=x:(n.splice(s,3),s-=3),$d(n)}}}function t1(t){this._internalRoot=t}Hc.prototype.render=t1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));var n=e.current,s=jn();Cx(n,s,t,e,null,null)};Hc.prototype.unmount=t1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;t.tag===0&&aa(),Cx(t.current,2,null,t,null,null),Pc(),e[ba]=null}};function Hc(t){this._internalRoot=t}Hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=g2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&Ox(t)}};var ef=$f.version;if(ef!=="19.0.0")throw Error(Y(527,ef,"19.0.0"));ot.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Pp(e),t=t!==null?s2(t):null,t=t===null?null:t.stateNode,t};var aw={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Ae,findFiberByHostInstance:Jr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Lo=Cl.inject(aw),Bn=Cl}catch(t){}}Oc.createRoot=function(t,e){if(!e2(t))throw Error(Y(299));var n=!1,s="",o=Cg,c=Sg,d=Tg,x=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(c=e.onCaughtError),e.onRecoverableError!==void 0&&(d=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(x=e.unstable_transitionCallbacks)),e=Ex(t,1,!1,null,null,n,s,o,c,d,x,null),t[ba]=e.current,Q0(t.nodeType===8?t.parentNode:t),new t1(e)};Oc.hydrateRoot=function(t,e,n){if(!e2(t))throw Error(Y(299));var s=!1,o="",c=Cg,d=Sg,x=Tg,w=null,y=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(w=n.unstable_transitionCallbacks),n.formState!==void 0&&(y=n.formState)),e=Ex(t,1,!0,e,n!=null?n:null,s,o,c,d,x,w,y),e.context=_x(null),n=e.current,s=jn(),o=vr(s),o.callback=null,Ar(n,o,s),e.current.lanes=s,Po(e,s),Oi(e),t[ba]=e.current,Q0(t),new Hc(e)};Oc.version="19.0.0";function Rx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rx)}catch(t){console.error(t)}}Rx(),Zf.exports=Oc;var ow=Zf.exports;const lw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class n1 extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class cw extends n1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class tf extends n1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nf extends n1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zh||(Zh={}));class uw{constructor(e,{headers:n={},customFetch:s,region:o=Zh.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=lw(s)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return ce(this,arguments,void 0,function*(n,s={}){var o;let c,d;try{const{headers:x,method:w,body:y,signal:E,timeout:C}=s;let T={},{region:R}=s;R||(R=this.region);const k=new URL("".concat(this.url,"/").concat(n));R&&R!=="any"&&(T["x-region"]=R,k.searchParams.set("forceFunctionRegion",R));let L;y&&(x&&!Object.prototype.hasOwnProperty.call(x,"Content-Type")||!x)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",L=y):typeof y=="string"?(T["Content-Type"]="text/plain",L=y):typeof FormData<"u"&&y instanceof FormData?L=y:(T["Content-Type"]="application/json",L=JSON.stringify(y)):L=y;let P=E;C&&(d=new AbortController,c=setTimeout(()=>d.abort(),C),E?(P=d.signal,E.addEventListener("abort",()=>d.abort())):P=d.signal);const D=yield this.fetch(k.toString(),{method:w||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),x),body:L,signal:P}).catch(W=>{throw new cw(W)}),_=D.headers.get("x-relay-error");if(_&&_==="true")throw new tf(D);if(!D.ok)throw new nf(D);let O=((o=D.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),M;return O==="application/json"?M=yield D.json():O==="application/octet-stream"||O==="application/pdf"?M=yield D.blob():O==="text/event-stream"?M=D:O==="multipart/form-data"?M=yield D.formData():M=yield D.text(),{data:M,error:null,response:D}}catch(x){return{data:null,error:x,response:x instanceof nf||x instanceof tf?x.context:void 0}}finally{c&&clearTimeout(c)}})}}var hn={};const Ca=wp(Km);var Sl={},Tl={},Ol={},Rl={},Il={},Dl={},rf;function Ix(){if(rf)return Dl;rf=1,Object.defineProperty(Dl,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Dl.default=t,Dl}var sf;function Dx(){if(sf)return Il;sf=1,Object.defineProperty(Il,"__esModule",{value:!0});const e=Ca.__importDefault(Ix());class n{constructor(o){var c,d;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(c=o.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=o.signal,this.isMaybeSingle=(d=o.isMaybeSingle)!==null&&d!==void 0?d:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,c){return this.headers=new Headers(this.headers),this.headers.set(o,c),this}then(o,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let x=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async w=>{var y,E,C,T;let R=null,k=null,L=null,P=w.status,D=w.statusText;if(w.ok){if(this.method!=="HEAD"){const W=await w.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?k=W:k=JSON.parse(W))}const O=(E=this.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),M=(C=w.headers.get("content-range"))===null||C===void 0?void 0:C.split("/");O&&M&&M.length>1&&(L=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(R={code:"PGRST116",details:"Results contain ".concat(k.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,L=null,P=406,D="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const O=await w.text();try{R=JSON.parse(O),Array.isArray(R)&&w.status===404&&(k=[],R=null,P=200,D="OK")}catch(M){w.status===404&&O===""?(P=204,D="No Content"):R={message:O}}if(R&&this.isMaybeSingle&&(!((T=R==null?void 0:R.details)===null||T===void 0)&&T.includes("0 rows"))&&(R=null,P=200,D="OK"),R&&this.shouldThrowOnError)throw new e.default(R)}return{error:R,data:k,count:L,status:P,statusText:D}});return this.shouldThrowOnError||(x=x.catch(w=>{var y,E,C,T,R,k;let L="";const P=w==null?void 0:w.cause;if(P){const D=(y=P==null?void 0:P.message)!==null&&y!==void 0?y:"",_=(E=P==null?void 0:P.code)!==null&&E!==void 0?E:"";L="".concat((C=w==null?void 0:w.name)!==null&&C!==void 0?C:"FetchError",": ").concat(w==null?void 0:w.message),L+="\n\nCaused by: ".concat((T=P==null?void 0:P.name)!==null&&T!==void 0?T:"Error",": ").concat(D),_&&(L+=" (".concat(_,")")),P!=null&&P.stack&&(L+="\n".concat(P.stack))}else L=(R=w==null?void 0:w.stack)!==null&&R!==void 0?R:"";return{error:{message:"".concat((k=w==null?void 0:w.name)!==null&&k!==void 0?k:"FetchError",": ").concat(w==null?void 0:w.message),details:L,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),x.then(o,c)}returns(){return this}overrideTypes(){return this}}return Il.default=n,Il}var af;function Nx(){if(af)return Rl;af=1,Object.defineProperty(Rl,"__esModule",{value:!0});const e=Ca.__importDefault(Dx());class n extends e.default{select(o){let c=!1;const d=(o!=null?o:"*").split("").map(x=>/\s/.test(x)&&!c?"":(x==='"'&&(c=!c),x)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:c=!0,nullsFirst:d,foreignTable:x,referencedTable:w=x}={}){const y=w?"".concat(w,".order"):"order",E=this.url.searchParams.get(y);return this.url.searchParams.set(y,"".concat(E?"".concat(E,","):"").concat(o,".").concat(c?"asc":"desc").concat(d===void 0?"":d?".nullsfirst":".nullslast")),this}limit(o,{foreignTable:c,referencedTable:d=c}={}){const x=typeof d>"u"?"limit":"".concat(d,".limit");return this.url.searchParams.set(x,"".concat(o)),this}range(o,c,{foreignTable:d,referencedTable:x=d}={}){const w=typeof x>"u"?"offset":"".concat(x,".offset"),y=typeof x>"u"?"limit":"".concat(x,".limit");return this.url.searchParams.set(w,"".concat(o)),this.url.searchParams.set(y,"".concat(c-o+1)),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:c=!1,settings:d=!1,buffers:x=!1,wal:w=!1,format:y="text"}={}){var E;const C=[o?"analyze":null,c?"verbose":null,d?"settings":null,x?"buffers":null,w?"wal":null].filter(Boolean).join("|"),T=(E=this.headers.get("Accept"))!==null&&E!==void 0?E:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(y,'; for="').concat(T,'"; options=').concat(C,";")),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(o)),this}}return Rl.default=n,Rl}var of;function i1(){if(of)return Ol;of=1,Object.defineProperty(Ol,"__esModule",{value:!0});const e=Ca.__importDefault(Nx()),n=new RegExp("[,()]");class s extends e.default{eq(c,d){return this.url.searchParams.append(c,"eq.".concat(d)),this}neq(c,d){return this.url.searchParams.append(c,"neq.".concat(d)),this}gt(c,d){return this.url.searchParams.append(c,"gt.".concat(d)),this}gte(c,d){return this.url.searchParams.append(c,"gte.".concat(d)),this}lt(c,d){return this.url.searchParams.append(c,"lt.".concat(d)),this}lte(c,d){return this.url.searchParams.append(c,"lte.".concat(d)),this}like(c,d){return this.url.searchParams.append(c,"like.".concat(d)),this}likeAllOf(c,d){return this.url.searchParams.append(c,"like(all).{".concat(d.join(","),"}")),this}likeAnyOf(c,d){return this.url.searchParams.append(c,"like(any).{".concat(d.join(","),"}")),this}ilike(c,d){return this.url.searchParams.append(c,"ilike.".concat(d)),this}ilikeAllOf(c,d){return this.url.searchParams.append(c,"ilike(all).{".concat(d.join(","),"}")),this}ilikeAnyOf(c,d){return this.url.searchParams.append(c,"ilike(any).{".concat(d.join(","),"}")),this}regexMatch(c,d){return this.url.searchParams.append(c,"match.".concat(d)),this}regexIMatch(c,d){return this.url.searchParams.append(c,"imatch.".concat(d)),this}is(c,d){return this.url.searchParams.append(c,"is.".concat(d)),this}isDistinct(c,d){return this.url.searchParams.append(c,"isdistinct.".concat(d)),this}in(c,d){const x=Array.from(new Set(d)).map(w=>typeof w=="string"&&n.test(w)?'"'.concat(w,'"'):"".concat(w)).join(",");return this.url.searchParams.append(c,"in.(".concat(x,")")),this}contains(c,d){return typeof d=="string"?this.url.searchParams.append(c,"cs.".concat(d)):Array.isArray(d)?this.url.searchParams.append(c,"cs.{".concat(d.join(","),"}")):this.url.searchParams.append(c,"cs.".concat(JSON.stringify(d))),this}containedBy(c,d){return typeof d=="string"?this.url.searchParams.append(c,"cd.".concat(d)):Array.isArray(d)?this.url.searchParams.append(c,"cd.{".concat(d.join(","),"}")):this.url.searchParams.append(c,"cd.".concat(JSON.stringify(d))),this}rangeGt(c,d){return this.url.searchParams.append(c,"sr.".concat(d)),this}rangeGte(c,d){return this.url.searchParams.append(c,"nxl.".concat(d)),this}rangeLt(c,d){return this.url.searchParams.append(c,"sl.".concat(d)),this}rangeLte(c,d){return this.url.searchParams.append(c,"nxr.".concat(d)),this}rangeAdjacent(c,d){return this.url.searchParams.append(c,"adj.".concat(d)),this}overlaps(c,d){return typeof d=="string"?this.url.searchParams.append(c,"ov.".concat(d)):this.url.searchParams.append(c,"ov.{".concat(d.join(","),"}")),this}textSearch(c,d,{config:x,type:w}={}){let y="";w==="plain"?y="pl":w==="phrase"?y="ph":w==="websearch"&&(y="w");const E=x===void 0?"":"(".concat(x,")");return this.url.searchParams.append(c,"".concat(y,"fts").concat(E,".").concat(d)),this}match(c){return Object.entries(c).forEach(([d,x])=>{this.url.searchParams.append(d,"eq.".concat(x))}),this}not(c,d,x){return this.url.searchParams.append(c,"not.".concat(d,".").concat(x)),this}or(c,{foreignTable:d,referencedTable:x=d}={}){const w=x?"".concat(x,".or"):"or";return this.url.searchParams.append(w,"(".concat(c,")")),this}filter(c,d,x){return this.url.searchParams.append(c,"".concat(d,".").concat(x)),this}}return Ol.default=s,Ol}var lf;function Mx(){if(lf)return Tl;lf=1,Object.defineProperty(Tl,"__esModule",{value:!0});const e=Ca.__importDefault(i1());class n{constructor(o,{headers:c={},schema:d,fetch:x}){this.url=o,this.headers=new Headers(c),this.schema=d,this.fetch=x}select(o,c){const{head:d=!1,count:x}=c!=null?c:{},w=d?"HEAD":"GET";let y=!1;const E=(o!=null?o:"*").split("").map(C=>/\s/.test(C)&&!y?"":(C==='"'&&(y=!y),C)).join("");return this.url.searchParams.set("select",E),x&&this.headers.append("Prefer","count=".concat(x)),new e.default({method:w,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:c,defaultToNull:d=!0}={}){var x;const w="POST";if(c&&this.headers.append("Prefer","count=".concat(c)),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((E,C)=>E.concat(Object.keys(C)),[]);if(y.length>0){const E=[...new Set(y)].map(C=>'"'.concat(C,'"'));this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}upsert(o,{onConflict:c,ignoreDuplicates:d=!1,count:x,defaultToNull:w=!0}={}){var y;const E="POST";if(this.headers.append("Prefer","resolution=".concat(d?"ignore":"merge","-duplicates")),c!==void 0&&this.url.searchParams.set("on_conflict",c),x&&this.headers.append("Prefer","count=".concat(x)),w||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const C=o.reduce((T,R)=>T.concat(Object.keys(R)),[]);if(C.length>0){const T=[...new Set(C)].map(R=>'"'.concat(R,'"'));this.url.searchParams.set("columns",T.join(","))}}return new e.default({method:E,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(o,{count:c}={}){var d;const x="PATCH";return c&&this.headers.append("Prefer","count=".concat(c)),new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var c;const d="DELETE";return o&&this.headers.append("Prefer","count=".concat(o)),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Tl.default=n,Tl}var cf;function hw(){if(cf)return Sl;cf=1,Object.defineProperty(Sl,"__esModule",{value:!0});const t=Ca,e=t.__importDefault(Mx()),n=t.__importDefault(i1());class s{constructor(c,{headers:d={},schema:x,fetch:w}={}){this.url=c,this.headers=new Headers(d),this.schemaName=x,this.fetch=w}from(c){if(!c||typeof c!="string"||c.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const d=new URL("".concat(this.url,"/").concat(c));return new e.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new s(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,d={},{head:x=!1,get:w=!1,count:y}={}){var E;let C;const T=new URL("".concat(this.url,"/rpc/").concat(c));let R;x||w?(C=x?"HEAD":"GET",Object.entries(d).filter(([L,P])=>P!==void 0).map(([L,P])=>[L,Array.isArray(P)?"{".concat(P.join(","),"}"):"".concat(P)]).forEach(([L,P])=>{T.searchParams.append(L,P)})):(C="POST",R=d);const k=new Headers(this.headers);return y&&k.set("Prefer","count=".concat(y)),new n.default({method:C,url:T,headers:k,schema:this.schemaName,body:R,fetch:(E=this.fetch)!==null&&E!==void 0?E:fetch})}}return Sl.default=s,Sl}Object.defineProperty(hn,"__esModule",{value:!0});var Bx=hn.PostgrestError=Gx=hn.PostgrestBuilder=Hx=hn.PostgrestTransformBuilder=zx=hn.PostgrestFilterBuilder=Ux=hn.PostgrestQueryBuilder=jx=hn.PostgrestClient=void 0;const Sa=Ca,kx=Sa.__importDefault(hw());var jx=hn.PostgrestClient=kx.default;const Lx=Sa.__importDefault(Mx());var Ux=hn.PostgrestQueryBuilder=Lx.default;const Px=Sa.__importDefault(i1());var zx=hn.PostgrestFilterBuilder=Px.default;const Fx=Sa.__importDefault(Nx());var Hx=hn.PostgrestTransformBuilder=Fx.default;const Vx=Sa.__importDefault(Dx());var Gx=hn.PostgrestBuilder=Vx.default;const qx=Sa.__importDefault(Ix());Bx=hn.PostgrestError=qx.default;var Xx=hn.default={PostgrestClient:kx.default,PostgrestQueryBuilder:Lx.default,PostgrestFilterBuilder:Px.default,PostgrestTransformBuilder:Fx.default,PostgrestBuilder:Vx.default,PostgrestError:qx.default};const dw=Qf({__proto__:null,get PostgrestBuilder(){return Gx},get PostgrestClient(){return jx},get PostgrestError(){return Bx},get PostgrestFilterBuilder(){return zx},get PostgrestQueryBuilder(){return Ux},get PostgrestTransformBuilder(){return Hx},default:Xx},[hn]),{PostgrestClient:fw,PostgrestQueryBuilder:hb,PostgrestFilterBuilder:db,PostgrestTransformBuilder:fb,PostgrestBuilder:gb,PostgrestError:xb}=Xx||dw;class gw{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(o," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(o," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+="\n\nSuggested solution: ".concat(e.workaround)),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch(e){return!1}}}const xw="2.84.0",mw="realtime-js/".concat(xw),Wx="1.0.0",pw="2.0.0",uf=Wx,Kh=1e4,ww=1e3,yw=100;var Qr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Qr||(Qr={}));var kt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(kt||(kt={}));var ci;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ci||(ci={}));var Jh;(function(t){t.websocket="websocket"})(Jh||(Jh={}));var Zr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zr||(Zr={}));class bw{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,s,o,c;const d=e.topic,x=(n=e.ref)!==null&&n!==void 0?n:"",w=(s=e.join_ref)!==null&&s!==void 0?s:"",y=e.payload.event,E=(c=(o=e.payload)===null||o===void 0?void 0:o.payload)!==null&&c!==void 0?c:new ArrayBuffer(0),C=this.USER_BROADCAST_PUSH_META_LENGTH+w.length+x.length+d.length+y.length,T=new ArrayBuffer(this.HEADER_LENGTH+C);let R=new DataView(T),k=0;R.setUint8(k++,this.KINDS.userBroadcastPush),R.setUint8(k++,w.length),R.setUint8(k++,x.length),R.setUint8(k++,d.length),R.setUint8(k++,y.length),R.setUint8(k++,this.BINARY_ENCODING),Array.from(w,P=>R.setUint8(k++,P.charCodeAt(0))),Array.from(x,P=>R.setUint8(k++,P.charCodeAt(0))),Array.from(d,P=>R.setUint8(k++,P.charCodeAt(0))),Array.from(y,P=>R.setUint8(k++,P.charCodeAt(0)));var L=new Uint8Array(T.byteLength+E.byteLength);return L.set(new Uint8Array(T),0),L.set(new Uint8Array(E),T.byteLength),L.buffer}_encodeJsonUserBroadcastPush(e){var n,s,o,c;const d=e.topic,x=(n=e.ref)!==null&&n!==void 0?n:"",w=(s=e.join_ref)!==null&&s!==void 0?s:"",y=e.payload.event,E=(c=(o=e.payload)===null||o===void 0?void 0:o.payload)!==null&&c!==void 0?c:{},T=new TextEncoder().encode(JSON.stringify(E)).buffer,R=this.USER_BROADCAST_PUSH_META_LENGTH+w.length+x.length+d.length+y.length,k=new ArrayBuffer(this.HEADER_LENGTH+R);let L=new DataView(k),P=0;L.setUint8(P++,this.KINDS.userBroadcastPush),L.setUint8(P++,w.length),L.setUint8(P++,x.length),L.setUint8(P++,d.length),L.setUint8(P++,y.length),L.setUint8(P++,this.JSON_ENCODING),Array.from(w,_=>L.setUint8(P++,_.charCodeAt(0))),Array.from(x,_=>L.setUint8(P++,_.charCodeAt(0))),Array.from(d,_=>L.setUint8(P++,_.charCodeAt(0))),Array.from(y,_=>L.setUint8(P++,_.charCodeAt(0)));var D=new Uint8Array(k.byteLength+T.byteLength);return D.set(new Uint8Array(k),0),D.set(new Uint8Array(T),k.byteLength),D.buffer}decode(e,n){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return n(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,c,d,x,w]=s;return n({join_ref:o,ref:c,topic:d,event:x,payload:w})}return n({})}_binaryDecode(e){const n=new DataView(e),s=n.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,o)}}_decodeUserBroadcast(e,n,s){const o=n.getUint8(1),c=n.getUint8(2),d=n.getUint8(3),x=n.getUint8(4);let w=this.HEADER_LENGTH+4;const y=s.decode(e.slice(w,w+o));w=w+o;const E=s.decode(e.slice(w,w+c));w=w+c;const C=s.decode(e.slice(w,w+d));w=w+d;const T=e.slice(w,e.byteLength),R=x===this.JSON_ENCODING?JSON.parse(s.decode(T)):T,k={type:this.BROADCAST_EVENT,event:E,payload:R};return d>0&&(k.meta=JSON.parse(C)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class Yx{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(et||(et={}));const hf=(t,e,n={})=>{var s;const o=(s=n.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((c,d)=>(c[d]=vw(d,t,e,o),c),{}):{}},vw=(t,e,n,s)=>{const o=e.find(x=>x.name===t),c=o==null?void 0:o.type,d=n[t];return c&&!s.includes(c)?Qx(c,d):$h(d)},Qx=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Cw(e,n)}switch(t){case et.bool:return Aw(e);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return Ew(e);case et.json:case et.jsonb:return _w(e);case et.timestamp:return Sw(e);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return $h(e);default:return $h(e)}},$h=t=>t,Aw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ew=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},_w=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log("JSON parse error: ".concat(e)),t}return t},Cw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let c;const d=t.slice(1,n);try{c=JSON.parse("["+d+"]")}catch(x){c=d?d.split(","):[]}return c.map(x=>Qx(e,x))}return t},Sw=t=>typeof t=="string"?t.replace(" ","T"):t,Zx=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Yu{constructor(e,n,s={},o=Kh){this.channel=e,this.event=n,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var df;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(df||(df={}));class mo{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:d,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mo.syncState(this.state,o,c,d),this.pendingDiffs.forEach(w=>{this.state=mo.syncDiff(this.state,w,c,d)}),this.pendingDiffs=[],x()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:d,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=mo.syncDiff(this.state,o,c,d),x())}),this.onJoin((o,c,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:d})}),this.onLeave((o,c,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,o){const c=this.cloneDeep(e),d=this.transformState(n),x={},w={};return this.map(c,(y,E)=>{d[y]||(w[y]=E)}),this.map(d,(y,E)=>{const C=c[y];if(C){const T=E.map(P=>P.presence_ref),R=C.map(P=>P.presence_ref),k=E.filter(P=>R.indexOf(P.presence_ref)<0),L=C.filter(P=>T.indexOf(P.presence_ref)<0);k.length>0&&(x[y]=k),L.length>0&&(w[y]=L)}else x[y]=E}),this.syncDiff(c,{joins:x,leaves:w},s,o)}static syncDiff(e,n,s,o){const{joins:c,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(x,w)=>{var y;const E=(y=e[x])!==null&&y!==void 0?y:[];if(e[x]=this.cloneDeep(w),E.length>0){const C=e[x].map(R=>R.presence_ref),T=E.filter(R=>C.indexOf(R.presence_ref)<0);e[x].unshift(...T)}s(x,E,w)}),this.map(d,(x,w)=>{let y=e[x];if(!y)return;const E=w.map(C=>C.presence_ref);y=y.filter(C=>E.indexOf(C.presence_ref)<0),e[x]=y,o(x,y,w),y.length===0&&delete e[x]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const o=e[s];return"metas"in o?n[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[s]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ff;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ff||(ff={}));var po;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(po||(po={}));var ki;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ki||(ki={}));class r1{constructor(e,n={config:{}},s){var o,c;if(this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Yu(this,ci.join,this.params,this.timeout),this.rejoinTimer=new Yx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=kt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),d),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),d),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ci.reply,{},(d,x)=>{this._trigger(this._replyEventName(x),d)}),this.presence=new mo(this),this.broadcastEndpointURL=Zx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e,n=this.timeout){var s,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==kt.closed){const{config:{broadcast:d,presence:x,private:w}}=this.params,y=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(R=>R.filter))!==null&&o!==void 0?o:[],E=!!this.bindings[po.PRESENCE]&&this.bindings[po.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,C={},T={broadcast:d,presence:Object.assign(Object.assign({},x),{enabled:E}),postgres_changes:y,private:w};this.socket.accessTokenValue&&(C.access_token=this.socket.accessTokenValue),this._onError(R=>e==null?void 0:e(ki.CHANNEL_ERROR,R)),this._onClose(()=>e==null?void 0:e(ki.CLOSED)),this.updateJoinPayload(Object.assign({config:T},C)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:R})=>{var k;if(this.socket.setAuth(),R===void 0){e==null||e(ki.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,P=(k=L==null?void 0:L.length)!==null&&k!==void 0?k:0,D=[];for(let _=0;_<P;_++){const O=L[_],{filter:{event:M,schema:W,table:H,filter:U}}=O,Z=R&&R[_];if(Z&&Z.event===M&&Z.schema===W&&Z.table===H&&Z.filter===U)D.push(Object.assign(Object.assign({},O),{id:Z.id}));else{this.unsubscribe(),this.state=kt.errored,e==null||e(ki.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(ki.SUBSCRIBED);return}}).receive("error",R=>{this.state=kt.errored,e==null||e(ki.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ki.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===kt.joined&&e===po.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async httpSend(e,n,s={}){var o;const c=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"";if(n==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},x=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(x.status===202)return{success:!0};let w=x.statusText;try{const y=await x.json();w=y.error||y.message||w}catch(y){}return Promise.reject(new Error(w))}async send(e,n={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=e,w={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,w,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=y.body)===null||o===void 0?void 0:o.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,x,w;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((w=(x=(d=this.params)===null||d===void 0?void 0:d.config)===null||x===void 0?void 0:x.broadcast)===null||w===void 0)&&w.ack)&&c("ok"),y.receive("ok",()=>c("ok")),y.receive("error",()=>c("error")),y.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kt.leaving;const n=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(ci.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Yu(this,ci.leave,{},e),s.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kt.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),d=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(c),d}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let o=new Yu(this,e,n,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(n.event),n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var o,c;const d=e.toLocaleLowerCase(),{close:x,error:w,leave:y,join:E}=ci;if(s&&[x,w,y,E].indexOf(d)>=0&&s!==this._joinRef())return;let T=this._onMessage(d,n,s);if(n&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(R=>{var k,L,P;return((k=R.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(L=R.filter)===null||L===void 0?void 0:L.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===d}).map(R=>R.callback(T,s)):(c=this.bindings[d])===null||c===void 0||c.filter(R=>{var k,L,P,D,_,O;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in R){const M=R.id,W=(k=R.filter)===null||k===void 0?void 0:k.event;return M&&((L=n.ids)===null||L===void 0?void 0:L.includes(M))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const M=(_=(D=R==null?void 0:R.filter)===null||D===void 0?void 0:D.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return M==="*"||M===((O=n==null?void 0:n.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===d}).map(R=>{if(typeof T=="object"&&"ids"in T){const k=T.data,{schema:L,table:P,commit_timestamp:D,type:_,errors:O}=k;T=Object.assign(Object.assign({},{schema:L,table:P,commit_timestamp:D,eventType:_,new:{},old:{},errors:O}),this._getPayloadRecords(k))}R.callback(T,s)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,n,s){const o=e.toLocaleLowerCase(),c={type:o,filter:n,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&r1.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ci.close,{},e)}_onError(e){this._on(ci.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hf(e.columns,e.old_record)),n}}const Qu=()=>{},Nl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Tw=[1e3,2e3,5e3,1e4],Ow=1e4,Rw='\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });';class Iw{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kh,this.transport=null,this.heartbeatIntervalMs=Nl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qu,this.ref=0,this.reconnectTimer=null,this.vsn=uf,this.logger=Qu,this.conn=null,this.sendBuffer=[],this.serializer=new bw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint="".concat(e,"/").concat(Jh.websocket),this.httpEndpoint=Zx(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error("".concat(n,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })'):new Error("WebSocket not available: ".concat(n))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n!=null?n:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Qr.connecting:return Zr.Connecting;case Qr.open:return Zr.Open;case Qr.closing:return Zr.Closing;default:return Zr.Closed}}isConnected(){return this.connectionState()===Zr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s="realtime:".concat(e),o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new r1("realtime:".concat(e),n,this);return this.channels.push(c),c}}push(e){const{topic:n,event:s,payload:o,ref:c}=e,d=()=>{this.encode(e,x=>{var w;(w=this.conn)===null||w===void 0||w.send(x)})};this.log("push","".concat(n," ").concat(s," (").concat(c,")"),o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ww,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Nl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:c,ref:d}=n,x=d?"(".concat(d,")"):"",w=c.status||"";this.log("receive","".concat(w," ").concat(s," ").concat(o," ").concat(x).trim(),c),this.channels.filter(y=>y._isMember(s)).forEach(y=>y._trigger(o,c,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qr.open||this.conn.readyState===Qr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ci.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return"".concat(e).concat(s).concat(o)}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([Rw],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const o={access_token:n,version:mw};n&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(ci.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error","error setting auth in ".concat(e),n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(o){this.log("error","error in ".concat(e," callback"),o)}})}catch(s){this.log("error","error triggering ".concat(e," callbacks"),s)}}_setupReconnectionTimer(){this.reconnectTimer=new Yx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Nl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,o,c,d,x,w,y,E,C,T,R;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Kh,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:Nl.HEARTBEAT_INTERVAL,this.worker=(c=e==null?void 0:e.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(x=e==null?void 0:e.heartbeatCallback)!==null&&x!==void 0?x:Qu,this.vsn=(w=e==null?void 0:e.vsn)!==null&&w!==void 0?w:uf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=e==null?void 0:e.reconnectAfterMs)!==null&&y!==void 0?y:k=>Tw[k-1]||Ow,this.vsn){case Wx:this.encode=(E=e==null?void 0:e.encode)!==null&&E!==void 0?E:(k,L)=>L(JSON.stringify(k)),this.decode=(C=e==null?void 0:e.decode)!==null&&C!==void 0?C:(k,L)=>L(JSON.parse(k));break;case pw:this.encode=(T=e==null?void 0:e.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(R=e==null?void 0:e.decode)!==null&&R!==void 0?R:this.serializer.decode.bind(this.serializer);break;default:throw new Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class s1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Dw extends s1{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class e0 extends s1{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const a1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Nw=()=>Response,t0=t=>{if(Array.isArray(t))return t.map(n=>t0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const o=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[o]=t0(s)}),e},Mw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zu=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Bw=(t,e,n)=>ce(void 0,void 0,void 0,function*(){const s=yield Nw();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(o=>{const c=t.status||500,d=(o==null?void 0:o.statusCode)||c+"";e(new Dw(Zu(o),c,d))}).catch(o=>{e(new e0(Zu(o),o))}):e(new e0(Zu(t),t))}),kw=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?o:(Mw(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function Qo(t,e,n,s,o,c){return ce(this,void 0,void 0,function*(){return new Promise((d,x)=>{t(n,kw(e,s,o,c)).then(w=>{if(!w.ok)throw w;return s!=null&&s.noResolveJson?w:w.json()}).then(w=>d(w)).catch(w=>Bw(w,x,s))})})}function Mo(t,e,n,s){return ce(this,void 0,void 0,function*(){return Qo(t,"GET",e,n,s)})}function oi(t,e,n,s,o){return ce(this,void 0,void 0,function*(){return Qo(t,"POST",e,s,o,n)})}function n0(t,e,n,s,o){return ce(this,void 0,void 0,function*(){return Qo(t,"PUT",e,s,o,n)})}function jw(t,e,n,s){return ce(this,void 0,void 0,function*(){return Qo(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function o1(t,e,n,s,o){return ce(this,void 0,void 0,function*(){return Qo(t,"DELETE",e,s,o,n)})}class Lw{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}var Kx;class Uw{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Kx]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lw(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}})}}Kx=Symbol.toStringTag;const Pw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zw{constructor(e,n={},s,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=s,this.fetch=a1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,s,o){return ce(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},gf),o);let x=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const w=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),w&&c.append("metadata",this.encodeMetadata(w)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),w&&!c.has("metadata")&&c.append("metadata",this.encodeMetadata(w))):(c=s,x["cache-control"]="max-age=".concat(d.cacheControl),x["content-type"]=d.contentType,w&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(w))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),o!=null&&o.headers&&(x=Object.assign(Object.assign({},x),o.headers));const y=this._removeEmptyFolders(n),E=this._getFinalPath(y),C=yield(e=="PUT"?n0:oi)(this.fetch,"".concat(this.url,"/object/").concat(E),c,Object.assign({headers:x},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:y,id:C.Id,fullPath:C.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(gt(c))return{data:null,error:c};throw c}})}upload(e,n,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,o){return ce(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(e),d=this._getFinalPath(c),x=new URL(this.url+"/object/upload/sign/".concat(d));x.searchParams.set("token",n);try{let w;const y=Object.assign({upsert:gf.upsert},o),E=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&s instanceof Blob?(w=new FormData,w.append("cacheControl",y.cacheControl),w.append("",s)):typeof FormData<"u"&&s instanceof FormData?(w=s,w.append("cacheControl",y.cacheControl)):(w=s,E["cache-control"]="max-age=".concat(y.cacheControl),E["content-type"]=y.contentType);const C=yield n0(this.fetch,x.toString(),w,{headers:E});return{data:{path:c,fullPath:C.Key},error:null}}catch(w){if(this.shouldThrowOnError)throw w;if(gt(w))return{data:null,error:w};throw w}})}createSignedUploadUrl(e,n){return ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const c=yield oi(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(s),{},{headers:o}),d=new URL(this.url+c.url),x=d.searchParams.get("token");if(!x)throw new s1("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:x},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}update(e,n,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return ce(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}copy(e,n,s){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield oi(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,s){return ce(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),c=yield oi(this.fetch,"".concat(this.url,"/object/sign/").concat(o),Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s!=null&&s.download?"&download=".concat(s.download===!0?"":s.download):"";return c={signedUrl:encodeURI("".concat(this.url).concat(c.signedURL).concat(d))},{data:c,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,s){return ce(this,void 0,void 0,function*(){try{const o=yield oi(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:n,paths:e},{headers:this.headers}),c=s!=null&&s.download?"&download=".concat(s.download===!0?"":s.download):"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI("".concat(this.url).concat(d.signedURL).concat(c)):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),d=c?"?".concat(c):"",x=this._getFinalPath(e),w=()=>Mo(this.fetch,"".concat(this.url,"/").concat(o,"/").concat(x).concat(d),{headers:this.headers,noResolveJson:!0});return new Uw(w,this.shouldThrowOnError)}info(e){return ce(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Mo(this.fetch,"".concat(this.url,"/object/info/").concat(n),{headers:this.headers});return{data:t0(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}exists(e){return ce(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield jw(this.fetch,"".concat(this.url,"/object/").concat(n),{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s)&&s instanceof e0){const o=s.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),o=[],c=n!=null&&n.download?"download=".concat(n.download===!0?"":n.download):"";c!==""&&o.push(c);const x=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",w=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});w!==""&&o.push(w);let y=o.join("&");return y!==""&&(y="?".concat(y)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(x,"/public/").concat(s).concat(y))}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield o1(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}list(e,n,s){return ce(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Pw),n),{prefix:e||""});return{data:yield oi(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}listV2(e,n){return ce(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield oi(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push("width=".concat(e.width)),e.height&&n.push("height=".concat(e.height)),e.resize&&n.push("resize=".concat(e.resize)),e.format&&n.push("format=".concat(e.format)),e.quality&&n.push("quality=".concat(e.quality)),n.join("&")}}const Jx="2.84.0",$x={"X-Client-Info":"storage-js/".concat(Jx)};class Fw{constructor(e,n={},s,o){this.shouldThrowOnError=!1;const c=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$x),n),this.fetch=a1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Mo(this.fetch,"".concat(this.url,"/bucket").concat(n),{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}createBucket(e){return ce(this,arguments,void 0,function*(n,s={public:!1}){try{return{data:yield oi(this.fetch,"".concat(this.url,"/bucket"),{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return ce(this,void 0,void 0,function*(){try{return{data:yield n0(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield o1(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class Hw{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$x),n),this.fetch=a1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield oi(this.fetch,"".concat(this.url,"/bucket"),{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const s=n.toString(),o=s?"".concat(this.url,"/bucket?").concat(s):"".concat(this.url,"/bucket");return{data:yield Mo(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield o1(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}}const l1={"X-Client-Info":"storage-js/".concat(Jx),"Content-Type":"application/json"};class em extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function In(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Ku extends em{constructor(e,n,s){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Vw extends em{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var xf;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(xf||(xf={}));const c1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Gw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qw=(t,e,n)=>ce(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const o=t.status||500,c=t;if(typeof c.json=="function")c.json().then(d=>{const x=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||o+"";e(new Ku(mf(d),o,x))}).catch(()=>{const d=o+"",x=c.statusText||"HTTP ".concat(o," error");e(new Ku(x,o,d))});else{const d=o+"",x=c.statusText||"HTTP ".concat(o," error");e(new Ku(x,o,d))}}else e(new Vw(mf(t),t))}),Xw=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(Gw(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),n)):o};function Ww(t,e,n,s,o,c){return ce(this,void 0,void 0,function*(){return new Promise((d,x)=>{t(n,Xw(e,s,o,c)).then(w=>{if(!w.ok)throw w;if(s!=null&&s.noResolveJson)return w;const y=w.headers.get("content-type");return!y||!y.includes("application/json")?{}:w.json()}).then(w=>d(w)).catch(w=>qw(w,x,s))})})}function Dn(t,e,n,s,o){return ce(this,void 0,void 0,function*(){return Ww(t,"POST",e,s,o,n)})}class Yw{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},l1),n),this.fetch=c1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,"".concat(this.url,"/CreateIndex"),e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ce(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,"".concat(this.url,"/GetIndex"),{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(In(s))return{data:null,error:s};throw s}})}listIndexes(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,"".concat(this.url,"/ListIndexes"),e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ce(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,"".concat(this.url,"/DeleteIndex"),{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(In(s))return{data:null,error:s};throw s}})}}class Qw{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},l1),n),this.fetch=c1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Dn(this.fetch,"".concat(this.url,"/PutVectors"),e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}getVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,"".concat(this.url,"/GetVectors"),e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}listVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return{data:yield Dn(this.fetch,"".concat(this.url,"/ListVectors"),e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}queryVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,"".concat(this.url,"/QueryVectors"),e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Dn(this.fetch,"".concat(this.url,"/DeleteVectors"),e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}}class Zw{constructor(e,n={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},l1),n),this.fetch=c1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,"".concat(this.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,"".concat(this.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}listBuckets(){return ce(this,arguments,void 0,function*(e={}){try{return{data:yield Dn(this.fetch,"".concat(this.url,"/ListVectorBuckets"),e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,"".concat(this.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}}class Kw extends Zw{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Jw(this.url,this.headers,e,this.fetch)}}class Jw extends Yw{constructor(e,n,s,o){super(e,n,o),this.vectorBucketName=s}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ce(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ce(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ce(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ce(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new $w(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class $w extends Qw{constructor(e,n,s,o,c){super(e,n,c),this.vectorBucketName=s,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ce(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ce(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ce(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ce(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ce(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class e8 extends Fw{constructor(e,n={},s,o){super(e,n,s,o)}from(e){return new zw(this.url,this.headers,e,this.fetch)}get vectors(){return new Kw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hw(this.url+"/iceberg",this.headers,this.fetch)}}const t8="2.84.0";let $a="";typeof Deno<"u"?$a="deno":typeof document<"u"?$a="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$a="react-native":$a="node";const n8={"X-Client-Info":"supabase-js-".concat($a,"/").concat(t8)},i8={headers:n8},r8={schema:"public"},s8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a8={},o8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),l8=()=>Headers,c8=(t,e,n)=>{const s=o8(n),o=l8();return async(c,d)=>{var x;const w=(x=await e())!==null&&x!==void 0?x:t;let y=new o(d==null?void 0:d.headers);return y.has("apikey")||y.set("apikey",t),y.has("Authorization")||y.set("Authorization","Bearer ".concat(w)),s(c,Object.assign(Object.assign({},d),{headers:y}))}};function u8(t){return t.endsWith("/")?t:t+"/"}function h8(t,e){var n,s;const{db:o,auth:c,realtime:d,global:x}=t,{db:w,auth:y,realtime:E,global:C}=e,T={db:Object.assign(Object.assign({},w),o),auth:Object.assign(Object.assign({},y),c),realtime:Object.assign(Object.assign({},E),d),storage:{},global:Object.assign(Object.assign(Object.assign({},C),x),{headers:Object.assign(Object.assign({},(n=C==null?void 0:C.headers)!==null&&n!==void 0?n:{}),(s=x==null?void 0:x.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?T.accessToken=t.accessToken:delete T.accessToken,T}function d8(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(u8(e))}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const tm="2.84.0",Us=30*1e3,i0=3,Ju=i0*Us,f8="http://localhost:9999",g8="supabase.auth.token",x8={"X-Client-Info":"gotrue-js/".concat(tm)},r0="X-Supabase-Api-Version",nm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,p8=10*60*1e3;class Bo extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class w8 extends Bo{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function y8(t){return le(t)&&t.name==="AuthApiError"}class Kr extends Bo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Br extends Bo{constructor(e,n,s,o){super(e,s,o),this.name=n,this.status=s}}class Cn extends Br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function b8(t){return le(t)&&t.name==="AuthSessionMissingError"}class Is extends Br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ml extends Br{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bl extends Br{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function v8(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}class pf extends Br{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class s0 extends Br{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function $u(t){return le(t)&&t.name==="AuthRetryableFetchError"}class wf extends Br{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class a0 extends Br{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yf=" 	\n\r=".split(""),A8=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yf.length;e+=1)t[yf[e].charCodeAt(0)]=-2;for(let e=0;e<vc.length;e+=1)t[vc[e].charCodeAt(0)]=e;return t})();function bf(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(vc[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(vc[s]),e.queuedBits-=6}}function im(t,e,n){const s=A8[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(t),'"'))}}function vf(t){const e=[],n=d=>{e.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=d=>{C8(d,s,n)};for(let d=0;d<t.length;d+=1)im(t.charCodeAt(d),o,c);return e.join("")}function E8(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error("Unrecognized Unicode codepoint: ".concat(t.toString(16)))}function _8(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}E8(s,e)}}function C8(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function oa(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)im(t.charCodeAt(o),n,s);return new Uint8Array(e)}function S8(t){const e=[];return _8(t,n=>e.push(n)),new Uint8Array(e)}function es(t){const e=[],n={queue:0,queuedBits:0},s=o=>{e.push(o)};return t.forEach(o=>bf(o,n,s)),bf(null,n,s),e.join("")}function T8(t){return Math.round(Date.now()/1e3)+t}function O8(){return Symbol("auth-callback")}const Zt=()=>typeof window<"u"&&typeof document<"u",Vr={tested:!1,writable:!1},rm=()=>{if(!Zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(e){return!1}if(Vr.tested)return Vr.writable;const t="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Vr.tested=!0,Vr.writable=!0}catch(e){Vr.tested=!0,Vr.writable=!1}return Vr.writable};function R8(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,c)=>{e[c]=o})}catch(s){}return n.searchParams.forEach((s,o)=>{e[o]=s}),e}const sm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),I8=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ps=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Gr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},lr=async(t,e)=>{await t.removeItem(e)};class Vc{constructor(){this.promise=new Vc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Vc.promiseConstructor=Promise;function eh(t){const e=t.split(".");if(e.length!==3)throw new a0("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!m8.test(e[s]))throw new a0("JWT not in base64url format");return{header:JSON.parse(vf(e[0])),payload:JSON.parse(vf(e[1])),signature:oa(e[2]),raw:{header:e[0],payload:e[1]}}}async function D8(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function N8(t,e){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await t(c);if(!e(c,null,d)){s(d);return}}catch(d){if(!e(c,d)){o(d);return}}})()})}function M8(t){return("0"+t.toString(16)).substr(-2)}function B8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let o="";for(let c=0;c<56;c++)o+=n.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,M8).join("")}async function k8(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function j8(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await k8(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ds(t,e,n=!1){const s=B8();let o=s;n&&(o+="/PASSWORD_RECOVERY"),await Ps(t,"".concat(e,"-code-verifier"),o);const c=await j8(s);return[c,s===c?"plain":"s256"]}const L8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U8(t){const e=t.headers.get(r0);if(!e||!e.match(L8))return null;try{return new Date("".concat(e,"T00:00:00.0Z"))}catch(n){return null}}function P8(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function z8(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ns(t){if(!F8.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function th(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(n,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,n)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(n,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,n)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(n,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function H8(t,e){return new Proxy(t,{get:(n,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const c=s.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,s,o)}})}function Af(t){return JSON.parse(JSON.stringify(t))}const Wr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),V8=[502,503,504];async function Ef(t){var e;if(!I8(t))throw new s0(Wr(t),0);if(V8.includes(t.status))throw new s0(Wr(t),t.status);let n;try{n=await t.json()}catch(c){throw new Kr(Wr(c),c)}let s;const o=U8(t);if(o&&o.getTime()>=nm["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new wf(Wr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Cn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new wf(Wr(n),t.status,n.weak_password.reasons);throw new w8(Wr(n),t.status||500,s)}const G8=(t,e,n,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),n))};async function me(t,e,n,s){var o;const c=Object.assign({},s==null?void 0:s.headers);c[r0]||(c[r0]=nm["2024-01-01"].name),s!=null&&s.jwt&&(c.Authorization="Bearer ".concat(s.jwt));const d=(o=s==null?void 0:s.query)!==null&&o!==void 0?o:{};s!=null&&s.redirectTo&&(d.redirect_to=s.redirectTo);const x=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",w=await q8(t,e,n+x,{headers:c,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(w):{data:Object.assign({},w),error:null}}async function q8(t,e,n,s,o,c){const d=G8(e,s,o,c);let x;try{x=await t(n,Object.assign({},d))}catch(w){throw console.error(w),new s0(Wr(w),0)}if(x.ok||await Ef(x),s!=null&&s.noResolveJson)return x;try{return await x.json()}catch(w){await Ef(w)}}function ai(t){var e;let n=null;Y8(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=T8(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function _f(t){const e=ai(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function mr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function X8(t){return{data:t,error:null}}function W8(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:c}=t,d=Tc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:e,email_otp:n,hashed_token:s,redirect_to:o,verification_type:c},w=Object.assign({},d);return{data:{properties:x,user:w},error:null}}function Cf(t){return t}function Y8(t){return t.access_token&&t.refresh_token&&t.expires_in}const nh=["global","local","others"];class Q8{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=sm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=nh[0]){if(nh.indexOf(n)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(nh.join(", ")));try{return await me(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(n),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await me(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:mr})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Tc(e,["options"]),o=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(o.new_email=s==null?void 0:s.newEmail,delete o.newEmail),await me(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:o,headers:this.headers,xform:W8,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await me(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:mr})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,o,c,d,x,w;try{const y={nextPage:null,lastPage:0,total:0},E=await me(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Cf});if(E.error)throw E.error;const C=await E.json(),T=(d=E.headers.get("x-total-count"))!==null&&d!==void 0?d:0,R=(w=(x=E.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&w!==void 0?w:[];return R.length>0&&(R.forEach(k=>{const L=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);y["".concat(P,"Page")]=L}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},C),y),error:null}}catch(y){if(le(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){Ns(e);try{return await me(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:mr})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ns(e);try{return await me(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:n,headers:this.headers,xform:mr})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){Ns(e);try{return await me(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:n},xform:mr})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ns(e.userId);try{const{data:n,error:s}=await me(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:s}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ns(e.userId),Ns(e.id);try{return{data:await me(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,s,o,c,d,x,w;try{const y={nextPage:null,lastPage:0,total:0},E=await me(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Cf});if(E.error)throw E.error;const C=await E.json(),T=(d=E.headers.get("x-total-count"))!==null&&d!==void 0?d:0,R=(w=(x=E.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&w!==void 0?w:[];return R.length>0&&(R.forEach(k=>{const L=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);y["".concat(P,"Page")]=L}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},C),y),error:null}}catch(y){if(le(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(e){try{return await me(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await me(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await me(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await me(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await me(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}}function Sf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ms={debug:!!(globalThis&&rm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class am extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Z8 extends am{}async function K8(t,e,n){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Ms.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Z8('Acquiring an exclusive Navigator LockManager lock "'.concat(t,'" immediately failed'));if(Ms.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function J8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(t){typeof self<"u"&&(self.globalThis=self)}}function om(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error('@supabase/auth-js: Address "'.concat(t,'" is invalid.'));return t.toLowerCase()}function $8(t){return parseInt(t,16)}function ey(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function ty(t){var e;const{chainId:n,domain:s,expirationTime:o,issuedAt:c=new Date,nonce:d,notBefore:x,requestId:w,resources:y,scheme:E,uri:C,version:T}=t;{if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(d));if(!C)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(T));if(!((e=t.statement)===null||e===void 0)&&e.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(t.statement))}const R=om(t.address),k=E?"".concat(E,"://").concat(s):s,L=t.statement?"".concat(t.statement,"\n"):"",P="".concat(k," wants you to sign in with your Ethereum account:\n").concat(R,"\n\n").concat(L);let D="URI: ".concat(C,"\nVersion: ").concat(T,"\nChain ID: ").concat(n).concat(d?"\nNonce: ".concat(d):"","\nIssued At: ").concat(c.toISOString());if(o&&(D+="\nExpiration Time: ".concat(o.toISOString())),x&&(D+="\nNot Before: ".concat(x.toISOString())),w&&(D+="\nRequest ID: ".concat(w)),y){let _="\nResources:";for(const O of y){if(!O||typeof O!="string")throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(O));_+="\n- ".concat(O)}D+=_}return"".concat(P,"\n").concat(D)}class Rt extends Error{constructor({message:e,code:n,cause:s,name:o}){var c;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(c=o!=null?o:s instanceof Error?s.name:void 0)!==null&&c!==void 0?c:"Unknown Error",this.code=n}}class Ac extends Rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function ny({error:t,options:e}){var n,s,o;const{publicKey:c}=e;if(!c)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=c.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=c.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return c.pubKeyCredParams.filter(x=>x.type==="public-key").length===0?new Rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const d=window.location.hostname;if(lm(d)){if(c.rp.id!==d)return new Rt({message:'The RP ID "'.concat(c.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function iy({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(lm(s)){if(n.rpId!==s)return new Rt({message:'The RP ID "'.concat(n.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class ry{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const sy=new ry;function ay(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,o=Tc(t,["challenge","user","excludeCredentials"]),c=oa(e).buffer,d=Object.assign(Object.assign({},n),{id:oa(n.id).buffer}),x=Object.assign(Object.assign({},o),{challenge:c,user:d});if(s&&s.length>0){x.excludeCredentials=new Array(s.length);for(let w=0;w<s.length;w++){const y=s[w];x.excludeCredentials[w]=Object.assign(Object.assign({},y),{id:oa(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return x}function oy(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=Tc(t,["challenge","allowCredentials"]),o=oa(e).buffer,c=Object.assign(Object.assign({},s),{challenge:o});if(n&&n.length>0){c.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const x=n[d];c.allowCredentials[d]=Object.assign(Object.assign({},x),{id:oa(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return c}function ly(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:es(new Uint8Array(t.response.attestationObject)),clientDataJSON:es(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function cy(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,s=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:es(new Uint8Array(o.authenticatorData)),clientDataJSON:es(new Uint8Array(o.clientDataJSON)),signature:es(new Uint8Array(o.signature)),userHandle:o.userHandle?es(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lm(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Tf(){var t,e;return!!(Zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function uy(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",e)}:{data:null,error:new Ac("Empty credential response",e)}}catch(e){return{data:null,error:ny({error:e,options:t})}}}async function hy(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ac("Browser returned unexpected credential type",e)}:{data:null,error:new Ac("Empty credential response",e)}}catch(e){return{data:null,error:iy({error:e,options:t})}}}const dy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},fy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ec(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of t)if(o)for(const c in o){const d=o[c];if(d!==void 0)if(Array.isArray(d))s[c]=d;else if(n(d))s[c]=d;else if(e(d)){const x=s[c];e(x)?s[c]=Ec(x,d):s[c]=Ec(d)}else s[c]=d}return s}function gy(t,e){return Ec(dy,t,e||{})}function xy(t,e){return Ec(fy,t,e||{})}class my{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:s,signal:o},c){try{const{data:d,error:x}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!d)return{data:null,error:x};const w=o!=null?o:sy.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:y}=d.webauthn.credential_options.publicKey;y.name||(y.name="".concat(y.id,":").concat(s)),y.displayName||(y.displayName=y.name)}switch(d.webauthn.type){case"create":{const y=gy(d.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:E,error:C}=await uy({publicKey:y,signal:w});return E?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:E}},error:null}:{data:null,error:C}}case"request":{const y=xy(d.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:E,error:C}=await hy(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:y,signal:w}));return E?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:E}},error:null}:{data:null,error:C}}}}catch(d){return le(d)?{data:null,error:d}:{data:null,error:new Kr("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new Bo("rpId is required for WebAuthn authentication")};try{if(!Tf())return{data:null,error:new Kr("Browser does not support WebAuthn",null)};const{data:d,error:x}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:s},signal:o},{request:c});if(!d)return{data:null,error:x};const{webauthn:w}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:w.type,rpId:n,rpOrigins:s,credential_response:w.credential_response}})}catch(d){return le(d)?{data:null,error:d}:{data:null,error:new Kr("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new Bo("rpId is required for WebAuthn registration")};try{if(!Tf())return{data:null,error:new Kr("Browser does not support WebAuthn",null)};const{data:d,error:x}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(E=>{var C;return(C=E.data)===null||C===void 0?void 0:C.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(E=>E?this.client.mfa.unenroll({factorId:E==null?void 0:E.id}):void 0),{data:null,error:x};const{data:w,error:y}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:o},{create:c});return w?this._verify({factorId:d.id,challengeId:w.challengeId,webauthn:{rpId:n,rpOrigins:s,type:w.webauthn.type,credential_response:w.webauthn.credential_response}}):{data:null,error:y}}catch(d){return le(d)?{data:null,error:d}:{data:null,error:new Kr("Unexpected error in register",d)}}}}J8();const py={url:f8,storageKey:g8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:x8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Of(t,e,n){return await n()}const Bs={};class ko{get jwks(){var e,n;return(n=(e=Bs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Bs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{cachedAt:e})}constructor(e){var n,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},py),e);if(this.storageKey=c.storageKey,this.instanceID=(n=ko.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ko.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Zt()){const d="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Q8({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=sm(c.fetch),this.lock=c.lock||Of,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:Zt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=K8:this.lock=Of,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new my(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:rm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sf(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Sf(this.memoryStorage)),Zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(tm,") ").concat(new Date().toISOString())}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},s="none";if(Zt()&&(n=R8(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),Zt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(n,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),v8(c)){const w=(e=c.details)===null||e===void 0?void 0:e.code;if(w==="identity_already_exists"||w==="identity_not_found"||w==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:x}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",x),await this._saveSession(d),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return le(n)?this._returnResult({error:n}):this._returnResult({error:new Kr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,o;try{const c=await me(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:ai}),{data:d,error:x}=c;if(x||!d)return this._returnResult({data:{user:null,session:null},error:x});const w=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",w)),this._returnResult({data:{user:y,session:w},error:null})}catch(c){if(le(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(e){var n,s,o;try{let c;if("email"in e){const{email:E,password:C,options:T}=e;let R=null,k=null;this.flowType==="pkce"&&([R,k]=await Ds(this.storage,this.storageKey)),c=await me(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:E,password:C,data:(n=T==null?void 0:T.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:R,code_challenge_method:k},xform:ai})}else if("phone"in e){const{phone:E,password:C,options:T}=e;c=await me(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:E,password:C,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},channel:(o=T==null?void 0:T.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:ai})}else throw new Ml("You must provide either an email or phone number and a password");const{data:d,error:x}=c;if(x||!d)return this._returnResult({data:{user:null,session:null},error:x});const w=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",w)),this._returnResult({data:{user:y,session:w},error:null})}catch(c){if(le(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(e){try{let n;if("email"in e){const{email:c,password:d,options:x}=e;n=await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:_f})}else if("phone"in e){const{phone:c,password:d,options:x}=e;n=await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:_f})}else throw new Ml("You must provide either an email or phone number and a password");const{data:s,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const c=new Is;return this._returnResult({data:{user:null,session:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,s,o,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(n,'"'))}}async signInWithEthereum(e){var n,s,o,c,d,x,w,y,E,C,T;let R,k;if("message"in e)R=e.message,k=e.signature;else{const{chain:L,wallet:P,statement:D,options:_}=e;let O;if(Zt())if(typeof P=="object")O=P;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")O=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=P}const M=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),W=await O.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=om(W[0]);let U=(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!U){const V=await O.request({method:"eth_chainId"});U=$8(V)}const Z={domain:M.host,address:H,statement:D,uri:M.href,version:"1",chainId:U,nonce:(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(x=_==null?void 0:_.signInWithEthereum)===null||x===void 0?void 0:x.expirationTime,notBefore:(w=_==null?void 0:_.signInWithEthereum)===null||w===void 0?void 0:w.notBefore,requestId:(y=_==null?void 0:_.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(E=_==null?void 0:_.signInWithEthereum)===null||E===void 0?void 0:E.resources};R=ty(Z),k=await O.request({method:"personal_sign",params:[ey(R),H]})}try{const{data:L,error:P}=await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:k},!((C=e.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ai});if(P)throw P;if(!L||!L.session||!L.user){const D=new Is;return this._returnResult({data:{user:null,session:null},error:D})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:P})}catch(L){if(le(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async signInWithSolana(e){var n,s,o,c,d,x,w,y,E,C,T,R;let k,L;if("message"in e)k=e.message,L=e.signature;else{const{chain:P,wallet:D,statement:_,options:O}=e;let M;if(Zt())if(typeof D=="object")M=D;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))M=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=D}const W=new URL((n=O==null?void 0:O.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const H=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),_?{statement:_}:null));let U;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")U=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)U=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)k=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),L=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=["".concat(W.host," wants you to sign in with your Solana account:"),M.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1","URI: ".concat(W.href),"Issued At: ".concat((o=(s=O==null?void 0:O.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()),...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.notBefore?["Not Before: ".concat(O.signInWithSolana.notBefore)]:[],...!((d=O==null?void 0:O.signInWithSolana)===null||d===void 0)&&d.expirationTime?["Expiration Time: ".concat(O.signInWithSolana.expirationTime)]:[],...!((x=O==null?void 0:O.signInWithSolana)===null||x===void 0)&&x.chainId?["Chain ID: ".concat(O.signInWithSolana.chainId)]:[],...!((w=O==null?void 0:O.signInWithSolana)===null||w===void 0)&&w.nonce?["Nonce: ".concat(O.signInWithSolana.nonce)]:[],...!((y=O==null?void 0:O.signInWithSolana)===null||y===void 0)&&y.requestId?["Request ID: ".concat(O.signInWithSolana.requestId)]:[],...!((C=(E=O==null?void 0:O.signInWithSolana)===null||E===void 0?void 0:E.resources)===null||C===void 0)&&C.length?["Resources",...O.signInWithSolana.resources.map(U=>"- ".concat(U))]:[]].join("\n");const H=await M.signMessage(new TextEncoder().encode(k),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=H}}try{const{data:P,error:D}=await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:es(L)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(R=e.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:ai});if(D)throw D;if(!P||!P.session||!P.user){const _=new Is;return this._returnResult({data:{user:null,session:null},error:_})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:D})}catch(P){if(le(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(e){const n=await Gr(this.storage,"".concat(this.storageKey,"-code-verifier")),[s,o]=(n!=null?n:"").split("/");try{const{data:c,error:d}=await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ai});if(await lr(this.storage,"".concat(this.storageKey,"-code-verifier")),d)throw d;if(!c||!c.session||!c.user){const x=new Is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:x})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o!=null?o:null}),error:d})}catch(c){if(le(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(e){try{const{options:n,provider:s,token:o,access_token:c,nonce:d}=e,x=await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ai}),{data:w,error:y}=x;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!w||!w.session||!w.user){const E=new Is;return this._returnResult({data:{user:null,session:null},error:E})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:w,error:y})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,s,o,c,d;try{if("email"in e){const{email:x,options:w}=e;let y=null,E=null;this.flowType==="pkce"&&([y,E]=await Ds(this.storage,this.storageKey));const{error:C}=await me(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:x,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},create_user:(s=w==null?void 0:w.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:y,code_challenge_method:E},redirectTo:w==null?void 0:w.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:C})}if("phone"in e){const{phone:x,options:w}=e,{data:y,error:E}=await me(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:x,data:(o=w==null?void 0:w.data)!==null&&o!==void 0?o:{},create_user:(c=w==null?void 0:w.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},channel:(d=w==null?void 0:w.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:E})}throw new Ml("You must provide either an email or phone number.")}catch(x){if(le(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async verifyOtp(e){var n,s;try{let o,c;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,c=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:x}=await me(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:ai});if(x)throw x;if(!d)throw new Error("An error occurred on token verification.");const w=d.session,y=d.user;return w!=null&&w.access_token&&(await this._saveSession(w),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",w)),this._returnResult({data:{user:y,session:w},error:null})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,s,o,c,d;try{let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Ds(this.storage,this.storageKey));const y=await me(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:x,code_challenge_method:w}),headers:this.headers,xform:X8});return!((c=y.data)===null||c===void 0)&&c.url&&Zt()&&!(!((d=e.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(x){if(le(x))return this._returnResult({data:null,error:x});throw x}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Cn;const{error:o}=await me(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(le(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n="".concat(this.url,"/resend");if("email"in e){const{email:s,type:o,options:c}=e,{error:d}=await me(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in e){const{phone:s,type:o,options:c}=e,{data:d,error:x}=await me(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:x})}throw new Ml("You must provide either an email or phone number and a type")}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch(c){}})()),o}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch(o){}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ju:!1;if(this._debug("#__loadSession()","session has".concat(s?"":" not"," expired"),"expires_at",e.expires_at),!s){if(this.userStorage){const d=await Gr(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=th()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};e.user=H8(e.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:mr}):await this._useSession(async n=>{var s,o,c;const{data:d,error:x}=n;if(x)throw x;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cn}:await me(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:mr})})}catch(n){if(le(n))return b8(n)&&(await this._removeSession(),await lr(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Cn;const d=o.session;let x=null,w=null;this.flowType==="pkce"&&e.email!=null&&([x,w]=await Ds(this.storage,this.storageKey));const{data:y,error:E}=await me(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:x,code_challenge_method:w}),jwt:d.access_token,xform:mr});if(E)throw E;return d.user=y.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(s){if(le(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cn;const n=Date.now()/1e3;let s=n,o=!0,c=null;const{payload:d}=eh(e.access_token);if(d.exp&&(s=d.exp,o=s<=n),o){const{data:x,error:w}=await this._callRefreshToken(e.refresh_token);if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!x)return{data:{user:null,session:null},error:null};c=x}else{const{data:x,error:w}=await this._getUser(e.access_token);if(w)throw w;c={access_token:e.access_token,refresh_token:e.refresh_token,user:x.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:d,error:x}=n;if(x)throw x;e=(s=d.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Cn;const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Zt())throw new Bl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new pf("No code detected.");const{data:_,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:d,expires_in:x,expires_at:w,token_type:y}=e;if(!c||!x||!d||!y)throw new Bl("No session defined in URL");const E=Math.round(Date.now()/1e3),C=parseInt(x);let T=E+C;w&&(T=parseInt(w));const R=T-E;R*1e3<=Us&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(R,"s, should have been closer to ").concat(C,"s"));const k=T-C;E-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,T,E):E-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,T,E);const{data:L,error:P}=await this._getUser(c);if(P)throw P;const D={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:C,expires_at:T,refresh_token:d,token_type:y,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(s){if(le(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Gr(this.storage,"".concat(this.storageKey,"-code-verifier"));return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:o,error:c}=n;if(c)return this._returnResult({error:c});const d=(s=o.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:x}=await this.admin.signOut(d,e);if(x&&!(y8(x)&&(x.status===404||x.status===401||x.status===403)))return this._returnResult({error:x})}return e!=="others"&&(await this._removeSession(),await lr(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){const n=O8(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,o;try{const{data:{session:c},error:d}=n;if(d)throw d;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Ds(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(le(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:s,error:o}=await this._useSession(async c=>{var d,x,w,y,E;const{data:C,error:T}=c;if(T)throw T;const R=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(x=e.options)===null||x===void 0?void 0:x.scopes,queryParams:(w=e.options)===null||w===void 0?void 0:w.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",R,{headers:this.headers,jwt:(E=(y=C.session)===null||y===void 0?void 0:y.access_token)!==null&&E!==void 0?E:void 0})});if(o)throw o;return Zt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(le(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var s;try{const{error:o,data:{session:c}}=n;if(o)throw o;const{options:d,provider:x,token:w,access_token:y,nonce:E}=e,C=await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:(s=c==null?void 0:c.access_token)!==null&&s!==void 0?s:void 0,body:{provider:x,id_token:w,access_token:y,nonce:E,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:ai}),{data:T,error:R}=C;return R?this._returnResult({data:{user:null,session:null},error:R}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new Is}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:R}))}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,o;const{data:c,error:d}=n;if(d)throw d;return await me(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{const s=Date.now();return await N8(async o=>(o>0&&await D8(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await me(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:ai})),(o,c)=>{const d=200*Math.pow(2,o);return c&&$u(c)&&Date.now()+d-s<Us})}catch(s){if(this._debug(n,"error",s),le(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Zt()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Gr(this.storage,this.storageKey);if(o&&this.userStorage){let d=await Gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await Ps(this.userStorage,this.storageKey+"-user",d)),o.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:th()}else if(o&&!o.user&&!o.user){const d=await Gr(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(o.user=d.user,await lr(this.storage,this.storageKey+"-user"),await Ps(this.storage,this.storageKey,o)):o.user=th()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ju;if(this._debug(s,"session has".concat(c?"":" not"," expired with margin of ").concat(Ju,"s")),c){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),$u(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:x}=await this._getUser(o.access_token);!x&&(d!=null&&d.user)?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Cn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(o,"begin");try{this.refreshingDeferred=new Vc;const{data:c,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!c.session)throw new Cn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const x={data:c.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(c){if(this._debug(o,"error",c),le(c)){const d={data:null,error:c};return $u(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,s=!0){const o="#_notifyAllSubscribers(".concat(e,")");this._debug(o,"begin",n,"broadcast = ".concat(s));try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(e,n)}catch(w){c.push(w)}});if(await Promise.all(d),c.length>0){for(let x=0;x<c.length;x+=1)console.error(c[x]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Ps(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const c=Af(o);await Ps(this.storage,this.storageKey,c)}else{const o=Af(n);await Ps(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await lr(this.storage,this.storageKey),await lr(this.storage,this.storageKey+"-code-verifier"),await lr(this.storage,this.storageKey+"-user"),this.userStorage&&await lr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Us);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/Us);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(o," ticks, a tick lasts ").concat(Us,"ms, refresh threshold is ").concat(i0," ticks")),o<=i0&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof am)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n="#_onVisibilityChanged(".concat(e,")");this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const o=["provider=".concat(encodeURIComponent(n))];if(s!=null&&s.redirectTo&&o.push("redirect_to=".concat(encodeURIComponent(s.redirectTo))),s!=null&&s.scopes&&o.push("scopes=".concat(encodeURIComponent(s.scopes))),this.flowType==="pkce"){const[c,d]=await Ds(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(c)),code_challenge_method:"".concat(encodeURIComponent(d))});o.push(x.toString())}if(s!=null&&s.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s!=null&&s.skipBrowserRedirect&&o.push("skip_http_redirect=".concat(s.skipBrowserRedirect)),"".concat(e,"?").concat(o.join("&"))}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:o,error:c}=n;return c?this._returnResult({data:null,error:c}):await me(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,o;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const x=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:w,error:y}=await me(this.fetch,"POST","".concat(this.url,"/factors"),{body:x,headers:this.headers,jwt:(s=c==null?void 0:c.session)===null||s===void 0?void 0:s.access_token});return y?this._returnResult({data:null,error:y}):(e.factorType==="totp"&&w.type==="totp"&&(!((o=w==null?void 0:w.totp)===null||o===void 0)&&o.qr_code)&&(w.totp.qr_code="data:image/svg+xml;utf-8,".concat(w.totp.qr_code)),this._returnResult({data:w,error:null}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?ly(e.webauthn.credential_response):cy(e.webauthn.credential_response)})}:{code:e.code}),{data:x,error:w}=await me(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:d,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return w?this._returnResult({data:null,error:w}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+x.expires_in},x)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",x),this._returnResult({data:x,error:w}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const d=await me(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});if(d.error)return d;const{data:x}=d;if(x.type!=="webauthn")return{data:x,error:null};switch(x.webauthn.type){case"create":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:ay(x.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:oy(x.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=eh(s.access_token);let d=null;c.aal&&(d=c.aal);let x=d;((n=(e=s.user.factors)===null||e===void 0?void 0:e.filter(E=>E.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const y=c.amr||[];return{data:{currentLevel:d,nextLevel:x,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?await me(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Cn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Cn});const d=await me(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:x=>({data:x,error:null})});return d.data&&d.data.redirect_url&&Zt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,n){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Cn});const d=await me(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:x=>({data:x,error:null})});return d.data&&d.data.redirect_url&&Zt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await me(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Cn})})}catch(e){if(le(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;return o?this._returnResult({data:null,error:o}):s?await me(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Cn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(x=>x.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(x=>x.kid===e),s&&this.jwks_cached_at+p8>o)return s;const{data:c,error:d}=await me(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(x=>x.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:R,error:k}=await this.getSession();if(k||!R.session)return this._returnResult({data:null,error:k});s=R.session.access_token}const{header:o,payload:c,signature:d,raw:{header:x,payload:w}}=eh(s);n!=null&&n.allowExpired||P8(c.exp);const y=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!y){const{error:R}=await this.getUser(s);if(R)throw R;return{data:{claims:c,header:o,signature:d},error:null}}const E=z8(o.alg),C=await crypto.subtle.importKey("jwk",y,E,!0,["verify"]);if(!await crypto.subtle.verify(E,C,d,S8("".concat(x,".").concat(w))))throw new a0("Invalid JWT signature");return{data:{claims:c,header:o,signature:d},error:null}}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}}ko.nextInstanceID={};const wy=ko;class yy extends wy{constructor(e){super(e)}}class by{constructor(e,n,s){var o,c,d;this.supabaseUrl=e,this.supabaseKey=n;const x=d8(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const w="sb-".concat(x.hostname.split(".")[0],"-auth-token"),y={db:r8,realtime:a8,auth:Object.assign(Object.assign({},s8),{storageKey:w}),global:i8},E=h8(s!=null?s:{},y);this.storageKey=(o=E.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=E.global.headers)!==null&&c!==void 0?c:{},E.accessToken?(this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(C,T)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(T)," is not possible"))}})):this.auth=this._initSupabaseAuthClient((d=E.auth)!==null&&d!==void 0?d:{},this.headers,E.global.fetch),this.fetch=c8(n,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.accessToken&&this.accessToken().then(C=>this.realtime.setAuth(C)).catch(C=>console.warn("Failed to set initial Realtime auth token:",C)),this.rest=new fw(new URL("rest/v1",x).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch}),this.storage=new e8(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),E.accessToken||this._listenForAuthEvents()}get functions(){return new uw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:o,userStorage:c,storageKey:d,flowType:x,lock:w,debug:y,throwOnError:E},C,T){const R={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new yy({url:this.authUrl.href,headers:Object.assign(Object.assign({},R),C),storageKey:d,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:o,userStorage:c,flowType:x,lock:w,debug:y,throwOnError:E,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Iw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vy=(t,e,n)=>new by(t,e,n);function Ay(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Ay()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ey="https://qlhvvhballsotkknrpgk.supabase.co",_y="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsaHZ2aGJhbGxzb3Rra25ycGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTUzODEsImV4cCI6MjA3OTIzMTM4MX0.v7z5VCHX2OY99a_ViYRThGIQLo2eqjpYxNgQfo5afCo",Et=vy(Ey,_y),Gc=()=>Et!==null,cm=ie.createContext(void 0),Cy=({children:t})=>{const[e,n]=ie.useState(null),[s,o]=ie.useState(null),[c,d]=ie.useState(!0),[x,w]=ie.useState(!1);ie.useEffect(()=>{var _;if(localStorage.getItem("guestMode")==="true"){w(!0),d(!1);return}Et==null||Et.auth.getSession().then(({data:{session:O}})=>{var M;o(O),n((M=O==null?void 0:O.user)!=null?M:null),d(!1)});const{data:{subscription:D}}=(_=Et==null?void 0:Et.auth.onAuthStateChange((O,M)=>{var W;o(M),n((W=M==null?void 0:M.user)!=null?W:null),w(!1),localStorage.removeItem("guestMode"),d(!1)}))!=null?_:{data:{subscription:null}};return()=>D==null?void 0:D.unsubscribe()},[]);const L={user:e,session:s,loading:c,isGuest:x,signUp:async(P,D)=>{if(!Et)return{error:{message:"Supabase not configured"}};const{error:_}=await Et.auth.signUp({email:P,password:D});return{error:_}},signIn:async(P,D)=>{if(!Et)return{error:{message:"Supabase not configured"}};const{error:_}=await Et.auth.signInWithPassword({email:P,password:D});return{error:_}},signInWithGoogle:async()=>{if(!Et)return{error:{message:"Supabase not configured"}};const{error:P}=await Et.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/museum-app/")}});return{error:P}},signInWithApple:async()=>{if(!Et)return{error:{message:"Supabase not configured"}};const{error:P}=await Et.auth.signInWithOAuth({provider:"apple",options:{redirectTo:"".concat(window.location.origin,"/museum-app/")}});return{error:P}},signOut:async()=>{Et&&(await Et.auth.signOut(),w(!1),localStorage.removeItem("guestMode"))},continueAsGuest:()=>{w(!0),localStorage.setItem("guestMode","true")}};return p.jsx(cm.Provider,{value:L,children:t})},Sy=()=>{const t=ie.useContext(cm);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Ty="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M480 128a64 64 0 00-64-64h-16V48.45c0-8.61-6.62-16-15.23-16.43A16 16 0 00368 48v16H144V48.45c0-8.61-6.62-16-15.23-16.43A16 16 0 00112 48v16H96a64 64 0 00-64 64v12a4 4 0 004 4h440a4 4 0 004-4zM32 416a64 64 0 0064 64h320a64 64 0 0064-64V179a3 3 0 00-3-3H35a3 3 0 00-3 3zm344-208a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm-80-80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm-80-80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm-80-80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24z'/></svg>",Oy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",Ry="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 00-32 32v192a32 32 0 0032 32h352a32 32 0 0032-32V192a32 32 0 00-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='272' r='80' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M124 158v-22h-24v22' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Rf="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm108.25 138.29l-134.4 160a16 16 0 01-12 5.71h-.27a16 16 0 01-11.89-5.3l-57.6-64a16 16 0 1123.78-21.4l45.29 50.32 122.59-145.91a16 16 0 0124.5 20.58z'/></svg>",Iy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",Dy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",Ny="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M93.72 183.25C49.49 198.05 16 233.1 16 288c0 66 54 112 120 112h184.37M467.82 377.74C485.24 363.3 496 341.61 496 312c0-59.82-53-85.76-96-88-8.89-89.54-71-144-144-144-26.16 0-48.79 6.93-67.6 18.14' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M448 448L64 64' class='ionicon-fill-none ionicon-stroke-width'/></svg>",If="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M160 368L32 256l128-112M352 368l128-112-128-112M304 96l-96 320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",My="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M440.9 136.3a4 4 0 000-6.91L288.16 40.65a64.14 64.14 0 00-64.33 0L71.12 129.39a4 4 0 000 6.91L254 243.88a4 4 0 004.06 0zM54 163.51a4 4 0 00-6 3.49v173.89a48 48 0 0023.84 41.39L234 479.51a4 4 0 006-3.46V274.3a4 4 0 00-2-3.46zM272 275v201a4 4 0 006 3.46l162.15-97.23A48 48 0 00464 340.89V167a4 4 0 00-6-3.45l-184 108a4 4 0 00-2 3.45z'/></svg>",um="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M69 153.99l187 110 187-110M256 463.99v-200' class='ionicon-fill-none ionicon-stroke-width'/></svg>",By="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='64'/><path d='M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96c-42.52 0-84.33 12.15-124.27 36.11-40.73 24.43-77.63 60.12-109.68 106.07a31.92 31.92 0 00-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416c46.71 0 93.81-14.43 136.2-41.72 38.46-24.77 72.72-59.66 99.08-100.92a32.2 32.2 0 00-.1-34.76zM256 352a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",ky="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M432 448a15.92 15.92 0 01-11.31-4.69l-352-352a16 16 0 0122.62-22.62l352 352A16 16 0 01432 448zM248 315.85l-51.79-51.79a2 2 0 00-3.39 1.69 64.11 64.11 0 0053.49 53.49 2 2 0 001.69-3.39zM264 196.15L315.87 248a2 2 0 003.4-1.69 64.13 64.13 0 00-53.55-53.55 2 2 0 00-1.72 3.39z'/><path d='M491 273.36a32.2 32.2 0 00-.1-34.76c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.68 96a226.54 226.54 0 00-71.82 11.79 4 4 0 00-1.56 6.63l47.24 47.24a4 4 0 003.82 1.05 96 96 0 01116 116 4 4 0 001.05 3.81l67.95 68a4 4 0 005.4.24 343.81 343.81 0 0067.24-77.4zM256 352a96 96 0 01-93.3-118.63 4 4 0 00-1.05-3.81l-66.84-66.87a4 4 0 00-5.41-.23c-24.39 20.81-47 46.13-67.67 75.72a31.92 31.92 0 00-.64 35.54c26.41 41.33 60.39 76.14 98.28 100.65C162.06 402 207.92 416 255.68 416a238.22 238.22 0 0072.64-11.55 4 4 0 001.61-6.64l-47.47-47.46a4 4 0 00-3.81-1.05A96 96 0 01256 352z'/></svg>",jy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 00352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 00-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88 26 9 49.25-9.61 71.27-37 25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16 41.02-14.01 40.44-79.13 21.43-165.04z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='292' cy='224' r='20'/><path d='M336 288a20 20 0 1120-19.95A20 20 0 01336 288z'/><circle cx='336' cy='180' r='20'/><circle cx='380' cy='224' r='20'/><path stroke-linecap='round' stroke-linejoin='round' d='M160 176v96M208 224h-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Ly="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 48c-58.07 0-112.67 93.13-112.67 208S197.93 464 256 464s112.67-93.13 112.67-208S314.07 48 256 48z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M117.33 117.33c38.24 27.15 86.38 43.34 138.67 43.34s100.43-16.19 138.67-43.34M394.67 394.67c-38.24-27.15-86.38-43.34-138.67-43.34s-100.43 16.19-138.67 43.34' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-miterlimit='10' d='M256 48v416M464 256H48' class='ionicon-fill-none ionicon-stroke-width'/></svg>",hm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 448a32 32 0 01-18-5.57c-78.59-53.35-112.62-89.93-131.39-112.8-40-48.75-59.15-98.8-58.61-153C48.63 114.52 98.46 64 159.08 64c44.08 0 74.61 24.83 92.39 45.51a6 6 0 009.06 0C278.31 88.81 308.84 64 352.92 64c60.62 0 110.45 50.52 111.08 112.64.54 54.21-18.63 104.26-58.61 153-18.77 22.87-52.8 59.45-131.39 112.8a32 32 0 01-18 5.56z'/></svg>",u1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M352.92 80C288 80 256 144 256 144s-32-64-96.92-64c-52.76 0-94.54 44.14-95.08 96.81-1.1 109.33 86.73 187.08 183 252.42a16 16 0 0018 0c96.26-65.34 184.09-143.09 183-252.42-.54-52.67-42.32-96.81-95.08-96.81z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Uy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 80a176 176 0 10176 176A176 176 0 00256 80z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296' stroke-linecap='round' stroke-miterlimit='10' stroke-width='28' class='ionicon-fill-none'/><circle cx='250' cy='348' r='20'/></svg>",Df="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='48' y='80' width='416' height='352' rx='48' ry='48' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='336' cy='176' r='32' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Py="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M450.29 112H142c-34 0-62 27.51-62 61.33v245.34c0 33.82 28 61.33 62 61.33h308c34 0 62-26.18 62-60V173.33c0-33.82-27.68-61.33-61.71-61.33zm-77.15 61.34a46 46 0 11-46.28 46 46.19 46.19 0 0146.28-46.01zm-231.55 276c-17 0-29.86-13.75-29.86-30.66v-64.83l90.46-80.79a46.54 46.54 0 0163.44 1.83L328.27 337l-113 112.33zM480 418.67a30.67 30.67 0 01-30.71 30.66H259L376.08 333a46.24 46.24 0 0159.44-.16L480 370.59z'/><path d='M384 32H64A64 64 0 000 96v256a64.11 64.11 0 0048 62V152a72 72 0 0172-72h326a64.11 64.11 0 00-62-48z'/></svg>",zy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M432 112V96a48.14 48.14 0 00-48-48H64a48.14 48.14 0 00-48 48v256a48.14 48.14 0 0048 48h16' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='128' width='400' height='336' rx='45.99' ry='45.99' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><ellipse cx='372.92' cy='219.64' rx='30.77' ry='30.55' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M342.15 372.17L255 285.78a30.93 30.93 0 00-42.18-1.21L96 387.64M265.23 464l118.59-117.73a31 31 0 0141.46-1.87L496 402.91' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",dm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 56C145.72 56 56 145.72 56 256s89.72 200 200 200 200-89.72 200-200S366.28 56 256 56zm0 82a26 26 0 11-26 26 26 26 0 0126-26zm48 226h-88a16 16 0 010-32h28v-88h-16a16 16 0 010-32h32a16 16 0 0116 16v104h28a16 16 0 010 32z'/></svg>",Fy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M248 64C146.39 64 64 146.39 64 248s82.39 184 184 184 184-82.39 184-184S349.61 64 248 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M220 220h32v116' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M208 340h88' class='ionicon-fill-none ionicon-stroke-width'/><path d='M248 130a26 26 0 1026 26 26 26 0 00-26-26z'/></svg>",fm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M48 112h288M192 64v48M272 448l96-224 96 224M301.5 384h133M281.3 112S257 206 199 277 80 384 80 384' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 336s-35-27-72-75-56-85-56-85' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Gn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M208 352h-64a96 96 0 010-192h64M304 160h64a96 96 0 010 192h-64M163.29 256h187.42' stroke-linecap='round' stroke-linejoin='round' stroke-width='36' class='ionicon-fill-none'/></svg>",Hy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='192' r='32'/><path d='M256 32c-88.22 0-160 68.65-160 153 0 40.17 18.31 93.59 54.42 158.78 29 52.34 62.55 99.67 80 123.22a31.75 31.75 0 0051.22 0c17.42-23.55 51-70.88 80-123.22C397.69 278.61 416 225.19 416 185c0-84.35-71.78-153-160-153zm0 224a64 64 0 1164-64 64.07 64.07 0 01-64 64z'/></svg>",Vy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M368 192h-16v-80a96 96 0 10-192 0v80h-16a64.07 64.07 0 00-64 64v176a64.07 64.07 0 0064 64h224a64.07 64.07 0 0064-64V256a64.07 64.07 0 00-64-64zm-48 0H192v-80a64 64 0 11128 0z'/></svg>",Gy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M349.13 136.86c-40.32 0-57.36 19.24-85.44 19.24-28.79 0-50.75-19.1-85.69-19.1-34.2 0-70.67 20.88-93.83 56.45-32.52 50.16-27 144.63 25.67 225.11 18.84 28.81 44 61.12 77 61.47h.6c28.68 0 37.2-18.78 76.67-19h.6c38.88 0 46.68 18.89 75.24 18.89h.6c33-.35 59.51-36.15 78.35-64.85 13.56-20.64 18.6-31 29-54.35-76.19-28.92-88.43-136.93-13.08-178.34-23-28.8-55.32-45.48-85.79-45.48z'/><path d='M340.25 32c-24 1.63-52 16.91-68.4 36.86-14.88 18.08-27.12 44.9-22.32 70.91h1.92c25.56 0 51.72-15.39 67-35.11 14.72-18.77 25.88-45.37 21.8-72.66z'/></svg>",qy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M473.16 221.48l-2.26-9.59H262.46v88.22H387c-12.93 61.4-72.93 93.72-121.94 93.72-35.66 0-73.25-15-98.13-39.11a140.08 140.08 0 01-41.8-98.88c0-37.16 16.7-74.33 41-98.78s61-38.13 97.49-38.13c41.79 0 71.74 22.19 82.94 32.31l62.69-62.36C390.86 72.72 340.34 32 261.6 32c-60.75 0-119 23.27-161.58 65.71C58 139.5 36.25 199.93 36.25 256s20.58 113.48 61.3 155.6c43.51 44.92 105.13 68.4 168.58 68.4 57.73 0 112.45-22.62 151.45-63.66 38.34-40.4 58.17-96.3 58.17-154.9 0-24.67-2.48-39.32-2.59-39.96z'/></svg>",Xy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M73.6 256c0-100.737 81.663-182.4 182.4-182.4 40.552 0 77.992 13.212 108.286 35.603 7.946-18.702 23.958-33.15 43.67-38.976C366.589 36.357 313.656 16 256 16 123.451 16 16 123.452 16 256s107.451 240 240 240c132.548 0 239.999-107.452 239.999-240 0-27.741-4.718-54.427-13.407-79.269-11.824 15.985-30.428 26.649-51.564 27.742 4.795 16.319 7.371 33.605 7.371 51.527 0 100.737-81.663 182.4-182.399 182.4-100.737 0-182.4-81.663-182.4-182.4z'/><path d='M491.065 207.374a238.383 238.383 0 00-8.473-30.643c-11.823 15.984-30.428 26.649-51.564 27.742a181.577 181.577 0 016.719 35.964c22.259-2.737 41.5-15.226 53.318-33.063zM256 361.001c57.853 0 105-47.057 105-105 0-57.854-47.057-105-105-105s-105 47.146-105 105c0 57.853 47.147 105 105 105zM413.5 166c28.995 0 52.5-23.505 52.5-52.5S442.495 61 413.5 61 361 84.505 361 113.5s23.505 52.5 52.5 52.5z'/></svg>",Wy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M410.66 180.72q-7.67-2.62-15.45-4.88 1.29-5.25 2.38-10.56c11.7-56.9 4.05-102.74-22.06-117.83-25-14.48-66 .61-107.36 36.69q-6.1 5.34-11.95 11-3.9-3.76-8-7.36c-43.35-38.58-86.8-54.83-112.88-39.69-25 14.51-32.43 57.6-21.9 111.53q1.58 8 3.55 15.93a320.85 320.85 0 00-17.77 5.6C48.46 198.9 16 226.73 16 255.59c0 29.82 34.84 59.72 87.77 77.85q6.44 2.19 13 4.07-2.13 8.49-3.77 17.17c-10 53-2.2 95.07 22.75 109.49 25.77 14.89 69-.41 111.14-37.31q5-4.38 10-9.25 6.32 6.11 13 11.86c40.8 35.18 81.09 49.39 106 34.93 25.75-14.94 34.12-60.14 23.25-115.13q-1.25-6.3-2.88-12.86 4.56-1.35 8.93-2.79c55-18.27 90.83-47.81 90.83-78-.02-29-33.52-57.01-85.36-74.9zm-129-81.08c35.43-30.91 68.55-43.11 83.65-34.39 16.07 9.29 22.32 46.75 12.22 95.88q-1 4.8-2.16 9.57a487.83 487.83 0 00-64.18-10.16 481.27 481.27 0 00-40.57-50.75q5.38-5.22 11.02-10.15zM157.73 280.25q6.51 12.6 13.61 24.89 7.23 12.54 15.07 24.71a435.28 435.28 0 01-44.24-7.13c4.24-13.72 9.46-27.97 15.56-42.47zm0-48.33c-6-14.19-11.08-28.15-15.25-41.63 13.7-3.07 28.3-5.58 43.52-7.48q-7.65 11.94-14.72 24.23t-13.58 24.88zm10.9 24.17q9.48-19.77 20.42-38.78 10.93-19 23.27-37.13c14.28-1.08 28.92-1.65 43.71-1.65s29.52.57 43.79 1.66q12.21 18.09 23.13 37t20.69 38.6Q334 275.63 323 294.73q-10.91 19-23 37.24c-14.25 1-29 1.55-44 1.55s-29.47-.47-43.46-1.38q-12.43-18.19-23.46-37.29t-20.48-38.76zM340.75 305q7.25-12.58 13.92-25.49a440.41 440.41 0 0116.12 42.32 434.44 434.44 0 01-44.79 7.65q7.62-12.09 14.75-24.48zm13.72-73.07q-6.64-12.65-13.81-25-7-12.18-14.59-24.06c15.31 1.94 30 4.52 43.77 7.67a439.89 439.89 0 01-15.37 41.39zm-98.24-107.45a439.75 439.75 0 0128.25 34.18q-28.35-1.35-56.74 0c9.33-12.34 18.88-23.79 28.49-34.18zM145.66 65.86c16.06-9.32 51.57 4 89 37.27 2.39 2.13 4.8 4.36 7.2 6.67A491.37 491.37 0 00201 160.51a499.12 499.12 0 00-64.06 10q-1.83-7.36-3.3-14.82c-9.05-46.23-3.06-81.08 12.02-89.83zm-23.41 251.85q-6-1.71-11.85-3.71c-23.4-8-42.73-18.44-56-29.81-11.88-10.19-17.9-20.36-17.9-28.6 0-17.51 26.06-39.85 69.52-55q8.19-2.85 16.52-5.21a493.54 493.54 0 0023.4 60.75 502.46 502.46 0 00-23.69 61.58zm111.13 93.67c-18.63 16.32-37.29 27.89-53.74 33.72-14.78 5.23-26.55 5.38-33.66 1.27-15.14-8.75-21.44-42.54-12.85-87.86q1.53-8 3.5-16a480.85 480.85 0 0064.69 9.39 501.2 501.2 0 0041.2 51c-2.98 2.93-6.03 5.75-9.14 8.48zm23.42-23.22c-9.72-10.51-19.42-22.14-28.88-34.64q13.79.54 28.08.54c9.78 0 19.46-.21 29-.64a439.33 439.33 0 01-28.2 34.74zm124.52 28.59c-2.86 15.44-8.61 25.74-15.72 29.86-15.13 8.78-47.48-2.63-82.36-32.72-4-3.44-8-7.13-12.07-11a484.54 484.54 0 0040.23-51.2 477.84 477.84 0 0065-10.05q1.47 5.94 2.6 11.64c4.81 24.3 5.5 46.28 2.32 63.47zm17.4-102.64c-2.62.87-5.32 1.71-8.06 2.53a483.26 483.26 0 00-24.31-60.94 481.52 481.52 0 0023.36-60.06c4.91 1.43 9.68 2.93 14.27 4.52 44.42 15.32 71.52 38 71.52 55.43 0 18.6-29.27 42.74-76.78 58.52z'/><path d='M256 298.55a43 43 0 10-42.86-43 42.91 42.91 0 0042.86 43z'/></svg>",Nf="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M424 80H88a56.06 56.06 0 00-56 56v240a56.06 56.06 0 0056 56h336a56.06 56.06 0 0056-56V136a56.06 56.06 0 00-56-56zm-14.18 92.63l-144 112a16 16 0 01-19.64 0l-144-112a16 16 0 1119.64-25.26L256 251.73l134.18-104.36a16 16 0 0119.64 25.26z'/></svg>",Yy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M264 480A232 232 0 0132 248c0-94 54-178.28 137.61-214.67a16 16 0 0121.06 21.06C181.07 76.43 176 104.66 176 136c0 110.28 89.72 200 200 200 31.34 0 59.57-5.07 81.61-14.67a16 16 0 0121.06 21.06C442.28 426 358 480 264 480z'/></svg>",o0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216 88.68 0 166.73-51.57 200-128-26.39 11.49-57.38 16-88 16-119.29 0-216-96.71-216-216z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Qy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M192 218v-6c0-14.84 10-27 24.24-30.59l174.59-46.68A20 20 0 01416 154v22' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M416 295.94v80c0 13.91-8.93 25.59-22 30l-22 8c-25.9 8.72-52-10.42-52-38h0a33.37 33.37 0 0123-32l51-18.15c13.07-4.4 22-15.94 22-29.85V58a10 10 0 00-12.6-9.61L204 102a16.48 16.48 0 00-12 16v226c0 13.91-8.93 25.6-22 30l-52 18c-13.88 4.68-22 17.22-22 32h0c0 27.58 26.52 46.55 52 38l22-8c13.07-4.4 22-16.08 22-30v-80' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Zy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M208 432h-48a16 16 0 01-16-16V96a16 16 0 0116-16h48a16 16 0 0116 16v320a16 16 0 01-16 16zM352 432h-48a16 16 0 01-16-16V96a16 16 0 0116-16h48a16 16 0 0116 16v320a16 16 0 01-16 16z'/></svg>",Ky="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='128' y='16' width='256' height='480' rx='48' ry='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M176 16h24a8 8 0 018 8h0a16 16 0 0016 16h64a16 16 0 0016-16h0a8 8 0 018-8h24' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Jy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z'/></svg>",$y="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='336' y='336' width='80' height='80' rx='8' ry='8'/><rect x='272' y='272' width='64' height='64' rx='8' ry='8'/><rect x='416' y='416' width='64' height='64' rx='8' ry='8'/><rect x='432' y='272' width='48' height='48' rx='8' ry='8'/><rect x='272' y='432' width='48' height='48' rx='8' ry='8'/><path d='M448 32H304a32 32 0 00-32 32v144a32 32 0 0032 32h144a32 32 0 0032-32V64a32 32 0 00-32-32zm-32 136a8 8 0 01-8 8h-64a8 8 0 01-8-8v-64a8 8 0 018-8h64a8 8 0 018 8zM208 32H64a32 32 0 00-32 32v144a32 32 0 0032 32h144a32 32 0 0032-32V64a32 32 0 00-32-32zm-32 136a8 8 0 01-8 8h-64a8 8 0 01-8-8v-64a8 8 0 018-8h64a8 8 0 018 8zM208 272H64a32 32 0 00-32 32v144a32 32 0 0032 32h144a32 32 0 0032-32V304a32 32 0 00-32-32zm-32 136a8 8 0 01-8 8h-64a8 8 0 01-8-8v-64a8 8 0 018-8h64a8 8 0 018 8z'/></svg>",e6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='336' y='336' width='80' height='80' rx='8' ry='8'/><rect x='272' y='272' width='64' height='64' rx='8' ry='8'/><rect x='416' y='416' width='64' height='64' rx='8' ry='8'/><rect x='432' y='272' width='48' height='48' rx='8' ry='8'/><rect x='272' y='432' width='48' height='48' rx='8' ry='8'/><rect x='336' y='96' width='80' height='80' rx='8' ry='8'/><rect x='288' y='48' width='176' height='176' rx='16' ry='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='96' width='80' height='80' rx='8' ry='8'/><rect x='48' y='48' width='176' height='176' rx='16' ry='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='336' width='80' height='80' rx='8' ry='8'/><rect x='48' y='288' width='176' height='176' rx='16' ry='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",t6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M269 335.61q-6.33.47-12.78.47c-5.23 0-10.4-.24-15.51-.69a176.11 176.11 0 01-127.67-72.94 4 4 0 00-6.77.35l-72 129.4c-2.74 5-3.17 11-.28 15.88A16.78 16.78 0 0048.22 416h78a15.28 15.28 0 0113.62 7.33L178.5 488a16.26 16.26 0 0013.75 8c5.94-.33 12.09-4.19 14.56-9.6l66.11-145.15a4 4 0 00-3.92-5.64zM477.64 391.88l-71.53-129.17a4 4 0 00-6.74-.36 176.5 176.5 0 01-78.31 61.42 16.09 16.09 0 00-8.72 8.25l-36.86 81.1a7.92 7.92 0 000 6.6l30.27 66.59c2.45 5.41 8.59 9.36 14.52 9.69a16.3 16.3 0 0013.7-8.12l38.53-64.58c2.89-4.85 8.13-7.33 13.78-7.3h78.77c6.67 0 11.72-3.48 14-10a16.92 16.92 0 00-1.41-14.12z'/><ellipse cx='256.26' cy='160' rx='48.01' ry='48'/><path d='M256.26 16c-79.42 0-144 64.59-144 144s64.61 144 144 144 144-64.6 144-144-64.59-144-144-144zm0 224a80 80 0 1180-80 80.1 80.1 0 01-80 80z'/></svg>",n6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='160' r='128' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M143.65 227.82L48 400l86.86-.42a16 16 0 0113.82 7.8L192 480l88.33-194.32' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M366.54 224L464 400l-86.86-.42a16 16 0 00-13.82 7.8L320 480l-64-140.8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='160' r='64' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",gm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M342 444h46a56 56 0 0056-56v-46M444 170v-46a56 56 0 00-56-56h-46M170 444h-46a56 56 0 01-56-56v-46M68 170v-46a56 56 0 0156-56h46' stroke-linecap='round' stroke-linejoin='round' stroke-width='44' class='ionicon-fill-none'/></svg>",i6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 368a16 16 0 01-7.94-2.11L108 285.84a8 8 0 00-12 6.94V368a16 16 0 008.23 14l144 80a16 16 0 0015.54 0l144-80a16 16 0 008.23-14v-75.22a8 8 0 00-12-6.94l-140.06 80.05A16 16 0 01256 368z'/><path d='M495.92 190.5v-.11a16 16 0 00-8-12.28l-224-128a16 16 0 00-15.88 0l-224 128a16 16 0 000 27.78l224 128a16 16 0 0015.88 0L461 221.28a2 2 0 013 1.74v144.53c0 8.61 6.62 16 15.23 16.43A16 16 0 00496 368V192a14.76 14.76 0 00-.08-1.5z'/></svg>",r6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",xm="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 192h40a40 40 0 0140 40v192a40 40 0 01-40 40H136a40 40 0 01-40-40V232a40 40 0 0140-40h40M336 128l-80-80-80 80M256 321V48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",s6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M394 480a16 16 0 01-9.39-3L256 383.76 127.39 477a16 16 0 01-24.55-18.08L153 310.35 23 221.2a16 16 0 019-29.2h160.38l48.4-148.95a16 16 0 0130.44 0l48.4 149H480a16 16 0 019.05 29.2L359 310.35l50.13 148.53A16 16 0 01394 480z'/></svg>",a6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 118a22 22 0 01-22-22V48a22 22 0 0144 0v48a22 22 0 01-22 22zM256 486a22 22 0 01-22-22v-48a22 22 0 0144 0v48a22 22 0 01-22 22zM369.14 164.86a22 22 0 01-15.56-37.55l33.94-33.94a22 22 0 0131.11 31.11l-33.94 33.94a21.93 21.93 0 01-15.55 6.44zM108.92 425.08a22 22 0 01-15.55-37.56l33.94-33.94a22 22 0 1131.11 31.11l-33.94 33.94a21.94 21.94 0 01-15.56 6.45zM464 278h-48a22 22 0 010-44h48a22 22 0 010 44zM96 278H48a22 22 0 010-44h48a22 22 0 010 44zM403.08 425.08a21.94 21.94 0 01-15.56-6.45l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.55 37.56zM142.86 164.86a21.89 21.89 0 01-15.55-6.44l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.56 37.55zM256 358a102 102 0 11102-102 102.12 102.12 0 01-102 102z'/></svg>",Mf="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M256 48v48M256 416v48M403.08 108.92l-33.94 33.94M142.86 369.14l-33.94 33.94M464 256h-48M96 256H48M403.08 403.08l-33.94-33.94M142.86 142.86l-33.94-33.94' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='256' r='80' stroke-linecap='round' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",o6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 80h-60.1a4 4 0 01-4-4V63.92a32 32 0 00-32-31.92l-223.79.26a32 32 0 00-31.94 31.93V76a4 4 0 01-4 4H48a16 16 0 00-16 16v16c0 54.53 30 112.45 76.52 125.35a7.82 7.82 0 015.55 5.9c5.77 26.89 23.52 52.5 51.41 73.61 20.91 15.83 45.85 27.5 68.27 32.48a8 8 0 016.25 7.8V444a4 4 0 01-4 4h-59.55c-8.61 0-16 6.62-16.43 15.23A16 16 0 00176 480h159.55c8.61 0 16-6.62 16.43-15.23A16 16 0 00336 448h-60a4 4 0 01-4-4v-86.86a8 8 0 016.25-7.8c22.42-5 47.36-16.65 68.27-32.48 27.89-21.11 45.64-46.72 51.41-73.61a7.82 7.82 0 015.55-5.9C450 224.45 480 166.53 480 112V96a16 16 0 00-16-16zM112 198.22a4 4 0 01-6 3.45c-10.26-6.11-17.75-15.37-22.14-21.89-11.91-17.69-19-40.67-19.79-63.63a4 4 0 014-4.15h40a4 4 0 014 4c-.02 27.45-.07 58.87-.07 82.22zm316.13-18.44c-4.39 6.52-11.87 15.78-22.13 21.89a4 4 0 01-6-3.46c0-26.51 0-56.63-.05-82.21a4 4 0 014-4h40a4 4 0 014 4.15c-.79 22.96-7.9 45.94-19.81 63.63z'/></svg>",l6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z'/><path d='M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z'/><path d='M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z'/></svg>",c6="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M416 432L64 80' class='ionicon-fill-none ionicon-stroke-width'/><path d='M243.33 98.86a23.89 23.89 0 00-25.55 1.82l-.66.51-28.52 23.35a8 8 0 00-.59 11.85l54.33 54.33a8 8 0 0013.66-5.66v-64.49a24.51 24.51 0 00-12.67-21.71zM251.33 335.29L96.69 180.69A16 16 0 0085.38 176H56a24 24 0 00-24 24v112a24 24 0 0024 24h69.76l92 75.31a23.9 23.9 0 0025.87 1.69A24.51 24.51 0 00256 391.45v-44.86a16 16 0 00-4.67-11.3zM352 256c0-24.56-5.81-47.87-17.75-71.27a16 16 0 10-28.5 14.55C315.34 218.06 320 236.62 320 256q0 4-.31 8.13a8 8 0 002.32 6.25l14.36 14.36a8 8 0 0013.55-4.31A146 146 0 00352 256zM416 256c0-51.18-13.08-83.89-34.18-120.06a16 16 0 00-27.64 16.12C373.07 184.44 384 211.83 384 256c0 23.83-3.29 42.88-9.37 60.65a8 8 0 001.9 8.26L389 337.4a8 8 0 0013.13-2.79C411 311.76 416 287.26 416 256z'/><path d='M480 256c0-74.25-20.19-121.11-50.51-168.61a16 16 0 10-27 17.22C429.82 147.38 448 189.5 448 256c0 46.19-8.43 80.27-22.43 110.53a8 8 0 001.59 9l11.92 11.92a8 8 0 0012.92-2.16C471.6 344.9 480 305 480 256z'/></svg>",u6=()=>{const{t}=di(),e=jo(),{signIn:n,signUp:s,signInWithGoogle:o,signInWithApple:c,continueAsGuest:d}=Sy(),[x,w]=ie.useState(!1),[y,E]=ie.useState(!1),[C,T]=ie.useState(""),[R,k]=ie.useState(""),[L,P]=ie.useState(!1),[D,_]=ie.useState(!1),[O,M]=ie.useState(""),W=async()=>{_(!0),M("");const{error:V}=await o();V&&(M(V.message),_(!1))},H=async()=>{_(!0),M("");const{error:V}=await c();V&&(M(V.message),_(!1))},U=async()=>{if(!C||!R){M(t("pleaseEnterEmailPassword")||"Please enter email and password");return}_(!0),M("");const{error:V}=y?await s(C,R):await n(C,R);V?(M(V.message),_(!1)):y?(M(t("checkEmailVerification")||"Please check your email to verify your account"),_(!1)):e.push("/tabs/gallery")},Z=()=>{d(),e.push("/tabs/gallery")};return p.jsx(Mn,{children:p.jsx(vn,{fullscreen:!0,className:"welcome-content",children:p.jsxs("div",{className:"welcome-container",children:[p.jsxs("div",{className:"welcome-header",children:[p.jsx("div",{className:"logo-container",children:p.jsxs("svg",{className:"museum-logo",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("polyline",{points:"25,50 60,18 95,50",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),p.jsx("polyline",{points:"32,44 60,25 88,44",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),p.jsx("line",{x1:"35",y1:"55",x2:"35",y2:"85",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"}),p.jsx("line",{x1:"60",y1:"55",x2:"60",y2:"95",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"}),p.jsx("line",{x1:"85",y1:"55",x2:"85",y2:"85",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"}),p.jsx("line",{x1:"25",y1:"100",x2:"95",y2:"100",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"})]})}),p.jsx("h1",{className:"app-title",children:t("virtualMuseum")||"Virtual Museum"}),p.jsx("p",{className:"app-tagline",children:t("exploreHistory")||"Explore History in Your Hands"})]}),p.jsxs("div",{className:"auth-container",children:[x?p.jsx(p.Fragment,{children:p.jsx(He,{className:"auth-card",children:p.jsxs(Ve,{children:[p.jsx("h2",{className:"auth-title",children:y?t("signUp")||"Sign Up":t("login")||"Login"}),O&&p.jsx(la,{color:"danger",className:"error-text",children:p.jsx("p",{children:O})}),p.jsxs(De,{lines:"none",className:"auth-input",children:[p.jsx(se,{icon:Nf,slot:"start"}),p.jsx(N1,{type:"email",placeholder:t("email")||"Email",value:C,onIonInput:V=>T(V.detail.value)})]}),p.jsxs(De,{lines:"none",className:"auth-input",children:[p.jsx(se,{icon:Vy,slot:"start"}),p.jsx(N1,{type:L?"text":"password",placeholder:t("password")||"Password",value:R,onIonInput:V=>k(V.detail.value)}),p.jsx(se,{icon:L?ky:By,slot:"end",onClick:()=>P(!L),style:{cursor:"pointer"}})]}),p.jsx(Ct,{expand:"block",onClick:U,disabled:D,className:"submit-button",children:D?p.jsx(ca,{name:"crescent"}):y?t("signUp")||"Sign Up":t("login")||"Login"}),p.jsxs("div",{className:"auth-switch",children:[p.jsx(la,{children:y?t("alreadyHaveAccount")||"Already have an account?":t("dontHaveAccount")||"Don't have an account?"}),p.jsx(Ct,{fill:"clear",size:"small",onClick:()=>{E(!y),M("")},children:y?t("login")||"Login":t("signUp")||"Sign Up"})]}),p.jsx(Ct,{fill:"clear",size:"small",onClick:()=>w(!1),className:"back-button",children:t("back")||"Back"})]})})}):p.jsxs(p.Fragment,{children:[p.jsxs(Ct,{expand:"block",className:"social-button google-button",onClick:W,disabled:D,children:[p.jsx(se,{slot:"start",icon:qy}),t("continueWithGoogle")||"Continue with Google"]}),p.jsxs(Ct,{expand:"block",className:"social-button apple-button",onClick:H,disabled:D,children:[p.jsx(se,{slot:"start",icon:Gy}),t("continueWithApple")||"Continue with Apple"]}),p.jsx("div",{className:"divider",children:p.jsx("span",{children:t("or")||"or"})}),p.jsxs(Ct,{expand:"block",fill:"outline",className:"email-toggle-button",onClick:()=>w(!0),children:[p.jsx(se,{slot:"start",icon:Nf}),t("continueWithEmail")||"Continue with Email"]})]}),p.jsx("div",{className:"guest-mode",children:p.jsx(Ct,{fill:"clear",onClick:Z,className:"guest-button",children:t("continueAsGuest")||"Continue as Guest"})})]}),p.jsx("div",{className:"welcome-footer",children:p.jsx("p",{children:t("welcomeFooter")||"Discover ancient artifacts, explore 3D exhibits, and test your knowledge"})})]})})})};var ae;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ae||(ae={}));var Bf=new Map([[ae.QR_CODE,"QR_CODE"],[ae.AZTEC,"AZTEC"],[ae.CODABAR,"CODABAR"],[ae.CODE_39,"CODE_39"],[ae.CODE_93,"CODE_93"],[ae.CODE_128,"CODE_128"],[ae.DATA_MATRIX,"DATA_MATRIX"],[ae.MAXICODE,"MAXICODE"],[ae.ITF,"ITF"],[ae.EAN_13,"EAN_13"],[ae.EAN_8,"EAN_8"],[ae.PDF_417,"PDF_417"],[ae.RSS_14,"RSS_14"],[ae.RSS_EXPANDED,"RSS_EXPANDED"],[ae.UPC_A,"UPC_A"],[ae.UPC_E,"UPC_E"],[ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),kf;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(kf||(kf={}));function h6(t){return Object.values(ae).includes(t)}var _c;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(_c||(_c={}));var d6=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[_c.SCAN_TYPE_CAMERA,_c.SCAN_TYPE_FILE],t}(),mm=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Bf.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Bf.get(e))},t}(),jf=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),l0;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(l0||(l0={}));var f6=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:l0.UNKWOWN_ERROR}},t}(),g6=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Bi(t){return typeof t>"u"||t===null}var Ks=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),pm=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var s=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(o),d=Object.keys(e),x=0,w=d;x<w.length;x++){var y=w[x];if(c.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},t}(),c0={exports:{}};(function(t,e){(function(n,s){s(e)})(Pa,function(n){function s(v){return v==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,i){v.__proto__=i}||function(v,i){for(var r in i)i.hasOwnProperty(r)&&(v[r]=i[r])};function c(v,i){o(v,i);function r(){this.constructor=v}v.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}function d(v,i){var r=Object.setPrototypeOf;r?r(v,i):v.__proto__=i}function x(v,i){i===void 0&&(i=v.constructor);var r=Error.captureStackTrace;r&&r(v,i)}var w=function(v){c(i,v);function i(r){var a=this.constructor,l=v.call(this,r)||this;return Object.defineProperty(l,"name",{value:a.name,enumerable:!1}),d(l,a.prototype),x(l),l}return i}(Error);class y extends w{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}y.kind="Exception";class E extends y{}E.kind="ArgumentException";class C extends y{}C.kind="IllegalArgumentException";class T{constructor(i){if(this.binarizer=i,i===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,r){return this.binarizer.getBlackRow(i,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,r,a,l){const u=this.binarizer.getLuminanceSource().crop(i,r,a,l);return new T(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch(i){return""}}}class R extends y{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class k{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(i,r,a,l,u){for(;u--;)a[l++]=i[r++]}static currentTimeMillis(){return Date.now()}}class P extends y{}P.kind="IndexOutOfBoundsException";class D extends P{constructor(i=void 0,r=void 0){super(r),this.index=i,this.message=r}}D.kind="ArrayIndexOutOfBoundsException";class _{static fill(i,r){for(let a=0,l=i.length;a<l;a++)i[a]=r}static fillWithin(i,r,a,l){_.rangeCheck(i.length,r,a);for(let u=r;u<a;u++)i[u]=l}static rangeCheck(i,r,a){if(r>a)throw new C("fromIndex("+r+") > toIndex("+a+")");if(r<0)throw new D(r);if(a>i)throw new D(a)}static asList(...i){return i}static create(i,r,a){return Array.from({length:i}).map(u=>Array.from({length:r}).fill(a))}static createInt32Array(i,r,a){return Array.from({length:i}).map(u=>Int32Array.from({length:r}).fill(a))}static equals(i,r){if(!i||!r||!i.length||!r.length||i.length!==r.length)return!1;for(let a=0,l=i.length;a<l;a++)if(i[a]!==r[a])return!1;return!0}static hashCode(i){if(i===null)return 0;let r=1;for(const a of i)r=31*r+a;return r}static fillUint8Array(i,r){for(let a=0;a!==i.length;a++)i[a]=r}static copyOf(i,r){return i.slice(0,r)}static copyOfUint8Array(i,r){if(i.length<=r){const a=new Uint8Array(r);return a.set(i),a}return i.slice(0,r)}static copyOfRange(i,r,a){const l=a-r,u=new Int32Array(l);return L.arraycopy(i,r,u,0,l),u}static binarySearch(i,r,a){a===void 0&&(a=_.numberComparator);let l=0,u=i.length-1;for(;l<=u;){const h=u+l>>1,f=a(r,i[h]);if(f>0)l=h+1;else if(f<0)u=h-1;else return h}return-l-1}static numberComparator(i,r){return i-r}}class O{static numberOfTrailingZeros(i){let r;if(i===0)return 32;let a=31;return r=i<<16,r!==0&&(a-=16,i=r),r=i<<8,r!==0&&(a-=8,i=r),r=i<<4,r!==0&&(a-=4,i=r),r=i<<2,r!==0&&(a-=2,i=r),a-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let r=1;return i>>>16||(r+=16,i<<=16),i>>>24||(r+=8,i<<=8),i>>>28||(r+=4,i<<=4),i>>>30||(r+=2,i<<=2),r-=i>>>31,r}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,r){return Math.trunc(i/r)}static parseInt(i,r=void 0){return parseInt(i,r)}}O.MIN_VALUE_32_BITS=-2147483648,O.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(i,r){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,r==null?this.bits=M.makeArray(i):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const r=M.makeArray(i);L.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const r=this.size;if(i>=r)return r;const a=this.bits;let l=Math.floor(i/32),u=a[l];u&=~((1<<(i&31))-1);const h=a.length;for(;u===0;){if(++l===h)return r;u=a[l]}const f=l*32+O.numberOfTrailingZeros(u);return f>r?r:f}getNextUnset(i){const r=this.size;if(i>=r)return r;const a=this.bits;let l=Math.floor(i/32),u=~a[l];u&=~((1<<(i&31))-1);const h=a.length;for(;u===0;){if(++l===h)return r;u=~a[l]}const f=l*32+O.numberOfTrailingZeros(u);return f>r?r:f}setBulk(i,r){this.bits[Math.floor(i/32)]=r}setRange(i,r){if(r<i||i<0||r>this.size)throw new C;if(r===i)return;r--;const a=Math.floor(i/32),l=Math.floor(r/32),u=this.bits;for(let h=a;h<=l;h++){const f=h>a?0:i&31,m=(2<<(h<l?31:r&31))-(1<<f);u[h]|=m}}clear(){const i=this.bits.length,r=this.bits;for(let a=0;a<i;a++)r[a]=0}isRange(i,r,a){if(r<i||i<0||r>this.size)throw new C;if(r===i)return!0;r--;const l=Math.floor(i/32),u=Math.floor(r/32),h=this.bits;for(let f=l;f<=u;f++){const g=f>l?0:i&31,b=(2<<(f<u?31:r&31))-(1<<g)&4294967295;if((h[f]&b)!==(a?b:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,r){if(r<0||r>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let a=r;a>0;a--)this.appendBit((i>>a-1&1)===1)}appendBitArray(i){const r=i.size;this.ensureCapacity(this.size+r);for(let a=0;a<r;a++)this.appendBit(i.get(a))}xor(i){if(this.size!==i.size)throw new C("Sizes don't match");const r=this.bits;for(let a=0,l=r.length;a<l;a++)r[a]^=i.bits[a]}toBytes(i,r,a,l){for(let u=0;u<l;u++){let h=0;for(let f=0;f<8;f++)this.get(i)&&(h|=1<<7-f),i++;r[a+u]=h}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),a=r+1,l=this.bits;for(let u=0;u<a;u++){let h=l[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,i[r-u]=h}if(this.size!==a*32){const u=a*32-this.size;let h=i[0]>>>u;for(let f=1;f<a;f++){const g=i[f];h|=g<<32-u,i[f-1]=h,h=g>>>u}i[a-1]=h}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof M))return!1;const r=i;return this.size===r.size&&_.equals(this.bits,r.bits)}hashCode(){return 31*this.size+_.hashCode(this.bits)}toString(){let i="";for(let r=0,a=this.size;r<a;r++)r&7||(i+=" "),i+=this.get(r)?"X":".";return i}clone(){return new M(this.size,this.bits.slice())}}var W;(function(v){v[v.OTHER=0]="OTHER",v[v.PURE_BARCODE=1]="PURE_BARCODE",v[v.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",v[v.TRY_HARDER=3]="TRY_HARDER",v[v.CHARACTER_SET=4]="CHARACTER_SET",v[v.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",v[v.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",v[v.ASSUME_GS1=7]="ASSUME_GS1",v[v.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",v[v.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",v[v.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(W||(W={}));var H=W;class U extends y{static getFormatInstance(){return new U}}U.kind="FormatException";var Z;(function(v){v[v.Cp437=0]="Cp437",v[v.ISO8859_1=1]="ISO8859_1",v[v.ISO8859_2=2]="ISO8859_2",v[v.ISO8859_3=3]="ISO8859_3",v[v.ISO8859_4=4]="ISO8859_4",v[v.ISO8859_5=5]="ISO8859_5",v[v.ISO8859_6=6]="ISO8859_6",v[v.ISO8859_7=7]="ISO8859_7",v[v.ISO8859_8=8]="ISO8859_8",v[v.ISO8859_9=9]="ISO8859_9",v[v.ISO8859_10=10]="ISO8859_10",v[v.ISO8859_11=11]="ISO8859_11",v[v.ISO8859_13=12]="ISO8859_13",v[v.ISO8859_14=13]="ISO8859_14",v[v.ISO8859_15=14]="ISO8859_15",v[v.ISO8859_16=15]="ISO8859_16",v[v.SJIS=16]="SJIS",v[v.Cp1250=17]="Cp1250",v[v.Cp1251=18]="Cp1251",v[v.Cp1252=19]="Cp1252",v[v.Cp1256=20]="Cp1256",v[v.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",v[v.UTF8=22]="UTF8",v[v.ASCII=23]="ASCII",v[v.Big5=24]="Big5",v[v.GB18030=25]="GB18030",v[v.EUC_KR=26]="EUC_KR"})(Z||(Z={}));class V{constructor(i,r,a,...l){this.valueIdentifier=i,this.name=a,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=l,V.VALUE_IDENTIFIER_TO_ECI.set(i,this),V.NAME_TO_ECI.set(a,this);const u=this.values;for(let h=0,f=u.length;h!==f;h++){const g=u[h];V.VALUES_TO_ECI.set(g,this)}for(const h of l)V.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new U("incorect value");const r=V.VALUES_TO_ECI.get(i);if(r===void 0)throw new U("incorect value");return r}static getCharacterSetECIByName(i){const r=V.NAME_TO_ECI.get(i);if(r===void 0)throw new U("incorect value");return r}equals(i){if(!(i instanceof V))return!1;const r=i;return this.getName()===r.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(Z.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(Z.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(Z.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(Z.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(Z.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(Z.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(Z.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(Z.Big5,28,"Big5"),V.GB18030=new V(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(Z.EUC_KR,30,"EUC_KR","EUC-KR");class we extends y{}we.kind="UnsupportedOperationException";class je{static decode(i,r){const a=this.encodingName(r);return this.customDecoder?this.customDecoder(i,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(i,a):new TextDecoder(a).decode(i)}static shouldDecodeOnFallback(i){return!je.isBrowser()&&i==="ISO-8859-1"}static encode(i,r){const a=this.encodingName(r);return this.customEncoder?this.customEncoder(i,a):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof V?i:V.getCharacterSetECIByName(i)}static decodeFallback(i,r){const a=this.encodingCharacterSet(r);if(je.isDecodeFallbackSupported(a)){let l="";for(let u=0,h=i.length;u<h;u++){let f=i[u].toString(16);f.length<2&&(f="0"+f),l+="%"+f}return decodeURIComponent(l)}if(a.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new we("Encoding ".concat(this.encodingName(r)," not supported by fallback."))}static isDecodeFallbackSupported(i){return i.equals(V.UTF8)||i.equals(V.ISO8859_1)||i.equals(V.ASCII)}static encodeFallback(i){const a=btoa(unescape(encodeURIComponent(i))).split(""),l=[];for(let u=0;u<a.length;u++)l.push(a[u].charCodeAt(0));return new Uint8Array(l)}}class he{static castAsNonUtf8Char(i,r=null){const a=r?r.getName():this.ISO88591;return je.decode(new Uint8Array([i]),a)}static guessEncoding(i,r){if(r!=null&&r.get(H.CHARACTER_SET)!==void 0)return r.get(H.CHARACTER_SET).toString();const a=i.length;let l=!0,u=!0,h=!0,f=0,g=0,m=0,b=0,A=0,S=0,N=0,B=0,j=0,z=0,q=0;const J=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let $=0;$<a&&(l||u||h);$++){const K=i[$]&255;h&&(f>0?K&128?f--:h=!1:K&128&&(K&64?(f++,K&32?(f++,K&16?(f++,K&8?h=!1:b++):m++):g++):h=!1)),l&&(K>127&&K<160?l=!1:K>159&&(K<192||K===215||K===247)&&q++),u&&(A>0?K<64||K===127||K>252?u=!1:A--:K===128||K===160||K>239?u=!1:K>160&&K<224?(S++,B=0,N++,N>j&&(j=N)):K>127?(A++,N=0,B++,B>z&&(z=B)):(N=0,B=0))}return h&&f>0&&(h=!1),u&&A>0&&(u=!1),h&&(J||g+m+b>0)?he.UTF8:u&&(he.ASSUME_SHIFT_JIS||j>=3||z>=3)?he.SHIFT_JIS:l&&u?j===2&&S===2||q*10>=a?he.SHIFT_JIS:he.ISO88591:l?he.ISO88591:u?he.SHIFT_JIS:h?he.UTF8:he.PLATFORM_DEFAULT_ENCODING}static format(i,...r){let a=-1;function l(h,f,g,m,b,A){if(h==="%%")return"%";if(r[++a]===void 0)return;h=m?parseInt(m.substr(1)):void 0;let S=b?parseInt(b.substr(1)):void 0,N;switch(A){case"s":N=r[a];break;case"c":N=r[a][0];break;case"f":N=parseFloat(r[a]).toFixed(h);break;case"p":N=parseFloat(r[a]).toPrecision(h);break;case"e":N=parseFloat(r[a]).toExponential(h);break;case"x":N=parseInt(r[a]).toString(S||16);break;case"d":N=parseFloat(parseInt(r[a],S||10).toPrecision(h)).toFixed(0);break}N=typeof N=="object"?JSON.stringify(N):(+N).toString(S);let B=parseInt(g),j=g&&g[0]+""=="0"?"0":" ";for(;N.length<B;)N=f!==void 0?N+j:j+N;return N}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(u,l)}static getBytes(i,r){return je.encode(i,r)}static getCharCode(i,r=0){return i.charCodeAt(r)}static getCharAt(i){return String.fromCharCode(i)}}he.SHIFT_JIS=V.SJIS.getName(),he.GB2312="GB2312",he.ISO88591=V.ISO8859_1.getName(),he.EUC_JP="EUC_JP",he.UTF8=V.UTF8.getName(),he.PLATFORM_DEFAULT_ENCODING=he.UTF8,he.ASSUME_SHIFT_JIS=!1;class be{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=he.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,r,a){for(let l=r;r<r+a;l++)this.append(i[l]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,r){this.value=this.value.substr(0,i)+r+this.value.substr(i+1)}substring(i,r){return this.value.substring(i,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,r){this.value=this.value.substr(0,i)+r+this.value.substr(i+r.length)}}class Te{constructor(i,r,a,l){if(this.width=i,this.height=r,this.rowSize=a,this.bits=l,r==null&&(r=i),this.height=r,i<1||r<1)throw new C("Both dimensions must be greater than 0");a==null&&(a=Math.floor((i+31)/32)),this.rowSize=a,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const r=i.length,a=i[0].length,l=new Te(a,r);for(let u=0;u<r;u++){const h=i[u];for(let f=0;f<a;f++)h[f]&&l.set(f,u)}return l}static parseFromString(i,r,a){if(i===null)throw new C("stringRepresentation cannot be null");const l=new Array(i.length);let u=0,h=0,f=-1,g=0,m=0;for(;m<i.length;)if(i.charAt(m)==="\n"||i.charAt(m)==="\r"){if(u>h){if(f===-1)f=u-h;else if(u-h!==f)throw new C("row lengths do not match");h=u,g++}m++}else if(i.substring(m,m+r.length)===r)m+=r.length,l[u]=!0,u++;else if(i.substring(m,m+a.length)===a)m+=a.length,l[u]=!1,u++;else throw new C("illegal character encountered: "+i.substring(m));if(u>h){if(f===-1)f=u-h;else if(u-h!==f)throw new C("row lengths do not match");g++}const b=new Te(f,g);for(let A=0;A<u;A++)l[A]&&b.set(Math.floor(A%f),Math.floor(A/f));return b}get(i,r){const a=r*this.rowSize+Math.floor(i/32);return(this.bits[a]>>>(i&31)&1)!==0}set(i,r){const a=r*this.rowSize+Math.floor(i/32);this.bits[a]|=1<<(i&31)&4294967295}unset(i,r){const a=r*this.rowSize+Math.floor(i/32);this.bits[a]&=~(1<<(i&31)&4294967295)}flip(i,r){const a=r*this.rowSize+Math.floor(i/32);this.bits[a]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new C("input matrix dimensions do not match");const r=new M(Math.floor(this.width/32)+1),a=this.rowSize,l=this.bits;for(let u=0,h=this.height;u<h;u++){const f=u*a,g=i.getRow(u,r).getBitArray();for(let m=0;m<a;m++)l[f+m]^=g[m]}}clear(){const i=this.bits,r=i.length;for(let a=0;a<r;a++)i[a]=0}setRegion(i,r,a,l){if(r<0||i<0)throw new C("Left and top must be nonnegative");if(l<1||a<1)throw new C("Height and width must be at least 1");const u=i+a,h=r+l;if(h>this.height||u>this.width)throw new C("The region must fit inside the matrix");const f=this.rowSize,g=this.bits;for(let m=r;m<h;m++){const b=m*f;for(let A=i;A<u;A++)g[b+Math.floor(A/32)]|=1<<(A&31)&4294967295}}getRow(i,r){r==null||r.getSize()<this.width?r=new M(this.width):r.clear();const a=this.rowSize,l=this.bits,u=i*a;for(let h=0;h<a;h++)r.setBulk(h*32,l[u+h]);return r}setRow(i,r){L.arraycopy(r.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),r=this.getHeight();let a=new M(i),l=new M(i);for(let u=0,h=Math.floor((r+1)/2);u<h;u++)a=this.getRow(u,a),l=this.getRow(r-1-u,l),a.reverse(),l.reverse(),this.setRow(u,l),this.setRow(r-1-u,a)}getEnclosingRectangle(){const i=this.width,r=this.height,a=this.rowSize,l=this.bits;let u=i,h=r,f=-1,g=-1;for(let m=0;m<r;m++)for(let b=0;b<a;b++){const A=l[m*a+b];if(A!==0){if(m<h&&(h=m),m>g&&(g=m),b*32<u){let S=0;for(;!(A<<31-S&4294967295);)S++;b*32+S<u&&(u=b*32+S)}if(b*32+31>f){let S=31;for(;!(A>>>S);)S--;b*32+S>f&&(f=b*32+S)}}}return f<u||g<h?null:Int32Array.from([u,h,f-u+1,g-h+1])}getTopLeftOnBit(){const i=this.rowSize,r=this.bits;let a=0;for(;a<r.length&&r[a]===0;)a++;if(a===r.length)return null;const l=a/i;let u=a%i*32;const h=r[a];let f=0;for(;!(h<<31-f&4294967295);)f++;return u+=f,Int32Array.from([u,l])}getBottomRightOnBit(){const i=this.rowSize,r=this.bits;let a=r.length-1;for(;a>=0&&r[a]===0;)a--;if(a<0)return null;const l=Math.floor(a/i);let u=Math.floor(a%i)*32;const h=r[a];let f=31;for(;!(h>>>f);)f--;return u+=f,Int32Array.from([u,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Te))return!1;const r=i;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&_.equals(this.bits,r.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+_.hashCode(this.bits),i}toString(i="X ",r="  ",a="\n"){return this.buildToString(i,r,a)}buildToString(i,r,a){let l=new be;for(let u=0,h=this.height;u<h;u++){for(let f=0,g=this.width;f<g;f++)l.append(this.get(f,u)?i:r);l.append(a)}return l.toString()}clone(){return new Te(this.width,this.height,this.rowSize,this.bits.slice())}}class X extends y{static getNotFoundInstance(){return new X}}X.kind="NotFoundException";class ee extends k{constructor(i){super(i),this.luminances=ee.EMPTY,this.buckets=new Int32Array(ee.LUMINANCE_BUCKETS)}getBlackRow(i,r){const a=this.getLuminanceSource(),l=a.getWidth();r==null||r.getSize()<l?r=new M(l):r.clear(),this.initArrays(l);const u=a.getRow(i,this.luminances),h=this.buckets;for(let g=0;g<l;g++)h[(u[g]&255)>>ee.LUMINANCE_SHIFT]++;const f=ee.estimateBlackPoint(h);if(l<3)for(let g=0;g<l;g++)(u[g]&255)<f&&r.set(g);else{let g=u[0]&255,m=u[1]&255;for(let b=1;b<l-1;b++){const A=u[b+1]&255;(m*4-g-A)/2<f&&r.set(b),g=m,m=A}}return r}getBlackMatrix(){const i=this.getLuminanceSource(),r=i.getWidth(),a=i.getHeight(),l=new Te(r,a);this.initArrays(r);const u=this.buckets;for(let g=1;g<5;g++){const m=Math.floor(a*g/5),b=i.getRow(m,this.luminances),A=Math.floor(r*4/5);for(let S=Math.floor(r/5);S<A;S++){const N=b[S]&255;u[N>>ee.LUMINANCE_SHIFT]++}}const h=ee.estimateBlackPoint(u),f=i.getMatrix();for(let g=0;g<a;g++){const m=g*r;for(let b=0;b<r;b++)(f[m+b]&255)<h&&l.set(b,g)}return l}createBinarizer(i){return new ee(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const r=this.buckets;for(let a=0;a<ee.LUMINANCE_BUCKETS;a++)r[a]=0}static estimateBlackPoint(i){const r=i.length;let a=0,l=0,u=0;for(let b=0;b<r;b++)i[b]>u&&(l=b,u=i[b]),i[b]>a&&(a=i[b]);let h=0,f=0;for(let b=0;b<r;b++){const A=b-l,S=i[b]*A*A;S>f&&(h=b,f=S)}if(l>h){const b=l;l=h,h=b}if(h-l<=r/16)throw new X;let g=h-1,m=-1;for(let b=h-1;b>l;b--){const A=b-l,S=A*A*(h-b)*(a-i[b]);S>m&&(g=b,m=S)}return g<<ee.LUMINANCE_SHIFT}}ee.LUMINANCE_BITS=5,ee.LUMINANCE_SHIFT=8-ee.LUMINANCE_BITS,ee.LUMINANCE_BUCKETS=1<<ee.LUMINANCE_BITS,ee.EMPTY=Uint8ClampedArray.from([0]);class ne extends ee{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),r=i.getWidth(),a=i.getHeight();if(r>=ne.MINIMUM_DIMENSION&&a>=ne.MINIMUM_DIMENSION){const l=i.getMatrix();let u=r>>ne.BLOCK_SIZE_POWER;r&ne.BLOCK_SIZE_MASK&&u++;let h=a>>ne.BLOCK_SIZE_POWER;a&ne.BLOCK_SIZE_MASK&&h++;const f=ne.calculateBlackPoints(l,u,h,r,a),g=new Te(r,a);ne.calculateThresholdForBlock(l,u,h,r,a,f,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ne(i)}static calculateThresholdForBlock(i,r,a,l,u,h,f){const g=u-ne.BLOCK_SIZE,m=l-ne.BLOCK_SIZE;for(let b=0;b<a;b++){let A=b<<ne.BLOCK_SIZE_POWER;A>g&&(A=g);const S=ne.cap(b,2,a-3);for(let N=0;N<r;N++){let B=N<<ne.BLOCK_SIZE_POWER;B>m&&(B=m);const j=ne.cap(N,2,r-3);let z=0;for(let J=-2;J<=2;J++){const $=h[S+J];z+=$[j-2]+$[j-1]+$[j]+$[j+1]+$[j+2]}const q=z/25;ne.thresholdBlock(i,B,A,q,l,f)}}}static cap(i,r,a){return i<r?r:i>a?a:i}static thresholdBlock(i,r,a,l,u,h){for(let f=0,g=a*u+r;f<ne.BLOCK_SIZE;f++,g+=u)for(let m=0;m<ne.BLOCK_SIZE;m++)(i[g+m]&255)<=l&&h.set(r+m,a+f)}static calculateBlackPoints(i,r,a,l,u){const h=u-ne.BLOCK_SIZE,f=l-ne.BLOCK_SIZE,g=new Array(a);for(let m=0;m<a;m++){g[m]=new Int32Array(r);let b=m<<ne.BLOCK_SIZE_POWER;b>h&&(b=h);for(let A=0;A<r;A++){let S=A<<ne.BLOCK_SIZE_POWER;S>f&&(S=f);let N=0,B=255,j=0;for(let q=0,J=b*l+S;q<ne.BLOCK_SIZE;q++,J+=l){for(let $=0;$<ne.BLOCK_SIZE;$++){const K=i[J+$]&255;N+=K,K<B&&(B=K),K>j&&(j=K)}if(j-B>ne.MIN_DYNAMIC_RANGE)for(q++,J+=l;q<ne.BLOCK_SIZE;q++,J+=l)for(let $=0;$<ne.BLOCK_SIZE;$++)N+=i[J+$]&255}let z=N>>ne.BLOCK_SIZE_POWER*2;if(j-B<=ne.MIN_DYNAMIC_RANGE&&(z=B/2,m>0&&A>0)){const q=(g[m-1][A]+2*g[m][A-1]+g[m-1][A-1])/4;B<q&&(z=q)}g[m][A]=z}}return g}}ne.BLOCK_SIZE_POWER=3,ne.BLOCK_SIZE=1<<ne.BLOCK_SIZE_POWER,ne.BLOCK_SIZE_MASK=ne.BLOCK_SIZE-1,ne.MINIMUM_DIMENSION=ne.BLOCK_SIZE*5,ne.MIN_DYNAMIC_RANGE=24;class ye{constructor(i,r){this.width=i,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,r,a,l){throw new we("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new we("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new we("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let r=new be;for(let a=0;a<this.height;a++){const l=this.getRow(a,i);for(let u=0;u<this.width;u++){const h=l[u]&255;let f;h<64?f="#":h<128?f="+":h<192?f=".":f=" ",r.append(f)}r.append("\n")}return r.toString()}}class ze extends ye{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,r){const a=this.delegate.getRow(i,r),l=this.getWidth();for(let u=0;u<l;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const i=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(r);for(let l=0;l<r;l++)a[l]=255-(i[l]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(i,r,a,l){return new ze(this.delegate.crop(i,r,a,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ze(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ze(this.delegate.rotateCounterClockwise45())}}class We extends ye{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=We.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const r=i.getContext("2d").getImageData(0,0,i.width,i.height);return We.toGrayscaleBuffer(r.data,i.width,i.height)}static toGrayscaleBuffer(i,r,a){const l=new Uint8ClampedArray(r*a);for(let u=0,h=0,f=i.length;u<f;u+=4,h++){let g;if(i[u+3]===0)g=255;else{const b=i[u],A=i[u+1],S=i[u+2];g=306*b+601*A+117*S+512>>10}l[h]=g}return l}getRow(i,r){if(i<0||i>=this.getHeight())throw new C("Requested row is outside the image: "+i);const a=this.getWidth(),l=i*a;return r===null?r=this.buffer.slice(l,l+a):(r.length<a&&(r=new Uint8ClampedArray(a)),r.set(this.buffer.slice(l,l+a))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,r,a,l){return super.crop(i,r,a,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const r=this.getTempCanvasElement(),a=r.getContext("2d"),l=i*We.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(l))*u+Math.abs(Math.sin(l))*h),g=Math.ceil(Math.abs(Math.sin(l))*u+Math.abs(Math.cos(l))*h);return r.width=f,r.height=g,a.translate(f/2,g/2),a.rotate(l),a.drawImage(this.canvas,u/-2,h/-2),this.buffer=We.makeBufferFromCanvasImageData(r),this}invert(){return new ze(this)}}We.DEGREE_TO_RADIANS=Math.PI/180;class kr{constructor(i,r,a){this.deviceId=i,this.label=r,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var St=(globalThis||Pa||self||window||void 0)&&(globalThis||Pa||self||window||void 0).__awaiter||function(v,i,r,a){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(b){try{m(a.next(b))}catch(A){h(A)}}function g(b){try{m(a.throw(b))}catch(A){h(A)}}function m(b){b.done?u(b.value):l(b.value).then(f,g)}m((a=a.apply(v,i||[])).next())})};class ni{constructor(i,r=500,a){this.reader=i,this.timeBetweenScansMillis=r,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return St(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const a of i){const l=a.kind==="video"?"videoinput":a.kind;if(l!=="videoinput")continue;const u=a.deviceId||a.id,h=a.label||"Video device ".concat(r.length+1),f=a.groupId,g={deviceId:u,label:h,kind:l,groupId:f};r.push(g)}return r})}getVideoInputDevices(){return St(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new kr(r.deviceId,r.label))})}findDeviceById(i){return St(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(a=>a.deviceId===i):null})}decodeFromInputVideoDevice(i,r){return St(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,r)})}decodeOnceFromVideoDevice(i,r){return St(this,void 0,void 0,function*(){this.reset();let a;i?a={deviceId:{exact:i}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeOnceFromConstraints(l,r)})}decodeOnceFromConstraints(i,r){return St(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(a,r)})}decodeOnceFromStream(i,r){return St(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(i,r);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(i,r,a){return St(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,r,a)})}decodeFromVideoDevice(i,r,a){return St(this,void 0,void 0,function*(){let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeFromConstraints(u,r,a)})}decodeFromConstraints(i,r,a){return St(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(l,r,a)})}decodeFromStream(i,r,a){return St(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,r);return yield this.decodeContinuously(l,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,r){return St(this,void 0,void 0,function*(){const a=this.prepareVideoElement(r);return this.addVideoSource(a,i),this.videoElement=a,this.stream=i,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(i){return new Promise((r,a)=>this.playVideoOnLoad(i,()=>r()))}playVideoOnLoad(i,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",r),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return St(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch(r){console.warn("It was not possible to play the video.")}})}getMediaElement(i,r){const a=document.getElementById(i);if(!a)throw new E("element with id '".concat(i,"' not found"));if(a.nodeName.toLowerCase()!==r.toLowerCase())throw new E("element with id '".concat(i,"' must be an ").concat(r," element"));return a}decodeFromImage(i,r){if(!i&&!r)throw new E("either imageElement with a src set or an url must be provided");return r&&!i?this.decodeFromImageUrl(r):this.decodeFromImageElement(i)}decodeFromVideo(i,r){if(!i&&!r)throw new E("Either an element with a src set or an URL must be provided");return r&&!i?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,r,a){if(i===void 0&&r===void 0)throw new E("Either an element with a src set or an URL must be provided");return r&&!i?this.decodeFromVideoUrlContinuously(r,a):this.decodeFromVideoElementContinuously(i,a)}decodeFromImageElement(i){if(!i)throw new E("An image element must be provided.");this.reset();const r=this.prepareImageElement(i);this.imageElement=r;let a;return this.isImageLoaded(r)?a=this.decodeOnce(r,!1,!0):a=this._decodeOnLoadImage(r),a}decodeFromVideoElement(i){const r=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(i,r){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(a,r)}_decodeFromVideoElementSetup(i){if(!i)throw new E("A video element must be provided.");this.reset();const r=this.prepareVideoElement(i);return this.videoElement=r,r}decodeFromImageUrl(i){if(!i)throw new E("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const a=this._decodeOnLoadImage(r);return r.src=i,a}decodeFromVideoUrl(i){if(!i)throw new E("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),a=this.decodeFromVideoElement(r);return r.src=i,a}decodeFromVideoUrlContinuously(i,r){if(!i)throw new E("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(a,r);return a.src=i,l}_decodeOnLoadImage(i){return new Promise((r,a)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(r,a),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return St(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,r){return St(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,r)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let r;return typeof i>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof i=="string"&&(r=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(r=i),r}prepareVideoElement(i){let r;return!i&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof i=="string"&&(r=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(r=i),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(i,r=!0,a=!0){this._stopAsyncDecode=!1;const l=(u,h)=>{if(this._stopAsyncDecode){h(new X("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(i);u(f)}catch(f){const g=r&&f instanceof X,b=(f instanceof R||f instanceof U)&&a;if(g||b)return setTimeout(l,this._timeBetweenDecodingAttempts,u,h);h(f)}};return new Promise((u,h)=>l(u,h))}decodeContinuously(i,r){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(i);r(l,null),setTimeout(a,this.timeBetweenScansMillis)}catch(l){r(null,l);const u=l instanceof R||l instanceof U,h=l instanceof X;(u||h)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(i){const r=this.createBinaryBitmap(i);return this.decodeBitmap(r)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,r,a){r||(r={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(i,r,a=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const r=this.getCaptureCanvas(i),a=new We(r),l=new ne(a);return new T(l)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const r=this.createCaptureCanvas(i);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let a,l;return typeof i<"u"&&(i instanceof HTMLVideoElement?(a=i.videoWidth,l=i.videoHeight):i instanceof HTMLImageElement&&(a=i.naturalWidth||i.width,l=i.naturalHeight||i.height)),r.style.width=a+"px",r.style.height=l+"px",r.width=a,r.height=l,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,r){try{i.srcObject=r}catch(a){i.src=URL.createObjectURL(r)}}cleanVideoSource(i){try{i.srcObject=null}catch(r){i.src=""}this.videoElement.removeAttribute("src")}}class ht{constructor(i,r,a=r==null?0:8*r.length,l,u,h=L.currentTimeMillis()){this.text=i,this.rawBytes=r,this.numBits=a,this.resultPoints=l,this.format=u,this.timestamp=h,this.text=i,this.rawBytes=r,a==null?this.numBits=r==null?0:8*r.length:this.numBits=a,this.resultPoints=l,this.format=u,this.resultMetadata=null,h==null?this.timestamp=L.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,r)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const r=this.resultPoints;if(r===null)this.resultPoints=i;else if(i!==null&&i.length>0){const a=new Array(r.length+i.length);L.arraycopy(r,0,a,0,r.length),L.arraycopy(i,0,a,r.length,i.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ji;(function(v){v[v.AZTEC=0]="AZTEC",v[v.CODABAR=1]="CODABAR",v[v.CODE_39=2]="CODE_39",v[v.CODE_93=3]="CODE_93",v[v.CODE_128=4]="CODE_128",v[v.DATA_MATRIX=5]="DATA_MATRIX",v[v.EAN_8=6]="EAN_8",v[v.EAN_13=7]="EAN_13",v[v.ITF=8]="ITF",v[v.MAXICODE=9]="MAXICODE",v[v.PDF_417=10]="PDF_417",v[v.QR_CODE=11]="QR_CODE",v[v.RSS_14=12]="RSS_14",v[v.RSS_EXPANDED=13]="RSS_EXPANDED",v[v.UPC_A=14]="UPC_A",v[v.UPC_E=15]="UPC_E",v[v.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ji||(Ji={}));var fe=Ji,qc;(function(v){v[v.OTHER=0]="OTHER",v[v.ORIENTATION=1]="ORIENTATION",v[v.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",v[v.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",v[v.ISSUE_NUMBER=4]="ISSUE_NUMBER",v[v.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",v[v.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",v[v.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",v[v.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",v[v.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",v[v.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(qc||(qc={}));var Pt=qc;class Ta{constructor(i,r,a,l,u=-1,h=-1){this.rawBytes=i,this.text=r,this.byteSegments=a,this.ecLevel=l,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Oa{exp(i){return this.expTable[i]}log(i){if(i===0)throw new C;return this.logTable[i]}static addOrSubtract(i,r){return i^r}}class gn{constructor(i,r){if(r.length===0)throw new C;this.field=i;const a=r.length;if(a>1&&r[0]===0){let l=1;for(;l<a&&r[l]===0;)l++;l===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-l),L.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const r=this.coefficients;let a;if(i===1){a=0;for(let h=0,f=r.length;h!==f;h++){const g=r[h];a=Oa.addOrSubtract(a,g)}return a}a=r[0];const l=r.length,u=this.field;for(let h=1;h<l;h++)a=Oa.addOrSubtract(u.multiply(i,a),r[h]);return a}addOrSubtract(i){if(!this.field.equals(i.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let r=this.coefficients,a=i.coefficients;if(r.length>a.length){const h=r;r=a,a=h}let l=new Int32Array(a.length);const u=a.length-r.length;L.arraycopy(a,0,l,0,u);for(let h=u;h<a.length;h++)l[h]=Oa.addOrSubtract(r[h-u],a[h]);return new gn(this.field,l)}multiply(i){if(!this.field.equals(i.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const r=this.coefficients,a=r.length,l=i.coefficients,u=l.length,h=new Int32Array(a+u-1),f=this.field;for(let g=0;g<a;g++){const m=r[g];for(let b=0;b<u;b++)h[g+b]=Oa.addOrSubtract(h[g+b],f.multiply(m,l[b]))}return new gn(f,h)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const r=this.coefficients.length,a=this.field,l=new Int32Array(r),u=this.coefficients;for(let h=0;h<r;h++)l[h]=a.multiply(u[h],i);return new gn(a,l)}multiplyByMonomial(i,r){if(i<0)throw new C;if(r===0)return this.field.getZero();const a=this.coefficients,l=a.length,u=new Int32Array(l+i),h=this.field;for(let f=0;f<l;f++)u[f]=h.multiply(a[f],r);return new gn(h,u)}divide(i){if(!this.field.equals(i.field))throw new C("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new C("Divide by 0");const r=this.field;let a=r.getZero(),l=this;const u=i.getCoefficient(i.getDegree()),h=r.inverse(u);for(;l.getDegree()>=i.getDegree()&&!l.isZero();){const f=l.getDegree()-i.getDegree(),g=r.multiply(l.getCoefficient(l.getDegree()),h),m=i.multiplyByMonomial(f,g),b=r.buildMonomial(f,g);a=a.addOrSubtract(b),l=l.addOrSubtract(m)}return[a,l]}toString(){let i="";for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);if(a!==0){if(a<0?(i+=" - ",a=-a):i.length>0&&(i+=" + "),r===0||a!==1){const l=this.field.log(a);l===0?i+="1":l===1?i+="a":(i+="a^",i+=l)}r!==0&&(r===1?i+="x":(i+="x^",i+=r))}}return i}}class Zo extends y{}Zo.kind="ArithmeticException";class Le extends Oa{constructor(i,r,a){super(),this.primitive=i,this.size=r,this.generatorBase=a;const l=new Int32Array(r);let u=1;for(let f=0;f<r;f++)l[f]=u,u*=2,u>=r&&(u^=i,u&=r-1);this.expTable=l;const h=new Int32Array(r);for(let f=0;f<r-1;f++)h[l[f]]=f;this.logTable=h,this.zero=new gn(this,Int32Array.from([0])),this.one=new gn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,r){if(i<0)throw new C;if(r===0)return this.zero;const a=new Int32Array(i+1);return a[0]=r,new gn(this,a)}inverse(i){if(i===0)throw new Zo;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,r){return i===0||r===0?0:this.expTable[(this.logTable[i]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+O.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Le.AZTEC_DATA_12=new Le(4201,4096,1),Le.AZTEC_DATA_10=new Le(1033,1024,1),Le.AZTEC_DATA_6=new Le(67,64,1),Le.AZTEC_PARAM=new Le(19,16,1),Le.QR_CODE_FIELD_256=new Le(285,256,0),Le.DATA_MATRIX_FIELD_256=new Le(301,256,1),Le.AZTEC_DATA_8=Le.DATA_MATRIX_FIELD_256,Le.MAXICODE_FIELD_64=Le.AZTEC_DATA_6;class ws extends y{}ws.kind="ReedSolomonException";class gi extends y{}gi.kind="IllegalStateException";class Ra{constructor(i){this.field=i}decode(i,r){const a=this.field,l=new gn(a,i),u=new Int32Array(r);let h=!0;for(let N=0;N<r;N++){const B=l.evaluateAt(a.exp(N+a.getGeneratorBase()));u[u.length-1-N]=B,B!==0&&(h=!1)}if(h)return;const f=new gn(a,u),g=this.runEuclideanAlgorithm(a.buildMonomial(r,1),f,r),m=g[0],b=g[1],A=this.findErrorLocations(m),S=this.findErrorMagnitudes(b,A);for(let N=0;N<A.length;N++){const B=i.length-1-a.log(A[N]);if(B<0)throw new ws("Bad error location");i[B]=Le.addOrSubtract(i[B],S[N])}}runEuclideanAlgorithm(i,r,a){if(i.getDegree()<r.getDegree()){const N=i;i=r,r=N}const l=this.field;let u=i,h=r,f=l.getZero(),g=l.getOne();for(;h.getDegree()>=(a/2|0);){let N=u,B=f;if(u=h,f=g,u.isZero())throw new ws("r_{i-1} was zero");h=N;let j=l.getZero();const z=u.getCoefficient(u.getDegree()),q=l.inverse(z);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const J=h.getDegree()-u.getDegree(),$=l.multiply(h.getCoefficient(h.getDegree()),q);j=j.addOrSubtract(l.buildMonomial(J,$)),h=h.addOrSubtract(u.multiplyByMonomial(J,$))}if(g=j.multiply(f).addOrSubtract(B),h.getDegree()>=u.getDegree())throw new gi("Division algorithm failed to reduce polynomial?")}const m=g.getCoefficient(0);if(m===0)throw new ws("sigmaTilde(0) was zero");const b=l.inverse(m),A=g.multiplyScalar(b),S=h.multiplyScalar(b);return[A,S]}findErrorLocations(i){const r=i.getDegree();if(r===1)return Int32Array.from([i.getCoefficient(1)]);const a=new Int32Array(r);let l=0;const u=this.field;for(let h=1;h<u.getSize()&&l<r;h++)i.evaluateAt(h)===0&&(a[l]=u.inverse(h),l++);if(l!==r)throw new ws("Error locator degree does not match number of roots");return a}findErrorMagnitudes(i,r){const a=r.length,l=new Int32Array(a),u=this.field;for(let h=0;h<a;h++){const f=u.inverse(r[h]);let g=1;for(let m=0;m<a;m++)if(h!==m){const b=u.multiply(r[m],f),A=b&1?b&-2:b|1;g=u.multiply(g,A)}l[h]=u.multiply(i.evaluateAt(f),u.inverse(g)),u.getGeneratorBase()!==0&&(l[h]=u.multiply(l[h],f))}return l}}var Xt;(function(v){v[v.UPPER=0]="UPPER",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.DIGIT=3]="DIGIT",v[v.PUNCT=4]="PUNCT",v[v.BINARY=5]="BINARY"})(Xt||(Xt={}));class Je{decode(i){this.ddata=i;let r=i.getBits(),a=this.extractBits(r),l=this.correctBits(a),u=Je.convertBoolArrayToByteArray(l),h=Je.getEncodedData(l),f=new Ta(u,h,null,null);return f.setNumBits(l.length),f}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let r=i.length,a=Xt.UPPER,l=Xt.UPPER,u="",h=0;for(;h<r;)if(l===Xt.BINARY){if(r-h<5)break;let f=Je.readCode(i,h,5);if(h+=5,f===0){if(r-h<11)break;f=Je.readCode(i,h,11)+31,h+=11}for(let g=0;g<f;g++){if(r-h<8){h=r;break}const m=Je.readCode(i,h,8);u+=he.castAsNonUtf8Char(m),h+=8}l=a}else{let f=l===Xt.DIGIT?4:5;if(r-h<f)break;let g=Je.readCode(i,h,f);h+=f;let m=Je.getCharacter(l,g);m.startsWith("CTRL_")?(a=l,l=Je.getTable(m.charAt(5)),m.charAt(6)==="L"&&(a=l)):(u+=m,l=a)}return u}static getTable(i){switch(i){case"L":return Xt.LOWER;case"P":return Xt.PUNCT;case"M":return Xt.MIXED;case"D":return Xt.DIGIT;case"B":return Xt.BINARY;case"U":default:return Xt.UPPER}}static getCharacter(i,r){switch(i){case Xt.UPPER:return Je.UPPER_TABLE[r];case Xt.LOWER:return Je.LOWER_TABLE[r];case Xt.MIXED:return Je.MIXED_TABLE[r];case Xt.PUNCT:return Je.PUNCT_TABLE[r];case Xt.DIGIT:return Je.DIGIT_TABLE[r];default:throw new gi("Bad table")}}correctBits(i){let r,a;this.ddata.getNbLayers()<=2?(a=6,r=Le.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,r=Le.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,r=Le.AZTEC_DATA_10):(a=12,r=Le.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),u=i.length/a;if(u<l)throw new U;let h=i.length%a,f=new Int32Array(u);for(let S=0;S<u;S++,h+=a)f[S]=Je.readCode(i,h,a);try{new Ra(r).decode(f,u-l)}catch(S){throw new U(S)}let g=(1<<a)-1,m=0;for(let S=0;S<l;S++){let N=f[S];if(N===0||N===g)throw new U;(N===1||N===g-1)&&m++}let b=new Array(l*a-m),A=0;for(let S=0;S<l;S++){let N=f[S];if(N===1||N===g-1)b.fill(N>1,A,A+a-1),A+=a-1;else for(let B=a-1;B>=0;--B)b[A++]=(N&1<<B)!==0}return b}extractBits(i){let r=this.ddata.isCompact(),a=this.ddata.getNbLayers(),l=(r?11:14)+a*4,u=new Int32Array(l),h=new Array(this.totalBitsInLayer(a,r));if(r)for(let f=0;f<u.length;f++)u[f]=f;else{let f=l+1+2*O.truncDivision(O.truncDivision(l,2)-1,15),g=l/2,m=O.truncDivision(f,2);for(let b=0;b<g;b++){let A=b+O.truncDivision(b,15);u[g-b-1]=m-A-1,u[g+b]=m+A+1}}for(let f=0,g=0;f<a;f++){let m=(a-f)*4+(r?9:12),b=f*2,A=l-1-b;for(let S=0;S<m;S++){let N=S*2;for(let B=0;B<2;B++)h[g+N+B]=i.get(u[b+B],u[b+S]),h[g+2*m+N+B]=i.get(u[b+S],u[A-B]),h[g+4*m+N+B]=i.get(u[A-B],u[A-S]),h[g+6*m+N+B]=i.get(u[A-S],u[b+B])}g+=m*8}return h}static readCode(i,r,a){let l=0;for(let u=r;u<r+a;u++)l<<=1,i[u]&&(l|=1);return l}static readByte(i,r){let a=i.length-r;return a>=8?Je.readCode(i,r,8):Je.readCode(i,r,a)<<8-a}static convertBoolArrayToByteArray(i){let r=new Uint8Array((i.length+7)/8);for(let a=0;a<r.length;a++)r[a]=Je.readByte(i,8*a);return r}totalBitsInLayer(i,r){return((r?88:112)+16*i)*i}}Je.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Je.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Je.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Je.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Je.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Me{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,r,a,l){const u=i-a,h=r-l;return Math.sqrt(u*u+h*h)}static sum(i){let r=0;for(let a=0,l=i.length;a!==l;a++){const u=i[a];r+=u}return r}}class Ko{static floatToIntBits(i){return i}}Ko.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(i,r){this.x=i,this.y=r}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof oe){const r=i;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Ko.floatToIntBits(this.x)+Ko.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const r=this.distance(i[0],i[1]),a=this.distance(i[1],i[2]),l=this.distance(i[0],i[2]);let u,h,f;if(a>=r&&a>=l?(h=i[0],u=i[1],f=i[2]):l>=a&&l>=r?(h=i[1],u=i[0],f=i[2]):(h=i[2],u=i[0],f=i[1]),this.crossProductZ(u,h,f)<0){const g=u;u=f,f=g}i[0]=u,i[1]=h,i[2]=f}static distance(i,r){return Me.distance(i.x,i.y,r.x,r.y)}static crossProductZ(i,r,a){const l=r.x,u=r.y;return(a.x-l)*(i.y-u)-(a.y-u)*(i.x-l)}}class Jo{constructor(i,r){this.bits=i,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class d1 extends Jo{constructor(i,r,a,l,u){super(i,r),this.compact=a,this.nbDatablocks=l,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ri{constructor(i,r,a,l){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),r==null&&(r=Ri.INIT_SIZE),a==null&&(a=i.getWidth()/2|0),l==null&&(l=i.getHeight()/2|0);const u=r/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=l-u,this.downInit=l+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new X}detect(){let i=this.leftInit,r=this.rightInit,a=this.upInit,l=this.downInit,u=!1,h=!0,f=!1,g=!1,m=!1,b=!1,A=!1;const S=this.width,N=this.height;for(;h;){h=!1;let B=!0;for(;(B||!g)&&r<S;)B=this.containsBlackPoint(a,l,r,!1),B?(r++,h=!0,g=!0):g||r++;if(r>=S){u=!0;break}let j=!0;for(;(j||!m)&&l<N;)j=this.containsBlackPoint(i,r,l,!0),j?(l++,h=!0,m=!0):m||l++;if(l>=N){u=!0;break}let z=!0;for(;(z||!b)&&i>=0;)z=this.containsBlackPoint(a,l,i,!1),z?(i--,h=!0,b=!0):b||i--;if(i<0){u=!0;break}let q=!0;for(;(q||!A)&&a>=0;)q=this.containsBlackPoint(i,r,a,!0),q?(a--,h=!0,A=!0):A||a--;if(a<0){u=!0;break}h&&(f=!0)}if(!u&&f){const B=r-i;let j=null;for(let $=1;j===null&&$<B;$++)j=this.getBlackPointOnSegment(i,l-$,i+$,l);if(j==null)throw new X;let z=null;for(let $=1;z===null&&$<B;$++)z=this.getBlackPointOnSegment(i,a+$,i+$,a);if(z==null)throw new X;let q=null;for(let $=1;q===null&&$<B;$++)q=this.getBlackPointOnSegment(r,a+$,r-$,a);if(q==null)throw new X;let J=null;for(let $=1;J===null&&$<B;$++)J=this.getBlackPointOnSegment(r,l-$,r-$,l);if(J==null)throw new X;return this.centerEdges(J,j,q,z)}else throw new X}getBlackPointOnSegment(i,r,a,l){const u=Me.round(Me.distance(i,r,a,l)),h=(a-i)/u,f=(l-r)/u,g=this.image;for(let m=0;m<u;m++){const b=Me.round(i+m*h),A=Me.round(r+m*f);if(g.get(b,A))return new oe(b,A)}return null}centerEdges(i,r,a,l){const u=i.getX(),h=i.getY(),f=r.getX(),g=r.getY(),m=a.getX(),b=a.getY(),A=l.getX(),S=l.getY(),N=Ri.CORR;return u<this.width/2?[new oe(A-N,S+N),new oe(f+N,g+N),new oe(m-N,b-N),new oe(u+N,h-N)]:[new oe(A+N,S+N),new oe(f+N,g-N),new oe(m-N,b+N),new oe(u-N,h-N)]}containsBlackPoint(i,r,a,l){const u=this.image;if(l){for(let h=i;h<=r;h++)if(u.get(h,a))return!0}else for(let h=i;h<=r;h++)if(u.get(a,h))return!0;return!1}}Ri.INIT_SIZE=10,Ri.CORR=1;class Xc{static checkAndNudgePoints(i,r){const a=i.getWidth(),l=i.getHeight();let u=!0;for(let h=0;h<r.length&&u;h+=2){const f=Math.floor(r[h]),g=Math.floor(r[h+1]);if(f<-1||f>a||g<-1||g>l)throw new X;u=!1,f===-1?(r[h]=0,u=!0):f===a&&(r[h]=a-1,u=!0),g===-1?(r[h+1]=0,u=!0):g===l&&(r[h+1]=l-1,u=!0)}u=!0;for(let h=r.length-2;h>=0&&u;h-=2){const f=Math.floor(r[h]),g=Math.floor(r[h+1]);if(f<-1||f>a||g<-1||g>l)throw new X;u=!1,f===-1?(r[h]=0,u=!0):f===a&&(r[h]=a-1,u=!0),g===-1?(r[h+1]=0,u=!0):g===l&&(r[h+1]=l-1,u=!0)}}}class ii{constructor(i,r,a,l,u,h,f,g,m){this.a11=i,this.a21=r,this.a31=a,this.a12=l,this.a22=u,this.a32=h,this.a13=f,this.a23=g,this.a33=m}static quadrilateralToQuadrilateral(i,r,a,l,u,h,f,g,m,b,A,S,N,B,j,z){const q=ii.quadrilateralToSquare(i,r,a,l,u,h,f,g);return ii.squareToQuadrilateral(m,b,A,S,N,B,j,z).times(q)}transformPoints(i){const r=i.length,a=this.a11,l=this.a12,u=this.a13,h=this.a21,f=this.a22,g=this.a23,m=this.a31,b=this.a32,A=this.a33;for(let S=0;S<r;S+=2){const N=i[S],B=i[S+1],j=u*N+g*B+A;i[S]=(a*N+h*B+m)/j,i[S+1]=(l*N+f*B+b)/j}}transformPointsWithValues(i,r){const a=this.a11,l=this.a12,u=this.a13,h=this.a21,f=this.a22,g=this.a23,m=this.a31,b=this.a32,A=this.a33,S=i.length;for(let N=0;N<S;N++){const B=i[N],j=r[N],z=u*B+g*j+A;i[N]=(a*B+h*j+m)/z,r[N]=(l*B+f*j+b)/z}}static squareToQuadrilateral(i,r,a,l,u,h,f,g){const m=i-a+u-f,b=r-l+h-g;if(m===0&&b===0)return new ii(a-i,u-a,i,l-r,h-l,r,0,0,1);{const A=a-u,S=f-u,N=l-h,B=g-h,j=A*B-S*N,z=(m*B-S*b)/j,q=(A*b-m*N)/j;return new ii(a-i+z*a,f-i+q*f,i,l-r+z*l,g-r+q*g,r,z,q,1)}}static quadrilateralToSquare(i,r,a,l,u,h,f,g){return ii.squareToQuadrilateral(i,r,a,l,u,h,f,g).buildAdjoint()}buildAdjoint(){return new ii(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new ii(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class f1 extends Xc{sampleGrid(i,r,a,l,u,h,f,g,m,b,A,S,N,B,j,z,q,J,$){const K=ii.quadrilateralToQuadrilateral(l,u,h,f,g,m,b,A,S,N,B,j,z,q,J,$);return this.sampleGridWithTransform(i,r,a,K)}sampleGridWithTransform(i,r,a,l){if(r<=0||a<=0)throw new X;const u=new Te(r,a),h=new Float32Array(2*r);for(let f=0;f<a;f++){const g=h.length,m=f+.5;for(let b=0;b<g;b+=2)h[b]=b/2+.5,h[b+1]=m;l.transformPoints(h),Xc.checkAndNudgePoints(i,h);try{for(let b=0;b<g;b+=2)i.get(Math.floor(h[b]),Math.floor(h[b+1]))&&u.set(b/2,f)}catch(b){throw new X}}return u}}class $i{static setGridSampler(i){$i.gridSampler=i}static getInstance(){return $i.gridSampler}}$i.gridSampler=new f1;class cn{constructor(i,r){this.x=i,this.y=r}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class g1{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let r=this.getMatrixCenter(),a=this.getBullsEyeCorners(r);if(i){let h=a[0];a[0]=a[2],a[2]=h}this.extractParameters(a);let l=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new d1(l,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new X;let r=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(i[0],i[1],r),this.sampleLine(i[1],i[2],r),this.sampleLine(i[2],i[3],r),this.sampleLine(i[3],i[0],r)]);this.shift=this.getRotation(a,r);let l=0;for(let h=0;h<4;h++){let f=a[(this.shift+h)%4];this.compact?(l<<=7,l+=f>>1&127):(l<<=10,l+=(f>>2&992)+(f>>1&31))}let u=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(i,r){let a=0;i.forEach((l,u,h)=>{let f=(l>>r-2<<1)+(l&1);a=(a<<3)+f}),a=((a&1)<<11)+(a>>1);for(let l=0;l<4;l++)if(O.bitCount(a^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new X}getCorrectedParameterData(i,r){let a,l;r?(a=7,l=2):(a=10,l=4);let u=a-l,h=new Int32Array(a);for(let g=a-1;g>=0;--g)h[g]=i&15,i>>=4;try{new Ra(Le.AZTEC_PARAM).decode(h,u)}catch(g){throw new X}let f=0;for(let g=0;g<l;g++)f=(f<<4)+h[g];return f}getBullsEyeCorners(i){let r=i,a=i,l=i,u=i,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(r,h,1,-1),S=this.getFirstDifferent(a,h,1,1),N=this.getFirstDifferent(l,h,-1,1),B=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let j=this.distancePoint(B,A)*this.nbCenterLayers/(this.distancePoint(u,r)*(this.nbCenterLayers+2));if(j<.75||j>1.25||!this.isWhiteOrBlackRectangle(A,S,N,B))break}r=A,a=S,l=N,u=B,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new X;this.compact=this.nbCenterLayers===5;let f=new oe(r.getX()+.5,r.getY()-.5),g=new oe(a.getX()+.5,a.getY()+.5),m=new oe(l.getX()-.5,l.getY()+.5),b=new oe(u.getX()-.5,u.getY()-.5);return this.expandSquare([f,g,m,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,r,a,l;try{let f=new Ri(this.image).detect();i=f[0],r=f[1],a=f[2],l=f[3]}catch(f){let g=this.image.getWidth()/2,m=this.image.getHeight()/2;i=this.getFirstDifferent(new cn(g+7,m-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new cn(g+7,m+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new cn(g-7,m+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new cn(g-7,m-7),!1,-1,-1).toResultPoint()}let u=Me.round((i.getX()+l.getX()+r.getX()+a.getX())/4),h=Me.round((i.getY()+l.getY()+r.getY()+a.getY())/4);try{let f=new Ri(this.image,15,u,h).detect();i=f[0],r=f[1],a=f[2],l=f[3]}catch(f){i=this.getFirstDifferent(new cn(u+7,h-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new cn(u+7,h+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new cn(u-7,h+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new cn(u-7,h-7),!1,-1,-1).toResultPoint()}return u=Me.round((i.getX()+l.getX()+r.getX()+a.getX())/4),h=Me.round((i.getY()+l.getY()+r.getY()+a.getY())/4),new cn(u,h)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,r,a,l,u){let h=$i.getInstance(),f=this.getDimension(),g=f/2-this.nbCenterLayers,m=f/2+this.nbCenterLayers;return h.sampleGrid(i,f,f,g,g,m,g,m,m,g,m,r.getX(),r.getY(),a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY())}sampleLine(i,r,a){let l=0,u=this.distanceResultPoint(i,r),h=u/a,f=i.getX(),g=i.getY(),m=h*(r.getX()-i.getX())/u,b=h*(r.getY()-i.getY())/u;for(let A=0;A<a;A++)this.image.get(Me.round(f+A*m),Me.round(g+A*b))&&(l|=1<<a-A-1);return l}isWhiteOrBlackRectangle(i,r,a,l){let u=3;i=new cn(i.getX()-u,i.getY()+u),r=new cn(r.getX()-u,r.getY()-u),a=new cn(a.getX()+u,a.getY()-u),l=new cn(l.getX()+u,l.getY()+u);let h=this.getColor(l,i);if(h===0)return!1;let f=this.getColor(i,r);return f!==h||(f=this.getColor(r,a),f!==h)?!1:(f=this.getColor(a,l),f===h)}getColor(i,r){let a=this.distancePoint(i,r),l=(r.getX()-i.getX())/a,u=(r.getY()-i.getY())/a,h=0,f=i.getX(),g=i.getY(),m=this.image.get(i.getX(),i.getY()),b=Math.ceil(a);for(let S=0;S<b;S++)f+=l,g+=u,this.image.get(Me.round(f),Me.round(g))!==m&&h++;let A=h/a;return A>.1&&A<.9?0:A<=.1===m?1:-1}getFirstDifferent(i,r,a,l){let u=i.getX()+a,h=i.getY()+l;for(;this.isValid(u,h)&&this.image.get(u,h)===r;)u+=a,h+=l;for(u-=a,h-=l;this.isValid(u,h)&&this.image.get(u,h)===r;)u+=a;for(u-=a;this.isValid(u,h)&&this.image.get(u,h)===r;)h+=l;return h-=l,new cn(u,h)}expandSquare(i,r,a){let l=a/(2*r),u=i[0].getX()-i[2].getX(),h=i[0].getY()-i[2].getY(),f=(i[0].getX()+i[2].getX())/2,g=(i[0].getY()+i[2].getY())/2,m=new oe(f+l*u,g+l*h),b=new oe(f-l*u,g-l*h);u=i[1].getX()-i[3].getX(),h=i[1].getY()-i[3].getY(),f=(i[1].getX()+i[3].getX())/2,g=(i[1].getY()+i[3].getY())/2;let A=new oe(f+l*u,g+l*h),S=new oe(f-l*u,g-l*h);return[m,A,b,S]}isValid(i,r){return i>=0&&i<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(i){let r=Me.round(i.getX()),a=Me.round(i.getY());return this.isValid(r,a)}distancePoint(i,r){return Me.distance(i.getX(),i.getY(),r.getX(),r.getY())}distanceResultPoint(i,r){return Me.distance(i.getX(),i.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(O.truncDivision(this.nbLayers-4,8)+1)+15}}class $o{decode(i,r=null){let a=null,l=new g1(i.getBlackMatrix()),u=null,h=null;try{let b=l.detectMirror(!1);u=b.getPoints(),this.reportFoundResultPoints(r,u),h=new Je().decode(b)}catch(b){a=b}if(h==null)try{let b=l.detectMirror(!0);u=b.getPoints(),this.reportFoundResultPoints(r,u),h=new Je().decode(b)}catch(b){throw a!=null?a:b}let f=new ht(h.getText(),h.getRawBytes(),h.getNumBits(),u,fe.AZTEC,L.currentTimeMillis()),g=h.getByteSegments();g!=null&&f.putMetadata(Pt.BYTE_SEGMENTS,g);let m=h.getECLevel();return m!=null&&f.putMetadata(Pt.ERROR_CORRECTION_LEVEL,m),f}reportFoundResultPoints(i,r){if(i!=null){let a=i.get(H.NEED_RESULT_POINT_CALLBACK);a!=null&&r.forEach((l,u,h)=>{a.foundPossibleResultPoint(l)})}}reset(){}}class bm extends ni{constructor(i=500){super(new $o,i)}}class Tt{decode(i,r){try{return this.doDecode(i,r)}catch(a){if(r&&r.get(H.TRY_HARDER)===!0&&i.isRotateSupported()){const u=i.rotateCounterClockwise(),h=this.doDecode(u,r),f=h.getResultMetadata();let g=270;f!==null&&f.get(Pt.ORIENTATION)===!0&&(g=g+f.get(Pt.ORIENTATION)%360),h.putMetadata(Pt.ORIENTATION,g);const m=h.getResultPoints();if(m!==null){const b=u.getHeight();for(let A=0;A<m.length;A++)m[A]=new oe(b-m[A].getY()-1,m[A].getX())}return h}else throw new X}}reset(){}doDecode(i,r){const a=i.getWidth(),l=i.getHeight();let u=new M(a);const h=r&&r.get(H.TRY_HARDER)===!0,f=Math.max(1,l>>(h?8:5));let g;h?g=l:g=15;const m=Math.trunc(l/2);for(let b=0;b<g;b++){const A=Math.trunc((b+1)/2),S=(b&1)===0,N=m+f*(S?A:-A);if(N<0||N>=l)break;try{u=i.getBlackRow(N,u)}catch(B){continue}for(let B=0;B<2;B++){if(B===1&&(u.reverse(),r&&r.get(H.NEED_RESULT_POINT_CALLBACK)===!0)){const j=new Map;r.forEach((z,q)=>j.set(q,z)),j.delete(H.NEED_RESULT_POINT_CALLBACK),r=j}try{const j=this.decodeRow(N,u,r);if(B===1){j.putMetadata(Pt.ORIENTATION,180);const z=j.getResultPoints();z!==null&&(z[0]=new oe(a-z[0].getX()-1,z[0].getY()),z[1]=new oe(a-z[1].getX()-1,z[1].getY()))}return j}catch(j){}}}throw new X}static recordPattern(i,r,a){const l=a.length;for(let m=0;m<l;m++)a[m]=0;const u=i.getSize();if(r>=u)throw new X;let h=!i.get(r),f=0,g=r;for(;g<u;){if(i.get(g)!==h)a[f]++;else{if(++f===l)break;a[f]=1,h=!h}g++}if(!(f===l||f===l-1&&g===u))throw new X}static recordPatternInReverse(i,r,a){let l=a.length,u=i.get(r);for(;r>0&&l>=0;)i.get(--r)!==u&&(l--,u=!u);if(l>=0)throw new X;Tt.recordPattern(i,r+1,a)}static patternMatchVariance(i,r,a){const l=i.length;let u=0,h=0;for(let m=0;m<l;m++)u+=i[m],h+=r[m];if(u<h)return Number.POSITIVE_INFINITY;const f=u/h;a*=f;let g=0;for(let m=0;m<l;m++){const b=i[m],A=r[m]*f,S=b>A?b-A:A-b;if(S>a)return Number.POSITIVE_INFINITY;g+=S}return g/u}}class te extends Tt{static findStartPattern(i){const r=i.getSize(),a=i.getNextSet(0);let l=0,u=Int32Array.from([0,0,0,0,0,0]),h=a,f=!1;const g=6;for(let m=a;m<r;m++)if(i.get(m)!==f)u[l]++;else{if(l===g-1){let b=te.MAX_AVG_VARIANCE,A=-1;for(let S=te.CODE_START_A;S<=te.CODE_START_C;S++){const N=Tt.patternMatchVariance(u,te.CODE_PATTERNS[S],te.MAX_INDIVIDUAL_VARIANCE);N<b&&(b=N,A=S)}if(A>=0&&i.isRange(Math.max(0,h-(m-h)/2),h,!1))return Int32Array.from([h,m,A]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,f=!f}throw new X}static decodeCode(i,r,a){Tt.recordPattern(i,a,r);let l=te.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<te.CODE_PATTERNS.length;h++){const f=te.CODE_PATTERNS[h],g=this.patternMatchVariance(r,f,te.MAX_INDIVIDUAL_VARIANCE);g<l&&(l=g,u=h)}if(u>=0)return u;throw new X}decodeRow(i,r,a){const l=a&&a.get(H.ASSUME_GS1)===!0,u=te.findStartPattern(r),h=u[2];let f=0;const g=new Uint8Array(20);g[f++]=h;let m;switch(h){case te.CODE_START_A:m=te.CODE_CODE_A;break;case te.CODE_START_B:m=te.CODE_CODE_B;break;case te.CODE_START_C:m=te.CODE_CODE_C;break;default:throw new U}let b=!1,A=!1,S="",N=u[0],B=u[1];const j=Int32Array.from([0,0,0,0,0,0]);let z=0,q=0,J=h,$=0,K=!0,Oe=!1,ve=!1;for(;!b;){const Ts=A;switch(A=!1,z=q,q=te.decodeCode(r,j,B),g[f++]=q,q!==te.CODE_STOP&&(K=!0),q!==te.CODE_STOP&&($++,J+=$*q),N=B,B+=j.reduce((Qm,Zm)=>Qm+Zm,0),q){case te.CODE_START_A:case te.CODE_START_B:case te.CODE_START_C:throw new U}switch(m){case te.CODE_CODE_A:if(q<64)ve===Oe?S+=String.fromCharCode(32+q):S+=String.fromCharCode(32+q+128),ve=!1;else if(q<96)ve===Oe?S+=String.fromCharCode(q-64):S+=String.fromCharCode(q+64),ve=!1;else switch(q!==te.CODE_STOP&&(K=!1),q){case te.CODE_FNC_1:l&&(S.length===0?S+="]C1":S+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_A:!Oe&&ve?(Oe=!0,ve=!1):Oe&&ve?(Oe=!1,ve=!1):ve=!0;break;case te.CODE_SHIFT:A=!0,m=te.CODE_CODE_B;break;case te.CODE_CODE_B:m=te.CODE_CODE_B;break;case te.CODE_CODE_C:m=te.CODE_CODE_C;break;case te.CODE_STOP:b=!0;break}break;case te.CODE_CODE_B:if(q<96)ve===Oe?S+=String.fromCharCode(32+q):S+=String.fromCharCode(32+q+128),ve=!1;else switch(q!==te.CODE_STOP&&(K=!1),q){case te.CODE_FNC_1:l&&(S.length===0?S+="]C1":S+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_B:!Oe&&ve?(Oe=!0,ve=!1):Oe&&ve?(Oe=!1,ve=!1):ve=!0;break;case te.CODE_SHIFT:A=!0,m=te.CODE_CODE_A;break;case te.CODE_CODE_A:m=te.CODE_CODE_A;break;case te.CODE_CODE_C:m=te.CODE_CODE_C;break;case te.CODE_STOP:b=!0;break}break;case te.CODE_CODE_C:if(q<100)q<10&&(S+="0"),S+=q;else switch(q!==te.CODE_STOP&&(K=!1),q){case te.CODE_FNC_1:l&&(S.length===0?S+="]C1":S+="");break;case te.CODE_CODE_A:m=te.CODE_CODE_A;break;case te.CODE_CODE_B:m=te.CODE_CODE_B;break;case te.CODE_STOP:b=!0;break}break}Ts&&(m=m===te.CODE_CODE_A?te.CODE_CODE_B:te.CODE_CODE_A)}const wn=B-N;if(B=r.getNextUnset(B),!r.isRange(B,Math.min(r.getSize(),B+(B-N)/2),!1))throw new X;if(J-=$*z,J%103!==z)throw new R;const si=S.length;if(si===0)throw new X;si>0&&K&&(m===te.CODE_CODE_C?S=S.substring(0,si-2):S=S.substring(0,si-1));const yn=(u[1]+u[0])/2,Ze=N+wn/2,Qt=g.length,_n=new Uint8Array(Qt);for(let Ts=0;Ts<Qt;Ts++)_n[Ts]=g[Ts];const Ss=[new oe(yn,i),new oe(Ze,i)];return new ht(S,_n,0,Ss,fe.CODE_128,new Date().getTime())}}te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],te.MAX_AVG_VARIANCE=.25,te.MAX_INDIVIDUAL_VARIANCE=.7,te.CODE_SHIFT=98,te.CODE_CODE_C=99,te.CODE_CODE_B=100,te.CODE_CODE_A=101,te.CODE_FNC_1=102,te.CODE_FNC_2=97,te.CODE_FNC_3=96,te.CODE_FNC_4_A=101,te.CODE_FNC_4_B=100,te.CODE_START_A=103,te.CODE_START_B=104,te.CODE_START_C=105,te.CODE_STOP=106;class Nt extends Tt{constructor(i=!1,r=!1){super(),this.usingCheckDigit=i,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,r,a){let l=this.counters;l.fill(0),this.decodeRowResult="";let u=Nt.findAsteriskPattern(r,l),h=r.getNextSet(u[1]),f=r.getSize(),g,m;do{Nt.recordPattern(r,h,l);let j=Nt.toNarrowWidePattern(l);if(j<0)throw new X;g=Nt.patternToChar(j),this.decodeRowResult+=g,m=h;for(let z of l)h+=z;h=r.getNextSet(h)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let j of l)b+=j;let A=h-m-b;if(h!==f&&A*2<b)throw new X;if(this.usingCheckDigit){let j=this.decodeRowResult.length-1,z=0;for(let q=0;q<j;q++)z+=Nt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(j)!==Nt.ALPHABET_STRING.charAt(z%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,j)}if(this.decodeRowResult.length===0)throw new X;let S;this.extendedMode?S=Nt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let N=(u[1]+u[0])/2,B=m+b/2;return new ht(S,null,0,[new oe(N,i),new oe(B,i)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(i,r){let a=i.getSize(),l=i.getNextSet(0),u=0,h=l,f=!1,g=r.length;for(let m=l;m<a;m++)if(i.get(m)!==f)r[u]++;else{if(u===g-1){if(this.toNarrowWidePattern(r)===Nt.ASTERISK_ENCODING&&i.isRange(Math.max(0,h-Math.floor((m-h)/2)),h,!1))return[h,m];h+=r[0]+r[1],r.copyWithin(0,2,2+u-1),r[u-1]=0,r[u]=0,u--}else u++;r[u]=1,f=!f}throw new X}static toNarrowWidePattern(i){let r=i.length,a=0,l;do{let u=2147483647;for(let g of i)g<u&&g>a&&(u=g);a=u,l=0;let h=0,f=0;for(let g=0;g<r;g++){let m=i[g];m>a&&(f|=1<<r-1-g,l++,h+=m)}if(l===3){for(let g=0;g<r&&l>0;g++){let m=i[g];if(m>a&&(l--,m*2>=h))return-1}return f}}while(l>3);return-1}static patternToChar(i){for(let r=0;r<Nt.CHARACTER_ENCODINGS.length;r++)if(Nt.CHARACTER_ENCODINGS[r]===i)return Nt.ALPHABET_STRING.charAt(r);if(i===Nt.ASTERISK_ENCODING)return"*";throw new X}static decodeExtended(i){let r=i.length,a="";for(let l=0;l<r;l++){let u=i.charAt(l);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=i.charAt(l+1),f="\0";switch(u){case"+":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)+32);else throw new U;break;case"$":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)-64);else throw new U;break;case"%":if(h>="A"&&h<="E")f=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")f=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")f=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")f="\0";else if(h==="V")f="@";else if(h==="W")f="`";else if(h==="X"||h==="Y"||h==="Z")f="";else throw new U;break;case"/":if(h>="A"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")f=":";else throw new U;break}a+=f,l++}else a+=u}return a}}Nt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Nt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Nt.ASTERISK_ENCODING=148;class Ye extends Tt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,r,a){let l=this.decodeStart(r),u=this.decodeEnd(r),h=new be;Ye.decodeMiddle(r,l[1],u[0],h);let f=h.toString(),g=null;a!=null&&(g=a.get(H.ALLOWED_LENGTHS)),g==null&&(g=Ye.DEFAULT_ALLOWED_LENGTHS);let m=f.length,b=!1,A=0;for(let B of g){if(m===B){b=!0;break}B>A&&(A=B)}if(!b&&m>A&&(b=!0),!b)throw new U;const S=[new oe(l[1],i),new oe(u[0],i)];return new ht(f,null,0,S,fe.ITF,new Date().getTime())}static decodeMiddle(i,r,a,l){let u=new Int32Array(10),h=new Int32Array(5),f=new Int32Array(5);for(u.fill(0),h.fill(0),f.fill(0);r<a;){Tt.recordPattern(i,r,u);for(let m=0;m<5;m++){let b=2*m;h[m]=u[b],f[m]=u[b+1]}let g=Ye.decodeDigit(h);l.append(g.toString()),g=this.decodeDigit(f),l.append(g.toString()),u.forEach(function(m){r+=m})}}decodeStart(i){let r=Ye.skipWhiteSpace(i),a=Ye.findGuardPattern(i,r,Ye.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(i,a[0]),a}validateQuietZone(i,r){let a=this.narrowLineWidth*10;a=a<r?a:r;for(let l=r-1;a>0&&l>=0&&!i.get(l);l--)a--;if(a!==0)throw new X}static skipWhiteSpace(i){const r=i.getSize(),a=i.getNextSet(0);if(a===r)throw new X;return a}decodeEnd(i){i.reverse();try{let r=Ye.skipWhiteSpace(i),a;try{a=Ye.findGuardPattern(i,r,Ye.END_PATTERN_REVERSED[0])}catch(u){u instanceof X&&(a=Ye.findGuardPattern(i,r,Ye.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,a[0]);let l=a[0];return a[0]=i.getSize()-a[1],a[1]=i.getSize()-l,a}finally{i.reverse()}}static findGuardPattern(i,r,a){let l=a.length,u=new Int32Array(l),h=i.getSize(),f=!1,g=0,m=r;u.fill(0);for(let b=r;b<h;b++)if(i.get(b)!==f)u[g]++;else{if(g===l-1){if(Tt.patternMatchVariance(u,a,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE)return[m,b];m+=u[0]+u[1],L.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,f=!f}throw new X}static decodeDigit(i){let r=Ye.MAX_AVG_VARIANCE,a=-1,l=Ye.PATTERNS.length;for(let u=0;u<l;u++){let h=Ye.PATTERNS[u],f=Tt.patternMatchVariance(i,h,Ye.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,a=u):f===r&&(a=-1)}if(a>=0)return a%10;throw new X}}Ye.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ye.MAX_AVG_VARIANCE=.38,Ye.MAX_INDIVIDUAL_VARIANCE=.5,Ye.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ye.START_PATTERN=Int32Array.from([1,1,1,1]),Ye.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class mt extends Tt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let r=!1,a,l=0,u=Int32Array.from([0,0,0]);for(;!r;){u=Int32Array.from([0,0,0]),a=mt.findGuardPattern(i,l,!1,this.START_END_PATTERN,u);let h=a[0];l=a[1];let f=h-(l-h);f>=0&&(r=i.isRange(f,h,!1))}return a}static checkChecksum(i){return mt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let r=i.length;if(r===0)return!1;let a=parseInt(i.charAt(r-1),10);return mt.getStandardUPCEANChecksum(i.substring(0,r-1))===a}static getStandardUPCEANChecksum(i){let r=i.length,a=0;for(let l=r-1;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}a*=3;for(let l=r-2;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}return(1e3-a)%10}static decodeEnd(i,r){return mt.findGuardPattern(i,r,!1,mt.START_END_PATTERN,new Int32Array(mt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,r,a,l){return this.findGuardPattern(i,r,a,l,new Int32Array(l.length))}static findGuardPattern(i,r,a,l,u){let h=i.getSize();r=a?i.getNextUnset(r):i.getNextSet(r);let f=0,g=r,m=l.length,b=a;for(let A=r;A<h;A++)if(i.get(A)!==b)u[f]++;else{if(f===m-1){if(Tt.patternMatchVariance(u,l,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return Int32Array.from([g,A]);g+=u[0]+u[1];let S=u.slice(2,u.length-1);for(let N=0;N<f-1;N++)u[N]=S[N];u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,b=!b}throw new X}static decodeDigit(i,r,a,l){this.recordPattern(i,a,r);let u=this.MAX_AVG_VARIANCE,h=-1,f=l.length;for(let g=0;g<f;g++){let m=l[g],b=Tt.patternMatchVariance(r,m,mt.MAX_INDIVIDUAL_VARIANCE);b<u&&(u=b,h=g)}if(h>=0)return h;throw new X}}mt.MAX_AVG_VARIANCE=.48,mt.MAX_INDIVIDUAL_VARIANCE=.7,mt.START_END_PATTERN=Int32Array.from([1,1,1]),mt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),mt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),mt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ia{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,r,a){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(r,a,l),h=l.toString(),f=Ia.parseExtensionString(h),g=[new oe((a[0]+a[1])/2,i),new oe(u,i)],m=new ht(h,null,0,g,fe.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&m.putAllMetadata(f),m}decodeMiddle(i,r,a){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),h=r[1],f=0;for(let m=0;m<5&&h<u;m++){let b=mt.decodeDigit(i,l,h,mt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let A of l)h+=A;b>=10&&(f|=1<<4-m),m!==4&&(h=i.getNextSet(h),h=i.getNextUnset(h))}if(a.length!==5)throw new X;let g=this.determineCheckDigit(f);if(Ia.extensionChecksum(a.toString())!==g)throw new X;return h}static extensionChecksum(i){let r=i.length,a=0;for(let l=r-2;l>=0;l-=2)a+=i.charAt(l).charCodeAt(0)-48;a*=3;for(let l=r-1;l>=0;l-=2)a+=i.charAt(l).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(i){for(let r=0;r<10;r++)if(i===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new X}static parseExtensionString(i){if(i.length!==5)return null;let r=Ia.parseExtension5String(i);return r==null?null:new Map([[Pt.SUGGESTED_PRICE,r]])}static parseExtension5String(i){let r;switch(i.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let a=parseInt(i.substring(1)),l=(a/100).toString(),u=a%100,h=u<10?"0"+u:u.toString();return r+l+"."+h}}class Wc{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,r,a){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(r,a,l),h=l.toString(),f=Wc.parseExtensionString(h),g=[new oe((a[0]+a[1])/2,i),new oe(u,i)],m=new ht(h,null,0,g,fe.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&m.putAllMetadata(f),m}decodeMiddle(i,r,a){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),h=r[1],f=0;for(let g=0;g<2&&h<u;g++){let m=mt.decodeDigit(i,l,h,mt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);for(let b of l)h+=b;m>=10&&(f|=1<<1-g),g!==1&&(h=i.getNextSet(h),h=i.getNextUnset(h))}if(a.length!==2)throw new X;if(parseInt(a.toString())%4!==f)throw new X;return h}static parseExtensionString(i){return i.length!==2?null:new Map([[Pt.ISSUE_NUMBER,parseInt(i)]])}}class x1{static decodeRow(i,r,a){let l=mt.findGuardPattern(r,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ia().decodeRow(i,r,l)}catch(u){return new Wc().decodeRow(i,r,l)}}}x1.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ue extends mt{constructor(){super(),this.decodeRowStringBuffer="",Ue.L_AND_G_PATTERNS=Ue.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let r=Ue.L_PATTERNS[i-10],a=new Int32Array(r.length);for(let l=0;l<r.length;l++)a[l]=r[r.length-l-1];Ue.L_AND_G_PATTERNS[i]=a}}decodeRow(i,r,a){let l=Ue.findStartGuardPattern(r),u=a==null?null:a.get(H.NEED_RESULT_POINT_CALLBACK);if(u!=null){const K=new oe((l[0]+l[1])/2,i);u.foundPossibleResultPoint(K)}let h=this.decodeMiddle(r,l,this.decodeRowStringBuffer),f=h.rowOffset,g=h.resultString;if(u!=null){const K=new oe(f,i);u.foundPossibleResultPoint(K)}let m=this.decodeEnd(r,f);if(u!=null){const K=new oe((m[0]+m[1])/2,i);u.foundPossibleResultPoint(K)}let b=m[1],A=b+(b-m[0]);if(A>=r.getSize()||!r.isRange(b,A,!1))throw new X;let S=g.toString();if(S.length<8)throw new U;if(!Ue.checkChecksum(S))throw new R;let N=(l[1]+l[0])/2,B=(m[1]+m[0])/2,j=this.getBarcodeFormat(),z=[new oe(N,i),new oe(B,i)],q=new ht(S,null,0,z,j,new Date().getTime()),J=0;try{let K=x1.decodeRow(i,r,m[1]);q.putMetadata(Pt.UPC_EAN_EXTENSION,K.getText()),q.putAllMetadata(K.getResultMetadata()),q.addResultPoints(K.getResultPoints()),J=K.getText().length}catch(K){}let $=a==null?null:a.get(H.ALLOWED_EAN_EXTENSIONS);if($!=null){let K=!1;for(let Oe in $)if(J.toString()===Oe){K=!0;break}if(!K)throw new X}return q}decodeEnd(i,r){return Ue.findGuardPattern(i,r,!1,Ue.START_END_PATTERN,new Int32Array(Ue.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Ue.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let r=i.length;if(r===0)return!1;let a=parseInt(i.charAt(r-1),10);return Ue.getStandardUPCEANChecksum(i.substring(0,r-1))===a}static getStandardUPCEANChecksum(i){let r=i.length,a=0;for(let l=r-1;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}a*=3;for(let l=r-2;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-48;if(u<0||u>9)throw new U;a+=u}return(1e3-a)%10}}class jr extends Ue{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,r,a){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),h=r[1],f=0;for(let m=0;m<6&&h<u;m++){let b=Ue.decodeDigit(i,l,h,Ue.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let A of l)h+=A;b>=10&&(f|=1<<5-m)}a=jr.determineFirstDigit(a,f),h=Ue.findGuardPattern(i,h,!0,Ue.MIDDLE_PATTERN,new Int32Array(Ue.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<6&&h<u;m++){let b=Ue.decodeDigit(i,l,h,Ue.L_PATTERNS);a+=String.fromCharCode(48+b);for(let A of l)h+=A}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(i,r){for(let a=0;a<10;a++)if(r===this.FIRST_DIGIT_ENCODINGS[a])return i=String.fromCharCode(48+a)+i,i;throw new X}}jr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class m1 extends Ue{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,r,a){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),h=r[1];for(let g=0;g<4&&h<u;g++){let m=Ue.decodeDigit(i,l,h,Ue.L_PATTERNS);a+=String.fromCharCode(48+m);for(let b of l)h+=b}h=Ue.findGuardPattern(i,h,!0,Ue.MIDDLE_PATTERN,new Int32Array(Ue.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&h<u;g++){let m=Ue.decodeDigit(i,l,h,Ue.L_PATTERNS);a+=String.fromCharCode(48+m);for(let b of l)h+=b}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return fe.EAN_8}}class p1 extends Ue{constructor(){super(...arguments),this.ean13Reader=new jr}getBarcodeFormat(){return fe.UPC_A}decode(i,r){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,r,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,r,a))}decodeMiddle(i,r,a){return this.ean13Reader.decodeMiddle(i,r,a)}maybeReturnResult(i){let r=i.getText();if(r.charAt(0)==="0"){let a=new ht(r.substring(1),null,null,i.getResultPoints(),fe.UPC_A);return i.getResultMetadata()!=null&&a.putAllMetadata(i.getResultMetadata()),a}else throw new X}reset(){this.ean13Reader.reset()}}class ri extends Ue{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,r,a){const l=this.decodeMiddleCounters.map(m=>m);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const u=i.getSize();let h=r[1],f=0;for(let m=0;m<6&&h<u;m++){const b=ri.decodeDigit(i,l,h,ri.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let A of l)h+=A;b>=10&&(f|=1<<5-m)}let g=ri.determineNumSysAndCheckDigit(a,f);return{rowOffset:h,resultString:g}}decodeEnd(i,r){return ri.findGuardPatternWithoutCounters(i,r,!0,ri.MIDDLE_END_PATTERN)}checkChecksum(i){return Ue.checkChecksum(ri.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,r){for(let a=0;a<=1;a++)for(let l=0;l<10;l++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][l]){let u=String.fromCharCode(48+a),h=String.fromCharCode(48+l);return u+i+h}throw X.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(i){const r=i.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new be;a.append(i.charAt(0));let l=r[5];switch(l){case 0:case 1:case 2:a.appendChars(r,0,2),a.append(l),a.append("0000"),a.appendChars(r,2,3);break;case 3:a.appendChars(r,0,3),a.append("00000"),a.appendChars(r,3,2);break;case 4:a.appendChars(r,0,4),a.append("00000"),a.append(r[4]);break;default:a.appendChars(r,0,5),a.append("0000"),a.append(l);break}return i.length>=8&&a.append(i.charAt(7)),a.toString()}}ri.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ri.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Yc extends Tt{constructor(i){super();let r=i==null?null:i.get(H.POSSIBLE_FORMATS),a=[];s(r)?(a.push(new jr),a.push(new p1),a.push(new m1),a.push(new ri)):(r.indexOf(fe.EAN_13)>-1&&a.push(new jr),r.indexOf(fe.UPC_A)>-1&&a.push(new p1),r.indexOf(fe.EAN_8)>-1&&a.push(new m1),r.indexOf(fe.UPC_E)>-1&&a.push(new ri)),this.readers=a}decodeRow(i,r,a){for(let l of this.readers)try{const u=l.decodeRow(i,r,a),h=u.getBarcodeFormat()===fe.EAN_13&&u.getText().charAt(0)==="0",f=a==null?null:a.get(H.POSSIBLE_FORMATS),g=f==null||f.includes(fe.UPC_A);if(h&&g){const m=u.getRawBytes(),b=new ht(u.getText().substring(1),m,m?m.length:null,u.getResultPoints(),fe.UPC_A);return b.putAllMetadata(u.getResultMetadata()),b}return u}catch(u){}throw new X}reset(){for(let i of this.readers)i.reset()}}class en extends Tt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,r){for(let a=0;a<r.length;a++)if(Tt.patternMatchVariance(i,r[a],en.MAX_INDIVIDUAL_VARIANCE)<en.MAX_AVG_VARIANCE)return a;throw new X}static count(i){return Me.sum(new Int32Array(i))}static increment(i,r){let a=0,l=r[0];for(let u=1;u<i.length;u++)r[u]>l&&(l=r[u],a=u);i[a]++}static decrement(i,r){let a=0,l=r[0];for(let u=1;u<i.length;u++)r[u]<l&&(l=r[u],a=u);i[a]--}static isFinderPattern(i){let r=i[0]+i[1],a=r+i[2]+i[3],l=r/a;if(l>=en.MIN_FINDER_PATTERN_RATIO&&l<=en.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let f of i)f>h&&(h=f),f<u&&(u=f);return h<10*u}return!1}}en.MAX_AVG_VARIANCE=.2,en.MAX_INDIVIDUAL_VARIANCE=.45,en.MIN_FINDER_PATTERN_RATIO=9.5/12,en.MAX_FINDER_PATTERN_RATIO=12.5/14;class ys{constructor(i,r){this.value=i,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof ys))return!1;const r=i;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class el{constructor(i,r,a,l,u){this.value=i,this.startEnd=r,this.value=i,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new oe(a,u)),this.resultPoints.push(new oe(l,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof el))return!1;const r=i;return this.value===r.value}hashCode(){return this.value}}class xi{constructor(){}static getRSSvalue(i,r,a){let l=0;for(let g of i)l+=g;let u=0,h=0,f=i.length;for(let g=0;g<f-1;g++){let m;for(m=1,h|=1<<g;m<i[g];m++,h&=~(1<<g)){let b=xi.combins(l-m-1,f-g-2);if(a&&h===0&&l-m-(f-g-1)>=f-g-1&&(b-=xi.combins(l-m-(f-g),f-g-2)),f-g-1>1){let A=0;for(let S=l-m-(f-g-2);S>r;S--)A+=xi.combins(l-m-S-1,f-g-3);b-=A*(f-1-g)}else l-m>r&&b--;u+=b}l-=m}return u}static combins(i,r){let a,l;i-r>r?(l=r,a=i-r):(l=i-r,a=r);let u=1,h=1;for(let f=i;f>a;f--)u*=f,h<=l&&(u/=h,h++);for(;h<=l;)u/=h,h++;return u}}class vm{static buildBitArray(i){let r=i.length*2-1;i[i.length-1].getRightChar()==null&&(r-=1);let a=12*r,l=new M(a),u=0,f=i[0].getRightChar().getValue();for(let g=11;g>=0;--g)f&1<<g&&l.set(u),u++;for(let g=1;g<i.length;++g){let m=i[g],b=m.getLeftChar().getValue();for(let A=11;A>=0;--A)b&1<<A&&l.set(u),u++;if(m.getRightChar()!=null){let A=m.getRightChar().getValue();for(let S=11;S>=0;--S)A&1<<S&&l.set(u),u++}}return l}}class Lr{constructor(i,r){r?this.decodedInformation=null:(this.finished=i,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Qc{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class xn extends Qc{constructor(i,r){super(i),this.value=r}getValue(){return this.value}isFNC1(){return this.value===xn.FNC1}}xn.FNC1="$";class Ur extends Qc{constructor(i,r,a){super(i),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Un extends Qc{constructor(i,r,a){if(super(i),r<0||r>10||a<0||a>10)throw new U;this.firstDigit=r,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Un.FNC1}isSecondDigitFNC1(){return this.secondDigit===Un.FNC1}isAnyFNC1(){return this.firstDigit===Un.FNC1||this.secondDigit===Un.FNC1}}Un.FNC1=10;class re{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new X;let r=i.substring(0,2);for(let u of re.TWO_DIGIT_DATA_LENGTH)if(u[0]===r)return u[1]===re.VARIABLE_LENGTH?re.processVariableAI(2,u[2],i):re.processFixedAI(2,u[1],i);if(i.length<3)throw new X;let a=i.substring(0,3);for(let u of re.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===re.VARIABLE_LENGTH?re.processVariableAI(3,u[2],i):re.processFixedAI(3,u[1],i);for(let u of re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,u[2],i):re.processFixedAI(4,u[1],i);if(i.length<4)throw new X;let l=i.substring(0,4);for(let u of re.FOUR_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===re.VARIABLE_LENGTH?re.processVariableAI(4,u[2],i):re.processFixedAI(4,u[1],i);throw new X}static processFixedAI(i,r,a){if(a.length<i)throw new X;let l=a.substring(0,i);if(a.length<i+r)throw new X;let u=a.substring(i,i+r),h=a.substring(i+r),f="("+l+")"+u,g=re.parseFieldsInGeneralPurpose(h);return g==null?f:f+g}static processVariableAI(i,r,a){let l=a.substring(0,i),u;a.length<i+r?u=a.length:u=i+r;let h=a.substring(i,u),f=a.substring(u),g="("+l+")"+h,m=re.parseFieldsInGeneralPurpose(f);return m==null?g:g+m}}re.VARIABLE_LENGTH=[],re.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",re.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",re.VARIABLE_LENGTH,20],["22",re.VARIABLE_LENGTH,29],["30",re.VARIABLE_LENGTH,8],["37",re.VARIABLE_LENGTH,8],["90",re.VARIABLE_LENGTH,30],["91",re.VARIABLE_LENGTH,30],["92",re.VARIABLE_LENGTH,30],["93",re.VARIABLE_LENGTH,30],["94",re.VARIABLE_LENGTH,30],["95",re.VARIABLE_LENGTH,30],["96",re.VARIABLE_LENGTH,30],["97",re.VARIABLE_LENGTH,3],["98",re.VARIABLE_LENGTH,30],["99",re.VARIABLE_LENGTH,30]],re.THREE_DIGIT_DATA_LENGTH=[["240",re.VARIABLE_LENGTH,30],["241",re.VARIABLE_LENGTH,30],["242",re.VARIABLE_LENGTH,6],["250",re.VARIABLE_LENGTH,30],["251",re.VARIABLE_LENGTH,30],["253",re.VARIABLE_LENGTH,17],["254",re.VARIABLE_LENGTH,20],["400",re.VARIABLE_LENGTH,30],["401",re.VARIABLE_LENGTH,30],["402",17],["403",re.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",re.VARIABLE_LENGTH,20],["421",re.VARIABLE_LENGTH,15],["422",3],["423",re.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],re.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",re.VARIABLE_LENGTH,15],["391",re.VARIABLE_LENGTH,18],["392",re.VARIABLE_LENGTH,15],["393",re.VARIABLE_LENGTH,18],["703",re.VARIABLE_LENGTH,30]],re.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",re.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",re.VARIABLE_LENGTH,20],["8003",re.VARIABLE_LENGTH,30],["8004",re.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",re.VARIABLE_LENGTH,30],["8008",re.VARIABLE_LENGTH,12],["8018",18],["8020",re.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",re.VARIABLE_LENGTH,70],["8200",re.VARIABLE_LENGTH,70]];class bs{constructor(i){this.buffer=new be,this.information=i}decodeAllCodes(i,r){let a=r,l=null;do{let u=this.decodeGeneralPurposeField(a,l),h=re.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&i.append(h),u.isRemaining()?l=""+u.getRemainingValue():l=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let r=i;r<i+3;++r)if(this.information.get(r))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(i,4);return u===0?new Un(this.information.getSize(),Un.FNC1,Un.FNC1):new Un(this.information.getSize(),u-1,Un.FNC1)}let r=this.extractNumericValueFromBitArray(i,7),a=(r-8)/11,l=(r-8)%11;return new Un(i+7,a,l)}extractNumericValueFromBitArray(i,r){return bs.extractNumericValueFromBitArray(this.information,i,r)}static extractNumericValueFromBitArray(i,r,a){let l=0;for(let u=0;u<a;++u)i.get(r+u)&&(l|=1<<a-u-1);return l}decodeGeneralPurposeField(i,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(i);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ur(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ur(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,r;do{let a=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),i=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),i=r.isFinished()):(r=this.parseNumericBlock(),i=r.isFinished()),!(a!==this.current.getPosition())&&!i)break}while(!i);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let r;return i.isSecondDigitFNC1()?r=new Ur(this.current.getPosition(),this.buffer.toString()):r=new Ur(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Lr(!0,r)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let r=new Ur(this.current.getPosition(),this.buffer.toString());return new Lr(!0,r)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let r=new Ur(this.current.getPosition(),this.buffer.toString());return new Lr(!0,r)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let r=new Ur(this.current.getPosition(),this.buffer.toString());return new Lr(!0,r)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(i,5);if(r>=5&&r<16)return!0;if(i+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<116)return!0;if(i+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,8);return l>=232&&l<253}decodeIsoIec646(i){let r=this.extractNumericValueFromBitArray(i,5);if(r===15)return new xn(i+5,xn.FNC1);if(r>=5&&r<15)return new xn(i+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<90)return new xn(i+7,""+(a+1));if(a>=90&&a<116)return new xn(i+7,""+(a+7));let l=this.extractNumericValueFromBitArray(i,8),u;switch(l){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new U}return new xn(i+8,u)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(i,5);if(r>=5&&r<16)return!0;if(i+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,6);return a>=16&&a<63}decodeAlphanumeric(i){let r=this.extractNumericValueFromBitArray(i,5);if(r===15)return new xn(i+5,xn.FNC1);if(r>=5&&r<15)return new xn(i+5,"0"+(r-5));let a=this.extractNumericValueFromBitArray(i,6);if(a>=32&&a<58)return new xn(i+6,""+(a+33));let l;switch(a){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new gi("Decoding invalid alphanumeric value: "+a)}return new xn(i+6,l)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let r=0;r<5&&r+i<this.information.getSize();++r)if(r===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+r))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let r=i;r<i+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let r=0;r<4&&r+i<this.information.getSize();++r)if(this.information.get(i+r))return!1;return!0}}class Zc{constructor(i){this.information=i,this.generalDecoder=new bs(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class mn extends Zc{constructor(i){super(i)}encodeCompressedGtin(i,r){i.append("(01)");let a=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,r,a)}encodeCompressedGtinWithoutAI(i,r,a){for(let l=0;l<4;++l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*l,10);u/100===0&&i.append("0"),u/10===0&&i.append("0"),i.append(u)}mn.appendCheckDigit(i,a)}static appendCheckDigit(i,r){let a=0;for(let l=0;l<13;l++){let u=i.charAt(l+r).charCodeAt(0)-48;a+=l&1?u:3*u}a=10-a%10,a===10&&(a=0),i.append(a)}}mn.GTIN_SIZE=40;class vs extends mn{constructor(i){super(i)}parseInformation(){let i=new be;i.append("(01)");let r=i.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(vs.HEADER_SIZE,4);return i.append(a),this.encodeCompressedGtinWithoutAI(i,vs.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(i,vs.HEADER_SIZE+44)}}vs.HEADER_SIZE=4;class tl extends Zc{constructor(i){super(i)}parseInformation(){let i=new be;return this.getGeneralDecoder().decodeAllCodes(i,tl.HEADER_SIZE)}}tl.HEADER_SIZE=5;class nl extends mn{constructor(i){super(i)}encodeCompressedWeight(i,r,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r,a);this.addWeightCode(i,l);let u=this.checkWeight(l),h=1e5;for(let f=0;f<5;++f)u/h===0&&i.append("0"),h/=10;i.append(u)}}class mi extends nl{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=mi.HEADER_SIZE+nl.GTIN_SIZE+mi.WEIGHT_SIZE)throw new X;let i=new be;return this.encodeCompressedGtin(i,mi.HEADER_SIZE),this.encodeCompressedWeight(i,mi.HEADER_SIZE+nl.GTIN_SIZE,mi.WEIGHT_SIZE),i.toString()}}mi.HEADER_SIZE=5,mi.WEIGHT_SIZE=15;class Am extends mi{constructor(i){super(i)}addWeightCode(i,r){i.append("(3103)")}checkWeight(i){return i}}class Em extends mi{constructor(i){super(i)}addWeightCode(i,r){r<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class pi extends mn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<pi.HEADER_SIZE+mn.GTIN_SIZE)throw new X;let i=new be;this.encodeCompressedGtin(i,pi.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(pi.HEADER_SIZE+mn.GTIN_SIZE,pi.LAST_DIGIT_SIZE);i.append("(392"),i.append(r),i.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(pi.HEADER_SIZE+mn.GTIN_SIZE+pi.LAST_DIGIT_SIZE,null);return i.append(a.getNewString()),i.toString()}}pi.HEADER_SIZE=8,pi.LAST_DIGIT_SIZE=2;class un extends mn{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<un.HEADER_SIZE+mn.GTIN_SIZE)throw new X;let i=new be;this.encodeCompressedGtin(i,un.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+mn.GTIN_SIZE,un.LAST_DIGIT_SIZE);i.append("(393"),i.append(r),i.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+mn.GTIN_SIZE+un.LAST_DIGIT_SIZE,un.FIRST_THREE_DIGITS_SIZE);a/100==0&&i.append("0"),a/10==0&&i.append("0"),i.append(a);let l=this.getGeneralDecoder().decodeGeneralPurposeField(un.HEADER_SIZE+mn.GTIN_SIZE+un.LAST_DIGIT_SIZE+un.FIRST_THREE_DIGITS_SIZE,null);return i.append(l.getNewString()),i.toString()}}un.HEADER_SIZE=8,un.LAST_DIGIT_SIZE=2,un.FIRST_THREE_DIGITS_SIZE=10;class ct extends nl{constructor(i,r,a){super(i),this.dateCode=a,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=ct.HEADER_SIZE+ct.GTIN_SIZE+ct.WEIGHT_SIZE+ct.DATE_SIZE)throw new X;let i=new be;return this.encodeCompressedGtin(i,ct.HEADER_SIZE),this.encodeCompressedWeight(i,ct.HEADER_SIZE+ct.GTIN_SIZE,ct.WEIGHT_SIZE),this.encodeCompressedDate(i,ct.HEADER_SIZE+ct.GTIN_SIZE+ct.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,r){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,ct.DATE_SIZE);if(a==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let l=a%32;a/=32;let u=a%12+1;a/=12;let h=a;h/10==0&&i.append("0"),i.append(h),u/10==0&&i.append("0"),i.append(u),l/10==0&&i.append("0"),i.append(l)}addWeightCode(i,r){i.append("("),i.append(this.firstAIdigits),i.append(r/1e5),i.append(")")}checkWeight(i){return i%1e5}}ct.HEADER_SIZE=8,ct.WEIGHT_SIZE=20,ct.DATE_SIZE=16;function w1(v){try{if(v.get(1))return new vs(v);if(!v.get(2))return new tl(v);switch(bs.extractNumericValueFromBitArray(v,1,4)){case 4:return new Am(v);case 5:return new Em(v)}switch(bs.extractNumericValueFromBitArray(v,1,5)){case 12:return new pi(v);case 13:return new un(v)}switch(bs.extractNumericValueFromBitArray(v,1,7)){case 56:return new ct(v,"310","11");case 57:return new ct(v,"320","11");case 58:return new ct(v,"310","13");case 59:return new ct(v,"320","13");case 60:return new ct(v,"310","15");case 61:return new ct(v,"320","15");case 62:return new ct(v,"310","17");case 63:return new ct(v,"320","17")}}catch(i){throw console.log(i),new gi("unknown decoder: "+v)}}class er{constructor(i,r,a,l){this.leftchar=i,this.rightchar=r,this.finderpattern=a,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,r){return i instanceof er?er.equalsOrNull(i.leftchar,r.leftchar)&&er.equalsOrNull(i.rightchar,r.rightchar)&&er.equalsOrNull(i.finderpattern,r.finderpattern):!1}static equalsOrNull(i,r){return i===null?r===null:er.equals(i,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Kc{constructor(i,r,a){this.pairs=i,this.rowNumber=r,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,r){return i instanceof Kc?this.checkEqualitity(i,r)&&i.wasReversed===r.wasReversed:!1}checkEqualitity(i,r){if(!i||!r)return;let a;return i.forEach((l,u)=>{r.forEach(h=>{l.getLeftChar().getValue()===h.getLeftChar().getValue()&&l.getRightChar().getValue()===h.getRightChar().getValue()&&l.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(a=!0)})}),a}}class Q extends en{constructor(i){super(...arguments),this.pairs=new Array(Q.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,r,a){this.pairs.length=0,this.startFromEven=!1;try{return Q.constructResult(this.decodeRow2pairs(i,r))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,Q.constructResult(this.decodeRow2pairs(i,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,r){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,i))}catch(u){if(u instanceof X){if(!this.pairs.length)throw new X;a=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(i,!1),l){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new X}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return i&&(this.rows=this.rows.reverse()),r}checkRows(i,r){for(let a=r;a<this.rows.length;a++){let l=this.rows[a];this.pairs.length=0;for(let h of i)this.pairs.push(h.getPairs());if(this.pairs.push(l.getPairs()),!Q.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(i);u.push(l);try{return this.checkRows(u,a+1)}catch(h){this.verbose&&console.log(h)}}throw new X}static isValidSequence(i){for(let r of Q.FINDER_PATTERN_SEQUENCES){if(i.length>r.length)continue;let a=!0;for(let l=0;l<i.length;l++)if(i[l].getFinderPattern().getValue()!=r[l]){a=!1;break}if(a)return!0}return!1}storeRow(i,r){let a=0,l=!1,u=!1;for(;a<this.rows.length;){let h=this.rows[a];if(h.getRowNumber()>i){u=h.isEquivalent(this.pairs);break}l=h.isEquivalent(this.pairs),a++}u||l||Q.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Kc(this.pairs,i,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,r){for(let a of r)if(a.getPairs().length!==i.length){for(let l of a.getPairs())for(let u of i)if(er.equals(l,u))break}}static isPartialRow(i,r){for(let a of r){let l=!0;for(let u of i){let h=!1;for(let f of a.getPairs())if(u.equals(f)){h=!0;break}if(!h){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(i){let r=vm.buildBitArray(i),l=w1(r).parseInformation(),u=i[0].getFinderPattern().getResultPoints(),h=i[i.length-1].getFinderPattern().getResultPoints(),f=[u[0],u[1],h[0],h[1]];return new ht(l,null,null,f,fe.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),r=i.getLeftChar(),a=i.getRightChar();if(a==null)return!1;let l=a.getChecksumPortion(),u=2;for(let f=1;f<this.pairs.size();++f){let g=this.pairs.get(f);l+=g.getLeftChar().getChecksumPortion(),u++;let m=g.getRightChar();m!=null&&(l+=m.getChecksumPortion(),u++)}return l%=211,211*(u-4)+l==r.getValue()}static getNextSecondBar(i,r){let a;return i.get(r)?(a=i.getNextUnset(r),a=i.getNextSet(a)):(a=i.getNextSet(r),a=i.getNextUnset(a)),a}retrieveNextPair(i,r,a){let l=r.length%2==0;this.startFromEven&&(l=!l);let u,h=!0,f=-1;do this.findNextPair(i,r,f),u=this.parseFoundFinderPattern(i,a,l),u==null?f=Q.getNextSecondBar(i,this.startEnd[0]):h=!1;while(h);let g=this.decodeDataCharacter(i,u,l,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new X;let m;try{m=this.decodeDataCharacter(i,u,l,!1)}catch(b){m=null,this.verbose&&console.log(b)}return new er(g,m,u,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,r,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),h;a>=0?h=a:this.isEmptyPair(r)?h=0:h=r[r.length-1].getFinderPattern().getStartEnd()[1];let f=r.length%2!=0;this.startFromEven&&(f=!f);let g=!1;for(;h<u&&(g=!i.get(h),!!g);)h++;let m=0,b=h;for(let A=h;A<u;A++)if(i.get(A)!=g)l[m]++;else{if(m==3){if(f&&Q.reverseCounters(l),Q.isFinderPattern(l)){this.startEnd[0]=b,this.startEnd[1]=A;return}f&&Q.reverseCounters(l),b+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,g=!g}throw new X}static reverseCounters(i){let r=i.length;for(let a=0;a<r/2;++a){let l=i[a];i[a]=i[r-a-1],i[r-a-1]=l}}parseFoundFinderPattern(i,r,a){let l,u,h;if(a){let m=this.startEnd[0]-1;for(;m>=0&&!i.get(m);)m--;m++,l=this.startEnd[0]-m,u=m,h=this.startEnd[1]}else u=this.startEnd[0],h=i.getNextUnset(this.startEnd[1]+1),l=h-this.startEnd[1];let f=this.getDecodeFinderCounters();L.arraycopy(f,0,f,1,f.length-1),f[0]=l;let g;try{g=this.parseFinderValue(f,Q.FINDER_PATTERNS)}catch(m){return null}return new el(g,[u,h],u,h,r)}decodeDataCharacter(i,r,a,l){let u=this.getDataCharacterCounters();for(let Ze=0;Ze<u.length;Ze++)u[Ze]=0;if(l)Q.recordPatternInReverse(i,r.getStartEnd()[0],u);else{Q.recordPattern(i,r.getStartEnd()[1],u);for(let Ze=0,Qt=u.length-1;Ze<Qt;Ze++,Qt--){let _n=u[Ze];u[Ze]=u[Qt],u[Qt]=_n}}let h=17,f=Me.sum(new Int32Array(u))/h,g=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-g)/g>.3)throw new X;let m=this.getOddCounts(),b=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let Ze=0;Ze<u.length;Ze++){let Qt=1*u[Ze]/f,_n=Qt+.5;if(_n<1){if(Qt<.3)throw new X;_n=1}else if(_n>8){if(Qt>8.7)throw new X;_n=8}let Ss=Ze/2;Ze&1?(b[Ss]=_n,S[Ss]=Qt-_n):(m[Ss]=_n,A[Ss]=Qt-_n)}this.adjustOddEvenCounts(h);let N=4*r.getValue()+(a?0:2)+(l?0:1)-1,B=0,j=0;for(let Ze=m.length-1;Ze>=0;Ze--){if(Q.isNotA1left(r,a,l)){let Qt=Q.WEIGHTS[N][2*Ze];j+=m[Ze]*Qt}B+=m[Ze]}let z=0;for(let Ze=b.length-1;Ze>=0;Ze--)if(Q.isNotA1left(r,a,l)){let Qt=Q.WEIGHTS[N][2*Ze+1];z+=b[Ze]*Qt}let q=j+z;if(B&1||B>13||B<4)throw new X;let J=(13-B)/2,$=Q.SYMBOL_WIDEST[J],K=9-$,Oe=xi.getRSSvalue(m,$,!0),ve=xi.getRSSvalue(b,K,!1),wn=Q.EVEN_TOTAL_SUBSET[J],si=Q.GSUM[J],yn=Oe*wn+ve+si;return new ys(yn,q)}static isNotA1left(i,r,a){return!(i.getValue()==0&&r&&a)}adjustOddEvenCounts(i){let r=Me.sum(new Int32Array(this.getOddCounts())),a=Me.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1;r>13?u=!0:r<4&&(l=!0);let h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let g=r+a-i,m=(r&1)==1,b=(a&1)==0;if(g==1)if(m){if(b)throw new X;u=!0}else{if(!b)throw new X;f=!0}else if(g==-1)if(m){if(b)throw new X;l=!0}else{if(!b)throw new X;h=!0}else if(g==0){if(m){if(!b)throw new X;r<a?(l=!0,f=!0):(u=!0,h=!0)}else if(b)throw new X}else throw new X;if(l){if(u)throw new X;Q.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Q.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(f)throw new X;Q.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Q.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Q.SYMBOL_WIDEST=[7,5,4,3,1],Q.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Q.GSUM=[0,348,1388,2948,3988],Q.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Q.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Q.FINDER_PAT_A=0,Q.FINDER_PAT_B=1,Q.FINDER_PAT_C=2,Q.FINDER_PAT_D=3,Q.FINDER_PAT_E=4,Q.FINDER_PAT_F=5,Q.FINDER_PATTERN_SEQUENCES=[[Q.FINDER_PAT_A,Q.FINDER_PAT_A],[Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B],[Q.FINDER_PAT_A,Q.FINDER_PAT_C,Q.FINDER_PAT_B,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_C],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F]],Q.MAX_PAIRS=11;class _m extends ys{constructor(i,r,a){super(i,r),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class pt extends en{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,r,a){const l=this.decodePair(r,!1,i,a);pt.addOrTally(this.possibleLeftPairs,l),r.reverse();let u=this.decodePair(r,!0,i,a);pt.addOrTally(this.possibleRightPairs,u),r.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&pt.checkChecksum(h,f))return pt.constructResult(h,f)}throw new X}static addOrTally(i,r){if(r==null)return;let a=!1;for(let l of i)if(l.getValue()===r.getValue()){l.incrementCount(),a=!0;break}a||i.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,r){let a=4537077*i.getValue()+r.getValue(),l=new String(a).toString(),u=new be;for(let m=13-l.length;m>0;m--)u.append("0");u.append(l);let h=0;for(let m=0;m<13;m++){let b=u.charAt(m).charCodeAt(0)-48;h+=m&1?b:3*b}h=10-h%10,h===10&&(h=0),u.append(h.toString());let f=i.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new ht(u.toString(),null,0,[f[0],f[1],g[0],g[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(i,r){let a=(i.getChecksumPortion()+16*r.getChecksumPortion())%79,l=9*i.getFinderPattern().getValue()+r.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,a===l}decodePair(i,r,a,l){try{let u=this.findFinderPattern(i,r),h=this.parseFoundFinderPattern(i,a,r,u),f=l==null?null:l.get(H.NEED_RESULT_POINT_CALLBACK);if(f!=null){let b=(u[0]+u[1])/2;r&&(b=i.getSize()-1-b),f.foundPossibleResultPoint(new oe(b,a))}let g=this.decodeDataCharacter(i,h,!0),m=this.decodeDataCharacter(i,h,!1);return new _m(1597*g.getValue()+m.getValue(),g.getChecksumPortion()+4*m.getChecksumPortion(),h)}catch(u){return null}}decodeDataCharacter(i,r,a){let l=this.getDataCharacterCounters();for(let z=0;z<l.length;z++)l[z]=0;if(a)Tt.recordPatternInReverse(i,r.getStartEnd()[0],l);else{Tt.recordPattern(i,r.getStartEnd()[1]+1,l);for(let z=0,q=l.length-1;z<q;z++,q--){let J=l[z];l[z]=l[q],l[q]=J}}let u=a?16:15,h=Me.sum(new Int32Array(l))/u,f=this.getOddCounts(),g=this.getEvenCounts(),m=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let z=0;z<l.length;z++){let q=l[z]/h,J=Math.floor(q+.5);J<1?J=1:J>8&&(J=8);let $=Math.floor(z/2);z&1?(g[$]=J,b[$]=q-J):(f[$]=J,m[$]=q-J)}this.adjustOddEvenCounts(a,u);let A=0,S=0;for(let z=f.length-1;z>=0;z--)S*=9,S+=f[z],A+=f[z];let N=0,B=0;for(let z=g.length-1;z>=0;z--)N*=9,N+=g[z],B+=g[z];let j=S+3*N;if(a){if(A&1||A>12||A<4)throw new X;let z=(12-A)/2,q=pt.OUTSIDE_ODD_WIDEST[z],J=9-q,$=xi.getRSSvalue(f,q,!1),K=xi.getRSSvalue(g,J,!0),Oe=pt.OUTSIDE_EVEN_TOTAL_SUBSET[z],ve=pt.OUTSIDE_GSUM[z];return new ys($*Oe+K+ve,j)}else{if(B&1||B>10||B<4)throw new X;let z=(10-B)/2,q=pt.INSIDE_ODD_WIDEST[z],J=9-q,$=xi.getRSSvalue(f,q,!0),K=xi.getRSSvalue(g,J,!1),Oe=pt.INSIDE_ODD_TOTAL_SUBSET[z],ve=pt.INSIDE_GSUM[z];return new ys(K*Oe+$+ve,j)}}findFinderPattern(i,r){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=i.getSize(),u=!1,h=0;for(;h<l&&(u=!i.get(h),r!==u);)h++;let f=0,g=h;for(let m=h;m<l;m++)if(i.get(m)!==u)a[f]++;else{if(f===3){if(en.isFinderPattern(a))return[g,m];g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,f--}else f++;a[f]=1,u=!u}throw new X}parseFoundFinderPattern(i,r,a,l){let u=i.get(l[0]),h=l[0]-1;for(;h>=0&&u!==i.get(h);)h--;h++;const f=l[0]-h,g=this.getDecodeFinderCounters(),m=new Int32Array(g.length);L.arraycopy(g,0,m,1,g.length-1),m[0]=f;const b=this.parseFinderValue(m,pt.FINDER_PATTERNS);let A=h,S=l[1];return a&&(A=i.getSize()-1-A,S=i.getSize()-1-S),new el(b,[h,l[1]],A,S,r)}adjustOddEvenCounts(i,r){let a=Me.sum(new Int32Array(this.getOddCounts())),l=Me.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,f=!1,g=!1;i?(a>12?h=!0:a<4&&(u=!0),l>12?g=!0:l<4&&(f=!0)):(a>11?h=!0:a<5&&(u=!0),l>10?g=!0:l<4&&(f=!0));let m=a+l-r,b=(a&1)===(i?1:0),A=(l&1)===1;if(m===1)if(b){if(A)throw new X;h=!0}else{if(!A)throw new X;g=!0}else if(m===-1)if(b){if(A)throw new X;u=!0}else{if(!A)throw new X;f=!0}else if(m===0){if(b){if(!A)throw new X;a<l?(u=!0,g=!0):(h=!0,f=!0)}else if(A)throw new X}else throw new X;if(u){if(h)throw new X;en.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&en.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new X;en.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&en.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],pt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],pt.OUTSIDE_GSUM=[0,161,961,2015,2715],pt.INSIDE_GSUM=[0,336,1036,1516],pt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],pt.INSIDE_ODD_WIDEST=[2,4,6,8],pt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class As extends Tt{constructor(i,r){super(),this.readers=[],this.verbose=r===!0;const a=i?i.get(H.POSSIBLE_FORMATS):null,l=i&&i.get(H.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(fe.EAN_13)||a.includes(fe.UPC_A)||a.includes(fe.EAN_8)||a.includes(fe.UPC_E))&&this.readers.push(new Yc(i)),a.includes(fe.CODE_39)&&this.readers.push(new Nt(l)),a.includes(fe.CODE_128)&&this.readers.push(new te),a.includes(fe.ITF)&&this.readers.push(new Ye),a.includes(fe.RSS_14)&&this.readers.push(new pt),a.includes(fe.RSS_EXPANDED)&&this.readers.push(new Q(this.verbose))):(this.readers.push(new Yc(i)),this.readers.push(new Nt),this.readers.push(new Yc(i)),this.readers.push(new te),this.readers.push(new Ye),this.readers.push(new pt),this.readers.push(new Q(this.verbose)))}decodeRow(i,r,a){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(i,r,a)}catch(u){}throw new X}reset(){this.readers.forEach(i=>i.reset())}}class Cm extends ni{constructor(i=500,r){super(new As(r),i,r)}}class Fe{constructor(i,r,a){this.ecCodewords=i,this.ecBlocks=[r],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Pe{constructor(i,r){this.count=i,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Re{constructor(i,r,a,l,u,h){this.versionNumber=i,this.symbolSizeRows=r,this.symbolSizeColumns=a,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=u,this.ecBlocks=h;let f=0;const g=h.getECCodewords(),m=h.getECBlocks();for(let b of m)f+=b.getCount()*(b.getDataCodewords()+g);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,r){if(i&1||r&1)throw new U;for(let a of Re.VERSIONS)if(a.symbolSizeRows===i&&a.symbolSizeColumns===r)return a;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new Re(1,10,10,8,8,new Fe(5,new Pe(1,3))),new Re(2,12,12,10,10,new Fe(7,new Pe(1,5))),new Re(3,14,14,12,12,new Fe(10,new Pe(1,8))),new Re(4,16,16,14,14,new Fe(12,new Pe(1,12))),new Re(5,18,18,16,16,new Fe(14,new Pe(1,18))),new Re(6,20,20,18,18,new Fe(18,new Pe(1,22))),new Re(7,22,22,20,20,new Fe(20,new Pe(1,30))),new Re(8,24,24,22,22,new Fe(24,new Pe(1,36))),new Re(9,26,26,24,24,new Fe(28,new Pe(1,44))),new Re(10,32,32,14,14,new Fe(36,new Pe(1,62))),new Re(11,36,36,16,16,new Fe(42,new Pe(1,86))),new Re(12,40,40,18,18,new Fe(48,new Pe(1,114))),new Re(13,44,44,20,20,new Fe(56,new Pe(1,144))),new Re(14,48,48,22,22,new Fe(68,new Pe(1,174))),new Re(15,52,52,24,24,new Fe(42,new Pe(2,102))),new Re(16,64,64,14,14,new Fe(56,new Pe(2,140))),new Re(17,72,72,16,16,new Fe(36,new Pe(4,92))),new Re(18,80,80,18,18,new Fe(48,new Pe(4,114))),new Re(19,88,88,20,20,new Fe(56,new Pe(4,144))),new Re(20,96,96,22,22,new Fe(68,new Pe(4,174))),new Re(21,104,104,24,24,new Fe(56,new Pe(6,136))),new Re(22,120,120,18,18,new Fe(68,new Pe(6,175))),new Re(23,132,132,20,20,new Fe(62,new Pe(8,163))),new Re(24,144,144,22,22,new Fe(62,new Pe(8,156),new Pe(2,155))),new Re(25,8,18,6,16,new Fe(7,new Pe(1,5))),new Re(26,8,32,6,14,new Fe(11,new Pe(1,10))),new Re(27,12,26,10,24,new Fe(14,new Pe(1,16))),new Re(28,12,36,10,16,new Fe(18,new Pe(1,22))),new Re(29,16,36,14,16,new Fe(24,new Pe(1,32))),new Re(30,16,48,14,22,new Fe(28,new Pe(1,49)))]}}Re.VERSIONS=Re.buildVersions();class Jc{constructor(i){const r=i.getHeight();if(r<8||r>144||r&1)throw new U;this.version=Jc.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const r=i.getHeight(),a=i.getWidth();return Re.getVersionForDimensions(r,a)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let r=0,a=4,l=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let f=!1,g=!1,m=!1,b=!1;do if(a===u&&l===0&&!f)i[r++]=this.readCorner1(u,h)&255,a-=2,l+=2,f=!0;else if(a===u-2&&l===0&&h&3&&!g)i[r++]=this.readCorner2(u,h)&255,a-=2,l+=2,g=!0;else if(a===u+4&&l===2&&!(h&7)&&!m)i[r++]=this.readCorner3(u,h)&255,a-=2,l+=2,m=!0;else if(a===u-2&&l===0&&(h&7)===4&&!b)i[r++]=this.readCorner4(u,h)&255,a-=2,l+=2,b=!0;else{do a<u&&l>=0&&!this.readMappingMatrix.get(l,a)&&(i[r++]=this.readUtah(a,l,u,h)&255),a-=2,l+=2;while(a>=0&&l<h);a+=1,l+=3;do a>=0&&l<h&&!this.readMappingMatrix.get(l,a)&&(i[r++]=this.readUtah(a,l,u,h)&255),a+=2,l-=2;while(a<u&&l>=0);a+=3,l+=1}while(a<u||l<h);if(r!==this.version.getTotalCodewords())throw new U;return i}readModule(i,r,a,l){return i<0&&(i+=a,r+=4-(a+4&7)),r<0&&(r+=l,i+=4-(l+4&7)),this.readMappingMatrix.set(r,i),this.mappingBitMatrix.get(r,i)}readUtah(i,r,a,l){let u=0;return this.readModule(i-2,r-2,a,l)&&(u|=1),u<<=1,this.readModule(i-2,r-1,a,l)&&(u|=1),u<<=1,this.readModule(i-1,r-2,a,l)&&(u|=1),u<<=1,this.readModule(i-1,r-1,a,l)&&(u|=1),u<<=1,this.readModule(i-1,r,a,l)&&(u|=1),u<<=1,this.readModule(i,r-2,a,l)&&(u|=1),u<<=1,this.readModule(i,r-1,a,l)&&(u|=1),u<<=1,this.readModule(i,r,a,l)&&(u|=1),u}readCorner1(i,r){let a=0;return this.readModule(i-1,0,i,r)&&(a|=1),a<<=1,this.readModule(i-1,1,i,r)&&(a|=1),a<<=1,this.readModule(i-1,2,i,r)&&(a|=1),a<<=1,this.readModule(0,r-2,i,r)&&(a|=1),a<<=1,this.readModule(0,r-1,i,r)&&(a|=1),a<<=1,this.readModule(1,r-1,i,r)&&(a|=1),a<<=1,this.readModule(2,r-1,i,r)&&(a|=1),a<<=1,this.readModule(3,r-1,i,r)&&(a|=1),a}readCorner2(i,r){let a=0;return this.readModule(i-3,0,i,r)&&(a|=1),a<<=1,this.readModule(i-2,0,i,r)&&(a|=1),a<<=1,this.readModule(i-1,0,i,r)&&(a|=1),a<<=1,this.readModule(0,r-4,i,r)&&(a|=1),a<<=1,this.readModule(0,r-3,i,r)&&(a|=1),a<<=1,this.readModule(0,r-2,i,r)&&(a|=1),a<<=1,this.readModule(0,r-1,i,r)&&(a|=1),a<<=1,this.readModule(1,r-1,i,r)&&(a|=1),a}readCorner3(i,r){let a=0;return this.readModule(i-1,0,i,r)&&(a|=1),a<<=1,this.readModule(i-1,r-1,i,r)&&(a|=1),a<<=1,this.readModule(0,r-3,i,r)&&(a|=1),a<<=1,this.readModule(0,r-2,i,r)&&(a|=1),a<<=1,this.readModule(0,r-1,i,r)&&(a|=1),a<<=1,this.readModule(1,r-3,i,r)&&(a|=1),a<<=1,this.readModule(1,r-2,i,r)&&(a|=1),a<<=1,this.readModule(1,r-1,i,r)&&(a|=1),a}readCorner4(i,r){let a=0;return this.readModule(i-3,0,i,r)&&(a|=1),a<<=1,this.readModule(i-2,0,i,r)&&(a|=1),a<<=1,this.readModule(i-1,0,i,r)&&(a|=1),a<<=1,this.readModule(0,r-2,i,r)&&(a|=1),a<<=1,this.readModule(0,r-1,i,r)&&(a|=1),a<<=1,this.readModule(1,r-1,i,r)&&(a|=1),a<<=1,this.readModule(2,r-1,i,r)&&(a|=1),a<<=1,this.readModule(3,r-1,i,r)&&(a|=1),a}extractDataRegion(i){const r=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(i.getHeight()!==r)throw new C("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=r/l|0,f=a/u|0,g=h*l,m=f*u,b=new Te(m,g);for(let A=0;A<h;++A){const S=A*l;for(let N=0;N<f;++N){const B=N*u;for(let j=0;j<l;++j){const z=A*(l+2)+1+j,q=S+j;for(let J=0;J<u;++J){const $=N*(u+2)+1+J;if(i.get($,z)){const K=B+J;b.set(K,q)}}}}}return b}}class $c{constructor(i,r){this.numDataCodewords=i,this.codewords=r}static getDataBlocks(i,r){const a=r.getECBlocks();let l=0;const u=a.getECBlocks();for(let j of u)l+=j.getCount();const h=new Array(l);let f=0;for(let j of u)for(let z=0;z<j.getCount();z++){const q=j.getDataCodewords(),J=a.getECCodewords()+q;h[f++]=new $c(q,new Uint8Array(J))}const m=h[0].codewords.length-a.getECCodewords(),b=m-1;let A=0;for(let j=0;j<b;j++)for(let z=0;z<f;z++)h[z].codewords[j]=i[A++];const S=r.getVersionNumber()===24,N=S?8:f;for(let j=0;j<N;j++)h[j].codewords[m-1]=i[A++];const B=h[0].codewords.length;for(let j=m;j<B;j++)for(let z=0;z<f;z++){const q=S?(z+8)%f:z,J=S&&q>7?j-1:j;h[q].codewords[J]=i[A++]}if(A!==i.length)throw new C;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class eu{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new C(""+i);let r=0,a=this.bitOffset,l=this.byteOffset;const u=this.bytes;if(a>0){const h=8-a,f=i<h?i:h,g=h-f,m=255>>8-f<<g;r=(u[l]&m)>>g,i-=f,a+=f,a===8&&(a=0,l++)}if(i>0){for(;i>=8;)r=r<<8|u[l]&255,l++,i-=8;if(i>0){const h=8-i,f=255>>h<<h;r=r<<i|(u[l]&f)>>h,a+=i}}return this.bitOffset=a,this.byteOffset=l,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Mt;(function(v){v[v.PAD_ENCODE=0]="PAD_ENCODE",v[v.ASCII_ENCODE=1]="ASCII_ENCODE",v[v.C40_ENCODE=2]="C40_ENCODE",v[v.TEXT_ENCODE=3]="TEXT_ENCODE",v[v.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",v[v.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",v[v.BASE256_ENCODE=6]="BASE256_ENCODE"})(Mt||(Mt={}));class tr{static decode(i){const r=new eu(i),a=new be,l=new be,u=new Array;let h=Mt.ASCII_ENCODE;do if(h===Mt.ASCII_ENCODE)h=this.decodeAsciiSegment(r,a,l);else{switch(h){case Mt.C40_ENCODE:this.decodeC40Segment(r,a);break;case Mt.TEXT_ENCODE:this.decodeTextSegment(r,a);break;case Mt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,a);break;case Mt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,a);break;case Mt.BASE256_ENCODE:this.decodeBase256Segment(r,a,u);break;default:throw new U}h=Mt.ASCII_ENCODE}while(h!==Mt.PAD_ENCODE&&r.available()>0);return l.length()>0&&a.append(l.toString()),new Ta(i,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(i,r,a){let l=!1;do{let u=i.readBits(8);if(u===0)throw new U;if(u<=128)return l&&(u+=128),r.append(String.fromCharCode(u-1)),Mt.ASCII_ENCODE;if(u===129)return Mt.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&r.append("0"),r.append(""+h)}else switch(u){case 230:return Mt.C40_ENCODE;case 231:return Mt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:r.append("[)>05"),a.insert(0,"");break;case 237:r.append("[)>06"),a.insert(0,"");break;case 238:return Mt.ANSIX12_ENCODE;case 239:return Mt.TEXT_ENCODE;case 240:return Mt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||i.available()!==0)throw new U;break}}while(i.available()>0);return Mt.ASCII_ENCODE}static decodeC40Segment(i,r){let a=!1;const l=[];let u=0;do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(u){case 0:if(g<3)u=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const m=this.C40_BASIC_SET_CHARS[g];a?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),a=!1):r.append(m)}else throw new U;break;case 1:a?(r.append(String.fromCharCode(g+128)),a=!1):r.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const m=this.C40_SHIFT2_SET_CHARS[g];a?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),a=!1):r.append(m)}else switch(g){case 27:r.append("");break;case 30:a=!0;break;default:throw new U}u=0;break;case 3:a?(r.append(String.fromCharCode(g+224)),a=!1):r.append(String.fromCharCode(g+96)),u=0;break;default:throw new U}}}while(i.available()>0)}static decodeTextSegment(i,r){let a=!1,l=[],u=0;do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(u){case 0:if(g<3)u=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const m=this.TEXT_BASIC_SET_CHARS[g];a?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),a=!1):r.append(m)}else throw new U;break;case 1:a?(r.append(String.fromCharCode(g+128)),a=!1):r.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const m=this.TEXT_SHIFT2_SET_CHARS[g];a?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),a=!1):r.append(m)}else switch(g){case 27:r.append("");break;case 30:a=!0;break;default:throw new U}u=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const m=this.TEXT_SHIFT3_SET_CHARS[g];a?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),a=!1):r.append(m),u=0}else throw new U;break;default:throw new U}}}while(i.available()>0)}static decodeAnsiX12Segment(i,r){const a=[];do{if(i.available()===8)return;const l=i.readBits(8);if(l===254)return;this.parseTwoBytes(l,i.readBits(8),a);for(let u=0;u<3;u++){const h=a[u];switch(h){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(h<14)r.append(String.fromCharCode(h+44));else if(h<40)r.append(String.fromCharCode(h+51));else throw new U;break}}}while(i.available()>0)}static parseTwoBytes(i,r,a){let l=(i<<8)+r-1,u=Math.floor(l/1600);a[0]=u,l-=u*1600,u=Math.floor(l/40),a[1]=u,a[2]=l-u*40}static decodeEdifactSegment(i,r){do{if(i.available()<=16)return;for(let a=0;a<4;a++){let l=i.readBits(6);if(l===31){const u=8-i.getBitOffset();u!==8&&i.readBits(u);return}l&32||(l|=64),r.append(String.fromCharCode(l))}}while(i.available()>0)}static decodeBase256Segment(i,r,a){let l=1+i.getByteOffset();const u=this.unrandomize255State(i.readBits(8),l++);let h;if(u===0?h=i.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(i.readBits(8),l++),h<0)throw new U;const f=new Uint8Array(h);for(let g=0;g<h;g++){if(i.available()<8)throw new U;f[g]=this.unrandomize255State(i.readBits(8),l++)}a.push(f);try{r.append(je.decode(f,he.ISO88591))}catch(g){throw new gi("Platform does not support required encoding: "+g.message)}}static unrandomize255State(i,r){const a=149*r%255+1,l=i-a;return l>=0?l:l+256}}tr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],tr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],tr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],tr.TEXT_SHIFT2_SET_CHARS=tr.C40_SHIFT2_SET_CHARS,tr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Sm{constructor(){this.rsDecoder=new Ra(Le.DATA_MATRIX_FIELD_256)}decode(i){const r=new Jc(i),a=r.getVersion(),l=r.readCodewords(),u=$c.getDataBlocks(l,a);let h=0;for(let m of u)h+=m.getNumDataCodewords();const f=new Uint8Array(h),g=u.length;for(let m=0;m<g;m++){const b=u[m],A=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(A,S);for(let N=0;N<S;N++)f[N*g+m]=A[N]}return tr.decode(f)}correctErrors(i,r){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-r)}catch(l){throw new R}for(let l=0;l<r;l++)i[l]=a[l]}}class At{constructor(i){this.image=i,this.rectangleDetector=new Ri(this.image)}detect(){const i=this.rectangleDetector.detect();let r=this.detectSolid1(i);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new X;r=this.shiftToModuleCenter(r);const a=r[0],l=r[1],u=r[2],h=r[3];let f=this.transitionsBetween(a,h)+1,g=this.transitionsBetween(u,h)+1;(f&1)===1&&(f+=1),(g&1)===1&&(g+=1),4*f<7*g&&4*g<7*f&&(f=g=Math.max(f,g));let m=At.sampleGrid(this.image,a,l,u,h,f,g);return new Jo(m,[a,l,u,h])}static shiftPoint(i,r,a){let l=(r.getX()-i.getX())/(a+1),u=(r.getY()-i.getY())/(a+1);return new oe(i.getX()+l,i.getY()+u)}static moveAway(i,r,a){let l=i.getX(),u=i.getY();return l<r?l-=1:l+=1,u<a?u-=1:u+=1,new oe(l,u)}detectSolid1(i){let r=i[0],a=i[1],l=i[3],u=i[2],h=this.transitionsBetween(r,a),f=this.transitionsBetween(a,l),g=this.transitionsBetween(l,u),m=this.transitionsBetween(u,r),b=h,A=[u,r,a,l];return b>f&&(b=f,A[0]=r,A[1]=a,A[2]=l,A[3]=u),b>g&&(b=g,A[0]=a,A[1]=l,A[2]=u,A[3]=r),b>m&&(A[0]=l,A[1]=u,A[2]=r,A[3]=a),A}detectSolid2(i){let r=i[0],a=i[1],l=i[2],u=i[3],h=this.transitionsBetween(r,u),f=At.shiftPoint(a,l,(h+1)*4),g=At.shiftPoint(l,a,(h+1)*4),m=this.transitionsBetween(f,r),b=this.transitionsBetween(g,u);return m<b?(i[0]=r,i[1]=a,i[2]=l,i[3]=u):(i[0]=a,i[1]=l,i[2]=u,i[3]=r),i}correctTopRight(i){let r=i[0],a=i[1],l=i[2],u=i[3],h=this.transitionsBetween(r,u),f=this.transitionsBetween(a,u),g=At.shiftPoint(r,a,(f+1)*4),m=At.shiftPoint(l,a,(h+1)*4);h=this.transitionsBetween(g,u),f=this.transitionsBetween(m,u);let b=new oe(u.getX()+(l.getX()-a.getX())/(h+1),u.getY()+(l.getY()-a.getY())/(h+1)),A=new oe(u.getX()+(r.getX()-a.getX())/(f+1),u.getY()+(r.getY()-a.getY())/(f+1));if(!this.isValid(b))return this.isValid(A)?A:null;if(!this.isValid(A))return b;let S=this.transitionsBetween(g,b)+this.transitionsBetween(m,b),N=this.transitionsBetween(g,A)+this.transitionsBetween(m,A);return S>N?b:A}shiftToModuleCenter(i){let r=i[0],a=i[1],l=i[2],u=i[3],h=this.transitionsBetween(r,u)+1,f=this.transitionsBetween(l,u)+1,g=At.shiftPoint(r,a,f*4),m=At.shiftPoint(l,a,h*4);h=this.transitionsBetween(g,u)+1,f=this.transitionsBetween(m,u)+1,(h&1)===1&&(h+=1),(f&1)===1&&(f+=1);let b=(r.getX()+a.getX()+l.getX()+u.getX())/4,A=(r.getY()+a.getY()+l.getY()+u.getY())/4;r=At.moveAway(r,b,A),a=At.moveAway(a,b,A),l=At.moveAway(l,b,A),u=At.moveAway(u,b,A);let S,N;return g=At.shiftPoint(r,a,f*4),g=At.shiftPoint(g,u,h*4),S=At.shiftPoint(a,r,f*4),S=At.shiftPoint(S,l,h*4),m=At.shiftPoint(l,u,f*4),m=At.shiftPoint(m,a,h*4),N=At.shiftPoint(u,l,f*4),N=At.shiftPoint(N,r,h*4),[g,S,m,N]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,r,a,l,u,h,f){return $i.getInstance().sampleGrid(i,h,f,.5,.5,h-.5,.5,h-.5,f-.5,.5,f-.5,r.getX(),r.getY(),u.getX(),u.getY(),l.getX(),l.getY(),a.getX(),a.getY())}transitionsBetween(i,r){let a=Math.trunc(i.getX()),l=Math.trunc(i.getY()),u=Math.trunc(r.getX()),h=Math.trunc(r.getY()),f=Math.abs(h-l)>Math.abs(u-a);if(f){let j=a;a=l,l=j,j=u,u=h,h=j}let g=Math.abs(u-a),m=Math.abs(h-l),b=-g/2,A=l<h?1:-1,S=a<u?1:-1,N=0,B=this.image.get(f?l:a,f?a:l);for(let j=a,z=l;j!==u;j+=S){let q=this.image.get(f?z:j,f?j:z);if(q!==B&&(N++,B=q),b+=m,b>0){if(z===h)break;z+=A,b-=g}}return N}}class nr{constructor(){this.decoder=new Sm}decode(i,r=null){let a,l;if(r!=null&&r.has(H.PURE_BARCODE)){const m=nr.extractPureBits(i.getBlackMatrix());a=this.decoder.decode(m),l=nr.NO_POINTS}else{const m=new At(i.getBlackMatrix()).detect();a=this.decoder.decode(m.getBits()),l=m.getPoints()}const u=a.getRawBytes(),h=new ht(a.getText(),u,8*u.length,l,fe.DATA_MATRIX,L.currentTimeMillis()),f=a.getByteSegments();f!=null&&h.putMetadata(Pt.BYTE_SEGMENTS,f);const g=a.getECLevel();return g!=null&&h.putMetadata(Pt.ERROR_CORRECTION_LEVEL,g),h}reset(){}static extractPureBits(i){const r=i.getTopLeftOnBit(),a=i.getBottomRightOnBit();if(r==null||a==null)throw new X;const l=this.moduleSize(r,i);let u=r[1];const h=a[1];let f=r[0];const m=(a[0]-f+1)/l,b=(h-u+1)/l;if(m<=0||b<=0)throw new X;const A=l/2;u+=A,f+=A;const S=new Te(m,b);for(let N=0;N<b;N++){const B=u+N*l;for(let j=0;j<m;j++)i.get(f+j*l,B)&&S.set(j,N)}return S}static moduleSize(i,r){const a=r.getWidth();let l=i[0];const u=i[1];for(;l<a&&r.get(l,u);)l++;if(l===a)throw new X;const h=l-i[0];if(h===0)throw new X;return h}}nr.NO_POINTS=[];class Tm extends ni{constructor(i=500){super(new nr,i)}}var Es;(function(v){v[v.L=0]="L",v[v.M=1]="M",v[v.Q=2]="Q",v[v.H=3]="H"})(Es||(Es={}));class $e{constructor(i,r,a){this.value=i,this.stringValue=r,this.bits=a,$e.FOR_BITS.set(a,this),$e.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return $e.L;case"M":return $e.M;case"Q":return $e.Q;case"H":return $e.H;default:throw new E(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof $e))return!1;const r=i;return this.value===r.value}static forBits(i){if(i<0||i>=$e.FOR_BITS.size)throw new C;return $e.FOR_BITS.get(i)}}$e.FOR_BITS=new Map,$e.FOR_VALUE=new Map,$e.L=new $e(Es.L,"L",1),$e.M=new $e(Es.M,"M",0),$e.Q=new $e(Es.Q,"Q",3),$e.H=new $e(Es.H,"H",2);class tn{constructor(i){this.errorCorrectionLevel=$e.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,r){return O.bitCount(i^r)}static decodeFormatInformation(i,r){const a=tn.doDecodeFormatInformation(i,r);return a!==null?a:tn.doDecodeFormatInformation(i^tn.FORMAT_INFO_MASK_QR,r^tn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,r){let a=Number.MAX_SAFE_INTEGER,l=0;for(const u of tn.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===i||h===r)return new tn(u[1]);let f=tn.numBitsDiffering(i,h);f<a&&(l=u[1],a=f),i!==r&&(f=tn.numBitsDiffering(r,h),f<a&&(l=u[1],a=f))}return a<=3?new tn(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof tn))return!1;const r=i;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}tn.FORMAT_INFO_MASK_QR=21522,tn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class F{constructor(i,...r){this.ecCodewordsPerBlock=i,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const r=this.ecBlocks;for(const a of r)i+=a.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(i,r){this.count=i,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ue{constructor(i,r,...a){this.versionNumber=i,this.alignmentPatternCenters=r,this.ecBlocks=a;let l=0;const u=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();for(const f of h)l+=f.getCount()*(f.getDataCodewords()+u);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new U;try{return this.getVersionForNumber((i-17)/4)}catch(r){throw new U}}static getVersionForNumber(i){if(i<1||i>40)throw new C;return ue.VERSIONS[i-1]}static decodeVersionInformation(i){let r=Number.MAX_SAFE_INTEGER,a=0;for(let l=0;l<ue.VERSION_DECODE_INFO.length;l++){const u=ue.VERSION_DECODE_INFO[l];if(u===i)return ue.getVersionForNumber(l+7);const h=tn.numBitsDiffering(i,u);h<r&&(a=l+7,r=h)}return r<=3?ue.getVersionForNumber(a):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),r=new Te(i);r.setRegion(0,0,9,9),r.setRegion(i-8,0,8,9),r.setRegion(0,i-8,9,8);const a=this.alignmentPatternCenters.length;for(let l=0;l<a;l++){const u=this.alignmentPatternCenters[l]-2;for(let h=0;h<a;h++)l===0&&(h===0||h===a-1)||l===a-1&&h===0||r.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return r.setRegion(6,9,1,i-17),r.setRegion(9,6,i-17,1),this.versionNumber>6&&(r.setRegion(i-11,0,3,6),r.setRegion(0,i-11,6,3)),r}toString(){return""+this.versionNumber}}ue.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ue.VERSIONS=[new ue(1,new Int32Array(0),new F(7,new I(1,19)),new F(10,new I(1,16)),new F(13,new I(1,13)),new F(17,new I(1,9))),new ue(2,Int32Array.from([6,18]),new F(10,new I(1,34)),new F(16,new I(1,28)),new F(22,new I(1,22)),new F(28,new I(1,16))),new ue(3,Int32Array.from([6,22]),new F(15,new I(1,55)),new F(26,new I(1,44)),new F(18,new I(2,17)),new F(22,new I(2,13))),new ue(4,Int32Array.from([6,26]),new F(20,new I(1,80)),new F(18,new I(2,32)),new F(26,new I(2,24)),new F(16,new I(4,9))),new ue(5,Int32Array.from([6,30]),new F(26,new I(1,108)),new F(24,new I(2,43)),new F(18,new I(2,15),new I(2,16)),new F(22,new I(2,11),new I(2,12))),new ue(6,Int32Array.from([6,34]),new F(18,new I(2,68)),new F(16,new I(4,27)),new F(24,new I(4,19)),new F(28,new I(4,15))),new ue(7,Int32Array.from([6,22,38]),new F(20,new I(2,78)),new F(18,new I(4,31)),new F(18,new I(2,14),new I(4,15)),new F(26,new I(4,13),new I(1,14))),new ue(8,Int32Array.from([6,24,42]),new F(24,new I(2,97)),new F(22,new I(2,38),new I(2,39)),new F(22,new I(4,18),new I(2,19)),new F(26,new I(4,14),new I(2,15))),new ue(9,Int32Array.from([6,26,46]),new F(30,new I(2,116)),new F(22,new I(3,36),new I(2,37)),new F(20,new I(4,16),new I(4,17)),new F(24,new I(4,12),new I(4,13))),new ue(10,Int32Array.from([6,28,50]),new F(18,new I(2,68),new I(2,69)),new F(26,new I(4,43),new I(1,44)),new F(24,new I(6,19),new I(2,20)),new F(28,new I(6,15),new I(2,16))),new ue(11,Int32Array.from([6,30,54]),new F(20,new I(4,81)),new F(30,new I(1,50),new I(4,51)),new F(28,new I(4,22),new I(4,23)),new F(24,new I(3,12),new I(8,13))),new ue(12,Int32Array.from([6,32,58]),new F(24,new I(2,92),new I(2,93)),new F(22,new I(6,36),new I(2,37)),new F(26,new I(4,20),new I(6,21)),new F(28,new I(7,14),new I(4,15))),new ue(13,Int32Array.from([6,34,62]),new F(26,new I(4,107)),new F(22,new I(8,37),new I(1,38)),new F(24,new I(8,20),new I(4,21)),new F(22,new I(12,11),new I(4,12))),new ue(14,Int32Array.from([6,26,46,66]),new F(30,new I(3,115),new I(1,116)),new F(24,new I(4,40),new I(5,41)),new F(20,new I(11,16),new I(5,17)),new F(24,new I(11,12),new I(5,13))),new ue(15,Int32Array.from([6,26,48,70]),new F(22,new I(5,87),new I(1,88)),new F(24,new I(5,41),new I(5,42)),new F(30,new I(5,24),new I(7,25)),new F(24,new I(11,12),new I(7,13))),new ue(16,Int32Array.from([6,26,50,74]),new F(24,new I(5,98),new I(1,99)),new F(28,new I(7,45),new I(3,46)),new F(24,new I(15,19),new I(2,20)),new F(30,new I(3,15),new I(13,16))),new ue(17,Int32Array.from([6,30,54,78]),new F(28,new I(1,107),new I(5,108)),new F(28,new I(10,46),new I(1,47)),new F(28,new I(1,22),new I(15,23)),new F(28,new I(2,14),new I(17,15))),new ue(18,Int32Array.from([6,30,56,82]),new F(30,new I(5,120),new I(1,121)),new F(26,new I(9,43),new I(4,44)),new F(28,new I(17,22),new I(1,23)),new F(28,new I(2,14),new I(19,15))),new ue(19,Int32Array.from([6,30,58,86]),new F(28,new I(3,113),new I(4,114)),new F(26,new I(3,44),new I(11,45)),new F(26,new I(17,21),new I(4,22)),new F(26,new I(9,13),new I(16,14))),new ue(20,Int32Array.from([6,34,62,90]),new F(28,new I(3,107),new I(5,108)),new F(26,new I(3,41),new I(13,42)),new F(30,new I(15,24),new I(5,25)),new F(28,new I(15,15),new I(10,16))),new ue(21,Int32Array.from([6,28,50,72,94]),new F(28,new I(4,116),new I(4,117)),new F(26,new I(17,42)),new F(28,new I(17,22),new I(6,23)),new F(30,new I(19,16),new I(6,17))),new ue(22,Int32Array.from([6,26,50,74,98]),new F(28,new I(2,111),new I(7,112)),new F(28,new I(17,46)),new F(30,new I(7,24),new I(16,25)),new F(24,new I(34,13))),new ue(23,Int32Array.from([6,30,54,78,102]),new F(30,new I(4,121),new I(5,122)),new F(28,new I(4,47),new I(14,48)),new F(30,new I(11,24),new I(14,25)),new F(30,new I(16,15),new I(14,16))),new ue(24,Int32Array.from([6,28,54,80,106]),new F(30,new I(6,117),new I(4,118)),new F(28,new I(6,45),new I(14,46)),new F(30,new I(11,24),new I(16,25)),new F(30,new I(30,16),new I(2,17))),new ue(25,Int32Array.from([6,32,58,84,110]),new F(26,new I(8,106),new I(4,107)),new F(28,new I(8,47),new I(13,48)),new F(30,new I(7,24),new I(22,25)),new F(30,new I(22,15),new I(13,16))),new ue(26,Int32Array.from([6,30,58,86,114]),new F(28,new I(10,114),new I(2,115)),new F(28,new I(19,46),new I(4,47)),new F(28,new I(28,22),new I(6,23)),new F(30,new I(33,16),new I(4,17))),new ue(27,Int32Array.from([6,34,62,90,118]),new F(30,new I(8,122),new I(4,123)),new F(28,new I(22,45),new I(3,46)),new F(30,new I(8,23),new I(26,24)),new F(30,new I(12,15),new I(28,16))),new ue(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new I(3,117),new I(10,118)),new F(28,new I(3,45),new I(23,46)),new F(30,new I(4,24),new I(31,25)),new F(30,new I(11,15),new I(31,16))),new ue(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new I(7,116),new I(7,117)),new F(28,new I(21,45),new I(7,46)),new F(30,new I(1,23),new I(37,24)),new F(30,new I(19,15),new I(26,16))),new ue(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new I(5,115),new I(10,116)),new F(28,new I(19,47),new I(10,48)),new F(30,new I(15,24),new I(25,25)),new F(30,new I(23,15),new I(25,16))),new ue(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new I(13,115),new I(3,116)),new F(28,new I(2,46),new I(29,47)),new F(30,new I(42,24),new I(1,25)),new F(30,new I(23,15),new I(28,16))),new ue(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new I(17,115)),new F(28,new I(10,46),new I(23,47)),new F(30,new I(10,24),new I(35,25)),new F(30,new I(19,15),new I(35,16))),new ue(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new I(17,115),new I(1,116)),new F(28,new I(14,46),new I(21,47)),new F(30,new I(29,24),new I(19,25)),new F(30,new I(11,15),new I(46,16))),new ue(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new I(13,115),new I(6,116)),new F(28,new I(14,46),new I(23,47)),new F(30,new I(44,24),new I(7,25)),new F(30,new I(59,16),new I(1,17))),new ue(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new I(12,121),new I(7,122)),new F(28,new I(12,47),new I(26,48)),new F(30,new I(39,24),new I(14,25)),new F(30,new I(22,15),new I(41,16))),new ue(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new I(6,121),new I(14,122)),new F(28,new I(6,47),new I(34,48)),new F(30,new I(46,24),new I(10,25)),new F(30,new I(2,15),new I(64,16))),new ue(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new I(17,122),new I(4,123)),new F(28,new I(29,46),new I(14,47)),new F(30,new I(49,24),new I(10,25)),new F(30,new I(24,15),new I(46,16))),new ue(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new I(4,122),new I(18,123)),new F(28,new I(13,46),new I(32,47)),new F(30,new I(48,24),new I(14,25)),new F(30,new I(42,15),new I(32,16))),new ue(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new I(20,117),new I(4,118)),new F(28,new I(40,47),new I(7,48)),new F(30,new I(43,24),new I(22,25)),new F(30,new I(10,15),new I(67,16))),new ue(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new I(19,118),new I(6,119)),new F(28,new I(18,47),new I(31,48)),new F(30,new I(34,24),new I(34,25)),new F(30,new I(20,15),new I(61,16)))];var zt;(function(v){v[v.DATA_MASK_000=0]="DATA_MASK_000",v[v.DATA_MASK_001=1]="DATA_MASK_001",v[v.DATA_MASK_010=2]="DATA_MASK_010",v[v.DATA_MASK_011=3]="DATA_MASK_011",v[v.DATA_MASK_100=4]="DATA_MASK_100",v[v.DATA_MASK_101=5]="DATA_MASK_101",v[v.DATA_MASK_110=6]="DATA_MASK_110",v[v.DATA_MASK_111=7]="DATA_MASK_111"})(zt||(zt={}));class Pn{constructor(i,r){this.value=i,this.isMasked=r}unmaskBitMatrix(i,r){for(let a=0;a<r;a++)for(let l=0;l<r;l++)this.isMasked(a,l)&&i.flip(l,a)}}Pn.values=new Map([[zt.DATA_MASK_000,new Pn(zt.DATA_MASK_000,(v,i)=>(v+i&1)===0)],[zt.DATA_MASK_001,new Pn(zt.DATA_MASK_001,(v,i)=>(v&1)===0)],[zt.DATA_MASK_010,new Pn(zt.DATA_MASK_010,(v,i)=>i%3===0)],[zt.DATA_MASK_011,new Pn(zt.DATA_MASK_011,(v,i)=>(v+i)%3===0)],[zt.DATA_MASK_100,new Pn(zt.DATA_MASK_100,(v,i)=>(Math.floor(v/2)+Math.floor(i/3)&1)===0)],[zt.DATA_MASK_101,new Pn(zt.DATA_MASK_101,(v,i)=>v*i%6===0)],[zt.DATA_MASK_110,new Pn(zt.DATA_MASK_110,(v,i)=>v*i%6<3)],[zt.DATA_MASK_111,new Pn(zt.DATA_MASK_111,(v,i)=>(v+i+v*i%3&1)===0)]]);class Om{constructor(i){const r=i.getHeight();if(r<21||(r&3)!==1)throw new U;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let u=0;u<6;u++)i=this.copyBit(u,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let u=5;u>=0;u--)i=this.copyBit(8,u,i);const r=this.bitMatrix.getHeight();let a=0;const l=r-7;for(let u=r-1;u>=l;u--)a=this.copyBit(8,u,a);for(let u=r-8;u<r;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=tn.decodeFormatInformation(i,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),r=Math.floor((i-17)/4);if(r<=6)return ue.getVersionForNumber(r);let a=0;const l=i-11;for(let h=5;h>=0;h--)for(let f=i-9;f>=l;f--)a=this.copyBit(f,h,a);let u=ue.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;a=0;for(let h=5;h>=0;h--)for(let f=i-9;f>=l;f--)a=this.copyBit(h,f,a);if(u=ue.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;throw new U}copyBit(i,r,a){return(this.isMirror?this.bitMatrix.get(r,i):this.bitMatrix.get(i,r))?a<<1|1:a<<1}readCodewords(){const i=this.readFormatInformation(),r=this.readVersion(),a=Pn.values.get(i.getDataMask()),l=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,l);const u=r.buildFunctionPattern();let h=!0;const f=new Uint8Array(r.getTotalCodewords());let g=0,m=0,b=0;for(let A=l-1;A>0;A-=2){A===6&&A--;for(let S=0;S<l;S++){const N=h?l-1-S:S;for(let B=0;B<2;B++)u.get(A-B,N)||(b++,m<<=1,this.bitMatrix.get(A-B,N)&&(m|=1),b===8&&(f[g++]=m,b=0,m=0))}h=!h}if(g!==r.getTotalCodewords())throw new U;return f}remask(){if(this.parsedFormatInfo===null)return;const i=Pn.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,r)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let r=0,a=i.getWidth();r<a;r++)for(let l=r+1,u=i.getHeight();l<u;l++)i.get(r,l)!==i.get(l,r)&&(i.flip(l,r),i.flip(r,l))}}class tu{constructor(i,r){this.numDataCodewords=i,this.codewords=r}static getDataBlocks(i,r,a){if(i.length!==r.getTotalCodewords())throw new C;const l=r.getECBlocksForLevel(a);let u=0;const h=l.getECBlocks();for(const B of h)u+=B.getCount();const f=new Array(u);let g=0;for(const B of h)for(let j=0;j<B.getCount();j++){const z=B.getDataCodewords(),q=l.getECCodewordsPerBlock()+z;f[g++]=new tu(z,new Uint8Array(q))}const m=f[0].codewords.length;let b=f.length-1;for(;b>=0&&f[b].codewords.length!==m;)b--;b++;const A=m-l.getECCodewordsPerBlock();let S=0;for(let B=0;B<A;B++)for(let j=0;j<g;j++)f[j].codewords[B]=i[S++];for(let B=b;B<g;B++)f[B].codewords[A]=i[S++];const N=f[0].codewords.length;for(let B=A;B<N;B++)for(let j=0;j<g;j++){const z=j<b?B:B+1;f[j].codewords[z]=i[S++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var zn;(function(v){v[v.TERMINATOR=0]="TERMINATOR",v[v.NUMERIC=1]="NUMERIC",v[v.ALPHANUMERIC=2]="ALPHANUMERIC",v[v.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",v[v.BYTE=4]="BYTE",v[v.ECI=5]="ECI",v[v.KANJI=6]="KANJI",v[v.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",v[v.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",v[v.HANZI=9]="HANZI"})(zn||(zn={}));class de{constructor(i,r,a,l){this.value=i,this.stringValue=r,this.characterCountBitsForVersions=a,this.bits=l,de.FOR_BITS.set(l,this),de.FOR_VALUE.set(i,this)}static forBits(i){const r=de.FOR_BITS.get(i);if(r===void 0)throw new C;return r}getCharacterCountBits(i){const r=i.getVersionNumber();let a;return r<=9?a=0:r<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof de))return!1;const r=i;return this.value===r.value}toString(){return this.stringValue}}de.FOR_BITS=new Map,de.FOR_VALUE=new Map,de.TERMINATOR=new de(zn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),de.NUMERIC=new de(zn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),de.ALPHANUMERIC=new de(zn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),de.STRUCTURED_APPEND=new de(zn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),de.BYTE=new de(zn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),de.ECI=new de(zn.ECI,"ECI",Int32Array.from([0,0,0]),7),de.KANJI=new de(zn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),de.FNC1_FIRST_POSITION=new de(zn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),de.FNC1_SECOND_POSITION=new de(zn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),de.HANZI=new de(zn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class dt{static decode(i,r,a,l){const u=new eu(i);let h=new be;const f=new Array;let g=-1,m=-1;try{let b=null,A=!1,S;do{if(u.available()<4)S=de.TERMINATOR;else{const N=u.readBits(4);S=de.forBits(N)}switch(S){case de.TERMINATOR:break;case de.FNC1_FIRST_POSITION:case de.FNC1_SECOND_POSITION:A=!0;break;case de.STRUCTURED_APPEND:if(u.available()<16)throw new U;g=u.readBits(8),m=u.readBits(8);break;case de.ECI:const N=dt.parseECIValue(u);if(b=V.getCharacterSetECIByValue(N),b===null)throw new U;break;case de.HANZI:const B=u.readBits(4),j=u.readBits(S.getCharacterCountBits(r));B===dt.GB2312_SUBSET&&dt.decodeHanziSegment(u,h,j);break;default:const z=u.readBits(S.getCharacterCountBits(r));switch(S){case de.NUMERIC:dt.decodeNumericSegment(u,h,z);break;case de.ALPHANUMERIC:dt.decodeAlphanumericSegment(u,h,z,A);break;case de.BYTE:dt.decodeByteSegment(u,h,z,b,f,l);break;case de.KANJI:dt.decodeKanjiSegment(u,h,z);break;default:throw new U}break}}while(S!==de.TERMINATOR)}catch(b){throw new U}return new Ta(i,h.toString(),f.length===0?null:f,a===null?null:a.toString(),g,m)}static decodeHanziSegment(i,r,a){if(a*13>i.available())throw new U;const l=new Uint8Array(2*a);let u=0;for(;a>0;){const h=i.readBits(13);let f=h/96<<8&4294967295|h%96;f<959?f+=41377:f+=42657,l[u]=f>>8&255,l[u+1]=f&255,u+=2,a--}try{r.append(je.decode(l,he.GB2312))}catch(h){throw new U(h)}}static decodeKanjiSegment(i,r,a){if(a*13>i.available())throw new U;const l=new Uint8Array(2*a);let u=0;for(;a>0;){const h=i.readBits(13);let f=h/192<<8&4294967295|h%192;f<7936?f+=33088:f+=49472,l[u]=f>>8,l[u+1]=f,u+=2,a--}try{r.append(je.decode(l,he.SHIFT_JIS))}catch(h){throw new U(h)}}static decodeByteSegment(i,r,a,l,u,h){if(8*a>i.available())throw new U;const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=i.readBits(8);let g;l===null?g=he.guessEncoding(f,h):g=l.getName();try{r.append(je.decode(f,g))}catch(m){throw new U(m)}u.push(f)}static toAlphaNumericChar(i){if(i>=dt.ALPHANUMERIC_CHARS.length)throw new U;return dt.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,r,a,l){const u=r.length();for(;a>1;){if(i.available()<11)throw new U;const h=i.readBits(11);r.append(dt.toAlphaNumericChar(Math.floor(h/45))),r.append(dt.toAlphaNumericChar(h%45)),a-=2}if(a===1){if(i.available()<6)throw new U;r.append(dt.toAlphaNumericChar(i.readBits(6)))}if(l)for(let h=u;h<r.length();h++)r.charAt(h)==="%"&&(h<r.length()-1&&r.charAt(h+1)==="%"?r.deleteCharAt(h+1):r.setCharAt(h,""))}static decodeNumericSegment(i,r,a){for(;a>=3;){if(i.available()<10)throw new U;const l=i.readBits(10);if(l>=1e3)throw new U;r.append(dt.toAlphaNumericChar(Math.floor(l/100))),r.append(dt.toAlphaNumericChar(Math.floor(l/10)%10)),r.append(dt.toAlphaNumericChar(l%10)),a-=3}if(a===2){if(i.available()<7)throw new U;const l=i.readBits(7);if(l>=100)throw new U;r.append(dt.toAlphaNumericChar(Math.floor(l/10))),r.append(dt.toAlphaNumericChar(l%10))}else if(a===1){if(i.available()<4)throw new U;const l=i.readBits(4);if(l>=10)throw new U;r.append(dt.toAlphaNumericChar(l))}}static parseECIValue(i){const r=i.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const a=i.readBits(8);return(r&63)<<8&4294967295|a}if((r&224)===192){const a=i.readBits(16);return(r&31)<<16&4294967295|a}throw new U}}dt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",dt.GB2312_SUBSET=1;class y1{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const r=i[0];i[0]=i[2],i[2]=r}}class Rm{constructor(){this.rsDecoder=new Ra(Le.QR_CODE_FIELD_256)}decodeBooleanArray(i,r){return this.decodeBitMatrix(Te.parseFromBooleanArray(i),r)}decodeBitMatrix(i,r){const a=new Om(i);let l=null;try{return this.decodeBitMatrixParser(a,r)}catch(u){l=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,r);return u.setOther(new y1(!0)),u}catch(u){throw l!==null?l:u}}decodeBitMatrixParser(i,r){const a=i.readVersion(),l=i.readFormatInformation().getErrorCorrectionLevel(),u=i.readCodewords(),h=tu.getDataBlocks(u,a,l);let f=0;for(const b of h)f+=b.getNumDataCodewords();const g=new Uint8Array(f);let m=0;for(const b of h){const A=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(A,S);for(let N=0;N<S;N++)g[m++]=A[N]}return dt.decode(g,a,l,r)}correctErrors(i,r){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-r)}catch(l){throw new R}for(let l=0;l<r;l++)i[l]=a[l]}}class nu extends oe{constructor(i,r,a){super(i,r),this.estimatedModuleSize=a}aboutEquals(i,r,a){if(Math.abs(r-this.getY())<=i&&Math.abs(a-this.getX())<=i){const l=Math.abs(i-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(i,r,a){const l=(this.getX()+r)/2,u=(this.getY()+i)/2,h=(this.estimatedModuleSize+a)/2;return new nu(l,u,h)}}class il{constructor(i,r,a,l,u,h,f){this.image=i,this.startX=r,this.startY=a,this.width=l,this.height=u,this.moduleSize=h,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,r=this.height,a=this.width,l=i+a,u=this.startY+r/2,h=new Int32Array(3),f=this.image;for(let g=0;g<r;g++){const m=u+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));h[0]=0,h[1]=0,h[2]=0;let b=i;for(;b<l&&!f.get(b,m);)b++;let A=0;for(;b<l;){if(f.get(b,m))if(A===1)h[1]++;else if(A===2){if(this.foundPatternCross(h)){const S=this.handlePossibleCenter(h,m,b);if(S!==null)return S}h[0]=h[2],h[1]=1,h[2]=0,A=1}else h[++A]++;else A===1&&A++,h[A]++;b++}if(this.foundPatternCross(h)){const S=this.handlePossibleCenter(h,m,l);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new X}static centerFromEnd(i,r){return r-i[2]-i[1]/2}foundPatternCross(i){const r=this.moduleSize,a=r/2;for(let l=0;l<3;l++)if(Math.abs(r-i[l])>=a)return!1;return!0}crossCheckVertical(i,r,a,l){const u=this.image,h=u.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let g=i;for(;g>=0&&u.get(r,g)&&f[1]<=a;)f[1]++,g--;if(g<0||f[1]>a)return NaN;for(;g>=0&&!u.get(r,g)&&f[0]<=a;)f[0]++,g--;if(f[0]>a)return NaN;for(g=i+1;g<h&&u.get(r,g)&&f[1]<=a;)f[1]++,g++;if(g===h||f[1]>a)return NaN;for(;g<h&&!u.get(r,g)&&f[2]<=a;)f[2]++,g++;if(f[2]>a)return NaN;const m=f[0]+f[1]+f[2];return 5*Math.abs(m-l)>=2*l?NaN:this.foundPatternCross(f)?il.centerFromEnd(f,g):NaN}handlePossibleCenter(i,r,a){const l=i[0]+i[1]+i[2],u=il.centerFromEnd(i,a),h=this.crossCheckVertical(r,u,2*i[1],l);if(!isNaN(h)){const f=(i[0]+i[1]+i[2])/3;for(const m of this.possibleCenters)if(m.aboutEquals(f,h,u))return m.combineEstimate(h,u,f);const g=new nu(u,h,f);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class iu extends oe{constructor(i,r,a,l){super(i,r),this.estimatedModuleSize=a,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,r,a){if(Math.abs(r-this.getY())<=i&&Math.abs(a-this.getX())<=i){const l=Math.abs(i-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(i,r,a){const l=this.count+1,u=(this.count*this.getX()+r)/l,h=(this.count*this.getY()+i)/l,f=(this.count*this.estimatedModuleSize+a)/l;return new iu(u,h,f,l)}}class Im{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ft{constructor(i,r){this.image=i,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const r=i!=null&&i.get(H.TRY_HARDER)!==void 0,a=i!=null&&i.get(H.PURE_BARCODE)!==void 0,l=this.image,u=l.getHeight(),h=l.getWidth();let f=Math.floor(3*u/(4*Ft.MAX_MODULES));(f<Ft.MIN_SKIP||r)&&(f=Ft.MIN_SKIP);let g=!1;const m=new Int32Array(5);for(let A=f-1;A<u&&!g;A+=f){m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0;let S=0;for(let N=0;N<h;N++)if(l.get(N,A))(S&1)===1&&S++,m[S]++;else if(S&1)m[S]++;else if(S===4)if(Ft.foundPatternCross(m)){if(this.handlePossibleCenter(m,A,N,a)===!0)if(f=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const j=this.findRowSkip();j>m[2]&&(A+=j-m[2]-f,N=h-1)}else{m[0]=m[2],m[1]=m[3],m[2]=m[4],m[3]=1,m[4]=0,S=3;continue}S=0,m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0}else m[0]=m[2],m[1]=m[3],m[2]=m[4],m[3]=1,m[4]=0,S=3;else m[++S]++;Ft.foundPatternCross(m)&&this.handlePossibleCenter(m,A,h,a)===!0&&(f=m[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return oe.orderBestPatterns(b),new Im(b)}static centerFromEnd(i,r){return r-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let r=0;for(let u=0;u<5;u++){const h=i[u];if(h===0)return!1;r+=h}if(r<7)return!1;const a=r/7,l=a/2;return Math.abs(a-i[0])<l&&Math.abs(a-i[1])<l&&Math.abs(3*a-i[2])<3*l&&Math.abs(a-i[3])<l&&Math.abs(a-i[4])<l}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,r,a,l){const u=this.getCrossCheckStateCount();let h=0;const f=this.image;for(;i>=h&&r>=h&&f.get(r-h,i-h);)u[2]++,h++;if(i<h||r<h)return!1;for(;i>=h&&r>=h&&!f.get(r-h,i-h)&&u[1]<=a;)u[1]++,h++;if(i<h||r<h||u[1]>a)return!1;for(;i>=h&&r>=h&&f.get(r-h,i-h)&&u[0]<=a;)u[0]++,h++;if(u[0]>a)return!1;const g=f.getHeight(),m=f.getWidth();for(h=1;i+h<g&&r+h<m&&f.get(r+h,i+h);)u[2]++,h++;if(i+h>=g||r+h>=m)return!1;for(;i+h<g&&r+h<m&&!f.get(r+h,i+h)&&u[3]<a;)u[3]++,h++;if(i+h>=g||r+h>=m||u[3]>=a)return!1;for(;i+h<g&&r+h<m&&f.get(r+h,i+h)&&u[4]<a;)u[4]++,h++;if(u[4]>=a)return!1;const b=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(b-l)<2*l&&Ft.foundPatternCross(u)}crossCheckVertical(i,r,a,l){const u=this.image,h=u.getHeight(),f=this.getCrossCheckStateCount();let g=i;for(;g>=0&&u.get(r,g);)f[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(r,g)&&f[1]<=a;)f[1]++,g--;if(g<0||f[1]>a)return NaN;for(;g>=0&&u.get(r,g)&&f[0]<=a;)f[0]++,g--;if(f[0]>a)return NaN;for(g=i+1;g<h&&u.get(r,g);)f[2]++,g++;if(g===h)return NaN;for(;g<h&&!u.get(r,g)&&f[3]<a;)f[3]++,g++;if(g===h||f[3]>=a)return NaN;for(;g<h&&u.get(r,g)&&f[4]<a;)f[4]++,g++;if(f[4]>=a)return NaN;const m=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(m-l)>=2*l?NaN:Ft.foundPatternCross(f)?Ft.centerFromEnd(f,g):NaN}crossCheckHorizontal(i,r,a,l){const u=this.image,h=u.getWidth(),f=this.getCrossCheckStateCount();let g=i;for(;g>=0&&u.get(g,r);)f[2]++,g--;if(g<0)return NaN;for(;g>=0&&!u.get(g,r)&&f[1]<=a;)f[1]++,g--;if(g<0||f[1]>a)return NaN;for(;g>=0&&u.get(g,r)&&f[0]<=a;)f[0]++,g--;if(f[0]>a)return NaN;for(g=i+1;g<h&&u.get(g,r);)f[2]++,g++;if(g===h)return NaN;for(;g<h&&!u.get(g,r)&&f[3]<a;)f[3]++,g++;if(g===h||f[3]>=a)return NaN;for(;g<h&&u.get(g,r)&&f[4]<a;)f[4]++,g++;if(f[4]>=a)return NaN;const m=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(m-l)>=l?NaN:Ft.foundPatternCross(f)?Ft.centerFromEnd(f,g):NaN}handlePossibleCenter(i,r,a,l){const u=i[0]+i[1]+i[2]+i[3]+i[4];let h=Ft.centerFromEnd(i,a),f=this.crossCheckVertical(r,Math.floor(h),i[2],u);if(!isNaN(f)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(f),i[2],u),!isNaN(h)&&(!l||this.crossCheckDiagonal(Math.floor(f),Math.floor(h),i[2],u)))){const g=u/7;let m=!1;const b=this.possibleCenters;for(let A=0,S=b.length;A<S;A++){const N=b[A];if(N.aboutEquals(g,f,h)){b[A]=N.combineEstimate(f,h,g),m=!0;break}}if(!m){const A=new iu(h,f,g);b.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const a of this.possibleCenters)if(a.getCount()>=Ft.CENTER_QUORUM)if(r==null)r=a;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,r=0;const a=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=Ft.CENTER_QUORUM&&(i++,r+=h.getEstimatedModuleSize());if(i<3)return!1;const l=r/a;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-l);return u<=.05*r}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new X;const r=this.possibleCenters;let a;if(i>3){let l=0,u=0;for(const g of this.possibleCenters){const m=g.getEstimatedModuleSize();l+=m,u+=m*m}a=l/i;let h=Math.sqrt(u/i-a*a);r.sort((g,m)=>{const b=Math.abs(m.getEstimatedModuleSize()-a),A=Math.abs(g.getEstimatedModuleSize()-a);return b<A?-1:b>A?1:0});const f=Math.max(.2*a,h);for(let g=0;g<r.length&&r.length>3;g++){const m=r[g];Math.abs(m.getEstimatedModuleSize()-a)>f&&(r.splice(g,1),g--)}}if(r.length>3){let l=0;for(const u of r)l+=u.getEstimatedModuleSize();a=l/r.length,r.sort((u,h)=>{if(h.getCount()===u.getCount()){const f=Math.abs(h.getEstimatedModuleSize()-a),g=Math.abs(u.getEstimatedModuleSize()-a);return f<g?1:f>g?-1:0}else return h.getCount()-u.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Ft.CENTER_QUORUM=2,Ft.MIN_SKIP=3,Ft.MAX_MODULES=57;class Da{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(H.NEED_RESULT_POINT_CALLBACK);const a=new Ft(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(a)}processFinderPatternInfo(i){const r=i.getTopLeft(),a=i.getTopRight(),l=i.getBottomLeft(),u=this.calculateModuleSize(r,a,l);if(u<1)throw new X("No pattern found in proccess finder.");const h=Da.computeDimension(r,a,l,u),f=ue.getProvisionalVersionForDimension(h),g=f.getDimensionForVersion()-7;let m=null;if(f.getAlignmentPatternCenters().length>0){const N=a.getX()-r.getX()+l.getX(),B=a.getY()-r.getY()+l.getY(),j=1-3/g,z=Math.floor(r.getX()+j*(N-r.getX())),q=Math.floor(r.getY()+j*(B-r.getY()));for(let J=4;J<=16;J<<=1)try{m=this.findAlignmentInRegion(u,z,q,J);break}catch($){if(!($ instanceof X))throw $}}const b=Da.createTransform(r,a,l,m,h),A=Da.sampleGrid(this.image,b,h);let S;return m===null?S=[l,r,a]:S=[l,r,a,m],new Jo(A,S)}static createTransform(i,r,a,l,u){const h=u-3.5;let f,g,m,b;return l!==null?(f=l.getX(),g=l.getY(),m=h-3,b=m):(f=r.getX()-i.getX()+a.getX(),g=r.getY()-i.getY()+a.getY(),m=h,b=h),ii.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,m,b,3.5,h,i.getX(),i.getY(),r.getX(),r.getY(),f,g,a.getX(),a.getY())}static sampleGrid(i,r,a){return $i.getInstance().sampleGridWithTransform(i,a,a,r)}static computeDimension(i,r,a,l){const u=Me.round(oe.distance(i,r)/l),h=Me.round(oe.distance(i,a)/l);let f=Math.floor((u+h)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new X("Dimensions could be not found.")}return f}calculateModuleSize(i,r,a){return(this.calculateModuleSizeOneWay(i,r)+this.calculateModuleSizeOneWay(i,a))/2}calculateModuleSizeOneWay(i,r){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(r.getX()),Math.floor(r.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(a)?l/7:isNaN(l)?a/7:(a+l)/14}sizeOfBlackWhiteBlackRunBothWays(i,r,a,l){let u=this.sizeOfBlackWhiteBlackRun(i,r,a,l),h=1,f=i-(a-i);f<0?(h=i/(i-f),f=0):f>=this.image.getWidth()&&(h=(this.image.getWidth()-1-i)/(f-i),f=this.image.getWidth()-1);let g=Math.floor(r-(l-r)*h);return h=1,g<0?(h=r/(r-g),g=0):g>=this.image.getHeight()&&(h=(this.image.getHeight()-1-r)/(g-r),g=this.image.getHeight()-1),f=Math.floor(i+(f-i)*h),u+=this.sizeOfBlackWhiteBlackRun(i,r,f,g),u-1}sizeOfBlackWhiteBlackRun(i,r,a,l){const u=Math.abs(l-r)>Math.abs(a-i);if(u){let N=i;i=r,r=N,N=a,a=l,l=N}const h=Math.abs(a-i),f=Math.abs(l-r);let g=-h/2;const m=i<a?1:-1,b=r<l?1:-1;let A=0;const S=a+m;for(let N=i,B=r;N!==S;N+=m){const j=u?B:N,z=u?N:B;if(A===1===this.image.get(j,z)){if(A===2)return Me.distance(N,B,i,r);A++}if(g+=f,g>0){if(B===l)break;B+=b,g-=h}}return A===2?Me.distance(a+m,l,i,r):NaN}findAlignmentInRegion(i,r,a,l){const u=Math.floor(l*i),h=Math.max(0,r-u),f=Math.min(this.image.getWidth()-1,r+u);if(f-h<i*3)throw new X("Alignment top exceeds estimated module size.");const g=Math.max(0,a-u),m=Math.min(this.image.getHeight()-1,a+u);if(m-g<i*3)throw new X("Alignment bottom exceeds estimated module size.");return new il(this.image,h,g,f-h,m-g,i,this.resultPointCallback).find()}}class ir{constructor(){this.decoder=new Rm}getDecoder(){return this.decoder}decode(i,r){let a,l;if(r!=null&&r.get(H.PURE_BARCODE)!==void 0){const g=ir.extractPureBits(i.getBlackMatrix());a=this.decoder.decodeBitMatrix(g,r),l=ir.NO_POINTS}else{const g=new Da(i.getBlackMatrix()).detect(r);a=this.decoder.decodeBitMatrix(g.getBits(),r),l=g.getPoints()}a.getOther()instanceof y1&&a.getOther().applyMirroredCorrection(l);const u=new ht(a.getText(),a.getRawBytes(),void 0,l,fe.QR_CODE,void 0),h=a.getByteSegments();h!==null&&u.putMetadata(Pt.BYTE_SEGMENTS,h);const f=a.getECLevel();return f!==null&&u.putMetadata(Pt.ERROR_CORRECTION_LEVEL,f),a.hasStructuredAppend()&&(u.putMetadata(Pt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(Pt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(i){const r=i.getTopLeftOnBit(),a=i.getBottomRightOnBit();if(r===null||a===null)throw new X;const l=this.moduleSize(r,i);let u=r[1],h=a[1],f=r[0],g=a[0];if(f>=g||u>=h)throw new X;if(h-u!==g-f&&(g=f+(h-u),g>=i.getWidth()))throw new X;const m=Math.round((g-f+1)/l),b=Math.round((h-u+1)/l);if(m<=0||b<=0)throw new X;if(b!==m)throw new X;const A=Math.floor(l/2);u+=A,f+=A;const S=f+Math.floor((m-1)*l)-g;if(S>0){if(S>A)throw new X;f-=S}const N=u+Math.floor((b-1)*l)-h;if(N>0){if(N>A)throw new X;u-=N}const B=new Te(m,b);for(let j=0;j<b;j++){const z=u+Math.floor(j*l);for(let q=0;q<m;q++)i.get(f+Math.floor(q*l),z)&&B.set(q,j)}return B}static moduleSize(i,r){const a=r.getHeight(),l=r.getWidth();let u=i[0],h=i[1],f=!0,g=0;for(;u<l&&h<a;){if(f!==r.get(u,h)){if(++g===5)break;f=!f}u++,h++}if(u===l||h===a)throw new X;return(u-i[0])/7}}ir.NO_POINTS=new Array;class pe{PDF417Common(){}static getBitCountSum(i){return Me.sum(i)}static toIntArray(i){if(i==null||!i.length)return pe.EMPTY_INT_ARRAY;const r=new Int32Array(i.length);let a=0;for(const l of i)r[a++]=l;return r}static getCodeword(i){const r=_.binarySearch(pe.SYMBOL_TABLE,i&262143);return r<0?-1:(pe.CODEWORD_TABLE[r]-1)%pe.NUMBER_OF_CODEWORDS}}pe.NUMBER_OF_CODEWORDS=929,pe.MAX_CODEWORDS_IN_BARCODE=pe.NUMBER_OF_CODEWORDS-1,pe.MIN_ROWS_IN_BARCODE=3,pe.MAX_ROWS_IN_BARCODE=90,pe.MODULES_IN_CODEWORD=17,pe.MODULES_IN_STOP_PATTERN=18,pe.BARS_IN_MODULE=8,pe.EMPTY_INT_ARRAY=new Int32Array([]),pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Dm{constructor(i,r){this.bits=i,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ee{static detectMultiple(i,r,a){let l=i.getBlackMatrix(),u=Ee.detect(a,l);return u.length||(l=l.clone(),l.rotate180(),u=Ee.detect(a,l)),new Dm(l,u)}static detect(i,r){const a=new Array;let l=0,u=0,h=!1;for(;l<r.getHeight();){const f=Ee.findVertices(r,l,u);if(f[0]==null&&f[3]==null){if(!h)break;h=!1,u=0;for(const g of a)g[1]!=null&&(l=Math.trunc(Math.max(l,g[1].getY()))),g[3]!=null&&(l=Math.max(l,Math.trunc(g[3].getY())));l+=Ee.ROW_STEP;continue}if(h=!0,a.push(f),!i)break;f[2]!=null?(u=Math.trunc(f[2].getX()),l=Math.trunc(f[2].getY())):(u=Math.trunc(f[4].getX()),l=Math.trunc(f[4].getY()))}return a}static findVertices(i,r,a){const l=i.getHeight(),u=i.getWidth(),h=new Array(8);return Ee.copyToResult(h,Ee.findRowsWithPattern(i,l,u,r,a,Ee.START_PATTERN),Ee.INDEXES_START_PATTERN),h[4]!=null&&(a=Math.trunc(h[4].getX()),r=Math.trunc(h[4].getY())),Ee.copyToResult(h,Ee.findRowsWithPattern(i,l,u,r,a,Ee.STOP_PATTERN),Ee.INDEXES_STOP_PATTERN),h}static copyToResult(i,r,a){for(let l=0;l<a.length;l++)i[a[l]]=r[l]}static findRowsWithPattern(i,r,a,l,u,h){const f=new Array(4);let g=!1;const m=new Int32Array(h.length);for(;l<r;l+=Ee.ROW_STEP){let A=Ee.findGuardPattern(i,u,l,a,!1,h,m);if(A!=null){for(;l>0;){const S=Ee.findGuardPattern(i,u,--l,a,!1,h,m);if(S!=null)A=S;else{l++;break}}f[0]=new oe(A[0],l),f[1]=new oe(A[1],l),g=!0;break}}let b=l+1;if(g){let A=0,S=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;b<r;b++){const N=Ee.findGuardPattern(i,S[0],b,a,!1,h,m);if(N!=null&&Math.abs(S[0]-N[0])<Ee.MAX_PATTERN_DRIFT&&Math.abs(S[1]-N[1])<Ee.MAX_PATTERN_DRIFT)S=N,A=0;else{if(A>Ee.SKIPPED_ROW_COUNT_MAX)break;A++}}b-=A+1,f[2]=new oe(S[0],b),f[3]=new oe(S[1],b)}return b-l<Ee.BARCODE_MIN_HEIGHT&&_.fill(f,null),f}static findGuardPattern(i,r,a,l,u,h,f){_.fillWithin(f,0,f.length,0);let g=r,m=0;for(;i.get(g,a)&&g>0&&m++<Ee.MAX_PIXEL_DRIFT;)g--;let b=g,A=0,S=h.length;for(let N=u;b<l;b++)if(i.get(b,a)!==N)f[A]++;else{if(A===S-1){if(Ee.patternMatchVariance(f,h,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return new Int32Array([g,b]);g+=f[0]+f[1],L.arraycopy(f,2,f,0,A-1),f[A-1]=0,f[A]=0,A--}else A++;f[A]=1,N=!N}return A===S-1&&Ee.patternMatchVariance(f,h,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE?new Int32Array([g,b-1]):null}static patternMatchVariance(i,r,a){let l=i.length,u=0,h=0;for(let m=0;m<l;m++)u+=i[m],h+=r[m];if(u<h)return 1/0;let f=u/h;a*=f;let g=0;for(let m=0;m<l;m++){let b=i[m],A=r[m]*f,S=b>A?b-A:A-b;if(S>a)return 1/0;g+=S}return g/u}}Ee.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ee.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ee.MAX_AVG_VARIANCE=.42,Ee.MAX_INDIVIDUAL_VARIANCE=.8,Ee.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ee.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ee.MAX_PIXEL_DRIFT=3,Ee.MAX_PATTERN_DRIFT=5,Ee.SKIPPED_ROW_COUNT_MAX=25,Ee.ROW_STEP=5,Ee.BARCODE_MIN_HEIGHT=10;class Wt{constructor(i,r){if(r.length===0)throw new C;this.field=i;let a=r.length;if(a>1&&r[0]===0){let l=1;for(;l<a&&r[l]===0;)l++;l===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-l),L.arraycopy(r,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let l=0;for(let u of this.coefficients)l=this.field.add(l,u);return l}let r=this.coefficients[0],a=this.coefficients.length;for(let l=1;l<a;l++)r=this.field.add(this.field.multiply(i,r),this.coefficients[l]);return r}add(i){if(!this.field.equals(i.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let r=this.coefficients,a=i.coefficients;if(r.length>a.length){let h=r;r=a,a=h}let l=new Int32Array(a.length),u=a.length-r.length;L.arraycopy(a,0,l,0,u);for(let h=u;h<a.length;h++)l[h]=this.field.add(r[h-u],a[h]);return new Wt(this.field,l)}subtract(i){if(!this.field.equals(i.field))throw new C("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Wt?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Wt(this.field,new Int32Array([0]));let r=this.coefficients,a=r.length,l=i.coefficients,u=l.length,h=new Int32Array(a+u-1);for(let f=0;f<a;f++){let g=r[f];for(let m=0;m<u;m++)h[f+m]=this.field.add(h[f+m],this.field.multiply(g,l[m]))}return new Wt(this.field,h)}negative(){let i=this.coefficients.length,r=new Int32Array(i);for(let a=0;a<i;a++)r[a]=this.field.subtract(0,this.coefficients[a]);return new Wt(this.field,r)}multiplyScalar(i){if(i===0)return new Wt(this.field,new Int32Array([0]));if(i===1)return this;let r=this.coefficients.length,a=new Int32Array(r);for(let l=0;l<r;l++)a[l]=this.field.multiply(this.coefficients[l],i);return new Wt(this.field,a)}multiplyByMonomial(i,r){if(i<0)throw new C;if(r===0)return new Wt(this.field,new Int32Array([0]));let a=this.coefficients.length,l=new Int32Array(a+i);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],r);return new Wt(this.field,l)}toString(){let i=new be;for(let r=this.getDegree();r>=0;r--){let a=this.getCoefficient(r);a!==0&&(a<0?(i.append(" - "),a=-a):i.length()>0&&i.append(" + "),(r===0||a!==1)&&i.append(a),r!==0&&(r===1?i.append("x"):(i.append("x^"),i.append(r))))}return i.toString()}}class Nm{add(i,r){return(i+r)%this.modulus}subtract(i,r){return(this.modulus+i-r)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new C;return this.logTable[i]}inverse(i){if(i===0)throw new Zo;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,r){return i===0||r===0?0:this.expTable[(this.logTable[i]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class ru extends Nm{constructor(i,r){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let a=1;for(let l=0;l<i;l++)this.expTable[l]=a,a=a*r%i;for(let l=0;l<i-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new Wt(this,new Int32Array([0])),this.one=new Wt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,r){if(i<0)throw new C;if(r===0)return this.zero;let a=new Int32Array(i+1);return a[0]=r,new Wt(this,a)}}ru.PDF417_GF=new ru(pe.NUMBER_OF_CODEWORDS,3);class b1{constructor(){this.field=ru.PDF417_GF}decode(i,r,a){let l=new Wt(this.field,i),u=new Int32Array(r),h=!1;for(let B=r;B>0;B--){let j=l.evaluateAt(this.field.exp(B));u[r-B]=j,j!==0&&(h=!0)}if(!h)return 0;let f=this.field.getOne();if(a!=null)for(const B of a){let j=this.field.exp(i.length-1-B),z=new Wt(this.field,new Int32Array([this.field.subtract(0,j),1]));f=f.multiply(z)}let g=new Wt(this.field,u),m=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),g,r),b=m[0],A=m[1],S=this.findErrorLocations(b),N=this.findErrorMagnitudes(A,b,S);for(let B=0;B<S.length;B++){let j=i.length-1-this.field.log(S[B]);if(j<0)throw R.getChecksumInstance();i[j]=this.field.subtract(i[j],N[B])}return S.length}runEuclideanAlgorithm(i,r,a){if(i.getDegree()<r.getDegree()){let S=i;i=r,r=S}let l=i,u=r,h=this.field.getZero(),f=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let S=l,N=h;if(l=u,h=f,l.isZero())throw R.getChecksumInstance();u=S;let B=this.field.getZero(),j=l.getCoefficient(l.getDegree()),z=this.field.inverse(j);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){let q=u.getDegree()-l.getDegree(),J=this.field.multiply(u.getCoefficient(u.getDegree()),z);B=B.add(this.field.buildMonomial(q,J)),u=u.subtract(l.multiplyByMonomial(q,J))}f=B.multiply(h).subtract(N).negative()}let g=f.getCoefficient(0);if(g===0)throw R.getChecksumInstance();let m=this.field.inverse(g),b=f.multiply(m),A=u.multiply(m);return[b,A]}findErrorLocations(i){let r=i.getDegree(),a=new Int32Array(r),l=0;for(let u=1;u<this.field.getSize()&&l<r;u++)i.evaluateAt(u)===0&&(a[l]=this.field.inverse(u),l++);if(l!==r)throw R.getChecksumInstance();return a}findErrorMagnitudes(i,r,a){let l=r.getDegree(),u=new Int32Array(l);for(let m=1;m<=l;m++)u[l-m]=this.field.multiply(m,r.getCoefficient(m));let h=new Wt(this.field,u),f=a.length,g=new Int32Array(f);for(let m=0;m<f;m++){let b=this.field.inverse(a[m]),A=this.field.subtract(0,i.evaluateAt(b)),S=this.field.inverse(h.evaluateAt(b));g[m]=this.field.multiply(A,S)}return g}}class Pr{constructor(i,r,a,l,u){i instanceof Pr?this.constructor_2(i):this.constructor_1(i,r,a,l,u)}constructor_1(i,r,a,l,u){const h=r==null||a==null,f=l==null||u==null;if(h&&f)throw new X;h?(r=new oe(0,l.getY()),a=new oe(0,u.getY())):f&&(l=new oe(i.getWidth()-1,r.getY()),u=new oe(i.getWidth()-1,a.getY())),this.image=i,this.topLeft=r,this.bottomLeft=a,this.topRight=l,this.bottomRight=u,this.minX=Math.trunc(Math.min(r.getX(),a.getX())),this.maxX=Math.trunc(Math.max(l.getX(),u.getX())),this.minY=Math.trunc(Math.min(r.getY(),l.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,r){return i==null?r:r==null?i:new Pr(i.image,i.topLeft,i.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(i,r,a){let l=this.topLeft,u=this.bottomLeft,h=this.topRight,f=this.bottomRight;if(i>0){let g=a?this.topLeft:this.topRight,m=Math.trunc(g.getY()-i);m<0&&(m=0);let b=new oe(g.getX(),m);a?l=b:h=b}if(r>0){let g=a?this.bottomLeft:this.bottomRight,m=Math.trunc(g.getY()+r);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);let b=new oe(g.getX(),m);a?u=b:f=b}return new Pr(this.image,l,u,h,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Mm{constructor(i,r,a,l){this.columnCount=i,this.errorCorrectionLevel=l,this.rowCountUpperPart=r,this.rowCountLowerPart=a,this.rowCount=r+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Na{constructor(){this.buffer=""}static form(i,r){let a=-1;function l(h,f,g,m,b,A){if(h==="%%")return"%";if(r[++a]===void 0)return;h=m?parseInt(m.substr(1)):void 0;let S=b?parseInt(b.substr(1)):void 0,N;switch(A){case"s":N=r[a];break;case"c":N=r[a][0];break;case"f":N=parseFloat(r[a]).toFixed(h);break;case"p":N=parseFloat(r[a]).toPrecision(h);break;case"e":N=parseFloat(r[a]).toExponential(h);break;case"x":N=parseInt(r[a]).toString(S||16);break;case"d":N=parseFloat(parseInt(r[a],S||10).toPrecision(h)).toFixed(0);break}N=typeof N=="object"?JSON.stringify(N):(+N).toString(S);let B=parseInt(g),j=g&&g[0]+""=="0"?"0":" ";for(;N.length<B;)N=f!==void 0?N+j:j+N;return N}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(u,l)}format(i,...r){this.buffer+=Na.form(i,r)}toString(){return this.buffer}}class Ma{constructor(i){this.boundingBox=new Pr(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let r=this.getCodeword(i);if(r!=null)return r;for(let a=1;a<Ma.MAX_NEARBY_DISTANCE;a++){let l=this.imageRowToCodewordIndex(i)-a;if(l>=0&&(r=this.codewords[l],r!=null)||(l=this.imageRowToCodewordIndex(i)+a,l<this.codewords.length&&(r=this.codewords[l],r!=null)))return r}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,r){this.codewords[this.imageRowToCodewordIndex(i)]=r}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Na;let r=0;for(const a of this.codewords){if(a==null){i.format("%3d:    |   %n",r++);continue}i.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue())}return i.toString()}}Ma.MAX_NEARBY_DISTANCE=5;class Ba{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let r=this.values.get(i);r==null&&(r=0),r++,this.values.set(i,r)}getValue(){let i=-1,r=new Array;for(const[a,l]of this.values.entries()){const u={getKey:()=>a,getValue:()=>l};u.getValue()>i?(i=u.getValue(),r=[],r.push(u.getKey())):u.getValue()===i&&r.push(u.getKey())}return pe.toIntArray(r)}getConfidence(i){return this.values.get(i)}}class v1 extends Ma{constructor(i,r){super(i),this._isLeft=r}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,i);let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=-1,m=1,b=0;for(let A=h;A<f;A++){if(r[A]==null)continue;let S=r[A],N=S.getRowNumber()-g;if(N===0)b++;else if(N===1)m=Math.max(m,b),b=1,g=S.getRowNumber();else if(N<0||S.getRowNumber()>=i.getRowCount()||N>A)r[A]=null;else{let B;m>2?B=(m-2)*N:B=N;let j=B>=A;for(let z=1;z<=B&&!j;z++)j=r[A-z]!=null;j?r[A]=null:(g=S.getRowNumber(),b=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let r=new Int32Array(i.getRowCount());for(let a of this.getCodewords())if(a!=null){let l=a.getRowNumber();if(l>=r.length)continue;r[l]++}return r}adjustIncompleteIndicatorColumnRowNumbers(i){let r=this.getBoundingBox(),a=this._isLeft?r.getTopLeft():r.getTopRight(),l=this._isLeft?r.getBottomLeft():r.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.getCodewords(),g=-1;for(let m=u;m<h;m++){if(f[m]==null)continue;let b=f[m];b.setRowNumberAsRowIndicatorColumn();let A=b.getRowNumber()-g;A===0||(A===1?g=b.getRowNumber():b.getRowNumber()>=i.getRowCount()?f[m]=null:g=b.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),r=new Ba,a=new Ba,l=new Ba,u=new Ba;for(let f of i){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let g=f.getValue()%30,m=f.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:a.setValue(g*3+1);break;case 1:u.setValue(g/3),l.setValue(g%3);break;case 2:r.setValue(g+1);break}}if(r.getValue().length===0||a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||r.getValue()[0]<1||a.getValue()[0]+l.getValue()[0]<pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+l.getValue()[0]>pe.MAX_ROWS_IN_BARCODE)return null;let h=new Mm(r.getValue()[0],a.getValue()[0],l.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,h),h}removeIncorrectCodewords(i,r){for(let a=0;a<i.length;a++){let l=i[a];if(i[a]==null)continue;let u=l.getValue()%30,h=l.getRowNumber();if(h>r.getRowCount()){i[a]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==r.getRowCountUpperPart()&&(i[a]=null);break;case 1:(Math.trunc(u/3)!==r.getErrorCorrectionLevel()||u%3!==r.getRowCountLowerPart())&&(i[a]=null);break;case 2:u+1!==r.getColumnCount()&&(i[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class ka{constructor(i,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=pe.MAX_CODEWORDS_IN_BARCODE,r;do r=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let a=this.detectionResultColumns[r].getCodewords();for(let l=0;l<a.length;l++)a[l]!=null&&(a[l].hasValidRowNumber()||this.adjustRowNumbers(r,l,a))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++)if(i[a]!=null&&r[a]!=null&&i[a].getRowNumber()===r[a].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let u=this.detectionResultColumns[l].getCodewords()[a];u!=null&&(u.setRowNumber(i[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let l=r[a].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let f=this.detectionResultColumns[h].getCodewords()[a];f!=null&&(u=ka.adjustRowNumberIfValid(l,u,f),f.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,r=this.detectionResultColumns[0].getCodewords();for(let a=0;a<r.length;a++){if(r[a]==null)continue;let l=r[a].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let f=this.detectionResultColumns[h].getCodewords()[a];f!=null&&(u=ka.adjustRowNumberIfValid(l,u,f),f.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,r,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(i)?(a.setRowNumber(i),r=0):++r),r}adjustRowNumbers(i,r,a){if(!this.detectionResultColumns[i-1])return;let l=a[r],u=this.detectionResultColumns[i-1].getCodewords(),h=u;this.detectionResultColumns[i+1]!=null&&(h=this.detectionResultColumns[i+1].getCodewords());let f=new Array(14);f[2]=u[r],f[3]=h[r],r>0&&(f[0]=a[r-1],f[4]=u[r-1],f[5]=h[r-1]),r>1&&(f[8]=a[r-2],f[10]=u[r-2],f[11]=h[r-2]),r<a.length-1&&(f[1]=a[r+1],f[6]=u[r+1],f[7]=h[r+1]),r<a.length-2&&(f[9]=a[r+2],f[12]=u[r+2],f[13]=h[r+2]);for(let g of f)if(ka.adjustRowNumber(l,g))return}static adjustRowNumber(i,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===i.getBucket()?(i.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,r){this.detectionResultColumns[i]=r}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Na;for(let a=0;a<i.getCodewords().length;a++){r.format("CW %3d:",a);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){r.format("    |   ");continue}let u=this.detectionResultColumns[l].getCodewords()[a];if(u==null){r.format("    |   ");continue}r.format(" %3d|%3d",u.getRowNumber(),u.getValue())}r.format("%n")}return r.toString()}}class ja{constructor(i,r,a,l){this.rowNumber=ja.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(r),this.bucket=Math.trunc(a),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==ja.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}ja.BARCODE_ROW_UNKNOWN=-1;class pn{static initialize(){for(let i=0;i<pe.SYMBOL_TABLE.length;i++){let r=pe.SYMBOL_TABLE[i],a=r&1;for(let l=0;l<pe.BARS_IN_MODULE;l++){let u=0;for(;(r&1)===a;)u+=1,r>>=1;a=r&1,pn.RATIOS_TABLE[i]||(pn.RATIOS_TABLE[i]=new Array(pe.BARS_IN_MODULE)),pn.RATIOS_TABLE[i][pe.BARS_IN_MODULE-l-1]=Math.fround(u/pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let r=pn.getDecodedCodewordValue(pn.sampleBitCounts(i));return r!==-1?r:pn.getClosestDecodedValue(i)}static sampleBitCounts(i){let r=Me.sum(i),a=new Int32Array(pe.BARS_IN_MODULE),l=0,u=0;for(let h=0;h<pe.MODULES_IN_CODEWORD;h++){let f=r/(2*pe.MODULES_IN_CODEWORD)+h*r/pe.MODULES_IN_CODEWORD;u+i[l]<=f&&(u+=i[l],l++),a[l]++}return a}static getDecodedCodewordValue(i){let r=pn.getBitValue(i);return pe.getCodeword(r)===-1?-1:r}static getBitValue(i){let r=0;for(let a=0;a<i.length;a++)for(let l=0;l<i[a];l++)r=r<<1|(a%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(i){let r=Me.sum(i),a=new Array(pe.BARS_IN_MODULE);if(r>1)for(let h=0;h<a.length;h++)a[h]=Math.fround(i[h]/r);let l=Ko.MAX_VALUE,u=-1;this.bSymbolTableReady||pn.initialize();for(let h=0;h<pn.RATIOS_TABLE.length;h++){let f=0,g=pn.RATIOS_TABLE[h];for(let m=0;m<pe.BARS_IN_MODULE;m++){let b=Math.fround(g[m]-a[m]);if(f+=Math.fround(b*b),f>=l)break}f<l&&(l=f,u=pe.SYMBOL_TABLE[h])}return u}}pn.bSymbolTableReady=!1,pn.RATIOS_TABLE=new Array(pe.SYMBOL_TABLE.length).map(v=>new Array(pe.BARS_IN_MODULE));class A1{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class E1{static parseLong(i,r=void 0){return parseInt(i,r)}}class _1 extends y{}_1.kind="NullPointerException";class Bm{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,r,a){if(i==null)throw new _1;if(r<0||r>i.length||a<0||r+a>i.length||r+a<0)throw new P;if(a===0)return;for(let l=0;l<a;l++)this.write(i[r+l])}flush(){}close(){}}class km extends y{}class jm extends Bm{constructor(i=32){if(super(),this.count=0,i<0)throw new C("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let a=this.buf.length<<1;if(a-i<0&&(a=i),a<0){if(i<0)throw new km;a=O.MAX_VALUE}this.buf=_.copyOfUint8Array(this.buf,a)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,r,a){if(r<0||r>i.length||a<0||r+a-i.length>0)throw new P;this.ensureCapacity(this.count+a),L.arraycopy(i,r,this.buf,this.count,a),this.count+=a}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return _.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Ge;(function(v){v[v.ALPHA=0]="ALPHA",v[v.LOWER=1]="LOWER",v[v.MIXED=2]="MIXED",v[v.PUNCT=3]="PUNCT",v[v.ALPHA_SHIFT=4]="ALPHA_SHIFT",v[v.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ge||(Ge={}));function C1(){if(typeof window<"u")return window.BigInt||null;if(typeof Pa<"u")return Pa.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let rl;function rr(v){if(typeof rl>"u"&&(rl=C1()),rl===null)throw new Error("BigInt is not supported!");return rl(v)}function Lm(){let v=[];v[0]=rr(1);let i=rr(900);v[1]=i;for(let r=2;r<16;r++)v[r]=v[r-1]*i;return v}class G{static decode(i,r){let a=new be(""),l=V.ISO8859_1;a.enableDecoding(l);let u=1,h=i[u++],f=new A1;for(;u<i[0];){switch(h){case G.TEXT_COMPACTION_MODE_LATCH:u=G.textCompaction(i,u,a);break;case G.BYTE_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:u=G.byteCompaction(h,i,l,u,a);break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[u++]);break;case G.NUMERIC_COMPACTION_MODE_LATCH:u=G.numericCompaction(i,u,a);break;case G.ECI_CHARSET:V.getCharacterSetECIByValue(i[u++]);break;case G.ECI_GENERAL_PURPOSE:u+=2;break;case G.ECI_USER_DEFINED:u++;break;case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=G.decodeMacroBlock(i,u,f);break;case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:throw new U;default:u--,u=G.textCompaction(i,u,a);break}if(u<i.length)h=i[u++];else throw U.getFormatInstance()}if(a.length()===0)throw U.getFormatInstance();let g=new Ta(null,a.toString(),null,r);return g.setOther(f),g}static decodeMacroBlock(i,r,a){if(r+G.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw U.getFormatInstance();let l=new Int32Array(G.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<G.NUMBER_OF_SEQUENCE_CODEWORDS;f++,r++)l[f]=i[r];a.setSegmentIndex(O.parseInt(G.decodeBase900toBase10(l,G.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new be;r=G.textCompaction(i,r,u),a.setFileId(u.toString());let h=-1;for(i[r]===G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=r+1);r<i[0];)switch(i[r]){case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,i[r]){case G.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new be;r=G.textCompaction(i,r+1,f),a.setFileName(f.toString());break;case G.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new be;r=G.textCompaction(i,r+1,g),a.setSender(g.toString());break;case G.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let m=new be;r=G.textCompaction(i,r+1,m),a.setAddressee(m.toString());break;case G.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new be;r=G.numericCompaction(i,r+1,b),a.setSegmentCount(O.parseInt(b.toString()));break;case G.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new be;r=G.numericCompaction(i,r+1,A),a.setTimestamp(E1.parseLong(A.toString()));break;case G.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new be;r=G.numericCompaction(i,r+1,S),a.setChecksum(O.parseInt(S.toString()));break;case G.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let N=new be;r=G.numericCompaction(i,r+1,N),a.setFileSize(E1.parseLong(N.toString()));break;default:throw U.getFormatInstance()}break;case G.MACRO_PDF417_TERMINATOR:r++,a.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(h!==-1){let f=r-h;a.isLastSegment()&&f--,a.setOptionalData(_.copyOfRange(i,h,h+f))}return r}static textCompaction(i,r,a){let l=new Int32Array((i[0]-r)*2),u=new Int32Array((i[0]-r)*2),h=0,f=!1;for(;r<i[0]&&!f;){let g=i[r++];if(g<G.TEXT_COMPACTION_MODE_LATCH)l[h]=g/30,l[h+1]=g%30,h+=2;else switch(g){case G.TEXT_COMPACTION_MODE_LATCH:l[h++]=G.TEXT_COMPACTION_MODE_LATCH;break;case G.BYTE_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.NUMERIC_COMPACTION_MODE_LATCH:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:r--,f=!0;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[h]=G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=i[r++],u[h]=g,h++;break}}return G.decodeTextCompaction(l,u,h,a),r}static decodeTextCompaction(i,r,a,l){let u=Ge.ALPHA,h=Ge.ALPHA,f=0;for(;f<a;){let g=i[f],m="";switch(u){case Ge.ALPHA:if(g<26)m=String.fromCharCode(65+g);else switch(g){case 26:m=" ";break;case G.LL:u=Ge.LOWER;break;case G.ML:u=Ge.MIXED;break;case G.PS:h=u,u=Ge.PUNCT_SHIFT;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:u=Ge.ALPHA;break}break;case Ge.LOWER:if(g<26)m=String.fromCharCode(97+g);else switch(g){case 26:m=" ";break;case G.AS:h=u,u=Ge.ALPHA_SHIFT;break;case G.ML:u=Ge.MIXED;break;case G.PS:h=u,u=Ge.PUNCT_SHIFT;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:u=Ge.ALPHA;break}break;case Ge.MIXED:if(g<G.PL)m=G.MIXED_CHARS[g];else switch(g){case G.PL:u=Ge.PUNCT;break;case 26:m=" ";break;case G.LL:u=Ge.LOWER;break;case G.AL:u=Ge.ALPHA;break;case G.PS:h=u,u=Ge.PUNCT_SHIFT;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:u=Ge.ALPHA;break}break;case Ge.PUNCT:if(g<G.PAL)m=G.PUNCT_CHARS[g];else switch(g){case G.PAL:u=Ge.ALPHA;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:u=Ge.ALPHA;break}break;case Ge.ALPHA_SHIFT:if(u=h,g<26)m=String.fromCharCode(65+g);else switch(g){case 26:m=" ";break;case G.TEXT_COMPACTION_MODE_LATCH:u=Ge.ALPHA;break}break;case Ge.PUNCT_SHIFT:if(u=h,g<G.PAL)m=G.PUNCT_CHARS[g];else switch(g){case G.PAL:u=Ge.ALPHA;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:u=Ge.ALPHA;break}break}m!==""&&l.append(m),f++}}static byteCompaction(i,r,a,l,u){let h=new jm,f=0,g=0,m=!1;switch(i){case G.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),A=r[l++];for(;l<r[0]&&!m;)switch(b[f++]=A,g=900*g+A,A=r[l++],A){case G.TEXT_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH:case G.NUMERIC_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:l--,m=!0;break;default:if(f%5===0&&f>0){for(let S=0;S<6;++S)h.write(Number(rr(g)>>rr(8*(5-S))));g=0,f=0}break}l===r[0]&&A<G.TEXT_COMPACTION_MODE_LATCH&&(b[f++]=A);for(let S=0;S<f;S++)h.write(b[S]);break;case G.BYTE_COMPACTION_MODE_LATCH_6:for(;l<r[0]&&!m;){let S=r[l++];if(S<G.TEXT_COMPACTION_MODE_LATCH)f++,g=900*g+S;else switch(S){case G.TEXT_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH:case G.NUMERIC_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:l--,m=!0;break}if(f%5===0&&f>0){for(let N=0;N<6;++N)h.write(Number(rr(g)>>rr(8*(5-N))));g=0,f=0}}break}return u.append(je.decode(h.toByteArray(),a)),l}static numericCompaction(i,r,a){let l=0,u=!1,h=new Int32Array(G.MAX_NUMERIC_CODEWORDS);for(;r<i[0]&&!u;){let f=i[r++];if(r===i[0]&&(u=!0),f<G.TEXT_COMPACTION_MODE_LATCH)h[l]=f,l++;else switch(f){case G.TEXT_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:r--,u=!0;break}(l%G.MAX_NUMERIC_CODEWORDS===0||f===G.NUMERIC_COMPACTION_MODE_LATCH||u)&&l>0&&(a.append(G.decodeBase900toBase10(h,l)),l=0)}return r}static decodeBase900toBase10(i,r){let a=rr(0);for(let u=0;u<r;u++)a+=G.EXP900[r-u-1]*rr(i[u]);let l=a.toString();if(l.charAt(0)!=="1")throw new U;return l.substring(1)}}G.TEXT_COMPACTION_MODE_LATCH=900,G.BYTE_COMPACTION_MODE_LATCH=901,G.NUMERIC_COMPACTION_MODE_LATCH=902,G.BYTE_COMPACTION_MODE_LATCH_6=924,G.ECI_USER_DEFINED=925,G.ECI_GENERAL_PURPOSE=926,G.ECI_CHARSET=927,G.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,G.MACRO_PDF417_TERMINATOR=922,G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,G.MAX_NUMERIC_CODEWORDS=15,G.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,G.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,G.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,G.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,G.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,G.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,G.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,G.PL=25,G.LL=27,G.AS=27,G.ML=28,G.AL=28,G.PS=29,G.PAL=29,G.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",G.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",G.EXP900=C1()?Lm():[],G.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _e{constructor(){}static decode(i,r,a,l,u,h,f){let g=new Pr(i,r,a,l,u),m=null,b=null,A;for(let B=!0;;B=!1){if(r!=null&&(m=_e.getRowIndicatorColumn(i,g,r,!0,h,f)),l!=null&&(b=_e.getRowIndicatorColumn(i,g,l,!1,h,f)),A=_e.merge(m,b),A==null)throw X.getNotFoundInstance();let j=A.getBoundingBox();if(B&&j!=null&&(j.getMinY()<g.getMinY()||j.getMaxY()>g.getMaxY()))g=j;else break}A.setBoundingBox(g);let S=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,m),A.setDetectionResultColumn(S,b);let N=m!=null;for(let B=1;B<=S;B++){let j=N?B:S-B;if(A.getDetectionResultColumn(j)!==void 0)continue;let z;j===0||j===S?z=new v1(g,j===0):z=new Ma(g),A.setDetectionResultColumn(j,z);let q=-1,J=q;for(let $=g.getMinY();$<=g.getMaxY();$++){if(q=_e.getStartColumn(A,j,$,N),q<0||q>g.getMaxX()){if(J===-1)continue;q=J}let K=_e.detectCodeword(i,g.getMinX(),g.getMaxX(),N,q,$,h,f);K!=null&&(z.setCodeword($,K),J=q,h=Math.min(h,K.getWidth()),f=Math.max(f,K.getWidth()))}}return _e.createDecoderResult(A)}static merge(i,r){if(i==null&&r==null)return null;let a=_e.getBarcodeMetadata(i,r);if(a==null)return null;let l=Pr.merge(_e.adjustBoundingBox(i),_e.adjustBoundingBox(r));return new ka(a,l)}static adjustBoundingBox(i){if(i==null)return null;let r=i.getRowHeights();if(r==null)return null;let a=_e.getMax(r),l=0;for(let f of r)if(l+=a-f,f>0)break;let u=i.getCodewords();for(let f=0;l>0&&u[f]==null;f++)l--;let h=0;for(let f=r.length-1;f>=0&&(h+=a-r[f],!(r[f]>0));f--);for(let f=u.length-1;h>0&&u[f]==null;f--)h--;return i.getBoundingBox().addMissingRows(l,h,i.isLeft())}static getMax(i){let r=-1;for(let a of i)r=Math.max(r,a);return r}static getBarcodeMetadata(i,r){let a;if(i==null||(a=i.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let l;return r==null||(l=r.getBarcodeMetadata())==null?a:a.getColumnCount()!==l.getColumnCount()&&a.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&a.getRowCount()!==l.getRowCount()?null:a}static getRowIndicatorColumn(i,r,a,l,u,h){let f=new v1(r,l);for(let g=0;g<2;g++){let m=g===0?1:-1,b=Math.trunc(Math.trunc(a.getX()));for(let A=Math.trunc(Math.trunc(a.getY()));A<=r.getMaxY()&&A>=r.getMinY();A+=m){let S=_e.detectCodeword(i,0,i.getWidth(),l,b,A,u,h);S!=null&&(f.setCodeword(A,S),l?b=S.getStartX():b=S.getEndX())}}return f}static adjustCodewordCount(i,r){let a=r[0][1],l=a.getValue(),u=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-_e.getNumberOfECCodeWords(i.getBarcodeECLevel());if(l.length===0){if(u<1||u>pe.MAX_CODEWORDS_IN_BARCODE)throw X.getNotFoundInstance();a.setValue(u)}else l[0]!==u&&a.setValue(u)}static createDecoderResult(i){let r=_e.createBarcodeMatrix(i);_e.adjustCodewordCount(i,r);let a=new Array,l=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),u=[],h=new Array;for(let g=0;g<i.getBarcodeRowCount();g++)for(let m=0;m<i.getBarcodeColumnCount();m++){let b=r[g][m+1].getValue(),A=g*i.getBarcodeColumnCount()+m;b.length===0?a.push(A):b.length===1?l[A]=b[0]:(h.push(A),u.push(b))}let f=new Array(u.length);for(let g=0;g<f.length;g++)f[g]=u[g];return _e.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),l,pe.toIntArray(a),pe.toIntArray(h),f)}static createDecoderResultFromAmbiguousValues(i,r,a,l,u){let h=new Int32Array(l.length),f=100;for(;f-- >0;){for(let g=0;g<h.length;g++)r[l[g]]=u[g][h[g]];try{return _e.decodeCodewords(r,i,a)}catch(g){if(!(g instanceof R))throw g}if(h.length===0)throw R.getChecksumInstance();for(let g=0;g<h.length;g++)if(h[g]<u[g].length-1){h[g]++;break}else if(h[g]=0,g===h.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(i){let r=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let l=0;l<r.length;l++)for(let u=0;u<r[l].length;u++)r[l][u]=new Ba;let a=0;for(let l of i.getDetectionResultColumns()){if(l!=null){for(let u of l.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=r.length)continue;r[h][a].setValue(u.getValue())}}}a++}return r}static isValidBarcodeColumn(i,r){return r>=0&&r<=i.getBarcodeColumnCount()+1}static getStartColumn(i,r,a,l){let u=l?1:-1,h=null;if(_e.isValidBarcodeColumn(i,r-u)&&(h=i.getDetectionResultColumn(r-u).getCodeword(a)),h!=null)return l?h.getEndX():h.getStartX();if(h=i.getDetectionResultColumn(r).getCodewordNearby(a),h!=null)return l?h.getStartX():h.getEndX();if(_e.isValidBarcodeColumn(i,r-u)&&(h=i.getDetectionResultColumn(r-u).getCodewordNearby(a)),h!=null)return l?h.getEndX():h.getStartX();let f=0;for(;_e.isValidBarcodeColumn(i,r-u);){r-=u;for(let g of i.getDetectionResultColumn(r).getCodewords())if(g!=null)return(l?g.getEndX():g.getStartX())+u*f*(g.getEndX()-g.getStartX());f++}return l?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,r,a,l,u,h,f,g){u=_e.adjustCodewordStartColumn(i,r,a,l,u,h);let m=_e.getModuleBitCount(i,r,a,l,u,h);if(m==null)return null;let b,A=Me.sum(m);if(l)b=u+A;else{for(let B=0;B<m.length/2;B++){let j=m[B];m[B]=m[m.length-1-B],m[m.length-1-B]=j}b=u,u=b-A}if(!_e.checkCodewordSkew(A,f,g))return null;let S=pn.getDecodedValue(m),N=pe.getCodeword(S);return N===-1?null:new ja(u,b,_e.getCodewordBucketNumber(S),N)}static getModuleBitCount(i,r,a,l,u,h){let f=u,g=new Int32Array(8),m=0,b=l?1:-1,A=l;for(;(l?f<a:f>=r)&&m<g.length;)i.get(f,h)===A?(g[m]++,f+=b):(m++,A=!A);return m===g.length||f===(l?a:r)&&m===g.length-1?g:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,r,a,l,u,h){let f=u,g=l?-1:1;for(let m=0;m<2;m++){for(;(l?f>=r:f<a)&&l===i.get(f,h);){if(Math.abs(u-f)>_e.CODEWORD_SKEW_SIZE)return u;f+=g}g=-g,l=!l}return f}static checkCodewordSkew(i,r,a){return r-_e.CODEWORD_SKEW_SIZE<=i&&i<=a+_e.CODEWORD_SKEW_SIZE}static decodeCodewords(i,r,a){if(i.length===0)throw U.getFormatInstance();let l=1<<r+1,u=_e.correctErrors(i,a,l);_e.verifyCodewordCount(i,l);let h=G.decode(i,""+r);return h.setErrorsCorrected(u),h.setErasures(a.length),h}static correctErrors(i,r,a){if(r!=null&&r.length>a/2+_e.MAX_ERRORS||a<0||a>_e.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return _e.errorCorrection.decode(i,a,r)}static verifyCodewordCount(i,r){if(i.length<4)throw U.getFormatInstance();let a=i[0];if(a>i.length)throw U.getFormatInstance();if(a===0)if(r<i.length)i[0]=i.length-r;else throw U.getFormatInstance()}static getBitCountForCodeword(i){let r=new Int32Array(8),a=0,l=r.length-1;for(;!((i&1)!==a&&(a=i&1,l--,l<0));)r[l]++,i>>=1;return r}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return _e.getCodewordBucketNumber(_e.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let r=new Na;for(let a=0;a<i.length;a++){r.format("Row %2d: ",a);for(let l=0;l<i[a].length;l++){let u=i[a][l];u.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}r.format("%n")}return r.toString()}}_e.CODEWORD_SKEW_SIZE=2,_e.MAX_ERRORS=3,_e.MAX_EC_CODEWORDS=512,_e.errorCorrection=new b1;class Yt{decode(i,r=null){let a=Yt.decode(i,r,!1);if(a==null||a.length===0||a[0]==null)throw X.getNotFoundInstance();return a[0]}decodeMultiple(i,r=null){try{return Yt.decode(i,r,!0)}catch(a){throw a instanceof U||a instanceof R?X.getNotFoundInstance():a}}static decode(i,r,a){const l=new Array,u=Ee.detectMultiple(i,r,a);for(const h of u.getPoints()){const f=_e.decode(u.getBits(),h[4],h[5],h[6],h[7],Yt.getMinCodewordWidth(h),Yt.getMaxCodewordWidth(h)),g=new ht(f.getText(),f.getRawBytes(),void 0,h,fe.PDF_417);g.putMetadata(Pt.ERROR_CORRECTION_LEVEL,f.getECLevel());const m=f.getOther();m!=null&&g.putMetadata(Pt.PDF417_EXTRA_METADATA,m),l.push(g)}return l.map(h=>h)}static getMaxWidth(i,r){return i==null||r==null?0:Math.trunc(Math.abs(i.getX()-r.getX()))}static getMinWidth(i,r){return i==null||r==null?O.MAX_VALUE:Math.trunc(Math.abs(i.getX()-r.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Yt.getMaxWidth(i[0],i[4]),Yt.getMaxWidth(i[6],i[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.max(Yt.getMaxWidth(i[1],i[5]),Yt.getMaxWidth(i[7],i[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Yt.getMinWidth(i[0],i[4]),Yt.getMinWidth(i[6],i[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.min(Yt.getMinWidth(i[1],i[5]),Yt.getMinWidth(i[7],i[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class sl extends y{}sl.kind="ReaderException";class S1{constructor(i,r){this.verbose=i===!0,r&&this.setHints(r)}decode(i,r){return r&&this.setHints(r),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const r=!s(i)&&i.get(H.TRY_HARDER)===!0,a=s(i)?null:i.get(H.POSSIBLE_FORMATS),l=new Array;if(!s(a)){const u=a.some(h=>h===fe.UPC_A||h===fe.UPC_E||h===fe.EAN_13||h===fe.EAN_8||h===fe.CODABAR||h===fe.CODE_39||h===fe.CODE_93||h===fe.CODE_128||h===fe.ITF||h===fe.RSS_14||h===fe.RSS_EXPANDED);u&&!r&&l.push(new As(i,this.verbose)),a.includes(fe.QR_CODE)&&l.push(new ir),a.includes(fe.DATA_MATRIX)&&l.push(new nr),a.includes(fe.AZTEC)&&l.push(new $o),a.includes(fe.PDF_417)&&l.push(new Yt),u&&r&&l.push(new As(i,this.verbose))}l.length===0&&(r||l.push(new As(i,this.verbose)),l.push(new ir),l.push(new nr),l.push(new $o),l.push(new Yt),r&&l.push(new As(i,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new sl("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(i,this.hints)}catch(a){if(a instanceof sl)continue}throw new X("No MultiFormat Readers were able to detect the code.")}}class Um extends ni{constructor(i=null,r=500){const a=new S1;a.setHints(i),super(a,r)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Pm extends ni{constructor(i=500){super(new Yt,i)}}class zm extends ni{constructor(i=500){super(new ir,i)}}var su;(function(v){v[v.ERROR_CORRECTION=0]="ERROR_CORRECTION",v[v.CHARACTER_SET=1]="CHARACTER_SET",v[v.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",v[v.MIN_SIZE=3]="MIN_SIZE",v[v.MAX_SIZE=4]="MAX_SIZE",v[v.MARGIN=5]="MARGIN",v[v.PDF417_COMPACT=6]="PDF417_COMPACT",v[v.PDF417_COMPACTION=7]="PDF417_COMPACTION",v[v.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",v[v.AZTEC_LAYERS=9]="AZTEC_LAYERS",v[v.QR_VERSION=10]="QR_VERSION"})(su||(su={}));var Bt=su;class au{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new gn(i,Int32Array.from([1])))}buildGenerator(i){const r=this.cachedGenerators;if(i>=r.length){let a=r[r.length-1];const l=this.field;for(let u=r.length;u<=i;u++){const h=a.multiply(new gn(l,Int32Array.from([1,l.exp(u-1+l.getGeneratorBase())])));r.push(h),a=h}}return r[i]}encode(i,r){if(r===0)throw new C("No error correction bytes");const a=i.length-r;if(a<=0)throw new C("No data bytes provided");const l=this.buildGenerator(r),u=new Int32Array(a);L.arraycopy(i,0,u,0,a);let h=new gn(this.field,u);h=h.multiplyByMonomial(r,1);const g=h.divide(l)[1].getCoefficients(),m=r-g.length;for(let b=0;b<m;b++)i[a+b]=0;L.arraycopy(g,0,i,a+m,g.length)}}class wt{constructor(){}static applyMaskPenaltyRule1(i){return wt.applyMaskPenaltyRule1Internal(i,!0)+wt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let r=0;const a=i.getArray(),l=i.getWidth(),u=i.getHeight();for(let h=0;h<u-1;h++){const f=a[h];for(let g=0;g<l-1;g++){const m=f[g];m===f[g+1]&&m===a[h+1][g]&&m===a[h+1][g+1]&&r++}}return wt.N2*r}static applyMaskPenaltyRule3(i){let r=0;const a=i.getArray(),l=i.getWidth(),u=i.getHeight();for(let h=0;h<u;h++)for(let f=0;f<l;f++){const g=a[h];f+6<l&&g[f]===1&&g[f+1]===0&&g[f+2]===1&&g[f+3]===1&&g[f+4]===1&&g[f+5]===0&&g[f+6]===1&&(wt.isWhiteHorizontal(g,f-4,f)||wt.isWhiteHorizontal(g,f+7,f+11))&&r++,h+6<u&&a[h][f]===1&&a[h+1][f]===0&&a[h+2][f]===1&&a[h+3][f]===1&&a[h+4][f]===1&&a[h+5][f]===0&&a[h+6][f]===1&&(wt.isWhiteVertical(a,f,h-4,h)||wt.isWhiteVertical(a,f,h+7,h+11))&&r++}return r*wt.N3}static isWhiteHorizontal(i,r,a){r=Math.max(r,0),a=Math.min(a,i.length);for(let l=r;l<a;l++)if(i[l]===1)return!1;return!0}static isWhiteVertical(i,r,a,l){a=Math.max(a,0),l=Math.min(l,i.length);for(let u=a;u<l;u++)if(i[u][r]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let r=0;const a=i.getArray(),l=i.getWidth(),u=i.getHeight();for(let g=0;g<u;g++){const m=a[g];for(let b=0;b<l;b++)m[b]===1&&r++}const h=i.getHeight()*i.getWidth();return Math.floor(Math.abs(r*2-h)*10/h)*wt.N4}static getDataMaskBit(i,r,a){let l,u;switch(i){case 0:l=a+r&1;break;case 1:l=a&1;break;case 2:l=r%3;break;case 3:l=(a+r)%3;break;case 4:l=Math.floor(a/2)+Math.floor(r/3)&1;break;case 5:u=a*r,l=(u&1)+u%3;break;case 6:u=a*r,l=(u&1)+u%3&1;break;case 7:u=a*r,l=u%3+(a+r&1)&1;break;default:throw new C("Invalid mask pattern: "+i)}return l===0}static applyMaskPenaltyRule1Internal(i,r){let a=0;const l=r?i.getHeight():i.getWidth(),u=r?i.getWidth():i.getHeight(),h=i.getArray();for(let f=0;f<l;f++){let g=0,m=-1;for(let b=0;b<u;b++){const A=r?h[f][b]:h[b][f];A===m?g++:(g>=5&&(a+=wt.N1+(g-5)),g=1,m=A)}g>=5&&(a+=wt.N1+(g-5))}return a}}wt.N1=3,wt.N2=3,wt.N3=40,wt.N4=10;class al{constructor(i,r){this.width=i,this.height=r;const a=new Array(r);for(let l=0;l!==r;l++)a[l]=new Uint8Array(i);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(i,r){return this.bytes[r][i]}getArray(){return this.bytes}setNumber(i,r,a){this.bytes[r][i]=a}setBoolean(i,r,a){this.bytes[r][i]=a?1:0}clear(i){for(const r of this.bytes)_.fill(r,i)}equals(i){if(!(i instanceof al))return!1;const r=i;if(this.width!==r.width||this.height!==r.height)return!1;for(let a=0,l=this.height;a<l;++a){const u=this.bytes[a],h=r.bytes[a];for(let f=0,g=this.width;f<g;++f)if(u[f]!==h[f])return!1}return!0}toString(){const i=new be;for(let r=0,a=this.height;r<a;++r){const l=this.bytes[r];for(let u=0,h=this.width;u<h;++u)switch(l[u]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append("\n")}return i.toString()}}class zr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new be;return i.append("<<\n"),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append("\n ecLevel: "),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append("\n version: "),i.append(this.version?this.version.toString():"null"),i.append("\n maskPattern: "),i.append(this.maskPattern.toString()),this.matrix?(i.append("\n matrix:\n"),i.append(this.matrix.toString())):i.append("\n matrix: null\n"),i.append(">>\n"),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<zr.NUM_MASK_PATTERNS}}zr.NUM_MASK_PATTERNS=8;class Qe extends y{}Qe.kind="WriterException";class ge{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,r,a,l,u){ge.clearMatrix(u),ge.embedBasicPatterns(a,u),ge.embedTypeInfo(r,l,u),ge.maybeEmbedVersionInfo(a,u),ge.embedDataBits(i,l,u)}static embedBasicPatterns(i,r){ge.embedPositionDetectionPatternsAndSeparators(r),ge.embedDarkDotAtLeftBottomCorner(r),ge.maybeEmbedPositionAdjustmentPatterns(i,r),ge.embedTimingPatterns(r)}static embedTypeInfo(i,r,a){const l=new M;ge.makeTypeInfoBits(i,r,l);for(let u=0,h=l.getSize();u<h;++u){const f=l.get(l.getSize()-1-u),g=ge.TYPE_INFO_COORDINATES[u],m=g[0],b=g[1];if(a.setBoolean(m,b,f),u<8){const A=a.getWidth()-u-1;a.setBoolean(A,8,f)}else{const S=a.getHeight()-7+(u-8);a.setBoolean(8,S,f)}}}static maybeEmbedVersionInfo(i,r){if(i.getVersionNumber()<7)return;const a=new M;ge.makeVersionInfoBits(i,a);let l=6*3-1;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const f=a.get(l);l--,r.setBoolean(u,r.getHeight()-11+h,f),r.setBoolean(r.getHeight()-11+h,u,f)}}static embedDataBits(i,r,a){let l=0,u=-1,h=a.getWidth()-1,f=a.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);f>=0&&f<a.getHeight();){for(let g=0;g<2;++g){const m=h-g;if(!ge.isEmpty(a.get(m,f)))continue;let b;l<i.getSize()?(b=i.get(l),++l):b=!1,r!==255&&wt.getDataMaskBit(r,m,f)&&(b=!b),a.setBoolean(m,f,b)}f+=u}u=-u,f+=u,h-=2}if(l!==i.getSize())throw new Qe("Not all bits consumed: "+l+"/"+i.getSize())}static findMSBSet(i){return 32-O.numberOfLeadingZeros(i)}static calculateBCHCode(i,r){if(r===0)throw new C("0 polynomial");const a=ge.findMSBSet(r);for(i<<=a-1;ge.findMSBSet(i)>=a;)i^=r<<ge.findMSBSet(i)-a;return i}static makeTypeInfoBits(i,r,a){if(!zr.isValidMaskPattern(r))throw new Qe("Invalid mask pattern");const l=i.getBits()<<3|r;a.appendBits(l,5);const u=ge.calculateBCHCode(l,ge.TYPE_INFO_POLY);a.appendBits(u,10);const h=new M;if(h.appendBits(ge.TYPE_INFO_MASK_PATTERN,15),a.xor(h),a.getSize()!==15)throw new Qe("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(i,r){r.appendBits(i.getVersionNumber(),6);const a=ge.calculateBCHCode(i.getVersionNumber(),ge.VERSION_INFO_POLY);if(r.appendBits(a,12),r.getSize()!==18)throw new Qe("should not happen but we got: "+r.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let r=8;r<i.getWidth()-8;++r){const a=(r+1)%2;ge.isEmpty(i.get(r,6))&&i.setNumber(r,6,a),ge.isEmpty(i.get(6,r))&&i.setNumber(6,r,a)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Qe;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,r,a){for(let l=0;l<8;++l){if(!ge.isEmpty(a.get(i+l,r)))throw new Qe;a.setNumber(i+l,r,0)}}static embedVerticalSeparationPattern(i,r,a){for(let l=0;l<7;++l){if(!ge.isEmpty(a.get(i,r+l)))throw new Qe;a.setNumber(i,r+l,0)}}static embedPositionAdjustmentPattern(i,r,a){for(let l=0;l<5;++l){const u=ge.POSITION_ADJUSTMENT_PATTERN[l];for(let h=0;h<5;++h)a.setNumber(i+h,r+l,u[h])}}static embedPositionDetectionPattern(i,r,a){for(let l=0;l<7;++l){const u=ge.POSITION_DETECTION_PATTERN[l];for(let h=0;h<7;++h)a.setNumber(i+h,r+l,u[h])}}static embedPositionDetectionPatternsAndSeparators(i){const r=ge.POSITION_DETECTION_PATTERN[0].length;ge.embedPositionDetectionPattern(0,0,i),ge.embedPositionDetectionPattern(i.getWidth()-r,0,i),ge.embedPositionDetectionPattern(0,i.getWidth()-r,i);const a=8;ge.embedHorizontalSeparationPattern(0,a-1,i),ge.embedHorizontalSeparationPattern(i.getWidth()-a,a-1,i),ge.embedHorizontalSeparationPattern(0,i.getWidth()-a,i);const l=7;ge.embedVerticalSeparationPattern(l,0,i),ge.embedVerticalSeparationPattern(i.getHeight()-l-1,0,i),ge.embedVerticalSeparationPattern(l,i.getHeight()-l,i)}static maybeEmbedPositionAdjustmentPatterns(i,r){if(i.getVersionNumber()<2)return;const a=i.getVersionNumber()-1,l=ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,h=l.length;u!==h;u++){const f=l[u];if(f>=0)for(let g=0;g!==h;g++){const m=l[g];m>=0&&ge.isEmpty(r.get(m,f))&&ge.embedPositionAdjustmentPattern(m-2,f-2,r)}}}}ge.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ge.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ge.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ge.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ge.VERSION_INFO_POLY=7973,ge.TYPE_INFO_POLY=1335,ge.TYPE_INFO_MASK_PATTERN=21522;class Fm{constructor(i,r){this.dataBytes=i,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class st{constructor(){}static calculateMaskPenalty(i){return wt.applyMaskPenaltyRule1(i)+wt.applyMaskPenaltyRule2(i)+wt.applyMaskPenaltyRule3(i)+wt.applyMaskPenaltyRule4(i)}static encode(i,r,a=null){let l=st.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Bt.CHARACTER_SET)!==void 0;u&&(l=a.get(Bt.CHARACTER_SET).toString());const h=this.chooseMode(i,l),f=new M;if(h===de.BYTE&&(u||st.DEFAULT_BYTE_MODE_ENCODING!==l)){const $=V.getCharacterSetECIByName(l);$!==void 0&&this.appendECI($,f)}this.appendModeInfo(h,f);const g=new M;this.appendBytes(i,h,g,l);let m;if(a!==null&&a.get(Bt.QR_VERSION)!==void 0){const $=Number.parseInt(a.get(Bt.QR_VERSION).toString(),10);m=ue.getVersionForNumber($);const K=this.calculateBitsNeeded(h,f,g,m);if(!this.willFit(K,m,r))throw new Qe("Data too big for requested version")}else m=this.recommendVersion(r,h,f,g);const b=new M;b.appendBitArray(f);const A=h===de.BYTE?g.getSizeInBytes():i.length;this.appendLengthInfo(A,m,h,b),b.appendBitArray(g);const S=m.getECBlocksForLevel(r),N=m.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(N,b);const B=this.interleaveWithECBytes(b,m.getTotalCodewords(),N,S.getNumBlocks()),j=new zr;j.setECLevel(r),j.setMode(h),j.setVersion(m);const z=m.getDimensionForVersion(),q=new al(z,z),J=this.chooseMaskPattern(B,r,m,q);return j.setMaskPattern(J),ge.buildMatrix(B,r,m,J,q),j.setMatrix(q),j}static recommendVersion(i,r,a,l){const u=this.calculateBitsNeeded(r,a,l,ue.getVersionForNumber(1)),h=this.chooseVersion(u,i),f=this.calculateBitsNeeded(r,a,l,h);return this.chooseVersion(f,i)}static calculateBitsNeeded(i,r,a,l){return r.getSize()+i.getCharacterCountBits(l)+a.getSize()}static getAlphanumericCode(i){return i<st.ALPHANUMERIC_TABLE.length?st.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,r=null){if(V.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(i))return de.KANJI;let a=!1,l=!1;for(let u=0,h=i.length;u<h;++u){const f=i.charAt(u);if(st.isDigit(f))a=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)l=!0;else return de.BYTE}return l?de.ALPHANUMERIC:a?de.NUMERIC:de.BYTE}static isOnlyDoubleByteKanji(i){let r;try{r=je.encode(i,V.SJIS)}catch(l){return!1}const a=r.length;if(a%2!==0)return!1;for(let l=0;l<a;l+=2){const u=r[l]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(i,r,a,l){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let f=0;f<zr.NUM_MASK_PATTERNS;f++){ge.buildMatrix(i,r,a,f,l);let g=this.calculateMaskPenalty(l);g<u&&(u=g,h=f)}return h}static chooseVersion(i,r){for(let a=1;a<=40;a++){const l=ue.getVersionForNumber(a);if(st.willFit(i,l,r))return l}throw new Qe("Data too big")}static willFit(i,r,a){const l=r.getTotalCodewords(),h=r.getECBlocksForLevel(a).getTotalECCodewords(),f=l-h,g=(i+7)/8;return f>=g}static terminateBits(i,r){const a=i*8;if(r.getSize()>a)throw new Qe("data bits cannot fit in the QR Code"+r.getSize()+" > "+a);for(let h=0;h<4&&r.getSize()<a;++h)r.appendBit(!1);const l=r.getSize()&7;if(l>0)for(let h=l;h<8;h++)r.appendBit(!1);const u=i-r.getSizeInBytes();for(let h=0;h<u;++h)r.appendBits(h&1?17:236,8);if(r.getSize()!==a)throw new Qe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,r,a,l,u,h){if(l>=a)throw new Qe("Block ID too large");const f=i%a,g=a-f,m=Math.floor(i/a),b=m+1,A=Math.floor(r/a),S=A+1,N=m-A,B=b-S;if(N!==B)throw new Qe("EC bytes mismatch");if(a!==g+f)throw new Qe("RS blocks mismatch");if(i!==(A+N)*g+(S+B)*f)throw new Qe("Total bytes mismatch");l<g?(u[0]=A,h[0]=N):(u[0]=S,h[0]=B)}static interleaveWithECBytes(i,r,a,l){if(i.getSizeInBytes()!==a)throw new Qe("Number of bits and data bytes does not match");let u=0,h=0,f=0;const g=new Array;for(let b=0;b<l;++b){const A=new Int32Array(1),S=new Int32Array(1);st.getNumDataBytesAndNumECBytesForBlockID(r,a,l,b,A,S);const N=A[0],B=new Uint8Array(N);i.toBytes(8*u,B,0,N);const j=st.generateECBytes(B,S[0]);g.push(new Fm(B,j)),h=Math.max(h,N),f=Math.max(f,j.length),u+=A[0]}if(a!==u)throw new Qe("Data bytes does not match offset");const m=new M;for(let b=0;b<h;++b)for(const A of g){const S=A.getDataBytes();b<S.length&&m.appendBits(S[b],8)}for(let b=0;b<f;++b)for(const A of g){const S=A.getErrorCorrectionBytes();b<S.length&&m.appendBits(S[b],8)}if(r!==m.getSizeInBytes())throw new Qe("Interleaving error: "+r+" and "+m.getSizeInBytes()+" differ.");return m}static generateECBytes(i,r){const a=i.length,l=new Int32Array(a+r);for(let h=0;h<a;h++)l[h]=i[h]&255;new au(Le.QR_CODE_FIELD_256).encode(l,r);const u=new Uint8Array(r);for(let h=0;h<r;h++)u[h]=l[a+h];return u}static appendModeInfo(i,r){r.appendBits(i.getBits(),4)}static appendLengthInfo(i,r,a,l){const u=a.getCharacterCountBits(r);if(i>=1<<u)throw new Qe(i+" is bigger than "+((1<<u)-1));l.appendBits(i,u)}static appendBytes(i,r,a,l){switch(r){case de.NUMERIC:st.appendNumericBytes(i,a);break;case de.ALPHANUMERIC:st.appendAlphanumericBytes(i,a);break;case de.BYTE:st.append8BitBytes(i,a,l);break;case de.KANJI:st.appendKanjiBytes(i,a);break;default:throw new Qe("Invalid mode: "+r)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const r=st.getDigit(i);return r>=0&&r<=9}static appendNumericBytes(i,r){const a=i.length;let l=0;for(;l<a;){const u=st.getDigit(i.charAt(l));if(l+2<a){const h=st.getDigit(i.charAt(l+1)),f=st.getDigit(i.charAt(l+2));r.appendBits(u*100+h*10+f,10),l+=3}else if(l+1<a){const h=st.getDigit(i.charAt(l+1));r.appendBits(u*10+h,7),l+=2}else r.appendBits(u,4),l++}}static appendAlphanumericBytes(i,r){const a=i.length;let l=0;for(;l<a;){const u=st.getAlphanumericCode(i.charCodeAt(l));if(u===-1)throw new Qe;if(l+1<a){const h=st.getAlphanumericCode(i.charCodeAt(l+1));if(h===-1)throw new Qe;r.appendBits(u*45+h,11),l+=2}else r.appendBits(u,6),l++}}static append8BitBytes(i,r,a){let l;try{l=je.encode(i,a)}catch(u){throw new Qe(u)}for(let u=0,h=l.length;u!==h;u++){const f=l[u];r.appendBits(f,8)}}static appendKanjiBytes(i,r){let a;try{a=je.encode(i,V.SJIS)}catch(u){throw new Qe(u)}const l=a.length;for(let u=0;u<l;u+=2){const h=a[u]&255,f=a[u+1]&255,g=h<<8&4294967295|f;let m=-1;if(g>=33088&&g<=40956?m=g-33088:g>=57408&&g<=60351&&(m=g-49472),m===-1)throw new Qe("Invalid byte sequence");const b=(m>>8)*192+(m&255);r.appendBits(b,13)}}static appendECI(i,r){r.appendBits(de.ECI.getBits(),4),r.appendBits(i.getValue(),8)}}st.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),st.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class Fr{write(i,r,a,l=null){if(i.length===0)throw new C("Found empty contents");if(r<0||a<0)throw new C("Requested dimensions are too small: "+r+"x"+a);let u=$e.L,h=Fr.QUIET_ZONE_SIZE;l!==null&&(l.get(Bt.ERROR_CORRECTION)!==void 0&&(u=$e.fromString(l.get(Bt.ERROR_CORRECTION).toString())),l.get(Bt.MARGIN)!==void 0&&(h=Number.parseInt(l.get(Bt.MARGIN).toString(),10)));const f=st.encode(i,u,l);return this.renderResult(f,r,a,h)}writeToDom(i,r,a,l,u=null){typeof i=="string"&&(i=document.querySelector(i));const h=this.write(r,a,l,u);i&&i.appendChild(h)}renderResult(i,r,a,l){const u=i.getMatrix();if(u===null)throw new gi;const h=u.getWidth(),f=u.getHeight(),g=h+l*2,m=f+l*2,b=Math.max(r,g),A=Math.max(a,m),S=Math.min(Math.floor(b/g),Math.floor(A/m)),N=Math.floor((b-h*S)/2),B=Math.floor((A-f*S)/2),j=this.createSVGElement(b,A);for(let z=0,q=B;z<f;z++,q+=S)for(let J=0,$=N;J<h;J++,$+=S)if(u.get(J,z)===1){const K=this.createSvgRectElement($,q,S,S);j.appendChild(K)}return j}createSVGElement(i,r){const a=document.createElementNS(Fr.SVG_NS,"svg");return a.setAttributeNS(null,"height",i.toString()),a.setAttributeNS(null,"width",r.toString()),a}createSvgRectElement(i,r,a,l){const u=document.createElementNS(Fr.SVG_NS,"rect");return u.setAttributeNS(null,"x",i.toString()),u.setAttributeNS(null,"y",r.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",l.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Fr.QUIET_ZONE_SIZE=4,Fr.SVG_NS="http://www.w3.org/2000/svg";class _s{encode(i,r,a,l,u){if(i.length===0)throw new C("Found empty contents");if(r!==fe.QR_CODE)throw new C("Can only encode QR_CODE, but got "+r);if(a<0||l<0)throw new C("Requested dimensions are too small: ".concat(a,"x").concat(l));let h=$e.L,f=_s.QUIET_ZONE_SIZE;u!==null&&(u.get(Bt.ERROR_CORRECTION)!==void 0&&(h=$e.fromString(u.get(Bt.ERROR_CORRECTION).toString())),u.get(Bt.MARGIN)!==void 0&&(f=Number.parseInt(u.get(Bt.MARGIN).toString(),10)));const g=st.encode(i,h,u);return _s.renderResult(g,a,l,f)}static renderResult(i,r,a,l){const u=i.getMatrix();if(u===null)throw new gi;const h=u.getWidth(),f=u.getHeight(),g=h+l*2,m=f+l*2,b=Math.max(r,g),A=Math.max(a,m),S=Math.min(Math.floor(b/g),Math.floor(A/m)),N=Math.floor((b-h*S)/2),B=Math.floor((A-f*S)/2),j=new Te(b,A);for(let z=0,q=B;z<f;z++,q+=S)for(let J=0,$=N;J<h;J++,$+=S)u.get(J,z)===1&&j.setRegion($,q,S,S);return j}}_s.QUIET_ZONE_SIZE=4;class Hm{encode(i,r,a,l,u){let h;switch(r){case fe.QR_CODE:h=new _s;break;default:throw new C("No encoder available for format "+r)}return h.encode(i,r,a,l,u)}}class wi extends ye{constructor(i,r,a,l,u,h,f,g){if(super(h,f),this.yuvData=i,this.dataWidth=r,this.dataHeight=a,this.left=l,this.top=u,l+h>r||u+f>a)throw new C("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(h,f)}getRow(i,r){if(i<0||i>=this.getHeight())throw new C("Requested row is outside the image: "+i);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const l=(i+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,l,r,0,a),r}getMatrix(){const i=this.getWidth(),r=this.getHeight();if(i===this.dataWidth&&r===this.dataHeight)return this.yuvData;const a=i*r,l=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return L.arraycopy(this.yuvData,u,l,0,a),l;for(let h=0;h<r;h++){const f=h*i;L.arraycopy(this.yuvData,u,l,f,i),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(i,r,a,l){return new wi(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+r,a,l,!1)}renderThumbnail(){const i=this.getWidth()/wi.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/wi.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(i*r),l=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<r;h++){const f=h*i;for(let g=0;g<i;g++){const m=l[u+g*wi.THUMBNAIL_SCALE_FACTOR]&255;a[f+g]=4278190080|m*65793}u+=this.dataWidth*wi.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/wi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/wi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,r){const a=this.yuvData;for(let l=0,u=this.top*this.dataWidth+this.left;l<r;l++,u+=this.dataWidth){const h=u+i/2;for(let f=u,g=u+i-1;f<h;f++,g--){const m=a[f];a[f]=a[g],a[g]=m}}}invert(){return new ze(this)}}wi.THUMBNAIL_SCALE_FACTOR=2;class ou extends ye{constructor(i,r,a,l,u,h,f){if(super(r,a),this.dataWidth=l,this.dataHeight=u,this.left=h,this.top=f,i.BYTES_PER_ELEMENT===4){const g=r*a,m=new Uint8ClampedArray(g);for(let b=0;b<g;b++){const A=i[b],S=A>>16&255,N=A>>7&510,B=A&255;m[b]=(S+N+B)/4&255}this.luminances=m}else this.luminances=i;if(l===void 0&&(this.dataWidth=r),u===void 0&&(this.dataHeight=a),h===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+a>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(i,r){if(i<0||i>=this.getHeight())throw new C("Requested row is outside the image: "+i);const a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));const l=(i+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,l,r,0,a),r}getMatrix(){const i=this.getWidth(),r=this.getHeight();if(i===this.dataWidth&&r===this.dataHeight)return this.luminances;const a=i*r,l=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return L.arraycopy(this.luminances,u,l,0,a),l;for(let h=0;h<r;h++){const f=h*i;L.arraycopy(this.luminances,u,l,f,i),u+=this.dataWidth}return l}isCropSupported(){return!0}crop(i,r,a,l){return new ou(this.luminances,a,l,this.dataWidth,this.dataHeight,this.left+i,this.top+r)}invert(){return new ze(this)}}class T1 extends V{static forName(i){return this.getCharacterSetECIByName(i)}}class lu{}lu.ISO_8859_1=V.ISO8859_1;class O1{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class R1{static singletonList(i){return[i]}static min(i,r){return i.sort(r)[0]}}class Vm{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Cs extends Vm{constructor(i,r,a){super(i),this.value=r,this.bitCount=a}appendTo(i,r){i.appendBits(this.value,this.bitCount)}add(i,r){return new Cs(this,i,r)}addBinaryShift(i,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Cs(this,i,r)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+O.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class cu extends Cs{constructor(i,r,a){super(i,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=a}appendTo(i,r){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):a===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(r[this.binaryShiftStart+a],8)}addBinaryShift(i,r){return new cu(this,i,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Gm(v,i,r){return new cu(v,i,r)}function La(v,i,r){return new Cs(v,i,r)}const qm=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],sr=0,ol=1,Fn=2,I1=3,yi=4,Xm=new Cs(null,0,0),uu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Wm(v){for(let i of v)_.fill(i,-1);return v[sr][yi]=0,v[ol][yi]=0,v[ol][sr]=28,v[I1][yi]=0,v[Fn][yi]=0,v[Fn][sr]=15,v}const D1=Wm(_.createInt32Array(6,6));class bi{constructor(i,r,a,l){this.token=i,this.mode=r,this.binaryShiftByteCount=a,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,r){let a=this.bitCount,l=this.token;if(i!==this.mode){let h=uu[this.mode][i];l=La(l,h&65535,h>>16),a+=h>>16}let u=i===Fn?4:5;return l=La(l,r,u),new bi(l,i,0,a+u)}shiftAndAppend(i,r){let a=this.token,l=this.mode===Fn?4:5;return a=La(a,D1[this.mode][i],l),a=La(a,r,5),new bi(a,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(i){let r=this.token,a=this.mode,l=this.bitCount;if(this.mode===yi||this.mode===Fn){let f=uu[a][sr];r=La(r,f&65535,f>>16),l+=f>>16,a=sr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new bi(r,a,this.binaryShiftByteCount+1,l+u);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(i+1)),h}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Gm(r,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new bi(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let r=this.bitCount+(uu[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?r+=bi.calculateBinaryShiftCost(i)-bi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(r+=10),r<=i.bitCount}toBitArray(i){let r=[];for(let l=this.endBinaryShift(i.length).token;l!==null;l=l.getPrevious())r.unshift(l);let a=new M;for(const l of r)l.appendTo(a,i);return a}toString(){return he.format("%s bits=%d bytes=%d",qm[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}bi.INITIAL_STATE=new bi(Xm,sr,0,0);function Ym(v){const i=he.getCharCode(" "),r=he.getCharCode("."),a=he.getCharCode(",");v[sr][i]=1;const l=he.getCharCode("Z"),u=he.getCharCode("A");for(let S=u;S<=l;S++)v[sr][S]=S-u+2;v[ol][i]=1;const h=he.getCharCode("z"),f=he.getCharCode("a");for(let S=f;S<=h;S++)v[ol][S]=S-f+2;v[Fn][i]=1;const g=he.getCharCode("9"),m=he.getCharCode("0");for(let S=m;S<=g;S++)v[Fn][S]=S-m+2;v[Fn][a]=12,v[Fn][r]=13;const b=["\0"," ","","","","","","","\x07","\b","	","\n","\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<b.length;S++)v[I1][he.getCharCode(b[S])]=S;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<A.length;S++)he.getCharCode(A[S])>0&&(v[yi][he.getCharCode(A[S])]=S);return v}const hu=Ym(_.createInt32Array(5,256));class Ua{constructor(i){this.text=i}encode(){const i=he.getCharCode(" "),r=he.getCharCode("\n");let a=R1.singletonList(bi.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,f=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case he.getCharCode("\r"):h=f===r?2:0;break;case he.getCharCode("."):h=f===i?3:0;break;case he.getCharCode(","):h=f===i?4:0;break;case he.getCharCode(":"):h=f===i?5:0;break;default:h=0}h>0?(a=Ua.updateStateListForPair(a,u,h),u++):a=this.updateStateListForChar(a,u)}return R1.min(a,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,r){const a=[];for(let l of i)this.updateStateForChar(l,r,a);return Ua.simplifyStates(a)}updateStateForChar(i,r,a){let l=this.text[r]&255,u=hu[i.getMode()][l]>0,h=null;for(let f=0;f<=yi;f++){let g=hu[f][l];if(g>0){if(h==null&&(h=i.endBinaryShift(r)),!u||f===i.getMode()||f===Fn){const m=h.latchAndAppend(f,g);a.push(m)}if(!u&&D1[i.getMode()][f]>=0){const m=h.shiftAndAppend(f,g);a.push(m)}}}if(i.getBinaryShiftByteCount()>0||hu[i.getMode()][l]===0){let f=i.addBinaryShiftChar(r);a.push(f)}}static updateStateListForPair(i,r,a){const l=[];for(let u of i)this.updateStateForPair(u,r,a,l);return this.simplifyStates(l)}static updateStateForPair(i,r,a,l){let u=i.endBinaryShift(r);if(l.push(u.latchAndAppend(yi,a)),i.getMode()!==yi&&l.push(u.shiftAndAppend(yi,a)),a===3||a===4){let h=u.latchAndAppend(Fn,16-a).latchAndAppend(Fn,1);l.push(h)}if(i.getBinaryShiftByteCount()>0){let h=i.addBinaryShiftChar(r).addBinaryShiftChar(r+1);l.push(h)}}static simplifyStates(i){let r=[];for(const a of i){let l=!0;for(const u of r){if(u.isBetterThanOrEqualTo(a)){l=!1;break}a.isBetterThanOrEqualTo(u)&&(r=r.filter(h=>h!==u))}l&&r.push(a)}return r}}class Be{constructor(){}static encodeBytes(i){return Be.encode(i,Be.DEFAULT_EC_PERCENT,Be.DEFAULT_AZTEC_LAYERS)}static encode(i,r,a){let l=new Ua(i).encode(),u=O.truncDivision(l.getSize()*r,100)+11,h=l.getSize()+u,f,g,m,b,A;if(a!==Be.DEFAULT_AZTEC_LAYERS){if(f=a<0,g=Math.abs(a),g>(f?Be.MAX_NB_BITS_COMPACT:Be.MAX_NB_BITS))throw new C(he.format("Illegal value %s for layers",a));m=Be.totalBitsInLayer(g,f),b=Be.WORD_SIZE[g];let K=m-m%b;if(A=Be.stuffBits(l,b),A.getSize()+u>K)throw new C("Data to large for user specified layer");if(f&&A.getSize()>b*64)throw new C("Data to large for user specified layer")}else{b=0,A=null;for(let K=0;;K++){if(K>Be.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(f=K<=3,g=f?K+1:K,m=Be.totalBitsInLayer(g,f),h>m)continue;(A==null||b!==Be.WORD_SIZE[g])&&(b=Be.WORD_SIZE[g],A=Be.stuffBits(l,b));let Oe=m-m%b;if(!(f&&A.getSize()>b*64)&&A.getSize()+u<=Oe)break}}let S=Be.generateCheckWords(A,m,b),N=A.getSize()/b,B=Be.generateModeMessage(f,g,N),j=(f?11:14)+g*4,z=new Int32Array(j),q;if(f){q=j;for(let K=0;K<z.length;K++)z[K]=K}else{q=j+1+2*O.truncDivision(O.truncDivision(j,2)-1,15);let K=O.truncDivision(j,2),Oe=O.truncDivision(q,2);for(let ve=0;ve<K;ve++){let wn=ve+O.truncDivision(ve,15);z[K-ve-1]=Oe-wn-1,z[K+ve]=Oe+wn+1}}let J=new Te(q);for(let K=0,Oe=0;K<g;K++){let ve=(g-K)*4+(f?9:12);for(let wn=0;wn<ve;wn++){let si=wn*2;for(let yn=0;yn<2;yn++)S.get(Oe+si+yn)&&J.set(z[K*2+yn],z[K*2+wn]),S.get(Oe+ve*2+si+yn)&&J.set(z[K*2+wn],z[j-1-K*2-yn]),S.get(Oe+ve*4+si+yn)&&J.set(z[j-1-K*2-yn],z[j-1-K*2-wn]),S.get(Oe+ve*6+si+yn)&&J.set(z[j-1-K*2-wn],z[K*2+yn])}Oe+=ve*8}if(Be.drawModeMessage(J,f,q,B),f)Be.drawBullsEye(J,O.truncDivision(q,2),5);else{Be.drawBullsEye(J,O.truncDivision(q,2),7);for(let K=0,Oe=0;K<O.truncDivision(j,2)-1;K+=15,Oe+=16)for(let ve=O.truncDivision(q,2)&1;ve<q;ve+=2)J.set(O.truncDivision(q,2)-Oe,ve),J.set(O.truncDivision(q,2)+Oe,ve),J.set(ve,O.truncDivision(q,2)-Oe),J.set(ve,O.truncDivision(q,2)+Oe)}let $=new O1;return $.setCompact(f),$.setSize(q),$.setLayers(g),$.setCodeWords(N),$.setMatrix(J),$}static drawBullsEye(i,r,a){for(let l=0;l<a;l+=2)for(let u=r-l;u<=r+l;u++)i.set(u,r-l),i.set(u,r+l),i.set(r-l,u),i.set(r+l,u);i.set(r-a,r-a),i.set(r-a+1,r-a),i.set(r-a,r-a+1),i.set(r+a,r-a),i.set(r+a,r-a+1),i.set(r+a,r+a-1)}static generateModeMessage(i,r,a){let l=new M;return i?(l.appendBits(r-1,2),l.appendBits(a-1,6),l=Be.generateCheckWords(l,28,4)):(l.appendBits(r-1,5),l.appendBits(a-1,11),l=Be.generateCheckWords(l,40,4)),l}static drawModeMessage(i,r,a,l){let u=O.truncDivision(a,2);if(r)for(let h=0;h<7;h++){let f=u-3+h;l.get(h)&&i.set(f,u-5),l.get(h+7)&&i.set(u+5,f),l.get(20-h)&&i.set(f,u+5),l.get(27-h)&&i.set(u-5,f)}else for(let h=0;h<10;h++){let f=u-5+h+O.truncDivision(h,5);l.get(h)&&i.set(f,u-7),l.get(h+10)&&i.set(u+7,f),l.get(29-h)&&i.set(f,u+7),l.get(39-h)&&i.set(u-7,f)}}static generateCheckWords(i,r,a){let l=i.getSize()/a,u=new au(Be.getGF(a)),h=O.truncDivision(r,a),f=Be.bitsToWords(i,a,h);u.encode(f,h-l);let g=r%a,m=new M;m.appendBits(0,g);for(const b of Array.from(f))m.appendBits(b,a);return m}static bitsToWords(i,r,a){let l=new Int32Array(a),u,h;for(u=0,h=i.getSize()/r;u<h;u++){let f=0;for(let g=0;g<r;g++)f|=i.get(u*r+g)?1<<r-g-1:0;l[u]=f}return l}static getGF(i){switch(i){case 4:return Le.AZTEC_PARAM;case 6:return Le.AZTEC_DATA_6;case 8:return Le.AZTEC_DATA_8;case 10:return Le.AZTEC_DATA_10;case 12:return Le.AZTEC_DATA_12;default:throw new C("Unsupported word size "+i)}}static stuffBits(i,r){let a=new M,l=i.getSize(),u=(1<<r)-2;for(let h=0;h<l;h+=r){let f=0;for(let g=0;g<r;g++)(h+g>=l||i.get(h+g))&&(f|=1<<r-1-g);(f&u)===u?(a.appendBits(f&u,r),h--):f&u?a.appendBits(f,r):(a.appendBits(f|1,r),h--)}return a}static totalBitsInLayer(i,r){return((r?88:112)+16*i)*i}}Be.DEFAULT_EC_PERCENT=33,Be.DEFAULT_AZTEC_LAYERS=0,Be.MAX_NB_BITS=32,Be.MAX_NB_BITS_COMPACT=4,Be.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ll{encode(i,r,a,l){return this.encodeWithHints(i,r,a,l,null)}encodeWithHints(i,r,a,l,u){let h=lu.ISO_8859_1,f=Be.DEFAULT_EC_PERCENT,g=Be.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Bt.CHARACTER_SET)&&(h=T1.forName(u.get(Bt.CHARACTER_SET).toString())),u.has(Bt.ERROR_CORRECTION)&&(f=O.parseInt(u.get(Bt.ERROR_CORRECTION).toString())),u.has(Bt.AZTEC_LAYERS)&&(g=O.parseInt(u.get(Bt.AZTEC_LAYERS).toString()))),ll.encodeLayers(i,r,a,l,h,f,g)}static encodeLayers(i,r,a,l,u,h,f){if(r!==fe.AZTEC)throw new C("Can only encode AZTEC, but got "+r);let g=Be.encode(he.getBytes(i,u),h,f);return ll.renderResult(g,a,l)}static renderResult(i,r,a){let l=i.getMatrix();if(l==null)throw new gi;let u=l.getWidth(),h=l.getHeight(),f=Math.max(r,u),g=Math.max(a,h),m=Math.min(f/u,g/h),b=(f-u*m)/2,A=(g-h*m)/2,S=new Te(f,g);for(let N=0,B=A;N<h;N++,B+=m)for(let j=0,z=b;j<u;j++,z+=m)l.get(j,N)&&S.setRegion(z,B,m,m);return S}}n.AbstractExpandedDecoder=Zc,n.ArgumentException=E,n.ArithmeticException=Zo,n.AztecCode=O1,n.AztecCodeReader=$o,n.AztecCodeWriter=ll,n.AztecDecoder=Je,n.AztecDetector=g1,n.AztecDetectorResult=d1,n.AztecEncoder=Be,n.AztecHighLevelEncoder=Ua,n.AztecPoint=cn,n.BarcodeFormat=fe,n.Binarizer=k,n.BinaryBitmap=T,n.BitArray=M,n.BitMatrix=Te,n.BitSource=eu,n.BrowserAztecCodeReader=bm,n.BrowserBarcodeReader=Cm,n.BrowserCodeReader=ni,n.BrowserDatamatrixCodeReader=Tm,n.BrowserMultiFormatReader=Um,n.BrowserPDF417Reader=Pm,n.BrowserQRCodeReader=zm,n.BrowserQRCodeSvgWriter=Fr,n.CharacterSetECI=V,n.ChecksumException=R,n.Code128Reader=te,n.Code39Reader=Nt,n.DataMatrixDecodedBitStreamParser=tr,n.DataMatrixReader=nr,n.DecodeHintType=H,n.DecoderResult=Ta,n.DefaultGridSampler=f1,n.DetectorResult=Jo,n.EAN13Reader=jr,n.EncodeHintType=Bt,n.Exception=y,n.FormatException=U,n.GenericGF=Le,n.GenericGFPoly=gn,n.GlobalHistogramBinarizer=ee,n.GridSampler=Xc,n.GridSamplerInstance=$i,n.HTMLCanvasElementLuminanceSource=We,n.HybridBinarizer=ne,n.ITFReader=Ye,n.IllegalArgumentException=C,n.IllegalStateException=gi,n.InvertedLuminanceSource=ze,n.LuminanceSource=ye,n.MathUtils=Me,n.MultiFormatOneDReader=As,n.MultiFormatReader=S1,n.MultiFormatWriter=Hm,n.NotFoundException=X,n.OneDReader=Tt,n.PDF417DecodedBitStreamParser=G,n.PDF417DecoderErrorCorrection=b1,n.PDF417Reader=Yt,n.PDF417ResultMetadata=A1,n.PerspectiveTransform=ii,n.PlanarYUVLuminanceSource=wi,n.QRCodeByteMatrix=al,n.QRCodeDataMask=Pn,n.QRCodeDecodedBitStreamParser=dt,n.QRCodeDecoderErrorCorrectionLevel=$e,n.QRCodeDecoderFormatInformation=tn,n.QRCodeEncoder=st,n.QRCodeEncoderQRCode=zr,n.QRCodeMaskUtil=wt,n.QRCodeMatrixUtil=ge,n.QRCodeMode=de,n.QRCodeReader=ir,n.QRCodeVersion=ue,n.QRCodeWriter=_s,n.RGBLuminanceSource=ou,n.RSS14Reader=pt,n.RSSExpandedReader=Q,n.ReaderException=sl,n.ReedSolomonDecoder=Ra,n.ReedSolomonEncoder=au,n.ReedSolomonException=ws,n.Result=ht,n.ResultMetadataType=Pt,n.ResultPoint=oe,n.StringUtils=he,n.UnsupportedOperationException=we,n.VideoInputDevice=kr,n.WhiteRectangleDetector=Ri,n.WriterException=Qe,n.ZXingArrays=_,n.ZXingCharset=T1,n.ZXingInteger=O,n.ZXingStandardCharsets=lu,n.ZXingStringBuilder=be,n.ZXingStringEncoding=je,n.ZXingSystem=L,n.createAbstractExpandedDecoder=w1,Object.defineProperty(n,"__esModule",{value:!0})})})(c0,c0.exports);var at=c0.exports;const x6=yp(at),m6=Qf({__proto__:null,default:x6},[at]);var Lf=function(){function t(e,n,s){if(this.formatMap=new Map([[ae.QR_CODE,at.BarcodeFormat.QR_CODE],[ae.AZTEC,at.BarcodeFormat.AZTEC],[ae.CODABAR,at.BarcodeFormat.CODABAR],[ae.CODE_39,at.BarcodeFormat.CODE_39],[ae.CODE_93,at.BarcodeFormat.CODE_93],[ae.CODE_128,at.BarcodeFormat.CODE_128],[ae.DATA_MATRIX,at.BarcodeFormat.DATA_MATRIX],[ae.MAXICODE,at.BarcodeFormat.MAXICODE],[ae.ITF,at.BarcodeFormat.ITF],[ae.EAN_13,at.BarcodeFormat.EAN_13],[ae.EAN_8,at.BarcodeFormat.EAN_8],[ae.PDF_417,at.BarcodeFormat.PDF_417],[ae.RSS_14,at.BarcodeFormat.RSS_14],[ae.RSS_EXPANDED,at.BarcodeFormat.RSS_EXPANDED],[ae.UPC_A,at.BarcodeFormat.UPC_A],[ae.UPC_E,at.BarcodeFormat.UPC_E],[ae.UPC_EAN_EXTENSION,at.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!m6)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=s;var o=this.createZXingFormats(e),c=new Map;c.set(at.DecodeHintType.POSSIBLE_FORMATS,o),c.set(at.DecodeHintType.TRY_HARDER,!1),this.hints=c}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(s,o){try{s(n.decode(e))}catch(c){o(c)}})},t.prototype.decode=function(e){var n=new at.MultiFormatReader(this.verbose,this.hints),s=new at.HTMLCanvasElementLuminanceSource(e),o=new at.BinaryBitmap(new at.HybridBinarizer(s)),c=n.decode(o);return{text:c.text,format:mm.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,s,o){e.set(n,s)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],s=0,o=e;s<o.length;s++){var c=o[s];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),p6=function(t,e,n,s){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function x(E){try{y(s.next(E))}catch(C){d(C)}}function w(E){try{y(s.throw(E))}catch(C){d(C)}}function y(E){E.done?c(E.value):o(E.value).then(x,w)}y((s=s.apply(t,e||[])).next())})},w6=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,d;return d={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function x(y){return function(E){return w([y,E])}}function w(y){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(s=1,o&&(c=y[0]&2?o.return:y[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,y[1])).done)return c;switch(o=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,o=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(E){y=[6,E],o=0}finally{s=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Uf=function(){function t(e,n,s){if(this.formatMap=new Map([[ae.QR_CODE,"qr_code"],[ae.AZTEC,"aztec"],[ae.CODABAR,"codabar"],[ae.CODE_39,"code_39"],[ae.CODE_93,"code_93"],[ae.CODE_128,"code_128"],[ae.DATA_MATRIX,"data_matrix"],[ae.ITF,"itf"],[ae.EAN_13,"ean_13"],[ae.EAN_8,"ean_8"],[ae.PDF_417,"pdf417"],[ae.UPC_A,"upc_a"],[ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=s;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return p6(this,void 0,void 0,function(){var n,s;return w6(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(n),[2,{text:s.rawValue,format:mm.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,s=0,o=0,c=e;o<c.length;o++){var d=c[o],x=d.boundingBox.width*d.boundingBox.height;x>s&&(s=x,n=d)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],s=0,o=e;s<o.length;s++){var c=o[s];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,s,o){e.set(n,s)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Pf=function(t,e,n,s){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function x(E){try{y(s.next(E))}catch(C){d(C)}}function w(E){try{y(s.throw(E))}catch(C){d(C)}}function y(E){E.done?c(E.value):o(E.value).then(x,w)}y((s=s.apply(t,e||[])).next())})},zf=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,d;return d={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function x(y){return function(E){return w([y,E])}}function w(y){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(s=1,o&&(c=y[0]&2?o.return:y[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,y[1])).done)return c;switch(o=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,o=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(E){y=[6,E],o=0}finally{s=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},y6=function(){function t(e,n,s,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,n&&Uf.isSupported()?(this.primaryDecoder=new Uf(e,s,o),this.secondaryDecoder=new Lf(e,s,o)):this.primaryDecoder=new Lf(e,s,o)}return t.prototype.decodeAsync=function(e){return Pf(this,void 0,void 0,function(){var n;return zf(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Pf(this,void 0,void 0,function(){var n,s;return zf(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(s=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,s=this.executionResults;n<s.length;n++){var o=s[n];e+=o}var c=e/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),h1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Cc=function(t,e,n,s){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function x(E){try{y(s.next(E))}catch(C){d(C)}}function w(E){try{y(s.throw(E))}catch(C){d(C)}}function y(E){E.done?c(E.value):o(E.value).then(x,w)}y((s=s.apply(t,e||[])).next())})},Sc=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,d;return d={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function x(y){return function(E){return w([y,E])}}function w(y){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(s=1,o&&(c=y[0]&2?o.return:y[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,y[1])).done)return c;switch(o=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,o=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(E){y=[6,E],o=0}finally{s=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},wm=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var s={advanced:[n]};return this.track.applyConstraints(s)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),b6=function(t){h1(e,t);function e(n,s){return t.call(this,n,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var s={};s[this.name]=n;var o={advanced:[s]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),s=n[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(wm),v6=function(t){h1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(b6),A6=function(t){h1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(wm),E6=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new v6(this.track)},t.prototype.torchFeature=function(){return new A6(this.track)},t}(),_6=function(){function t(e,n,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var s=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,s,o){return Cc(this,void 0,void 0,function(){var c,d;return Sc(this,function(x){switch(x.label){case 0:return c=new t(e,n,o),s.aspectRatio?(d={aspectRatio:s.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:x.sent(),x.label=2;case 2:return c.setupSurface(),[2,c]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,s=function(){setTimeout(e,200),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Cc(this,void 0,void 0,function(){return Sc(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,s){var o=e.mediaStream.getVideoTracks(),c=o.length,d=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++d,d>=c&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new E6(this.getFirstTrackOrFail())},t}(),C6=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,s){return Cc(this,void 0,void 0,function(){return Sc(this,function(o){return[2,_6.create(e,this.mediaStream,n,s)]})})},t.create=function(e){return Cc(this,void 0,void 0,function(){var n,s;return Sc(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return s=o.sent(),[2,new t(s)]}})})},t}(),Ff=function(t,e,n,s){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function x(E){try{y(s.next(E))}catch(C){d(C)}}function w(E){try{y(s.throw(E))}catch(C){d(C)}}function y(E){E.done?c(E.value):o(E.value).then(x,w)}y((s=s.apply(t,e||[])).next())})},Hf=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,d;return d={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function x(y){return function(E){return w([y,E])}}function w(y){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(s=1,o&&(c=y[0]&2?o.return:y[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,y[1])).done)return c;switch(o=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,o=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(E){y=[6,E],o=0}finally{s=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},S6=function(){function t(){}return t.failIfNotSupported=function(){return Ff(this,void 0,void 0,function(){return Hf(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Ff(this,void 0,void 0,function(){return Hf(this,function(n){return[2,C6.create(e)]})})},t}(),T6=function(t,e,n,s){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function x(E){try{y(s.next(E))}catch(C){d(C)}}function w(E){try{y(s.throw(E))}catch(C){d(C)}}function y(E){E.done?c(E.value):o(E.value).then(x,w)}y((s=s.apply(t,e||[])).next())})},O6=function(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,d;return d={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function x(y){return function(E){return w([y,E])}}function w(y){if(s)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(s=1,o&&(c=y[0]&2?o.return:y[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,y[1])).done)return c;switch(o=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,o=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(E){y=[6,E],o=0}finally{s=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},R6=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ks.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ks.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return T6(this,void 0,void 0,function(){var e,n,s,o,c,d,x;return O6(this,function(w){switch(w.label){case 0:return e=function(y){for(var E=y.getVideoTracks(),C=0,T=E;C<T.length;C++){var R=T[C];R.enabled=!1,R.stop(),y.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=w.sent(),o=[],c=0,d=s;c<d.length;c++)x=d[c],x.kind==="videoinput"&&o.push({id:x.deviceId,label:x.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var s=function(c){for(var d=[],x=0,w=c;x<w.length;x++){var y=w[x];y.kind==="video"&&d.push({id:y.id,label:y.label})}e(d)},o=MediaStreamTrack;o.getSources(s)})},t}(),yt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(yt||(yt={}));var I6=function(){function t(){this.state=yt.NOT_STARTED,this.onGoingTransactionNewState=yt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===yt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=yt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===yt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=yt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==yt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case yt.UNKNOWN:throw"Transition from unknown is not allowed";case yt.NOT_STARTED:this.failIfNewStateIs(e,[yt.PAUSED]);break;case yt.SCANNING:break;case yt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var s=0,o=n;s<o.length;s++){var c=o[s];if(e===c)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),D6=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===yt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==yt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===yt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===yt.PAUSED},t}(),N6=function(){function t(){}return t.create=function(){return new D6(new I6)},t}(),M6=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Sn=function(t){M6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(d6),B6=function(){function t(e,n){this.logger=n,this.fps=Sn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Sn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?pm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Bi(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),k6=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof n=="boolean"?this.verbose=n===!0:n&&(s=n,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new g6(this.verbose),this.qrcode=new y6(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=N6.create()}return t.prototype.start=function(e,n,s,o){var c=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;o?d=o:d=this.verbose?this.logger.log:function(){};var x=B6.create(n,this.logger);this.clearElement();var w=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=w,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:Sn.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var C=this,T=this.stateManagerProxy.startTransition(yt.SCANNING);return new Promise(function(R,k){var L=y?x.videoConstraints:C.createVideoConstraints(e);if(!L){T.cancel(),k("videoConstraints should be defined");return}var P={};(!y||x.aspectRatio)&&(P.aspectRatio=x.aspectRatio);var D={onRenderSurfaceReady:function(_,O){C.setupUi(_,O,x),C.isScanning=!0,C.foreverScan(x,s,d)}};S6.failIfNotSupported().then(function(_){_.create(L).then(function(O){return O.render(c.element,P,D).then(function(M){C.renderedCamera=M,T.execute(),R(null)}).catch(function(M){T.cancel(),k(M)})}).catch(function(O){T.cancel(),k(Ks.errorGettingUserMedia(O))})}).catch(function(_){T.cancel(),k(Ks.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(yt.PAUSED),this.showPausedState(),(Bi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(yt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(yt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var c=document.getElementById(Sn.SHADED_REGION_ELEMENT_ID);c&&e.element.removeChild(c)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),s(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(s){return s.decodedText})},t.prototype.scanFileV2=function(e,n){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Bi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,c){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var d=new Image;d.onload=function(){var x=d.width,w=d.height,y=document.getElementById(s.elementId),E=y.clientWidth?y.clientWidth:Sn.DEFAULT_WIDTH,C=Math.max(y.clientHeight?y.clientHeight:w,Sn.FILE_SCAN_MIN_HEIGHT),T=s.computeCanvasDrawConfig(x,w,E,C);if(n){var R=s.createCanvasElement(E,C,"qr-canvas-visible");R.style.display="inline-block",y.appendChild(R);var k=R.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=E,k.canvas.height=C,k.drawImage(d,0,0,x,w,T.x,T.y,T.width,T.height)}var L=Sn.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(d.width,T.width),D=Math.max(d.height,T.height),_=P+2*L,O=D+2*L,M=s.createCanvasElement(_,O);y.appendChild(M);var W=M.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=_,W.canvas.height=O,W.drawImage(d,0,0,x,w,L,L,P,D);try{s.qrcode.decodeRobustlyAsync(M).then(function(H){o(jf.createFromQrcodeResult(H))}).catch(c)}catch(H){c("QR code parse error, error = ".concat(H))}},d.onerror=c,d.onabort=c,d.onstalled=c,d.onsuspend=c,d.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return R6.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!pm.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[ae.QR_CODE,ae.AZTEC,ae.CODABAR,ae.CODE_39,ae.CODE_93,ae.CODE_128,ae.DATA_MATRIX,ae.MAXICODE,ae.ITF,ae.EAN_13,ae.EAN_8,ae.PDF_417,ae.RSS_14,ae.RSS_EXPANDED,ae.UPC_A,ae.UPC_E,ae.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],o=0,c=e.formatsToSupport;o<c.length;o++){var d=c[o];h6(d)?s.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Bi(e))return!0;if(!Bi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Bi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Bi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,s){var o=this,c=s.qrbox;this.validateQrboxConfig(c);var d=this.toQrdimensions(e,n,c),x=function(y){if(y<Sn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Sn.MIN_QR_BOX_SIZE,"px.")},w=function(y){return y>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=e),y};x(d.width),x(d.height),d.width=w(d.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return s},t.prototype.setupUi=function(e,n,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,s);var o=Bi(s.qrbox)?{width:e,height:n}:s.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,n,o);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=s.isShadedBoxEnabled()&&c.height<=n,x={x:0,y:0,width:e,height:n},w=d?this.getShadedRegionBounds(e,n,c):x,y=this.createCanvasElement(w.width,w.height),E={willReadFrequently:!0},C=y.getContext("2d",E);C.canvas.width=w.width,C.canvas.height=w.height,this.element.append(y),d&&this.possiblyInsertShadingElement(this.element,e,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=C,this.canvasElement=y},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ks.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,jf.createFromQrcodeResult(o)),s.possiblyUpdateShaders(!0),!0}).catch(function(o){s.possiblyUpdateShaders(!1);var c=Ks.codeParseError(o);return n(c,f6.createFrom(c)),!1})},t.prototype.foreverScan=function(e,n,s){var o=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),d=c.videoWidth/c.clientWidth,x=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*d,y=this.qrRegion.height*x,E=this.qrRegion.x*d,C=this.qrRegion.y*x;this.context.drawImage(c,E,C,w,y,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,s)},o.getTimeoutFps(e.fps))};this.scanContext(n,s).then(function(R){!R&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,s).finally(function(){T()})):T()}).catch(function(R){o.logger.logError("Error happend while scanning context",R),T()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",s="deviceId",o={user:!0,environment:!0},c="exact",d=function(k){if(k in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(k,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var w=Object.keys(e)[0];if(w!==n&&w!==s)throw"Only '".concat(n,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(w===n){var y=e.facingMode;if(typeof y=="string"){if(d(y))return{facingMode:y}}else if(typeof y=="object")if(c in y){if(d(y["".concat(c)]))return{facingMode:{exact:y["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var E=typeof y;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(c in C)return{deviceId:{exact:C["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var T=typeof C;throw"Invalid type of 'deviceId' = ".concat(T)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},t.prototype.computeCanvasDrawConfig=function(e,n,s,o){if(e<=s&&n<=o){var c=(s-e)/2,d=(o-n)/2;return{x:c,y:d,width:e,height:n}}else{var x=e,w=n;return e>s&&(n=s/e*n,e=s),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(w)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,s,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Sn.BORDER_SHADER_MATCH_COLOR:Sn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,s){var o=e,c=n,d=document.createElement("canvas");return d.style.width="".concat(o,"px"),d.style.height="".concat(c,"px"),d.style.display="none",d.id=Bi(s)?"qr-canvas":s,d},t.prototype.getShadedRegionBounds=function(e,n,s){if(s.width>e||s.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(n-s.height)/2,width:s.width,height:s.height}},t.prototype.possiblyInsertShadingElement=function(e,n,s,o){if(!(n-o.width<1||s-o.height<1)){var c=document.createElement("div");c.style.position="absolute";var d=(n-o.width)/2,x=(s-o.height)/2;if(c.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(Sn.SHADED_REGION_ELEMENT_ID),n-o.width<11||s-o.height<11)this.hasBorderShaders=!1;else{var w=5,y=40;this.insertShaderBorders(c,y,w,-w,null,0,!0),this.insertShaderBorders(c,y,w,-w,null,0,!1),this.insertShaderBorders(c,y,w,null,-w,0,!0),this.insertShaderBorders(c,y,w,null,-w,0,!1),this.insertShaderBorders(c,w,y+w,-w,null,-w,!0),this.insertShaderBorders(c,w,y+w,null,-w,-w,!0),this.insertShaderBorders(c,w,y+w,-w,null,-w,!1),this.insertShaderBorders(c,w,y+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(c)}},t.prototype.insertShaderBorders=function(e,n,s,o,c,d,x){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Sn.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(n,"px"),w.style.height="".concat(s,"px"),o!==null&&(w.style.top="".concat(o,"px")),c!==null&&(w.style.bottom="".concat(c,"px")),x?w.style.left="".concat(d,"px"):w.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),Vf;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Vf||(Vf={}));const j6=({onClose:t})=>{const e=jo(),[n,s]=ie.useState(!1),[o,c]=ie.useState(""),d=ie.useRef(null),x="qr-reader";ie.useEffect(()=>(w(),()=>{y()}),[]);const w=async()=>{try{s(!0),c("");const R=new k6(x);d.current=R,await R.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},E,C)}catch(R){console.error("Error starting scanner:",R),c("Unable to access camera. Please check permissions."),s(!1)}},y=async()=>{if(d.current)try{await d.current.stop(),d.current.clear()}catch(R){console.error("Error stopping scanner:",R)}},E=R=>{console.log("QR Code detected:",R);let k="";if(R.startsWith("artifact:"))k=R.replace("artifact:","");else if(R.includes("/artifact/")){const L=R.match(/\/artifact\/(\d+)/);L&&(k=L[1])}else/^\d+$/.test(R)&&(k=R);k?(y(),t(),e.push("/artifact/".concat(k))):c("Invalid QR code. Please scan a museum artifact QR code.")},C=R=>{},T=async()=>{await y(),t()};return p.jsx("div",{className:"qr-scanner-overlay",children:p.jsxs("div",{className:"qr-scanner-container",children:[p.jsxs("div",{className:"qr-scanner-header",children:[p.jsx("h2",{children:"Scan Artifact QR Code"}),p.jsx(Ct,{fill:"clear",onClick:T,children:p.jsx(se,{icon:Iy})})]}),p.jsx("div",{id:x,className:"qr-reader"}),o&&p.jsx("div",{className:"qr-scanner-error",children:p.jsx(la,{color:"danger",children:p.jsx("p",{children:o})})}),p.jsxs("div",{className:"qr-scanner-instructions",children:[p.jsx(se,{icon:gm,className:"scan-icon"}),p.jsx("p",{children:"Point your camera at the QR code"}),p.jsx("p",{className:"small-text",children:"Make sure the QR code is well lit and centered"})]}),p.jsx(Ct,{expand:"block",color:"light",onClick:T,children:"Cancel"})]})})},L6=({src:t,alt:e,className:n,style:s,onClick:o})=>{const[c,d]=ie.useState(!1),[x,w]=ie.useState(!1),y=ie.useRef(null);return ie.useEffect(()=>{if(!y.current)return;const E=new IntersectionObserver(C=>{C.forEach(T=>{T.isIntersecting&&(w(!0),E.disconnect())})},{rootMargin:"50px"});return E.observe(y.current),()=>{E.disconnect()}},[]),p.jsxs("div",{ref:y,className:n,style:{...s,position:"relative",overflow:"hidden",backgroundColor:"#f0f0f0"},onClick:o,children:[!c&&p.jsx("div",{className:"skeleton skeleton-image",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),x&&p.jsx("img",{src:t,alt:e,loading:"lazy",onLoad:()=>d(!0),style:{width:"100%",height:"100%",objectFit:"cover",opacity:c?1:0,transition:"opacity 0.3s ease-in-out"}})]})},ym=()=>{const[t,e]=ie.useState([]);return ie.useEffect(()=>{const o=localStorage.getItem("favorites");if(o)try{e(JSON.parse(o))}catch(c){console.error("Error loading favorites:",c)}},[]),{favorites:t,toggleFavorite:o=>{e(c=>{const d=c.includes(o)?c.filter(x=>x!==o):[...c,o];return localStorage.setItem("favorites",JSON.stringify(d)),d})},isFavorite:o=>t.includes(o)}},U6=async()=>{if(!Gc())return console.warn("Supabase is not configured. Using fallback data."),[];try{const{data:t,error:e}=await Et.from("artifacts").select("*").order("created_at",{ascending:!1});return e?(console.error("Error fetching artifacts:",e),[]):t||[]}catch(t){return console.error("Error fetching artifacts:",t),[]}},P6=async t=>{if(!Gc())return console.warn("Supabase is not configured."),null;try{const{data:e,error:n}=await Et.from("artifacts").select("*").eq("id",t).single();return n?(console.error("Error fetching artifact:",n),null):e}catch(e){return console.error("Error fetching artifact:",e),null}},z6=async()=>{if(!Gc())return console.warn("Supabase is not configured. Using fallback data."),[];try{const{data:t,error:e}=await Et.from("exhibits_3d").select("*").order("created_at",{ascending:!0});return e?(console.error("Error fetching 3D exhibits:",e),[]):!t||t.length===0?(console.warn("No 3D exhibits in database, using fallback data"),[{id:"fallback-1",name_en:"Ancient Globe",name_it:"Globo Antico",name_es:"Globo Antiguo",name_fr:"Globe Ancien",description_en:"A spherical artifact",description_it:"Un artefatto sferico",description_es:"Un artefacto esfrico",description_fr:"Un artefact sphrique",model_type:"primitive",model_data:{shape:"sphere",color:"#8B7355",size:2}},{id:"fallback-2",name_en:"Stone Cube",name_it:"Cubo di Pietra",name_es:"Cubo de Piedra",name_fr:"Cube de Pierre",description_en:"Carved stone cube",description_it:"Cubo di pietra scolpito",description_es:"Cubo de piedra tallado",description_fr:"Cube de pierre sculpt",model_type:"primitive",model_data:{shape:"box",color:"#696969",size:2}}]):t||[]}catch(t){return console.error("Error fetching 3D exhibits:",t),[]}},F6=async()=>{if(!Gc())return console.warn("Supabase is not configured. Using fallback data."),[];try{const{data:t,error:e}=await Et.from("quiz_questions").select("*").eq("is_active",!0).order("order_index",{ascending:!0});return e?(console.error("Error fetching quiz questions:",e),[]):t||[]}catch(t){return console.error("Error fetching quiz questions:",t),[]}},H6=()=>{const t=jo(),{t:e,i18n:n}=di(),[s,o]=ie.useState(!1),[c,d]=ie.useState(""),[x,w]=ie.useState("all"),{toggleFavorite:y,isFavorite:E}=ym(),[C,T]=ie.useState([]),[R,k]=ie.useState(!0),[L,P]=ie.useState(null),D=n.language||"en",_=async()=>{k(!0),P(null);try{const H=await U6();T(H)}catch(H){console.error("Error loading artifacts:",H),P("Failed to load artifacts")}finally{k(!1)}};ie.useEffect(()=>{_()},[]);const O=async H=>{await _(),H.detail.complete()},W=C.map(H=>({id:H.id,title:H["name_".concat(D)]||H.name_en,description:H["description_".concat(D)]||H.description_en,type:H.type,src:H.image_url})).filter(H=>{const U=H.title.toLowerCase().includes(c.toLowerCase())||H.description.toLowerCase().includes(c.toLowerCase()),Z=x==="all"||x==="images"&&H.type==="image"||x==="videos"&&H.type==="video"||x==="favorites"&&E(H.id);return U&&Z});return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(qi,{})}),p.jsx(ln,{children:e("museumGallery")})]})}),p.jsxs(vn,{fullscreen:!0,children:[p.jsx(Jm,{slot:"fixed",onIonRefresh:O,children:p.jsx($m,{})}),p.jsx(an,{collapse:"condense",children:p.jsx(on,{children:p.jsx(ln,{size:"large",children:"Gallery"})})}),p.jsx("div",{style:{padding:"16px 16px 0 16px"},children:p.jsx(ep,{value:c,onIonInput:H=>d(H.detail.value),placeholder:e("searchArtifacts"),animated:!0})}),p.jsx("div",{style:{padding:"0 16px 16px 16px"},children:p.jsxs(tp,{value:x,onIonChange:H=>w(H.detail.value),children:[p.jsx(cl,{value:"all",children:p.jsx(xe,{children:e("all")})}),p.jsx(cl,{value:"favorites",children:p.jsx(xe,{children:e("favorites")})}),p.jsx(cl,{value:"images",children:p.jsx(xe,{children:e("images")})}),p.jsx(cl,{value:"videos",children:p.jsx(xe,{children:e("videos")})})]})}),R&&p.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:p.jsx(ca,{name:"crescent"})}),L&&p.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--ion-color-danger)"},children:[p.jsx("p",{children:L}),p.jsx(Ct,{onClick:_,children:e("retry")||"Retry"})]}),!R&&!L&&p.jsx(np,{children:p.jsx(ip,{children:W.length===0?p.jsx(M1,{size:"12",children:p.jsx("div",{style:{textAlign:"center",padding:"40px 20px"},children:p.jsx("p",{children:e("noArtifactsFound")})})}):W.map(H=>p.jsx(M1,{size:"12",sizeMd:"6",children:p.jsxs(He,{className:"gallery-card",children:[p.jsx(nt,{children:p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx(it,{onClick:()=>t.push("/tabs/artifact/".concat(H.id)),style:{cursor:"pointer",flex:1},children:H.title}),p.jsx(Ct,{fill:"clear",onClick:U=>{U.stopPropagation(),y(H.id)},children:p.jsx(se,{icon:E(H.id)?hm:u1,color:E(H.id)?"danger":"medium"})})]})}),p.jsxs(Ve,{children:[H.type==="image"?p.jsx(L6,{src:H.src,alt:H.title,className:"gallery-media",onClick:()=>t.push("/tabs/artifact/".concat(H.id))}):p.jsx("div",{onClick:()=>t.push("/tabs/artifact/".concat(H.id)),children:p.jsxs("video",{className:"gallery-media",controls:!0,playsInline:!0,children:[p.jsx("source",{src:H.src,type:"video/mp4"}),"Your browser does not support the video tag."]})}),p.jsx("p",{style:{marginTop:"12px",cursor:"pointer"},onClick:()=>t.push("/tabs/artifact/".concat(H.id)),children:H.description})]})]})},H.id))})}),p.jsx(rp,{vertical:"bottom",horizontal:"end",slot:"fixed",children:p.jsx(sp,{onClick:()=>o(!0),children:p.jsx(se,{icon:$y})})}),s&&p.jsx(j6,{onClose:()=>o(!1)})]})]})};let nn=null,Gf=!1;const V6=()=>{const{t,i18n:e}=di(),n=ie.useRef(null),[s,o]=ie.useState(""),[c,d]=ie.useState(!0),[x,w]=ie.useState([]),[y,E]=ie.useState(!0),C=ie.useRef(null),T=ie.useRef(null),R=e.language||"en";ie.useEffect(()=>{(async()=>{E(!0);try{const _=await z6();w(_),_.length>0&&!s&&o(_[0].id)}catch(_){console.error("Error loading exhibits:",_)}finally{E(!1)}})()},[]);const k=async()=>(nn||(d(!0),nn=await B1(()=>import("./babylon-vendor-BzM3sUAk.js").then(D=>D.i),__vite__mapDeps([0,1,2])),Gf||(await B1(()=>import("./babylon-vendor-BzM3sUAk.js").then(D=>D.d),__vite__mapDeps([0,1,2])),Gf=!0),d(!1)),nn);ie.useEffect(()=>{if(!n.current||y)return;(async()=>{const _=await k();if(!n.current)return;const O=new _.Engine(n.current,!0,{preserveDrawingBuffer:!0,stencil:!0,adaptToDeviceRatio:!0});C.current=O,O.setHardwareScalingLevel(1/window.devicePixelRatio);const M=new _.Scene(O);T.current=M,M.clearColor=new _.Color4(.1,.1,.15,1);const W=new _.ArcRotateCamera("camera",Math.PI/2,Math.PI/2.5,4,_.Vector3.Zero(),M);W.attachControl(n.current,!0),W.lowerRadiusLimit=2,W.upperRadiusLimit=10;const H=new _.HemisphericLight("light",new _.Vector3(0,1,0),M);H.intensity=.7;const U=new _.DirectionalLight("dirLight",new _.Vector3(-1,-2,-1),M);U.intensity=.5,P(s,M),O.runRenderLoop(()=>{M.render()}),setTimeout(()=>{O.resize()},100);const Z=()=>{O.resize()};return window.addEventListener("resize",Z),()=>{window.removeEventListener("resize",Z),M.dispose(),O.dispose()}})()},[y]),ie.useEffect(()=>{var D,_;if(T.current&&s){T.current.meshes.forEach(M=>{M.name!=="camera"&&M.dispose()});const O=x.find(M=>M.id===s);O&&(O.model_type==="gltf"&&((D=O.model_data)!=null&&D.url)?L(O.model_data.url,T.current):O.model_type==="primitive"&&((_=O.model_data)!=null&&_.shape)&&P(O.model_data.shape,T.current))}},[s,x]);const L=async(D,_)=>{if(nn)try{const O=await nn.SceneLoader.ImportMeshAsync("","",D,_);if(O.meshes.length>0){const M=O.meshes[0],W=M.getHierarchyBoundingVectors(),H=W.max.subtract(W.min),Z=2/Math.max(H.x,H.y,H.z);M.scaling=new nn.Vector3(Z,Z,Z),M.position=nn.Vector3.Zero(),_.registerBeforeRender(()=>{M.rotation.y+=.005})}}catch(O){console.error("Error loading model:",O),P("sphere",_)}},P=(D,_)=>{if(!nn)return;let O;switch(D){case"sphere":O=nn.MeshBuilder.CreateSphere("sphere",{diameter:2,segments:32},_);break;case"box":O=nn.MeshBuilder.CreateBox("box",{size:2},_);break;case"cylinder":O=nn.MeshBuilder.CreateCylinder("cylinder",{height:3,diameter:1},_);break;default:O=nn.MeshBuilder.CreateSphere("sphere",{diameter:2},_)}const M=new nn.StandardMaterial("material",_);return M.diffuseColor=new nn.Color3(.8,.7,.5),M.specularColor=new nn.Color3(.2,.2,.2),M.emissiveColor=new nn.Color3(.1,.1,.1),O.material=M,_.registerBeforeRender(()=>{O.rotation.y+=.005}),O};return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(qi,{})}),p.jsx(ln,{children:t("exhibits3d")})]})}),p.jsxs(vn,{fullscreen:!0,children:[p.jsx(an,{collapse:"condense",children:p.jsx(on,{children:p.jsx(ln,{size:"large",children:"3D Exhibits"})})}),p.jsx("div",{className:"exhibits-container",children:y?p.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:p.jsx(ca,{name:"crescent"})}):p.jsxs(p.Fragment,{children:[p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("interactive3dViewer")})}),p.jsxs(Ve,{children:[c&&p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:p.jsx(ca,{name:"crescent"})}),p.jsx("canvas",{ref:n,className:"babylon-canvas",style:{width:"100%",height:"400px",borderRadius:"8px",touchAction:"none",display:c?"none":"block"}}),p.jsx("p",{style:{marginTop:"12px",textAlign:"center"},children:t("useMouseToRotate")||"Use mouse/touch to rotate and zoom"})]})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("selectExhibit")})}),p.jsx(Ve,{children:x.length===0?p.jsx("p",{style:{textAlign:"center",padding:"20px"},children:t("noExhibitsFound")||"No exhibits found"}):p.jsx(ji,{children:x.map(D=>{const _=D["name_".concat(R)]||D.name_en,O=D["description_".concat(R)]||D.description_en;return p.jsx(De,{button:!0,onClick:()=>o(D.id),color:s===D.id?"primary":"",children:p.jsxs(xe,{children:[p.jsx("h2",{children:_}),p.jsx("p",{children:O})]})},D.id)})})})]})]})})]})]})},G6=()=>{const{t}=di(),e=ie.useRef(null),[n,s]=ie.useState(!1),[o,c]=ie.useState(!1),d=ie.useRef(null),x=ie.useRef(null);ie.useEffect(()=>{if(w(),!e.current)return;const E=new _p(e.current,!0);d.current=E;const C=new Cp(E);x.current=C,C.clearColor=new Sp(.05,.05,.1,1),new Tp("camera",Math.PI/2,Math.PI/2.5,5,j1.Zero(),C).attachControl(e.current,!0);const R=new Op("light",new j1(0,1,0),C);R.intensity=.8;const k=Rp.CreateTorusKnot("artifact",{radius:.5,tube:.2,radialSegments:128,tubularSegments:64},C),L=new Ip("artifactMat",C);L.diffuseColor=new L1(.9,.7,.3),L.specularColor=new L1(1,1,1),L.specularPower=32,k.material=L,C.registerBeforeRender(()=>{k.rotation.y+=.01}),E.runRenderLoop(()=>{C.render()});const P=()=>{E.resize()};return window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),C.dispose(),E.dispose()}},[]);const w=async()=>{if("xr"in navigator)try{const E=await navigator.xr.isSessionSupported("immersive-ar");s(E)}catch(E){console.log("AR not supported:",E),s(!1)}else s(!1)},y=async()=>{if(!x.current||!n){alert("AR is not supported on this device/browser");return}try{const E=await x.current.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar"}});E.baseExperience&&(c(!0),await E.baseExperience.enterXRAsync("immersive-ar","unbounded",E.renderTarget),E.baseExperience.onStateChangedObservable.add(C=>{C===Dp.NOT_IN_XR&&c(!1)}))}catch(E){console.error("Error starting AR session:",E),alert("Could not start AR session. Make sure you are using HTTPS and have camera permissions.")}};return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(qi,{})}),p.jsx(ln,{children:t("arView")})]})}),p.jsxs(vn,{fullscreen:!0,children:[p.jsx(an,{collapse:"condense",children:p.jsx(on,{children:p.jsx(ln,{size:"large",children:"AR View"})})}),p.jsxs("div",{className:"ar-container",children:[p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:"Augmented Reality Viewer"})}),p.jsxs(Ve,{children:[p.jsx("canvas",{ref:e,className:"ar-canvas",style:{width:"100%",height:"400px",borderRadius:"8px",touchAction:"none"}}),p.jsx("div",{style:{marginTop:"16px",textAlign:"center"},children:n?p.jsxs(Ct,{expand:"block",onClick:y,disabled:o,children:[p.jsx(se,{slot:"start",icon:Oy}),o?"AR Session Active":"Start AR Experience"]}):p.jsx(la,{color:"warning",children:p.jsxs("p",{children:[p.jsx(se,{icon:dm})," AR is not supported on this device/browser"]})})})]})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:"AR Requirements"})}),p.jsx(Ve,{children:p.jsxs(ji,{children:[p.jsx(De,{children:p.jsxs(xe,{children:[p.jsx("h3",{children:"HTTPS Required"}),p.jsx("p",{children:"AR features require a secure connection (HTTPS)"})]})}),p.jsx(De,{children:p.jsxs(xe,{children:[p.jsx("h3",{children:"Camera Permission"}),p.jsx("p",{children:"Allow camera access when prompted"})]})}),p.jsx(De,{children:p.jsxs(xe,{children:[p.jsx("h3",{children:"Compatible Device"}),p.jsx("p",{children:"AR works on ARCore (Android) and ARKit (iOS) devices"})]})}),p.jsx(De,{children:p.jsxs(xe,{children:[p.jsx("h3",{children:"Modern Browser"}),p.jsx("p",{children:"Chrome, Safari, or Edge with WebXR support"})]})})]})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:"How to Use AR"})}),p.jsx(Ve,{children:p.jsxs("ol",{children:[p.jsx("li",{children:'Click "Start AR Experience" button'}),p.jsx("li",{children:"Grant camera permissions when prompted"}),p.jsx("li",{children:"Point your camera at a flat surface"}),p.jsx("li",{children:"The 3D artifact will appear in your space"}),p.jsx("li",{children:"Walk around to view from different angles"})]})})]})]})]})]})},q6=()=>{const{t,i18n:e}=di(),[n,s]=ie.useState([]),[o,c]=ie.useState(!0),[d,x]=ie.useState(0),[w,y]=ie.useState(null),[E,C]=ie.useState(0),[T,R]=ie.useState(!1),[k,L]=ie.useState([]),[P,D]=ie.useState(!1),_=e.language||"en";ie.useEffect(()=>{(async()=>{c(!0);try{const Te=await F6();s(Te),L(new Array(Te.length).fill(!1))}catch(Te){console.error("Error loading quiz questions:",Te)}finally{c(!1)}})()},[]);const O=be=>{y(be)},M=()=>{if(w===null)return;w===n[d].correct_answer&&C(E+1);const Te=[...k];Te[d]=!0,L(Te),D(!0)},W=()=>{D(!1),y(null),d<n.length-1?x(d+1):R(!0)},H=()=>{x(0),y(null),C(0),R(!1),L(new Array(n.length).fill(!1)),D(!1)},U=()=>{const be=E/n.length*100;return be===100?{icon:o6,color:"warning",text:t("perfectScore")}:be>=80?{icon:s6,color:"success",text:t("excellent")}:be>=60?{icon:t6,color:"primary",text:t("goodJob")}:{icon:Rf,color:"medium",text:t("keepLearning")}},Z=(d+1)/n.length;if(o)return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(qi,{})}),p.jsx(ln,{children:t("museumQuiz")})]})}),p.jsx(vn,{children:p.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:p.jsx(ca,{name:"crescent"})})})]});if(n.length===0)return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(qi,{})}),p.jsx(ln,{children:t("museumQuiz")})]})}),p.jsx(vn,{children:p.jsx("div",{style:{textAlign:"center",padding:"40px"},children:p.jsx("p",{children:t("noQuestionsFound")||"No quiz questions available"})})})]});const V=n[d],we=V["question_".concat(_)]||V.question_en,je=[V["option1_".concat(_)]||V.option1_en,V["option2_".concat(_)]||V.option2_en,V["option3_".concat(_)]||V.option3_en,V["option4_".concat(_)]||V.option4_en],he=V["explanation_".concat(_)]||V.explanation_en;return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(qi,{})}),p.jsx(ln,{children:t("museumQuiz")})]})}),p.jsx(vn,{fullscreen:!0,children:p.jsx("div",{className:"quiz-container",children:T?p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{style:{textAlign:"center"},children:t("quizComplete")})}),p.jsx(Ve,{children:p.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[p.jsx(se,{icon:U().icon,style:{fontSize:"80px"},color:U().color}),p.jsx("h2",{children:U().text}),p.jsxs("h1",{style:{fontSize:"48px",margin:"20px 0"},children:[E," / ",n.length]}),p.jsxs("p",{style:{fontSize:"18px",color:"var(--ion-color-medium)"},children:[t("youScored")," ",Math.round(E/n.length*100),"%"]}),p.jsxs("div",{style:{marginTop:"30px"},children:[p.jsx("h3",{children:t("yourBadges")}),p.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[E>=3&&p.jsx(du,{color:"primary",style:{padding:"10px 15px",fontSize:"14px"},children:t("scholarBadge")}),E>=4&&p.jsx(du,{color:"success",style:{padding:"10px 15px",fontSize:"14px"},children:t("expertBadge")}),E===5&&p.jsx(du,{color:"warning",style:{padding:"10px 15px",fontSize:"14px"},children:t("masterBadge")})]})]}),p.jsx(Ct,{expand:"block",onClick:H,style:{marginTop:"30px"},children:t("tryAgain")})]})})]}):p.jsxs(p.Fragment,{children:[p.jsx(He,{children:p.jsxs(Ve,{children:[p.jsxs("div",{style:{marginBottom:"8px",display:"flex",justifyContent:"space-between"},children:[p.jsxs("span",{children:[t("question")," ",d+1," ",t("of")," ",n.length]}),p.jsxs("span",{children:[t("score"),": ",E]})]}),p.jsx(ap,{value:Z})]})}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:we})}),p.jsxs(Ve,{children:[p.jsx(op,{value:w,onIonChange:be=>O(be.detail.value),children:je.map((be,Te)=>p.jsxs(De,{lines:"none",children:[p.jsx(lp,{slot:"start",value:Te,disabled:P}),p.jsx(xe,{className:"ion-text-wrap",children:be}),P&&Te===V.correct_answer&&p.jsx(se,{icon:Rf,color:"success",slot:"end"}),P&&Te===w&&Te!==V.correct_answer&&p.jsx(se,{icon:Dy,color:"danger",slot:"end"})]},Te))}),P&&p.jsx("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"var(--ion-color-light)",borderRadius:"8px"},children:p.jsxs("p",{style:{margin:0},children:[p.jsxs("strong",{children:[t("explanation"),":"]})," ",he]})}),p.jsx("div",{style:{marginTop:"20px",display:"flex",gap:"10px"},children:P?p.jsx(Ct,{expand:"block",onClick:W,style:{flex:1},children:d<n.length-1?t("nextQuestion"):t("viewResults")}):p.jsx(Ct,{expand:"block",onClick:M,disabled:w===null,style:{flex:1},children:t("submitAnswer")})})]})]})]})})})]})},X6=({audioUrl:t="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",title:e="Audio Guide"})=>{const n=ie.useRef(null),[s,o]=ie.useState(!1),[c,d]=ie.useState(0),[x,w]=ie.useState(0),[y,E]=ie.useState(1),[C,T]=ie.useState(!1);ie.useEffect(()=>{const _=n.current;if(!_)return;const O=()=>d(_.currentTime),M=()=>w(_.duration),W=()=>o(!1);return _.addEventListener("timeupdate",O),_.addEventListener("loadedmetadata",M),_.addEventListener("ended",W),()=>{_.removeEventListener("timeupdate",O),_.removeEventListener("loadedmetadata",M),_.removeEventListener("ended",W)}},[]);const R=()=>{const _=n.current;_&&(s?_.pause():_.play(),o(!s))},k=_=>{const O=n.current;O&&(O.currentTime=_,d(_))},L=_=>{const O=n.current;O&&(O.volume=_,E(_),T(_===0))},P=()=>{const _=n.current;_&&(C?(_.volume=y||.5,T(!1)):(_.volume=0,T(!0)))},D=_=>{if(isNaN(_))return"0:00";const O=Math.floor(_/60),M=Math.floor(_%60);return"".concat(O,":").concat(M.toString().padStart(2,"0"))};return p.jsxs(He,{className:"audio-guide-card",children:[p.jsx(nt,{children:p.jsxs(it,{children:[" ",e]})}),p.jsxs(Ve,{children:[p.jsx("audio",{ref:n,src:t,preload:"metadata"}),p.jsxs("div",{className:"audio-controls",children:[p.jsx(Ct,{fill:"solid",size:"large",onClick:R,className:"play-button",children:p.jsx(se,{icon:s?Zy:Jy})}),p.jsxs("div",{className:"audio-progress",children:[p.jsxs("div",{className:"time-display",children:[p.jsx(la,{children:D(c)}),p.jsx(la,{children:D(x)})]}),p.jsx(k1,{min:0,max:x||100,value:c,onIonInput:_=>k(_.detail.value),className:"progress-bar"})]}),p.jsxs("div",{className:"volume-control",children:[p.jsx(Ct,{fill:"clear",onClick:P,children:p.jsx(se,{icon:C?c6:l6})}),p.jsx(k1,{min:0,max:1,step:.1,value:C?0:y,onIonInput:_=>L(_.detail.value),className:"volume-slider"})]})]}),p.jsx("div",{className:"audio-info",children:p.jsx("p",{children:p.jsx("small",{children:"Listen to the audio guide to learn more about this artifact's history, significance, and the story behind its discovery."})})})]})]})},W6=()=>{const[t,e]=ie.useState(!1);ie.useEffect(()=>{const o=localStorage.getItem("theme"),c=window.matchMedia("(prefers-color-scheme: dark)").matches,d=o==="dark"||!o&&c;e(d),n(d);const x=window.matchMedia("(prefers-color-scheme: dark)"),w=y=>{localStorage.getItem("theme")||(e(y.matches),n(y.matches))};return x.addEventListener("change",w),()=>x.removeEventListener("change",w)},[]);const n=o=>{document.body.classList.toggle("dark",o)},s=()=>{const o=!t;e(o),n(o),localStorage.setItem("theme",o?"dark":"light")};return p.jsx(Ct,{fill:"clear",onClick:s,title:t?"Switch to light mode":"Switch to dark mode",children:p.jsx(se,{icon:t?a6:Yy})})},Y6=()=>{const{i18n:t}=di(),e=n=>{t.changeLanguage(n),localStorage.setItem("language",n)};return p.jsxs(qf,{value:t.language,onIonChange:n=>e(n.detail.value),interface:"popover",style:{minWidth:"80px"},children:[p.jsx(pr,{value:"en",children:" EN"}),p.jsx(pr,{value:"it",children:" IT"}),p.jsx(pr,{value:"es",children:" ES"}),p.jsx(pr,{value:"fr",children:" FR"})]})},Q6=()=>{const{id:t}=bp(),{t:e,i18n:n}=di(),s=jo(),{toggleFavorite:o,isFavorite:c}=ym(),[d,x]=ie.useState(null),[w,y]=ie.useState(!0),[E,C]=ie.useState(null),T=n.language||"en";if(ie.useEffect(()=>{(async()=>{if(t){y(!0),C(null);try{const P=await P6(t);P?x(P):C("Artifact not found")}catch(P){console.error("Error loading artifact:",P),C("Failed to load artifact")}finally{y(!1)}}})()},[t]),w)return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(Js,{defaultHref:"/gallery"})}),p.jsx(ln,{children:e("artifactDetails")})]})}),p.jsx(vn,{children:p.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:p.jsx(ca,{name:"crescent"})})})]});if(E||!d)return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(Js,{defaultHref:"/gallery"})}),p.jsx(ln,{children:"Artifact Not Found"})]})}),p.jsx(vn,{children:p.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[p.jsx("p",{children:E||"Sorry, this artifact could not be found."}),p.jsx(Ct,{onClick:()=>s.push("/gallery"),children:e("backToGallery")||"Back to Gallery"})]})})]});const R=d["name_".concat(T)]||d.name_en,k=d["description_".concat(T)]||d.description_en;return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsx(Nn,{slot:"start",children:p.jsx(Js,{defaultHref:"/gallery"})}),p.jsx(ln,{children:e("artifactDetails")}),p.jsxs(Nn,{slot:"end",children:[p.jsx(Ct,{onClick:()=>o(d.id),children:p.jsx(se,{icon:c(d.id)?hm:u1,color:c(d.id)?"danger":"medium"})}),p.jsx(Ct,{onClick:async()=>{if(navigator.share)try{await navigator.share({title:R,text:k,url:window.location.href})}catch(L){console.log("Error sharing:",L)}},children:p.jsx(se,{icon:xm})}),p.jsx(Y6,{}),p.jsx(W6,{})]})]})}),p.jsx(vn,{fullscreen:!0,children:p.jsxs("div",{className:"artifact-detail-container",children:[p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:R})}),p.jsx(Ve,{children:d.type==="image"?p.jsx("img",{src:d.image_url,alt:R,className:"artifact-detail-image"}):p.jsxs("video",{controls:!0,className:"artifact-detail-video",children:[p.jsx("source",{src:d.image_url,type:"video/mp4"}),"Your browser does not support the video tag."]})})]}),d.audio_guide_url&&p.jsx(X6,{title:"Audio Guide",audioUrl:d.audio_guide_url}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsxs(it,{children:[p.jsx(se,{icon:dm})," Description"]})}),p.jsx(Ve,{children:p.jsx("p",{className:"detailed-description",children:k})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:"Artifact Information"})}),p.jsx(Ve,{children:p.jsxs("div",{className:"info-section",children:[d.period&&p.jsxs("div",{className:"info-item",children:[p.jsx(se,{icon:Ty,className:"info-icon"}),p.jsxs("div",{children:[p.jsx("strong",{children:"Period:"}),p.jsx("p",{children:d.period})]})]}),d.origin&&p.jsxs("div",{className:"info-item",children:[p.jsx(se,{icon:Hy,className:"info-icon"}),p.jsxs("div",{children:[p.jsx("strong",{children:"Origin:"}),p.jsx("p",{children:d.origin})]})]}),d.material&&p.jsxs("div",{className:"info-item",children:[p.jsx("strong",{children:"Material:"}),p.jsx("p",{children:d.material})]}),d.dimensions&&p.jsxs("div",{className:"info-item",children:[p.jsx("strong",{children:"Dimensions:"}),p.jsx("p",{children:d.dimensions})]}),d.discovered&&p.jsxs("div",{className:"info-item",children:[p.jsx("strong",{children:"Discovered:"}),p.jsx("p",{children:d.discovered})]}),d.condition&&p.jsxs("div",{className:"info-item",children:[p.jsx("strong",{children:"Condition:"}),p.jsx("p",{children:d.condition})]})]})})]})]})})]})},Z6=()=>{const{t}=di();return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsxs(Nn,{slot:"start",children:[p.jsx(qi,{}),p.jsx(Js,{defaultHref:"/gallery"})]}),p.jsx(ln,{children:t("help")})]})}),p.jsx(vn,{fullscreen:!0,className:"help-content",children:p.jsxs("div",{className:"help-container",children:[p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("helpWelcome")})}),p.jsx(Ve,{children:p.jsx("p",{children:t("helpIntro")})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("helpFeatures")})}),p.jsx(Ve,{children:p.jsxs(ji,{children:[p.jsxs(De,{children:[p.jsx(se,{icon:zy,slot:"start",color:"primary"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpGalleryTitle")}),p.jsx("p",{children:t("helpGalleryDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:um,slot:"start",color:"secondary"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("help3DTitle")}),p.jsx("p",{children:t("help3DDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:e6,slot:"start",color:"tertiary"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpQRTitle")}),p.jsx("p",{children:t("helpQRDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:Ry,slot:"start",color:"success"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpARTitle")}),p.jsx("p",{children:t("helpARDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:jy,slot:"start",color:"warning"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpQuizTitle")}),p.jsx("p",{children:t("helpQuizDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:u1,slot:"start",color:"danger"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpFavoritesTitle")}),p.jsx("p",{children:t("helpFavoritesDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:r6,slot:"start",color:"medium"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpSearchTitle")}),p.jsx("p",{children:t("helpSearchDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:xm,slot:"start",color:"primary"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpShareTitle")}),p.jsx("p",{children:t("helpShareDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:fm,slot:"start",color:"secondary"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpLanguageTitle")}),p.jsx("p",{children:t("helpLanguageDesc")})]})]}),p.jsxs(De,{children:[p.jsx(se,{icon:o0,slot:"start",color:"tertiary"}),p.jsxs(xe,{children:[p.jsx("h2",{children:t("helpThemeTitle")}),p.jsx("p",{children:t("helpThemeDesc")})]})]})]})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("helpTips")})}),p.jsx(Ve,{children:p.jsxs("ul",{className:"help-tips-list",children:[p.jsx("li",{children:t("helpTip1")}),p.jsx("li",{children:t("helpTip2")}),p.jsx("li",{children:t("helpTip3")}),p.jsx("li",{children:t("helpTip4")}),p.jsx("li",{children:t("helpTip5")})]})})]})]})})]})},K6=()=>{const{t}=di();return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsxs(Nn,{slot:"start",children:[p.jsx(qi,{}),p.jsx(Js,{defaultHref:"/gallery"})]}),p.jsx(ln,{children:t("about")})]})}),p.jsx(vn,{fullscreen:!0,className:"about-content",children:p.jsxs("div",{className:"about-container",children:[p.jsxs(He,{className:"about-hero",children:[p.jsxs(nt,{children:[p.jsx("div",{className:"about-logo",children:""}),p.jsx(it,{className:"about-title",children:t("aboutAppName")}),p.jsx("p",{className:"about-version",children:t("aboutVersion")})]}),p.jsx(Ve,{children:p.jsx("p",{className:"about-description",children:t("aboutDescription")})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("aboutFeatures")})}),p.jsx(Ve,{children:p.jsxs("div",{className:"features-grid",children:[p.jsxs("div",{className:"feature-item",children:[p.jsx(se,{icon:Ly,color:"primary"}),p.jsx("h3",{children:t("aboutFeature1Title")}),p.jsx("p",{children:t("aboutFeature1Desc")})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx(se,{icon:um,color:"secondary"}),p.jsx("h3",{children:t("aboutFeature2Title")}),p.jsx("p",{children:t("aboutFeature2Desc")})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx(se,{icon:Ky,color:"tertiary"}),p.jsx("h3",{children:t("aboutFeature3Title")}),p.jsx("p",{children:t("aboutFeature3Desc")})]}),p.jsxs("div",{className:"feature-item",children:[p.jsx(se,{icon:Ny,color:"success"}),p.jsx("h3",{children:t("aboutFeature4Title")}),p.jsx("p",{children:t("aboutFeature4Desc")})]})]})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("aboutTechnology")})}),p.jsx(Ve,{children:p.jsxs("div",{className:"tech-stack",children:[p.jsxs(ar,{color:"primary",children:[p.jsx(se,{icon:Wy}),p.jsx(xe,{children:"React 19"})]}),p.jsxs(ar,{color:"primary",children:[p.jsx(se,{icon:Xy}),p.jsx(xe,{children:"Ionic Framework"})]}),p.jsx(ar,{color:"secondary",children:p.jsx(xe,{children:"TypeScript"})}),p.jsx(ar,{color:"secondary",children:p.jsx(xe,{children:"Babylon.js"})}),p.jsx(ar,{color:"tertiary",children:p.jsx(xe,{children:"i18next"})}),p.jsx(ar,{color:"tertiary",children:p.jsx(xe,{children:"Vite"})}),p.jsx(ar,{color:"success",children:p.jsx(xe,{children:"PWA"})}),p.jsx(ar,{color:"success",children:p.jsx(xe,{children:"Supabase"})})]})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("aboutContact")})}),p.jsxs(Ve,{children:[p.jsx("p",{children:t("aboutContactDesc")}),p.jsxs("div",{className:"contact-info",children:[p.jsxs("p",{children:[p.jsxs("strong",{children:[t("aboutDeveloper"),":"]})," Museum App Team"]}),p.jsxs("p",{children:[p.jsxs("strong",{children:[t("aboutWebsite"),":"]})," https://gfq40.github.io/museum-app/"]}),p.jsxs("p",{children:[p.jsxs("strong",{children:[t("aboutEmail"),":"]})," info@museumapp.example"]})]})]})]}),p.jsx(He,{children:p.jsxs(Ve,{className:"about-footer",children:[p.jsx("p",{children:t("aboutCopyright")}),p.jsx("p",{children:t("aboutLicense")})]})})]})})]})},J6=()=>{const{t}=di(),e=n=>{window.open(n,"_blank")};return p.jsxs(Mn,{children:[p.jsx(an,{children:p.jsxs(on,{children:[p.jsxs(Nn,{slot:"start",children:[p.jsx(qi,{}),p.jsx(Js,{defaultHref:"/gallery"})]}),p.jsx(ln,{children:t("credits")})]})}),p.jsx(vn,{fullscreen:!0,className:"credits-content",children:p.jsxs("div",{className:"credits-container",children:[p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("creditsThankYou")})}),p.jsx(Ve,{children:p.jsx("p",{children:t("creditsIntro")})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsxs(it,{children:[p.jsx(se,{icon:If})," ",t("creditsLibraries")]})}),p.jsx(Ve,{children:p.jsxs(ji,{children:[p.jsxs(De,{button:!0,onClick:()=>e("https://react.dev/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"React"}),p.jsx("p",{children:t("creditsReactDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]}),p.jsxs(De,{button:!0,onClick:()=>e("https://ionicframework.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Ionic Framework"}),p.jsx("p",{children:t("creditsIonicDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]}),p.jsxs(De,{button:!0,onClick:()=>e("https://www.babylonjs.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Babylon.js"}),p.jsx("p",{children:t("creditsBabylonDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]}),p.jsxs(De,{button:!0,onClick:()=>e("https://www.i18next.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"i18next"}),p.jsx("p",{children:t("creditsI18nDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]}),p.jsxs(De,{button:!0,onClick:()=>e("https://vitejs.dev/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Vite"}),p.jsx("p",{children:t("creditsViteDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]}),p.jsxs(De,{button:!0,onClick:()=>e("https://supabase.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Supabase"}),p.jsx("p",{children:t("creditsSupabaseDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]}),p.jsxs(De,{button:!0,onClick:()=>e("https://github.com/mebjas/html5-qrcode"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"html5-qrcode"}),p.jsx("p",{children:t("creditsQRDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]})]})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsxs(it,{children:[p.jsx(se,{icon:Df})," ",t("creditsImages")]})}),p.jsxs(Ve,{children:[p.jsx(ji,{children:p.jsxs(De,{button:!0,onClick:()=>e("https://unsplash.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Unsplash"}),p.jsx("p",{children:t("creditsUnsplashDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]})}),p.jsxs("div",{className:"credits-photographers",children:[p.jsx("p",{children:p.jsxs("strong",{children:[t("creditsPhotographers"),":"]})}),p.jsxs("ul",{children:[p.jsx("li",{children:"Europeana (Ancient Pottery)"}),p.jsx("li",{children:"Birmingham Museums Trust (Historical Artifacts)"}),p.jsx("li",{children:"Europeana (Medieval Manuscript)"}),p.jsx("li",{children:"Europeana (Renaissance Painting)"}),p.jsx("li",{children:"Europeana (Ancient Sculpture)"})]})]})]})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsxs(it,{children:[p.jsx(se,{icon:If})," ",t("credits3DModels")]})}),p.jsx(Ve,{children:p.jsxs(ji,{children:[p.jsxs(De,{button:!0,onClick:()=>e("https://sketchfab.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Sketchfab"}),p.jsx("p",{children:t("creditsSketchfabDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]}),p.jsxs(De,{button:!0,onClick:()=>e("https://www.babylonjs.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Babylon.js Playground"}),p.jsx("p",{children:t("creditsBabylonPlaygroundDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]})]})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsxs(it,{children:[p.jsx(se,{icon:Qy})," ",t("creditsAudio")]})}),p.jsx(Ve,{children:p.jsx(ji,{children:p.jsxs(De,{button:!0,onClick:()=>e("https://www.soundhelix.com/"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"SoundHelix"}),p.jsx("p",{children:t("creditsSoundHelixDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]})})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsxs(it,{children:[p.jsx(se,{icon:Df})," ",t("creditsIcons")]})}),p.jsx(Ve,{children:p.jsx(ji,{children:p.jsxs(De,{button:!0,onClick:()=>e("https://ionic.io/ionicons"),children:[p.jsxs(xe,{children:[p.jsx("h2",{children:"Ionicons"}),p.jsx("p",{children:t("creditsIoniconsDesc")})]}),p.jsx(se,{icon:Gn,slot:"end"})]})})})]}),p.jsxs(He,{children:[p.jsx(nt,{children:p.jsx(it,{children:t("creditsSpecialThanks")})}),p.jsxs(Ve,{children:[p.jsx("p",{children:t("creditsSpecialThanksDesc")}),p.jsxs("ul",{className:"credits-thanks-list",children:[p.jsx("li",{children:t("creditsThanks1")}),p.jsx("li",{children:t("creditsThanks2")}),p.jsx("li",{children:t("creditsThanks3")}),p.jsx("li",{children:t("creditsThanks4")})]})]})]}),p.jsx(He,{children:p.jsx(Ve,{className:"credits-footer",children:p.jsx("p",{children:t("creditsFooter")})})})]})})]})},$6=()=>p.jsxs(cp,{children:[p.jsxs(Xf,{children:[p.jsx(qn,{exact:!0,path:"/tabs/gallery",children:p.jsx(H6,{})}),p.jsx(qn,{exact:!0,path:"/tabs/artifact/:id",children:p.jsx(Q6,{})}),p.jsx(qn,{exact:!0,path:"/tabs/exhibits",children:p.jsx(V6,{})}),p.jsx(qn,{path:"/tabs/ar",children:p.jsx(G6,{})}),p.jsx(qn,{path:"/tabs/quiz",children:p.jsx(q6,{})}),p.jsx(qn,{exact:!0,path:"/tabs/help",children:p.jsx(Z6,{})}),p.jsx(qn,{exact:!0,path:"/tabs/about",children:p.jsx(K6,{})}),p.jsx(qn,{exact:!0,path:"/tabs/credits",children:p.jsx(J6,{})}),p.jsx(qn,{exact:!0,path:"/tabs",children:p.jsx(Wf,{to:"/tabs/gallery"})})]}),p.jsxs(up,{slot:"bottom",children:[p.jsxs(ul,{tab:"gallery",href:"/tabs/gallery",children:[p.jsx(se,{"aria-hidden":"true",icon:Py}),p.jsx(xe,{children:"Gallery"})]}),p.jsxs(ul,{tab:"exhibits",href:"/tabs/exhibits",children:[p.jsx(se,{"aria-hidden":"true",icon:My}),p.jsx(xe,{children:"3D Exhibits"})]}),p.jsxs(ul,{tab:"ar",href:"/tabs/ar",children:[p.jsx(se,{"aria-hidden":"true",icon:gm}),p.jsx(xe,{children:"AR View"})]}),p.jsxs(ul,{tab:"quiz",href:"/tabs/quiz",children:[p.jsx(se,{"aria-hidden":"true",icon:i6}),p.jsx(xe,{children:"Quiz"})]})]})]}),eb=()=>{const[t,e]=ie.useState(navigator.onLine),[n,s]=ie.useState(!1);return ie.useEffect(()=>{const o=()=>{e(!0),s(!0)},c=()=>{e(!1),s(!0)};return window.addEventListener("online",o),window.addEventListener("offline",c),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",c)}},[]),p.jsx(p.Fragment,{children:p.jsx(hp,{isOpen:n,onDidDismiss:()=>s(!1),message:t?" Back online! Content will sync automatically.":" You are offline. Cached content is still available.",duration:3e3,color:t?"success":"warning",position:"top"})})},tb=()=>{const{t,i18n:e}=di(),n=jo(),[s,o]=Yf.useState(document.body.classList.contains("dark")),c=w=>{e.changeLanguage(w)},d=w=>{o(w),document.body.classList.toggle("dark",w),localStorage.setItem("theme",w?"dark":"light")},x=w=>{n.push(w);const y=document.querySelector("ion-menu");y==null||y.close()};return p.jsxs(dp,{contentId:"main-content",type:"overlay",children:[p.jsx(an,{children:p.jsx(on,{color:"primary",children:p.jsx(ln,{children:t("menu")})})}),p.jsx(vn,{children:p.jsxs(ji,{children:[p.jsxs(fu,{children:[p.jsx(se,{icon:fm,slot:"start"}),p.jsx(xe,{children:t("language")})]}),p.jsx(De,{children:p.jsxs(qf,{value:e.language,onIonChange:w=>c(w.detail.value),interface:"popover",children:[p.jsx(pr,{value:"en",children:" English"}),p.jsx(pr,{value:"it",children:" Italiano"}),p.jsx(pr,{value:"es",children:" Espaol"}),p.jsx(pr,{value:"fr",children:" Franais"})]})}),p.jsxs(fu,{children:[p.jsx(se,{icon:s?o0:Mf,slot:"start"}),p.jsx(xe,{children:t("theme")})]}),p.jsxs(De,{children:[p.jsx(se,{icon:Mf,slot:"start"}),p.jsx(xe,{children:t("lightMode")}),p.jsx(fp,{checked:s,onIonChange:w=>d(w.detail.checked),slot:"end"}),p.jsx(se,{icon:o0,slot:"end",style:{marginLeft:"8px"}})]}),p.jsx(fu,{style:{marginTop:"20px"},children:p.jsx(xe,{children:t("information")})}),p.jsxs(De,{button:!0,onClick:()=>x("/tabs/help"),children:[p.jsx(se,{icon:Uy,slot:"start"}),p.jsx(xe,{children:t("help")})]}),p.jsxs(De,{button:!0,onClick:()=>x("/tabs/about"),children:[p.jsx(se,{icon:Fy,slot:"start"}),p.jsx(xe,{children:t("about")})]}),p.jsxs(De,{button:!0,onClick:()=>x("/tabs/credits"),children:[p.jsx(se,{icon:n6,slot:"start"}),p.jsx(xe,{children:t("credits")})]})]})})]})},nb={en:{translation:{gallery:"Gallery",exhibits3d:"3D Exhibits",arView:"AR View",artifactDetails:"Artifact Details",virtualMuseum:"Virtual Museum",exploreHistory:"Explore History in Your Hands",continueWithGoogle:"Continue with Google",continueWithApple:"Continue with Apple",continueWithEmail:"Continue with Email",continueAsGuest:"Continue as Guest",or:"or",login:"Login",signUp:"Sign Up",email:"Email",password:"Password",pleaseEnterEmailPassword:"Please enter email and password",checkEmailVerification:"Please check your email to verify your account",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",back:"Back",welcomeFooter:"Discover ancient artifacts, explore 3D exhibits, and test your knowledge",guestModeActive:"You're browsing as guest",loginToSaveFavorites:"Login to save favorites",loginToTrackProgress:"Login to track your progress",logout:"Logout",museumGallery:"Museum Gallery",searchArtifacts:"Search artifacts...",all:"All",favorites:" Favorites",images:"Images",videos:"Videos",noArtifactsFound:"No artifacts found matching your search.",ancientPottery:"Ancient Pottery",ancientPotteryDesc:"Ancient pottery from the Bronze Age",historicalArtifacts:"Historical Artifacts",historicalArtifactsDesc:"Collection of historical artifacts",museumTour:"Museum Tour",museumTourDesc:"Virtual tour of the museum",ancientSculpture:"Ancient Sculpture",ancientSculptureDesc:"Classical sculpture from ancient Greece",audioGuide:"Audio Guide",description:"Description",artifactInformation:"Artifact Information",period:"Period",origin:"Origin",material:"Material",dimensions:"Dimensions",discovered:"Discovered",condition:"Condition",interactive3dViewer:"Interactive 3D Viewer",selectExhibit:"Select an exhibit to view in 3D",useMouseToRotate:"Use mouse/touch to rotate and zoom",ancientGlobe:"Ancient Globe",ancientGlobeDesc:"A spherical artifact",stoneCube:"Stone Cube",stoneCubeDesc:"Carved stone cube",columnFragment:"Column Fragment",columnFragmentDesc:"Ancient column piece",skullModel:"Skull Model",skullModelDesc:"3D scanned skull artifact",damagedHelmet:"Damaged Helmet",damagedHelmetDesc:"Battle-worn ancient helmet",augmentedReality:"Augmented Reality",arNotSupported:"AR not supported",arNotSupportedDesc:"Your device does not support WebXR AR.",startAr:"Start AR Experience",requirements:"Requirements",httpsRequired:"HTTPS connection required",arCapableDevice:"AR-capable device (ARCore/ARKit)",cameraPermission:"Camera permission",modernBrowser:"Modern browser with WebXR support",scanArtifactQr:"Scan Artifact QR Code",pointCamera:"Point your camera at the QR code",qrWellLit:"Make sure the QR code is well lit and centered",cancel:"Cancel",audioGuideDesc:"Listen to the audio guide to learn more about this artifact's history, significance, and the story behind its discovery.",backOnline:" Back online! Content will sync automatically.",offline:" You are offline. Cached content is still available.",switchToDark:"Switch to dark mode",switchToLight:"Switch to light mode",museumQuiz:"Museum Quiz",question:"Question",of:"of",score:"Score",submitAnswer:"Submit Answer",nextQuestion:"Next Question",viewResults:"View Results",explanation:"Explanation",quizComplete:"Quiz Complete!",youScored:"You scored",yourBadges:"Your Badges:",tryAgain:"Try Again",perfectScore:" Perfect Score!",excellent:" Excellent!",goodJob:" Good Job!",keepLearning:" Keep Learning!",scholarBadge:" Scholar",expertBadge:" Expert",masterBadge:" Master",q1Question:"What period is the Ancient Pottery from?",q1Option1:"Iron Age",q1Option2:"Bronze Age",q1Option3:"Stone Age",q1Option4:"Medieval Period",q1Explanation:"The Ancient Pottery dates back to the Bronze Age, approximately 3000-1200 BCE.",q2Question:"Where was the Ancient Sculpture discovered?",q2Option1:"Rome",q2Option2:"Athens",q2Option3:"Egypt",q2Option4:"Mesopotamia",q2Explanation:"The Ancient Sculpture is a classical piece from ancient Greece, discovered in Athens.",q3Question:"What material is the Ancient Pottery made from?",q3Option1:"Bronze",q3Option2:"Marble",q3Option3:"Terracotta",q3Option4:"Gold",q3Explanation:"Ancient pottery was typically made from terracotta, a type of fired clay.",q4Question:"Which civilization is known for creating the first museums?",q4Option1:"Romans",q4Option2:"Greeks",q4Option3:"Egyptians",q4Option4:"Chinese",q4Explanation:'The ancient Greeks created the first museums, called "Mouseion" (temples of the Muses).',q5Question:"What is the primary purpose of museum conservation?",q5Option1:"To make artifacts look new",q5Option2:"To preserve artifacts for future generations",q5Option3:"To increase artifact value",q5Option4:"To clean artifacts regularly",q5Explanation:"Conservation aims to preserve artifacts in their current state for future generations to study and enjoy.",menu:"Menu",language:"Language",theme:"Theme",lightMode:"Light Mode",darkMode:"Dark Mode",information:"Information",help:"Help",about:"About",credits:"Credits",helpWelcome:"Welcome to Museum App",helpIntro:"This guide will help you navigate and make the most of all the features available in the Museum App.",helpFeatures:"Features",helpGalleryTitle:"Gallery",helpGalleryDesc:"Browse through our collection of artifacts with search and filter options.",help3DTitle:"3D Exhibits",help3DDesc:"View interactive 3D models of artifacts. Rotate, zoom, and explore from all angles.",helpQRTitle:"QR Scanner",helpQRDesc:"Scan QR codes at the museum to get instant information about artifacts.",helpARTitle:"AR View",helpARDesc:"Experience artifacts in augmented reality using your device camera.",helpQuizTitle:"Quiz",helpQuizDesc:"Test your knowledge about museum artifacts and history.",helpFavoritesTitle:"Favorites",helpFavoritesDesc:"Save your favorite artifacts for quick access later.",helpSearchTitle:"Search & Filter",helpSearchDesc:"Find specific artifacts using search and category filters.",helpShareTitle:"Share",helpShareDesc:"Share interesting artifacts with friends and family.",helpLanguageTitle:"Multi-Language",helpLanguageDesc:"Switch between English, Italian, Spanish, and French.",helpThemeTitle:"Dark Mode",helpThemeDesc:"Toggle between light and dark themes for comfortable viewing.",helpTips:"Tips & Tricks",helpTip1:"Pull down on the Gallery page to refresh content",helpTip2:"Tap the heart icon to add artifacts to your favorites",helpTip3:"Use pinch gestures to zoom in on 3D models",helpTip4:"The app works offline - cached content is always available",helpTip5:"Complete the quiz to earn badges and test your knowledge",aboutAppName:"Museum App",aboutVersion:"Version 1.0.0",aboutDescription:"An interactive museum experience featuring 3D exhibits, AR viewing, multilingual support, and educational quizzes. Explore artifacts from around the world with cutting-edge technology.",aboutFeatures:"Key Features",aboutFeature1Title:"Multilingual",aboutFeature1Desc:"4 languages supported",aboutFeature2Title:"3D & AR",aboutFeature2Desc:"Interactive viewing",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Optimized for mobile",aboutFeature4Title:"Offline Mode",aboutFeature4Desc:"Works without internet",aboutTechnology:"Built With",aboutContact:"Contact",aboutContactDesc:"Have questions or feedback? We'd love to hear from you!",aboutDeveloper:"Developer",aboutWebsite:"Website",aboutEmail:"Email",aboutCopyright:" 2024 Museum App. All rights reserved.",aboutLicense:"Open source software built with modern web technologies.",creditsThankYou:"Thank You",creditsIntro:"This app was made possible thanks to these amazing open source projects and resources.",creditsLibraries:"Open Source Libraries",creditsReactDesc:"JavaScript library for building user interfaces",creditsIonicDesc:"Mobile-first UI component library",creditsBabylonDesc:"3D rendering engine for the web",creditsI18nDesc:"Internationalization framework",creditsViteDesc:"Next generation frontend tooling",creditsSupabaseDesc:"Open source Firebase alternative",creditsQRDesc:"QR code scanning library",creditsImages:"Images & Media",creditsUnsplashDesc:"Beautiful free images and photos",creditsPhotographers:"Photographers",credits3DModels:"3D Models",creditsSketchfabDesc:"Platform for 3D and AR content",creditsBabylonPlaygroundDesc:"Sample 3D models and scenes",creditsAudio:"Audio",creditsSoundHelixDesc:"Royalty-free music and audio",creditsIcons:"Icons",creditsIoniconsDesc:"Premium designed icons for web and mobile",creditsSpecialThanks:"Special Thanks",creditsSpecialThanksDesc:"Special thanks to everyone who contributed to making this app possible:",creditsThanks1:"The open source community for amazing tools and libraries",creditsThanks2:"Museums and cultural institutions for preserving history",creditsThanks3:"Photographers and 3D artists for sharing their work",creditsThanks4:"You, for using this app and supporting digital museums",creditsFooter:"Made with  for museum enthusiasts everywhere"}},it:{translation:{gallery:"Galleria",exhibits3d:"Mostre 3D",arView:"Vista AR",artifactDetails:"Dettagli Reperto",virtualMuseum:"Museo Virtuale",exploreHistory:"Esplora la Storia nelle Tue Mani",continueWithGoogle:"Continua con Google",continueWithApple:"Continua con Apple",continueWithEmail:"Continua con Email",continueAsGuest:"Continua come Ospite",or:"oppure",login:"Accedi",signUp:"Registrati",email:"Email",password:"Password",pleaseEnterEmailPassword:"Inserisci email e password",checkEmailVerification:"Controlla la tua email per verificare il tuo account",alreadyHaveAccount:"Hai gi un account?",dontHaveAccount:"Non hai un account?",back:"Indietro",welcomeFooter:"Scopri antichi reperti, esplora mostre 3D e metti alla prova le tue conoscenze",guestModeActive:"Stai navigando come ospite",loginToSaveFavorites:"Accedi per salvare i preferiti",loginToTrackProgress:"Accedi per tracciare i tuoi progressi",logout:"Esci",museumGallery:"Galleria del Museo",searchArtifacts:"Cerca reperti...",all:"Tutti",favorites:" Preferiti",images:"Immagini",videos:"Video",noArtifactsFound:"Nessun reperto trovato corrispondente alla tua ricerca.",ancientPottery:"Ceramica Antica",ancientPotteryDesc:"Ceramica antica dell'et del bronzo",historicalArtifacts:"Reperti Storici",historicalArtifactsDesc:"Collezione di reperti storici",museumTour:"Tour del Museo",museumTourDesc:"Tour virtuale del museo",ancientSculpture:"Scultura Antica",ancientSculptureDesc:"Scultura classica dell'antica Grecia",audioGuide:"Guida Audio",description:"Descrizione",artifactInformation:"Informazioni sul Reperto",period:"Periodo",origin:"Origine",material:"Materiale",dimensions:"Dimensioni",discovered:"Scoperto",condition:"Condizione",interactive3dViewer:"Visualizzatore 3D Interattivo",selectExhibit:"Seleziona una mostra da visualizzare in 3D",useMouseToRotate:"Usa il mouse/tocco per ruotare e ingrandire",ancientGlobe:"Globo Antico",ancientGlobeDesc:"Un artefatto sferico",stoneCube:"Cubo di Pietra",stoneCubeDesc:"Cubo di pietra scolpito",columnFragment:"Frammento di Colonna",columnFragmentDesc:"Pezzo di colonna antica",skullModel:"Modello di Cranio",skullModelDesc:"Cranio scansionato in 3D",damagedHelmet:"Elmo Danneggiato",damagedHelmetDesc:"Elmo antico consumato dalla battaglia",augmentedReality:"Realt Aumentata",arNotSupported:"AR non supportata",arNotSupportedDesc:"Il tuo dispositivo non supporta WebXR AR.",startAr:"Avvia Esperienza AR",requirements:"Requisiti",httpsRequired:"Connessione HTTPS richiesta",arCapableDevice:"Dispositivo compatibile AR (ARCore/ARKit)",cameraPermission:"Permesso fotocamera",modernBrowser:"Browser moderno con supporto WebXR",scanArtifactQr:"Scansiona Codice QR Reperto",pointCamera:"Punta la fotocamera sul codice QR",qrWellLit:"Assicurati che il codice QR sia ben illuminato e centrato",cancel:"Annulla",audioGuideDesc:"Ascolta la guida audio per saperne di pi sulla storia di questo reperto, il suo significato e la storia della sua scoperta.",backOnline:" Sei di nuovo online! Il contenuto si sincronizzer automaticamente.",offline:" Sei offline. Il contenuto memorizzato  ancora disponibile.",switchToDark:"Passa alla modalit scura",switchToLight:"Passa alla modalit chiara",museumQuiz:"Quiz del Museo",question:"Domanda",of:"di",score:"Punteggio",submitAnswer:"Invia Risposta",nextQuestion:"Prossima Domanda",viewResults:"Visualizza Risultati",explanation:"Spiegazione",quizComplete:"Quiz Completato!",youScored:"Hai ottenuto",yourBadges:"I Tuoi Badge:",tryAgain:"Riprova",perfectScore:" Punteggio Perfetto!",excellent:" Eccellente!",goodJob:" Ottimo Lavoro!",keepLearning:" Continua ad Imparare!",scholarBadge:" Studioso",expertBadge:" Esperto",masterBadge:" Maestro",q1Question:"Da quale periodo proviene la Ceramica Antica?",q1Option1:"Et del Ferro",q1Option2:"Et del Bronzo",q1Option3:"Et della Pietra",q1Option4:"Periodo Medievale",q1Explanation:"La Ceramica Antica risale all'Et del Bronzo, circa 3000-1200 a.C.",q2Question:"Dove  stata scoperta la Scultura Antica?",q2Option1:"Roma",q2Option2:"Atene",q2Option3:"Egitto",q2Option4:"Mesopotamia",q2Explanation:"La Scultura Antica  un pezzo classico dell'antica Grecia, scoperto ad Atene.",q3Question:"Di quale materiale  fatta la Ceramica Antica?",q3Option1:"Bronzo",q3Option2:"Marmo",q3Option3:"Terracotta",q3Option4:"Oro",q3Explanation:"La ceramica antica era tipicamente fatta di terracotta, un tipo di argilla cotta.",q4Question:"Quale civilt  nota per aver creato i primi musei?",q4Option1:"Romani",q4Option2:"Greci",q4Option3:"Egiziani",q4Option4:"Cinesi",q4Explanation:'Gli antichi Greci crearono i primi musei, chiamati "Mouseion" (templi delle Muse).',q5Question:"Qual  lo scopo principale della conservazione museale?",q5Option1:"Far sembrare nuovi i reperti",q5Option2:"Preservare i reperti per le generazioni future",q5Option3:"Aumentare il valore dei reperti",q5Option4:"Pulire regolarmente i reperti",q5Explanation:"La conservazione mira a preservare i reperti nel loro stato attuale per le generazioni future da studiare e apprezzare.",menu:"Menu",language:"Lingua",theme:"Tema",lightMode:"Modalit Chiara",darkMode:"Modalit Scura",information:"Informazioni",help:"Aiuto",about:"Info",credits:"Crediti",helpWelcome:"Benvenuto in Museum App",helpIntro:"Questa guida ti aiuter a navigare e sfruttare al meglio tutte le funzionalit disponibili nell'App del Museo.",helpFeatures:"Funzionalit",helpGalleryTitle:"Galleria",helpGalleryDesc:"Sfoglia la nostra collezione di reperti con opzioni di ricerca e filtro.",help3DTitle:"Mostre 3D",help3DDesc:"Visualizza modelli 3D interattivi di reperti. Ruota, ingrandisci ed esplora da tutte le angolazioni.",helpQRTitle:"Scanner QR",helpQRDesc:"Scansiona i codici QR al museo per ottenere informazioni istantanee sui reperti.",helpARTitle:"Vista AR",helpARDesc:"Sperimenta i reperti in realt aumentata usando la fotocamera del tuo dispositivo.",helpQuizTitle:"Quiz",helpQuizDesc:"Metti alla prova le tue conoscenze sui reperti museali e sulla storia.",helpFavoritesTitle:"Preferiti",helpFavoritesDesc:"Salva i tuoi reperti preferiti per un accesso rapido in seguito.",helpSearchTitle:"Ricerca e Filtro",helpSearchDesc:"Trova reperti specifici usando la ricerca e i filtri per categoria.",helpShareTitle:"Condividi",helpShareDesc:"Condividi reperti interessanti con amici e familiari.",helpLanguageTitle:"Multilingua",helpLanguageDesc:"Passa tra inglese, italiano, spagnolo e francese.",helpThemeTitle:"Modalit Scura",helpThemeDesc:"Passa tra temi chiari e scuri per una visualizzazione confortevole.",helpTips:"Suggerimenti e Trucchi",helpTip1:"Trascina verso il basso nella pagina Galleria per aggiornare i contenuti",helpTip2:"Tocca l'icona del cuore per aggiungere reperti ai tuoi preferiti",helpTip3:"Usa i gesti di pizzico per ingrandire i modelli 3D",helpTip4:"L'app funziona offline - i contenuti memorizzati sono sempre disponibili",helpTip5:"Completa il quiz per guadagnare badge e testare le tue conoscenze",aboutAppName:"Museum App",aboutVersion:"Versione 1.0.0",aboutDescription:"Un'esperienza museale interattiva con mostre 3D, visualizzazione AR, supporto multilingue e quiz educativi. Esplora reperti da tutto il mondo con tecnologia all'avanguardia.",aboutFeatures:"Caratteristiche Principali",aboutFeature1Title:"Multilingua",aboutFeature1Desc:"4 lingue supportate",aboutFeature2Title:"3D e AR",aboutFeature2Desc:"Visualizzazione interattiva",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Ottimizzato per mobile",aboutFeature4Title:"Modalit Offline",aboutFeature4Desc:"Funziona senza internet",aboutTechnology:"Costruito Con",aboutContact:"Contatti",aboutContactDesc:"Hai domande o feedback? Ci piacerebbe sentirti!",aboutDeveloper:"Sviluppatore",aboutWebsite:"Sito Web",aboutEmail:"Email",aboutCopyright:" 2024 Museum App. Tutti i diritti riservati.",aboutLicense:"Software open source costruito con moderne tecnologie web.",creditsThankYou:"Grazie",creditsIntro:"Questa app  stata resa possibile grazie a questi fantastici progetti e risorse open source.",creditsLibraries:"Librerie Open Source",creditsReactDesc:"Libreria JavaScript per costruire interfacce utente",creditsIonicDesc:"Libreria di componenti UI mobile-first",creditsBabylonDesc:"Motore di rendering 3D per il web",creditsI18nDesc:"Framework di internazionalizzazione",creditsViteDesc:"Strumenti frontend di nuova generazione",creditsSupabaseDesc:"Alternativa open source a Firebase",creditsQRDesc:"Libreria per la scansione di codici QR",creditsImages:"Immagini e Media",creditsUnsplashDesc:"Bellissime immagini e foto gratuite",creditsPhotographers:"Fotografi",credits3DModels:"Modelli 3D",creditsSketchfabDesc:"Piattaforma per contenuti 3D e AR",creditsBabylonPlaygroundDesc:"Modelli e scene 3D di esempio",creditsAudio:"Audio",creditsSoundHelixDesc:"Musica e audio royalty-free",creditsIcons:"Icone",creditsIoniconsDesc:"Icone premium progettate per web e mobile",creditsSpecialThanks:"Ringraziamenti Speciali",creditsSpecialThanksDesc:"Un ringraziamento speciale a tutti coloro che hanno contribuito a rendere possibile questa app:",creditsThanks1:"La comunit open source per strumenti e librerie fantastici",creditsThanks2:"Musei e istituzioni culturali per preservare la storia",creditsThanks3:"Fotografi e artisti 3D per condividere il loro lavoro",creditsThanks4:"Tu, per aver usato questa app e supportato i musei digitali",creditsFooter:"Fatto con  per gli appassionati di musei ovunque"}},es:{translation:{gallery:"Galera",exhibits3d:"Exhibiciones 3D",arView:"Vista AR",artifactDetails:"Detalles del Artefacto",virtualMuseum:"Museo Virtual",exploreHistory:"Explora la Historia en Tus Manos",continueWithGoogle:"Continuar con Google",continueWithApple:"Continuar con Apple",continueWithEmail:"Continuar con Email",continueAsGuest:"Continuar como Invitado",or:"o",login:"Iniciar Sesin",signUp:"Registrarse",email:"Email",password:"Contrasea",pleaseEnterEmailPassword:"Por favor ingresa email y contrasea",checkEmailVerification:"Por favor revisa tu email para verificar tu cuenta",alreadyHaveAccount:"Ya tienes una cuenta?",dontHaveAccount:"No tienes una cuenta?",back:"Atrs",welcomeFooter:"Descubre artefactos antiguos, explora exhibiciones 3D y pon a prueba tus conocimientos",guestModeActive:"Ests navegando como invitado",loginToSaveFavorites:"Inicia sesin para guardar favoritos",loginToTrackProgress:"Inicia sesin para rastrear tu progreso",logout:"Cerrar Sesin",museumGallery:"Galera del Museo",searchArtifacts:"Buscar artefactos...",all:"Todos",favorites:" Favoritos",images:"Imgenes",videos:"Videos",noArtifactsFound:"No se encontraron artefactos que coincidan con tu bsqueda.",ancientPottery:"Cermica Antigua",ancientPotteryDesc:"Cermica antigua de la Edad del Bronce",historicalArtifacts:"Artefactos Histricos",historicalArtifactsDesc:"Coleccin de artefactos histricos",museumTour:"Tour del Museo",museumTourDesc:"Tour virtual del museo",ancientSculpture:"Escultura Antigua",ancientSculptureDesc:"Escultura clsica de la antigua Grecia",audioGuide:"Gua de Audio",description:"Descripcin",artifactInformation:"Informacin del Artefacto",period:"Perodo",origin:"Origen",material:"Material",dimensions:"Dimensiones",discovered:"Descubierto",condition:"Condicin",interactive3dViewer:"Visor 3D Interactivo",selectExhibit:"Selecciona una exhibicin para ver en 3D",useMouseToRotate:"Usa el ratn/tctil para rotar y hacer zoom",ancientGlobe:"Globo Antiguo",ancientGlobeDesc:"Un artefacto esfrico",stoneCube:"Cubo de Piedra",stoneCubeDesc:"Cubo de piedra tallado",columnFragment:"Fragmento de Columna",columnFragmentDesc:"Pieza de columna antigua",skullModel:"Modelo de Crneo",skullModelDesc:"Crneo escaneado en 3D",damagedHelmet:"Casco Daado",damagedHelmetDesc:"Casco antiguo desgastado por la batalla",augmentedReality:"Realidad Aumentada",arNotSupported:"AR no compatible",arNotSupportedDesc:"Tu dispositivo no es compatible con WebXR AR.",startAr:"Iniciar Experiencia AR",requirements:"Requisitos",httpsRequired:"Conexin HTTPS requerida",arCapableDevice:"Dispositivo compatible con AR (ARCore/ARKit)",cameraPermission:"Permiso de cmara",modernBrowser:"Navegador moderno con soporte WebXR",scanArtifactQr:"Escanear Cdigo QR del Artefacto",pointCamera:"Apunta tu cmara al cdigo QR",qrWellLit:"Asegrate de que el cdigo QR est bien iluminado y centrado",cancel:"Cancelar",audioGuideDesc:"Escucha la gua de audio para aprender ms sobre la historia de este artefacto, su significado y la historia detrs de su descubrimiento.",backOnline:" De vuelta en lnea! El contenido se sincronizar automticamente.",offline:" Ests sin conexin. El contenido en cach an est disponible.",switchToDark:"Cambiar a modo oscuro",switchToLight:"Cambiar a modo claro",museumQuiz:"Quiz del Museo",question:"Pregunta",of:"de",score:"Puntuacin",submitAnswer:"Enviar Respuesta",nextQuestion:"Siguiente Pregunta",viewResults:"Ver Resultados",explanation:"Explicacin",quizComplete:"Quiz Completado!",youScored:"Obtuviste",yourBadges:"Tus Insignias:",tryAgain:"Intentar de Nuevo",perfectScore:" Puntuacin Perfecta!",excellent:" Excelente!",goodJob:" Buen Trabajo!",keepLearning:" Sigue Aprendiendo!",scholarBadge:" Erudito",expertBadge:" Experto",masterBadge:" Maestro",q1Question:"De qu perodo es la Cermica Antigua?",q1Option1:"Edad del Hierro",q1Option2:"Edad del Bronce",q1Option3:"Edad de Piedra",q1Option4:"Perodo Medieval",q1Explanation:"La Cermica Antigua se remonta a la Edad del Bronce, aproximadamente 3000-1200 a.C.",q2Question:"Dnde se descubri la Escultura Antigua?",q2Option1:"Roma",q2Option2:"Atenas",q2Option3:"Egipto",q2Option4:"Mesopotamia",q2Explanation:"La Escultura Antigua es una pieza clsica de la antigua Grecia, descubierta en Atenas.",q3Question:"De qu material est hecha la Cermica Antigua?",q3Option1:"Bronce",q3Option2:"Mrmol",q3Option3:"Terracota",q3Option4:"Oro",q3Explanation:"La cermica antigua se haca tpicamente de terracota, un tipo de arcilla cocida.",q4Question:"Qu civilizacin es conocida por crear los primeros museos?",q4Option1:"Romanos",q4Option2:"Griegos",q4Option3:"Egipcios",q4Option4:"Chinos",q4Explanation:'Los antiguos griegos crearon los primeros museos, llamados "Mouseion" (templos de las Musas).',q5Question:"Cul es el propsito principal de la conservacin musestica?",q5Option1:"Hacer que los artefactos parezcan nuevos",q5Option2:"Preservar artefactos para generaciones futuras",q5Option3:"Aumentar el valor de los artefactos",q5Option4:"Limpiar artefactos regularmente",q5Explanation:"La conservacin tiene como objetivo preservar los artefactos en su estado actual para que las generaciones futuras los estudien y disfruten.",menu:"Men",language:"Idioma",theme:"Tema",lightMode:"Modo Claro",darkMode:"Modo Oscuro",information:"Informacin",help:"Ayuda",about:"Acerca de",credits:"Crditos",helpWelcome:"Bienvenido a Museum App",helpIntro:"Esta gua te ayudar a navegar y aprovechar al mximo todas las funciones disponibles en la App del Museo.",helpFeatures:"Caractersticas",helpGalleryTitle:"Galera",helpGalleryDesc:"Explora nuestra coleccin de artefactos con opciones de bsqueda y filtro.",help3DTitle:"Exposiciones 3D",help3DDesc:"Ver modelos 3D interactivos de artefactos. Rotar, ampliar y explorar desde todos los ngulos.",helpQRTitle:"Escner QR",helpQRDesc:"Escanea cdigos QR en el museo para obtener informacin instantnea sobre artefactos.",helpARTitle:"Vista AR",helpARDesc:"Experimenta artefactos en realidad aumentada usando la cmara de tu dispositivo.",helpQuizTitle:"Cuestionario",helpQuizDesc:"Pon a prueba tus conocimientos sobre artefactos musesticos e historia.",helpFavoritesTitle:"Favoritos",helpFavoritesDesc:"Guarda tus artefactos favoritos para acceso rpido ms tarde.",helpSearchTitle:"Buscar y Filtrar",helpSearchDesc:"Encuentra artefactos especficos usando bsqueda y filtros de categora.",helpShareTitle:"Compartir",helpShareDesc:"Comparte artefactos interesantes con amigos y familiares.",helpLanguageTitle:"Multiidioma",helpLanguageDesc:"Cambia entre ingls, italiano, espaol y francs.",helpThemeTitle:"Modo Oscuro",helpThemeDesc:"Alterna entre temas claros y oscuros para una visualizacin cmoda.",helpTips:"Consejos y Trucos",helpTip1:"Desliza hacia abajo en la pgina de Galera para actualizar el contenido",helpTip2:"Toca el cono del corazn para agregar artefactos a tus favoritos",helpTip3:"Usa gestos de pellizco para acercar modelos 3D",helpTip4:"La app funciona sin conexin - el contenido en cach siempre est disponible",helpTip5:"Completa el cuestionario para ganar insignias y probar tus conocimientos",aboutAppName:"Museum App",aboutVersion:"Versin 1.0.0",aboutDescription:"Una experiencia musestica interactiva con exposiciones 3D, visualizacin AR, soporte multiidioma y cuestionarios educativos.",aboutFeatures:"Caractersticas Clave",aboutFeature1Title:"Multiidioma",aboutFeature1Desc:"4 idiomas soportados",aboutFeature2Title:"3D y AR",aboutFeature2Desc:"Visualizacin interactiva",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Optimizado para mvil",aboutFeature4Title:"Modo Sin Conexin",aboutFeature4Desc:"Funciona sin internet",aboutTechnology:"Construido Con",aboutContact:"Contacto",aboutContactDesc:"Tienes preguntas o comentarios? Nos encantara saber de ti!",aboutDeveloper:"Desarrollador",aboutWebsite:"Sitio Web",aboutEmail:"Correo",aboutCopyright:" 2024 Museum App. Todos los derechos reservados.",aboutLicense:"Software de cdigo abierto construido con tecnologas web modernas.",creditsThankYou:"Gracias",creditsIntro:"Esta app fue posible gracias a estos increbles proyectos y recursos de cdigo abierto.",creditsLibraries:"Bibliotecas de Cdigo Abierto",creditsReactDesc:"Biblioteca JavaScript para construir interfaces de usuario",creditsIonicDesc:"Biblioteca de componentes UI mobile-first",creditsBabylonDesc:"Motor de renderizado 3D para la web",creditsI18nDesc:"Framework de internacionalizacin",creditsViteDesc:"Herramientas frontend de prxima generacin",creditsSupabaseDesc:"Alternativa de cdigo abierto a Firebase",creditsQRDesc:"Biblioteca de escaneo de cdigos QR",creditsImages:"Imgenes y Medios",creditsUnsplashDesc:"Hermosas imgenes y fotos gratuitas",creditsPhotographers:"Fotgrafos",credits3DModels:"Modelos 3D",creditsSketchfabDesc:"Plataforma para contenido 3D y AR",creditsBabylonPlaygroundDesc:"Modelos y escenas 3D de muestra",creditsAudio:"Audio",creditsSoundHelixDesc:"Msica y audio libre de regalas",creditsIcons:"Iconos",creditsIoniconsDesc:"Iconos premium diseados para web y mvil",creditsSpecialThanks:"Agradecimientos Especiales",creditsSpecialThanksDesc:"Agradecimientos especiales a todos los que contribuyeron a hacer posible esta app:",creditsThanks1:"La comunidad de cdigo abierto por herramientas y bibliotecas increbles",creditsThanks2:"Museos e instituciones culturales por preservar la historia",creditsThanks3:"Fotgrafos y artistas 3D por compartir su trabajo",creditsThanks4:"T, por usar esta app y apoyar los museos digitales",creditsFooter:"Hecho con  para entusiastas de museos en todas partes"}},fr:{translation:{gallery:"Galerie",exhibits3d:"Expositions 3D",arView:"Vue AR",artifactDetails:"Dtails de l'Artefact",virtualMuseum:"Muse Virtuel",exploreHistory:"Explorez l'Histoire dans Vos Mains",continueWithGoogle:"Continuer avec Google",continueWithApple:"Continuer avec Apple",continueWithEmail:"Continuer avec Email",continueAsGuest:"Continuer en tant qu'Invit",or:"ou",login:"Connexion",signUp:"S'inscrire",email:"Email",password:"Mot de passe",pleaseEnterEmailPassword:"Veuillez entrer email et mot de passe",checkEmailVerification:"Veuillez vrifier votre email pour vrifier votre compte",alreadyHaveAccount:"Vous avez dj un compte?",dontHaveAccount:"Vous n'avez pas de compte?",back:"Retour",welcomeFooter:"Dcouvrez des artefacts anciens, explorez des expositions 3D et testez vos connaissances",guestModeActive:"Vous naviguez en tant qu'invit",loginToSaveFavorites:"Connectez-vous pour sauvegarder les favoris",loginToTrackProgress:"Connectez-vous pour suivre vos progrs",logout:"Dconnexion",museumGallery:"Galerie du Muse",searchArtifacts:"Rechercher des artefacts...",all:"Tous",favorites:" Favoris",images:"Images",videos:"Vidos",noArtifactsFound:"Aucun artefact trouv correspondant  votre recherche.",ancientPottery:"Poterie Ancienne",ancientPotteryDesc:"Poterie ancienne de l'ge du bronze",historicalArtifacts:"Artefacts Historiques",historicalArtifactsDesc:"Collection d'artefacts historiques",museumTour:"Visite du Muse",museumTourDesc:"Visite virtuelle du muse",ancientSculpture:"Sculpture Ancienne",ancientSculptureDesc:"Sculpture classique de la Grce antique",audioGuide:"Guide Audio",description:"Description",artifactInformation:"Informations sur l'Artefact",period:"Priode",origin:"Origine",material:"Matriau",dimensions:"Dimensions",discovered:"Dcouvert",condition:"tat",interactive3dViewer:"Visionneuse 3D Interactive",selectExhibit:"Slectionnez une exposition  voir en 3D",useMouseToRotate:"Utilisez la souris/tactile pour faire pivoter et zoomer",ancientGlobe:"Globe Ancien",ancientGlobeDesc:"Un artefact sphrique",stoneCube:"Cube de Pierre",stoneCubeDesc:"Cube de pierre sculpt",columnFragment:"Fragment de Colonne",columnFragmentDesc:"Morceau de colonne ancienne",skullModel:"Modle de Crne",skullModelDesc:"Crne scann en 3D",damagedHelmet:"Casque Endommag",damagedHelmetDesc:"Casque ancien us par la bataille",augmentedReality:"Ralit Augmente",arNotSupported:"AR non pris en charge",arNotSupportedDesc:"Votre appareil ne prend pas en charge WebXR AR.",startAr:"Dmarrer l'Exprience AR",requirements:"Exigences",httpsRequired:"Connexion HTTPS requise",arCapableDevice:"Appareil compatible AR (ARCore/ARKit)",cameraPermission:"Permission de camra",modernBrowser:"Navigateur moderne avec support WebXR",scanArtifactQr:"Scanner le Code QR de l'Artefact",pointCamera:"Pointez votre camra sur le code QR",qrWellLit:"Assurez-vous que le code QR est bien clair et centr",cancel:"Annuler",audioGuideDesc:"coutez le guide audio pour en savoir plus sur l'histoire de cet artefact, sa signification et l'histoire de sa dcouverte.",backOnline:" De retour en ligne ! Le contenu se synchronisera automatiquement.",offline:" Vous tes hors ligne. Le contenu en cache est toujours disponible.",switchToDark:"Passer en mode sombre",switchToLight:"Passer en mode clair",museumQuiz:"Quiz du Muse",question:"Question",of:"de",score:"Score",submitAnswer:"Soumettre la Rponse",nextQuestion:"Question Suivante",viewResults:"Voir les Rsultats",explanation:"Explication",quizComplete:"Quiz Termin !",youScored:"Vous avez obtenu",yourBadges:"Vos Badges :",tryAgain:"Ressayer",perfectScore:" Score Parfait !",excellent:" Excellent !",goodJob:" Bon Travail !",keepLearning:" Continuez  Apprendre !",scholarBadge:" rudit",expertBadge:" Expert",masterBadge:" Matre",q1Question:"De quelle priode provient la Poterie Ancienne ?",q1Option1:"ge du Fer",q1Option2:"ge du Bronze",q1Option3:"ge de Pierre",q1Option4:"Priode Mdivale",q1Explanation:"La Poterie Ancienne remonte  l'ge du Bronze, environ 3000-1200 avant J.-C.",q2Question:"O la Sculpture Ancienne a-t-elle t dcouverte ?",q2Option1:"Rome",q2Option2:"Athnes",q2Option3:"gypte",q2Option4:"Msopotamie",q2Explanation:"La Sculpture Ancienne est une pice classique de la Grce antique, dcouverte  Athnes.",q3Question:"De quel matriau est faite la Poterie Ancienne ?",q3Option1:"Bronze",q3Option2:"Marbre",q3Option3:"Terre Cuite",q3Option4:"Or",q3Explanation:"La poterie ancienne tait gnralement faite de terre cuite, un type d'argile cuite.",q4Question:"Quelle civilisation est connue pour avoir cr les premiers muses ?",q4Option1:"Romains",q4Option2:"Grecs",q4Option3:"gyptiens",q4Option4:"Chinois",q4Explanation:'Les anciens Grecs ont cr les premiers muses, appels "Mouseion" (temples des Muses).',q5Question:"Quel est le but principal de la conservation musale ?",q5Option1:"Faire paratre les artefacts neufs",q5Option2:"Prserver les artefacts pour les gnrations futures",q5Option3:"Augmenter la valeur des artefacts",q5Option4:"Nettoyer rgulirement les artefacts",q5Explanation:"La conservation vise  prserver les artefacts dans leur tat actuel pour que les gnrations futures puissent les tudier et en profiter.",menu:"Menu",language:"Langue",theme:"Thme",lightMode:"Mode Clair",darkMode:"Mode Sombre",information:"Information",help:"Aide",about:" propos",credits:"Crdits",helpWelcome:"Bienvenue dans Museum App",helpIntro:"Ce guide vous aidera  naviguer et  tirer le meilleur parti de toutes les fonctionnalits disponibles dans l'App du Muse.",helpFeatures:"Fonctionnalits",helpGalleryTitle:"Galerie",helpGalleryDesc:"Parcourez notre collection d'artefacts avec des options de recherche et de filtre.",help3DTitle:"Expositions 3D",help3DDesc:"Visualisez des modles 3D interactifs d'artefacts. Faites pivoter, zoomez et explorez sous tous les angles.",helpQRTitle:"Scanner QR",helpQRDesc:"Scannez les codes QR au muse pour obtenir des informations instantanes sur les artefacts.",helpARTitle:"Vue AR",helpARDesc:"Dcouvrez les artefacts en ralit augmente en utilisant la camra de votre appareil.",helpQuizTitle:"Quiz",helpQuizDesc:"Testez vos connaissances sur les artefacts musaux et l'histoire.",helpFavoritesTitle:"Favoris",helpFavoritesDesc:"Enregistrez vos artefacts prfrs pour un accs rapide ultrieur.",helpSearchTitle:"Recherche et Filtre",helpSearchDesc:"Trouvez des artefacts spcifiques en utilisant la recherche et les filtres de catgorie.",helpShareTitle:"Partager",helpShareDesc:"Partagez des artefacts intressants avec vos amis et votre famille.",helpLanguageTitle:"Multilingue",helpLanguageDesc:"Basculez entre l'anglais, l'italien, l'espagnol et le franais.",helpThemeTitle:"Mode Sombre",helpThemeDesc:"Basculez entre les thmes clairs et sombres pour un affichage confortable.",helpTips:"Conseils et Astuces",helpTip1:"Tirez vers le bas sur la page Galerie pour actualiser le contenu",helpTip2:"Appuyez sur l'icne du cur pour ajouter des artefacts  vos favoris",helpTip3:"Utilisez les gestes de pincement pour zoomer sur les modles 3D",helpTip4:"L'application fonctionne hors ligne - le contenu en cache est toujours disponible",helpTip5:"Compltez le quiz pour gagner des badges et tester vos connaissances",aboutAppName:"Museum App",aboutVersion:"Version 1.0.0",aboutDescription:"Une exprience musale interactive avec des expositions 3D, une visualisation AR, un support multilingue et des quiz ducatifs.",aboutFeatures:"Caractristiques Cls",aboutFeature1Title:"Multilingue",aboutFeature1Desc:"4 langues supportes",aboutFeature2Title:"3D et AR",aboutFeature2Desc:"Visualisation interactive",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Optimis pour mobile",aboutFeature4Title:"Mode Hors Ligne",aboutFeature4Desc:"Fonctionne sans internet",aboutTechnology:"Construit Avec",aboutContact:"Contact",aboutContactDesc:"Vous avez des questions ou des commentaires? Nous aimerions vous entendre!",aboutDeveloper:"Dveloppeur",aboutWebsite:"Site Web",aboutEmail:"Email",aboutCopyright:" 2024 Museum App. Tous droits rservs.",aboutLicense:"Logiciel open source construit avec des technologies web modernes.",creditsThankYou:"Merci",creditsIntro:"Cette application a t rendue possible grce  ces incroyables projets et ressources open source.",creditsLibraries:"Bibliothques Open Source",creditsReactDesc:"Bibliothque JavaScript pour construire des interfaces utilisateur",creditsIonicDesc:"Bibliothque de composants UI mobile-first",creditsBabylonDesc:"Moteur de rendu 3D pour le web",creditsI18nDesc:"Framework d'internationalisation",creditsViteDesc:"Outils frontend de nouvelle gnration",creditsSupabaseDesc:"Alternative open source  Firebase",creditsQRDesc:"Bibliothque de scan de codes QR",creditsImages:"Images et Mdias",creditsUnsplashDesc:"Belles images et photos gratuites",creditsPhotographers:"Photographes",credits3DModels:"Modles 3D",creditsSketchfabDesc:"Plateforme pour contenu 3D et AR",creditsBabylonPlaygroundDesc:"Modles et scnes 3D d'exemple",creditsAudio:"Audio",creditsSoundHelixDesc:"Musique et audio libres de droits",creditsIcons:"Icnes",creditsIoniconsDesc:"Icnes premium conues pour le web et le mobile",creditsSpecialThanks:"Remerciements Spciaux",creditsSpecialThanksDesc:"Remerciements spciaux  tous ceux qui ont contribu  rendre cette application possible:",creditsThanks1:"La communaut open source pour des outils et bibliothques incroyables",creditsThanks2:"Les muses et institutions culturelles pour prserver l'histoire",creditsThanks3:"Les photographes et artistes 3D pour partager leur travail",creditsThanks4:"Vous, pour utiliser cette application et soutenir les muses numriques",creditsFooter:"Fait avec  pour les passionns de muses partout"}}};vp.use(Ap).use(Ep).init({resources:nb,fallbackLng:"en",interpolation:{escapeValue:!1}});gp();const ib=()=>(ie.useEffect(()=>{"serviceWorker"in navigator&&window.location.protocol==="https:"&&navigator.serviceWorker.register("/museum-app/sw.js").then(t=>{console.log("Service Worker registered:",t)},t=>{console.log("Service Worker registration failed:",t)})},[]),p.jsx(xp,{children:p.jsxs(Cy,{children:[p.jsx(eb,{}),p.jsxs(mp,{basename:"/museum-app",children:[p.jsx(tb,{}),p.jsxs(Xf,{id:"main-content",children:[p.jsx(qn,{exact:!0,path:"/welcome",children:p.jsx(u6,{})}),p.jsx(qn,{path:"/tabs",children:p.jsx($6,{})}),p.jsx(qn,{exact:!0,path:"/",children:p.jsx(Wf,{to:"/welcome"})})]})]})]})})),rb=document.getElementById("root"),sb=ow.createRoot(rb);sb.render(p.jsx(Yf.StrictMode,{children:p.jsx(ib,{})}));export{ab as __vite_legacy_guard};
