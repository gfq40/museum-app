System.register(["./index-legacy-BEHu2smx.js"],function(e,n){"use strict";var l;return{setters:[e=>{l=e.L}],execute:function(){function n(e){return e.split(" ").filter(e=>""!==e).map(e=>parseFloat(e))}function t(e,l,t){for(;t.length!==l;){const l=n(e.lines[e.index++]);t.push(...l)}}function a(e,n,t){let a=0,r=0,i=0,s=0,o=0,u=0;for(let l=0;l<e.numberOfHorizontalAngles-1;l++)if(t<e.horizontalAngles[l+1]||l===e.numberOfHorizontalAngles-2){r=l,i=e.horizontalAngles[l],s=e.horizontalAngles[l+1];break}for(let l=0;l<e.numberOfVerticalAngles-1;l++)if(n<e.verticalAngles[l+1]||l===e.numberOfVerticalAngles-2){a=l,o=e.verticalAngles[l],u=e.verticalAngles[l+1];break}const c=s-i,f=u-o;if(0===f)return 0;const g=0===c?0:(t-i)/c,d=(n-o)/f,A=0===c?r:r+1,b=l(e.candelaValues[r][a],e.candelaValues[A][a],g),m=l(e.candelaValues[r][a+1],e.candelaValues[A][a+1],g);return l(b,m,d)}e("_IESTextureLoader",class{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(e,l,r){const i=function(e){const l={lines:new TextDecoder("utf-8").decode(e).split("\n"),index:0},r={version:l.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(l.index=1;l.lines.length>0&&!l.lines[l.index].includes("TILT=");)l.index++;l.lines[l.index].includes("INCLUDE"),l.index++;const i=n(l.lines[l.index++]);r.numberOfLights=i[0],r.lumensPerLamp=i[1],r.candelaMultiplier=i[2],r.numberOfVerticalAngles=i[3],r.numberOfHorizontalAngles=i[4],r.photometricType=i[5],r.unitsType=i[6],r.width=i[7],r.length=i[8],r.height=i[9];const s=n(l.lines[l.index++]);r.ballastFactor=s[0],r.fileGenerationType=s[1],r.inputWatts=s[2];for(let n=0;n<r.numberOfHorizontalAngles;n++)r.candelaValues[n]=[];t(l,r.numberOfVerticalAngles,r.verticalAngles),t(l,r.numberOfHorizontalAngles,r.horizontalAngles);for(let n=0;n<r.numberOfHorizontalAngles;n++)t(l,r.numberOfVerticalAngles,r.candelaValues[n]);let o=-1;for(let n=0;n<r.numberOfHorizontalAngles;n++)for(let e=0;e<r.numberOfVerticalAngles;e++)r.candelaValues[n][e]*=r.candelaValues[n][e]*r.candelaMultiplier*r.ballastFactor*r.fileGenerationType,o=Math.max(o,r.candelaValues[n][e]);if(o>0)for(let n=0;n<r.numberOfHorizontalAngles;n++)for(let e=0;e<r.numberOfVerticalAngles;e++)r.candelaValues[n][e]/=o;const u=180,c=360,f=new Float32Array(64800),g=r.horizontalAngles[0],d=r.horizontalAngles[r.numberOfHorizontalAngles-1];for(let n=0;n<64800;n++){let e=n%c;const l=Math.floor(n/c);d-g!==0&&(e<g||e>=d)&&(e%=2*d,e>d&&(e=2*d-e)),f[l+e*u]=a(r,l,e)}return{width:180,height:1,data:f}}(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));r(i.width,i.height,l.useMipMaps,!1,()=>{const e=l.getEngine();l.type=1,l.format=6,l._gammaSpace=!1,e._uploadDataToTextureDirectly(l,i.data)})}})}}});
