System.register(["./ionic-vendor-legacy-DQaOJSvl.js","./react-vendor-legacy-C-kG-Wxm.js","./i18n-vendor-legacy-BdQ3tcXm.js","./babylon-vendor-legacy-BOVKMfoT.js"],function(e,t){"use strict";var r,n,i,o,a,s,l,c,u,d,h,f,p,g,m,w,y,b,v,_,E,S,C,x,A,I,T,k,R,O,N,D,P,M,B,j,L,F,z,U,V,H,q,W,G,$,X,Y,K,Q,Z,J,ee,te,re,ne,ie,oe,ae,se,le,ce,ue,de,he,fe,pe,ge,me,we,ye,be,ve,_e,Ee,Se,Ce,xe;return{setters:[e=>{r=e.a,n=e.t,i=e.b,o=e.j,a=e.I,s=e.c,l=e.d,c=e.e,u=e.f,d=e.g,h=e.h,f=e.i,p=e.k,g=e.l,m=e.m,w=e.n,y=e.o,b=e.p,v=e.q,_=e.r,E=e.s,S=e.u,C=e.v,x=e.w,A=e.x,I=e.y,T=e.z,k=e.A,R=e.B,O=e.C,N=e.D,D=e.E,P=e.F,M=e._,B=e.G,j=e.H,L=e.J,F=e.K,z=e.L,U=e.M,V=e.N,H=e.O,q=e.P,W=e.Q,G=e.R,$=e.S,X=e.T,Y=e.U,K=e.V,Q=e.W,Z=e.X,J=e.Y,ee=e.Z,te=e.$},e=>{re=e.r,ne=e.b,ie=e.g,oe=e.u,ae=e.h,se=e.i,le=e.j,ce=e.c,ue=e.k,de=e.R},e=>{he=e.u,fe=e.i,pe=e.B,ge=e.a},e=>{me=e.E,we=e.S,ye=e.C,be=e.A,ve=e.V,_e=e.H,Ee=e.M,Se=e.a,Ce=e.b,xe=e.W}],execute:function(){var e=document.createElement("style");function Ae(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}e.textContent='@import"https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&display=swap";.welcome-content{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);font-family:Jost,sans-serif}.welcome-container{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh;padding:40px 20px 20px;max-width:500px;margin:0 auto}.welcome-header{text-align:center;margin-bottom:40px;animation:fadeInDown .8s ease-out}.logo-container{margin-bottom:30px}.museum-logo{animation:float 3s ease-in-out infinite;display:inline-block;filter:drop-shadow(0 4px 20px rgba(0,0,0,.3))}.app-title{font-size:36px;font-weight:300;font-family:Jost,sans-serif;letter-spacing:3px;color:#fff;margin:10px 0;text-shadow:0 2px 10px rgba(0,0,0,.2);text-transform:uppercase}.app-tagline{font-size:16px;font-weight:300;font-family:Jost,sans-serif;letter-spacing:1px;color:rgba(255,255,255,.9);margin:0}.auth-container{flex:1;display:flex;flex-direction:column;gap:12px;animation:fadeInUp .8s ease-out .2s both}.social-button{--background: white;--color: #333;--border-radius: 12px;--box-shadow: 0 4px 15px rgba(0, 0, 0, .1);height:50px;font-weight:600;text-transform:none;letter-spacing:0}.social-button:hover{--box-shadow: 0 6px 20px rgba(0, 0, 0, .15)}.google-button{--background: white;--color: #333}.apple-button{--background: #000;--color: white}.divider{display:flex;align-items:center;text-align:center;margin:10px 0}.divider:before,.divider:after{content:"";flex:1;border-bottom:1px solid rgba(255,255,255,.3)}.divider span{padding:0 15px;color:rgba(255,255,255,.8);font-size:14px}.email-toggle-button{--border-color: rgba(255, 255, 255, .5);--color: white;--border-radius: 12px;height:50px;font-weight:600;text-transform:none;letter-spacing:0}.auth-card{background:rgba(255,255,255,.95);border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,.1);backdrop-filter:blur(10px);margin:0}.auth-title{text-align:center;margin:0 0 20px;color:#333;font-size:24px;font-weight:700}.error-text{text-align:center;margin-bottom:15px}.error-text p{margin:0;font-size:14px}.auth-input{--background: #f5f5f5;--border-radius: 12px;margin-bottom:12px;--padding-start: 15px;--padding-end: 15px}.auth-input ion-icon{color:#666;margin-right:10px}.submit-button{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--border-radius: 12px;height:50px;font-weight:600;margin-top:10px;text-transform:none;letter-spacing:0}.auth-switch{display:flex;justify-content:center;align-items:center;margin-top:15px;gap:5px}.auth-switch ion-text{font-size:14px;color:#666}.back-button{display:block;margin:10px auto 0;--color: #666}.guest-mode{text-align:center;margin-top:20px}.guest-button{--color: white;font-size:16px;text-decoration:underline;text-transform:none;letter-spacing:0}.welcome-footer{text-align:center;margin-top:30px;animation:fadeIn 1s ease-out .4s both}.welcome-footer p{color:rgba(255,255,255,.8);font-size:14px;margin:0;line-height:1.5}@keyframes fadeInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@media (prefers-color-scheme: dark){.auth-card{background:rgba(30,30,30,.95)}.auth-title{color:#fff}.auth-input{--background: rgba(255, 255, 255, .1);--color: white}.auth-input ion-icon{color:rgba(255,255,255,.7)}.auth-switch ion-text{color:rgba(255,255,255,.7)}.back-button{--color: rgba(255, 255, 255, .7)}}@media (max-width: 576px){.welcome-container{padding:30px 15px 15px}.museum-icon{font-size:60px}.app-title{font-size:28px}.app-tagline{font-size:14px}}.qr-scanner-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.95);z-index:10000;display:flex;align-items:center;justify-content:center;padding:20px}.qr-scanner-container{width:100%;max-width:500px;background:var(--ion-background-color);border-radius:12px;padding:20px;display:flex;flex-direction:column;gap:20px}.qr-scanner-header{display:flex;justify-content:space-between;align-items:center}.qr-scanner-header h2{margin:0;font-size:20px;color:var(--ion-text-color)}.qr-reader{width:100%;border-radius:8px;overflow:hidden;background:#000}.qr-scanner-error{padding:12px;background:rgba(255,0,0,.1);border-radius:8px;text-align:center}.qr-scanner-instructions{text-align:center;color:var(--ion-color-medium)}.scan-icon{font-size:48px;color:var(--ion-color-primary);margin-bottom:12px}.qr-scanner-instructions p{margin:8px 0}.small-text{font-size:14px;opacity:.7}ion-col{display:flex}ion-card{margin:16px;width:100%;display:flex;flex-direction:column;transition:transform .2s ease,box-shadow .2s ease}.gallery-card:active{transform:scale(.98)}.gallery-card:hover{transform:translateY(-4px);box-shadow:0 8px 16px rgba(0,0,0,.2)}ion-card-header{cursor:pointer;user-select:none;-webkit-tap-highlight-color:transparent}ion-card-content>div{cursor:pointer;-webkit-tap-highlight-color:transparent}ion-card-header{min-height:60px;display:flex;align-items:center}ion-card-content{display:flex;flex-direction:column}.gallery-media{width:100%!important;height:300px!important;object-fit:cover!important;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);display:block}ion-card-content p{min-height:60px}ion-card-title{font-weight:700;color:var(--ion-color-primary)}.exhibits-container{padding:16px}.babylon-canvas{display:block;outline:none;background:linear-gradient(135deg,#1a1a2e,#16213e)}ion-item[color=primary]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast)}.ar-container{padding:16px}.ar-canvas{display:block;outline:none;background:linear-gradient(135deg,#0a0a1e,#1a1a3e)}ion-card ol{padding-left:20px;line-height:1.8}ion-card ol li{margin-bottom:8px}.quiz-container{max-width:800px;margin:0 auto;padding:20px}.quiz-container ion-card{margin-bottom:20px}.quiz-container ion-item{--padding-start: 0;margin:10px 0}.quiz-container ion-radio{margin-right:12px}.audio-guide-card{margin-bottom:16px}.audio-controls{display:flex;flex-direction:column;gap:16px;align-items:center}.play-button{width:64px;height:64px;--border-radius: 50%;font-size:32px}.audio-progress{width:100%}.time-display{display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px;color:var(--ion-color-medium)}.progress-bar{--bar-height: 4px;--knob-size: 20px}.volume-control{display:flex;align-items:center;gap:12px;width:100%;max-width:300px}.volume-slider{flex:1;--bar-height: 3px;--knob-size: 16px}.audio-info{margin-top:16px;padding-top:16px;border-top:1px solid var(--ion-color-light)}.audio-info p{margin:0;color:var(--ion-color-medium);line-height:1.6}.artifact-detail-container{padding:16px;max-width:1200px;margin:0 auto}.artifact-detail-image,.artifact-detail-video{width:100%;max-height:500px;object-fit:contain;border-radius:8px;background:#000}.detailed-description{line-height:1.8;font-size:16px;color:var(--ion-text-color);text-align:justify}.info-section{display:flex;flex-direction:column;gap:20px}.info-item{display:flex;gap:12px;align-items:flex-start}.info-icon{font-size:24px;color:var(--ion-color-primary);margin-top:4px}.info-item strong{display:block;color:var(--ion-color-primary);margin-bottom:4px;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.info-item p{margin:0;line-height:1.6;color:var(--ion-text-color)}ion-card{margin-bottom:16px}ion-card-title{display:flex;align-items:center;gap:8px}.help-content{--background: var(--ion-color-light)}.help-container{max-width:800px;margin:0 auto;padding:16px}.help-tips-list{padding-left:20px;line-height:1.8}.help-tips-list li{margin-bottom:12px}body.dark .help-content{--background: var(--ion-background-color)}.about-content{--background: var(--ion-color-light)}.about-container{max-width:800px;margin:0 auto;padding:16px}.about-hero{text-align:center}.about-logo{font-size:80px;margin:20px 0}.about-title{font-size:28px;font-weight:700;margin-bottom:8px}.about-version{color:var(--ion-color-medium);font-size:14px;margin:0}.about-description{font-size:16px;line-height:1.6;color:var(--ion-color-dark);margin-top:16px}.features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:16px}.feature-item{text-align:center;padding:16px}.feature-item ion-icon{font-size:48px;margin-bottom:12px}.feature-item h3{font-size:16px;font-weight:600;margin-bottom:8px}.feature-item p{font-size:14px;color:var(--ion-color-medium);line-height:1.5}.tech-stack{display:flex;flex-wrap:wrap;gap:8px;margin-top:16px}.tech-stack ion-chip{font-weight:500}.contact-info{margin-top:16px;line-height:1.8}.contact-info p{margin:8px 0}.about-footer{text-align:center;color:var(--ion-color-medium);font-size:14px}.about-footer p{margin:8px 0}@media (max-width: 768px){.about-logo{font-size:60px}.about-title{font-size:24px}.features-grid{grid-template-columns:1fr}}body.dark .about-content{--background: var(--ion-background-color)}body.dark .about-description{color:var(--ion-color-light)}.credits-content{--background: var(--ion-color-light)}.credits-container{max-width:800px;margin:0 auto;padding:16px}.credits-photographers{margin-top:16px;padding:12px;background:var(--ion-color-light-tint);border-radius:8px}.credits-photographers ul{margin:8px 0;padding-left:20px}.credits-photographers li{margin:6px 0;line-height:1.6}.credits-thanks-list{margin-top:16px;padding-left:20px;line-height:1.8}.credits-thanks-list li{margin:8px 0}.credits-footer{text-align:center;color:var(--ion-color-medium);font-size:14px;font-style:italic}ion-card-title ion-icon{vertical-align:middle;margin-right:8px}ion-item h2{font-weight:600;margin-bottom:4px}ion-item p{font-size:14px;color:var(--ion-color-medium);white-space:normal}body.dark .credits-content{--background: var(--ion-background-color)}body.dark .credits-photographers{background:var(--ion-color-dark-tint)}ion-menu{--width: 280px}ion-menu ion-list{padding:0}ion-menu ion-list-header{font-weight:600;font-size:14px;text-transform:uppercase;letter-spacing:.5px;padding:16px 16px 8px;margin-top:8px}ion-menu ion-item{--padding-start: 16px;--inner-padding-end: 16px;font-size:16px}ion-menu ion-item ion-icon{margin-right:16px;font-size:24px}ion-menu ion-item:hover{--background: var(--ion-color-light)}body.dark ion-menu ion-item:hover{--background: var(--ion-color-dark-tint)}:root{--ion-color-primary: #0054e9;--ion-color-primary-rgb: 0, 84, 233;--ion-color-primary-contrast: #fff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #004acd;--ion-color-primary-tint: #1a65eb;--ion-color-secondary: #0163aa;--ion-color-secondary-rgb: 1, 99, 170;--ion-color-secondary-contrast: #fff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #015796;--ion-color-secondary-tint: #1a73b3;--ion-color-tertiary: #6030ff;--ion-color-tertiary-rgb: 96, 48, 255;--ion-color-tertiary-contrast: #fff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #542ae0;--ion-color-tertiary-tint: #7045ff;--ion-color-success: #2dd55b;--ion-color-success-rgb: 45, 213, 91;--ion-color-success-contrast: #000;--ion-color-success-contrast-rgb: 0, 0, 0;--ion-color-success-shade: #28bb50;--ion-color-success-tint: #42d96b;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #c5000f;--ion-color-danger-rgb: 197, 0, 15;--ion-color-danger-contrast: #fff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #ad000d;--ion-color-danger-tint: #cb1a27;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9;--ion-color-medium: #636469;--ion-color-medium-rgb: 99, 100, 105;--ion-color-medium-contrast: #fff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #57585c;--ion-color-medium-tint: #737478;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #fff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e}html.ios{--ion-default-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Roboto", sans-serif}html.md{--ion-default-font: "Roboto", "Helvetica Neue", sans-serif}html{--ion-dynamic-font: -apple-system-body;--ion-font-family: var(--ion-default-font)}body{background:var(--ion-background-color);color:var(--ion-text-color)}body.backdrop-no-scroll{overflow:hidden}html.ios ion-modal.modal-card ion-header ion-toolbar:first-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:first-of-type,html.ios ion-modal ion-footer ion-toolbar:first-of-type,html.ios ion-footer.modal-footer-moving ion-toolbar:first-of-type{padding-top:6px}html.ios ion-modal.modal-card ion-header ion-toolbar:last-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:last-of-type{padding-bottom:6px}html.ios ion-modal ion-toolbar,html.ios .modal-footer-moving ion-toolbar{padding-right:calc(var(--ion-safe-area-right) + 8px);padding-left:calc(var(--ion-safe-area-left) + 8px)}@media screen and (min-width: 768px){html.ios ion-modal.modal-card:first-of-type{--backdrop-opacity: .18}}ion-modal.modal-default.show-modal~ion-modal.modal-default{--backdrop-opacity: 0;--box-shadow: none}html.ios ion-modal.modal-card .ion-page{border-top-left-radius:var(--border-radius)}.ion-color-primary{--ion-color-base: var(--ion-color-primary, #0054e9) !important;--ion-color-base-rgb: var(--ion-color-primary-rgb, 0, 84, 233) !important;--ion-color-contrast: var(--ion-color-primary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-primary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-primary-shade, #004acd) !important;--ion-color-tint: var(--ion-color-primary-tint, #1a65eb) !important}.ion-color-secondary{--ion-color-base: var(--ion-color-secondary, #0163aa) !important;--ion-color-base-rgb: var(--ion-color-secondary-rgb, 1, 99, 170) !important;--ion-color-contrast: var(--ion-color-secondary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-secondary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-secondary-shade, #015796) !important;--ion-color-tint: var(--ion-color-secondary-tint, #1a73b3) !important}.ion-color-tertiary{--ion-color-base: var(--ion-color-tertiary, #6030ff) !important;--ion-color-base-rgb: var(--ion-color-tertiary-rgb, 96, 48, 255) !important;--ion-color-contrast: var(--ion-color-tertiary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-tertiary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-tertiary-shade, #542ae0) !important;--ion-color-tint: var(--ion-color-tertiary-tint, #7045ff) !important}.ion-color-success{--ion-color-base: var(--ion-color-success, #2dd55b) !important;--ion-color-base-rgb: var(--ion-color-success-rgb, 45, 213, 91) !important;--ion-color-contrast: var(--ion-color-success-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-success-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-success-shade, #28bb50) !important;--ion-color-tint: var(--ion-color-success-tint, #42d96b) !important}.ion-color-warning{--ion-color-base: var(--ion-color-warning, #ffc409) !important;--ion-color-base-rgb: var(--ion-color-warning-rgb, 255, 196, 9) !important;--ion-color-contrast: var(--ion-color-warning-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-warning-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-warning-shade, #e0ac08) !important;--ion-color-tint: var(--ion-color-warning-tint, #ffca22) !important}.ion-color-danger{--ion-color-base: var(--ion-color-danger, #c5000f) !important;--ion-color-base-rgb: var(--ion-color-danger-rgb, 197, 0, 15) !important;--ion-color-contrast: var(--ion-color-danger-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-danger-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-danger-shade, #ad000d) !important;--ion-color-tint: var(--ion-color-danger-tint, #cb1a27) !important}.ion-color-light{--ion-color-base: var(--ion-color-light, #f4f5f8) !important;--ion-color-base-rgb: var(--ion-color-light-rgb, 244, 245, 248) !important;--ion-color-contrast: var(--ion-color-light-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-light-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-light-shade, #d7d8da) !important;--ion-color-tint: var(--ion-color-light-tint, #f5f6f9) !important}.ion-color-medium{--ion-color-base: var(--ion-color-medium, #636469) !important;--ion-color-base-rgb: var(--ion-color-medium-rgb, 99, 100, 105) !important;--ion-color-contrast: var(--ion-color-medium-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-medium-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-medium-shade, #57585c) !important;--ion-color-tint: var(--ion-color-medium-tint, #737478) !important}.ion-color-dark{--ion-color-base: var(--ion-color-dark, #222428) !important;--ion-color-base-rgb: var(--ion-color-dark-rgb, 34, 36, 40) !important;--ion-color-contrast: var(--ion-color-dark-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-dark-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-dark-shade, #1e2023) !important;--ion-color-tint: var(--ion-color-dark-tint, #383a3e) !important}.ion-page{left:0;right:0;top:0;bottom:0;display:flex;position:absolute;flex-direction:column;justify-content:space-between;contain:layout size style;z-index:0}ion-modal>.ion-page{position:relative;contain:layout style;height:100%}.split-pane-visible>.ion-page.split-pane-main{position:relative}ion-route,ion-route-redirect,ion-router,ion-select-option,ion-nav-controller,ion-menu-controller,ion-action-sheet-controller,ion-alert-controller,ion-loading-controller,ion-modal-controller,ion-picker-controller,ion-popover-controller,ion-toast-controller,.ion-page-hidden{display:none!important}.ion-page-invisible{opacity:0}.can-go-back>ion-header ion-back-button{display:block}html.plt-ios.plt-hybrid,html.plt-ios.plt-pwa{--ion-statusbar-padding: 20px}@supports (padding-top: 20px){html{--ion-safe-area-top: var(--ion-statusbar-padding)}}@supports (padding-top: env(safe-area-inset-top)){html{--ion-safe-area-top: env(safe-area-inset-top);--ion-safe-area-bottom: env(safe-area-inset-bottom);--ion-safe-area-left: env(safe-area-inset-left);--ion-safe-area-right: env(safe-area-inset-right)}}ion-card.ion-color .ion-inherit-color,ion-card-header.ion-color .ion-inherit-color{color:inherit}.menu-content{transform:translateZ(0)}.menu-content-open{cursor:pointer;touch-action:manipulation;pointer-events:none;overflow-y:hidden}.menu-content-open ion-content{--overflow: hidden}.menu-content-open .ion-content-scroll-host{overflow:hidden}.ios .menu-content-reveal{box-shadow:-8px 0 42px rgba(0,0,0,.08)}[dir=rtl].ios .menu-content-reveal{box-shadow:8px 0 42px rgba(0,0,0,.08)}.md .menu-content-reveal,.md .menu-content-push{box-shadow:4px 0 16px rgba(0,0,0,.18)}ion-accordion-group.accordion-group-expand-inset>ion-accordion:first-of-type{border-top-left-radius:8px;border-top-right-radius:8px}ion-accordion-group.accordion-group-expand-inset>ion-accordion:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px}ion-accordion-group>ion-accordion:last-of-type ion-item[slot=header]{--border-width: 0px}ion-accordion.accordion-animated>[slot=header] .ion-accordion-toggle-icon{transition:.3s transform cubic-bezier(.25,.8,.5,1)}@media (prefers-reduced-motion: reduce){ion-accordion .ion-accordion-toggle-icon{transition:none!important}}ion-accordion.accordion-expanding>[slot=header] .ion-accordion-toggle-icon,ion-accordion.accordion-expanded>[slot=header] .ion-accordion-toggle-icon{transform:rotate(180deg)}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-previous ion-item[slot=header]{--border-width: 0px;--inner-border-width: 0px}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanding:first-of-type,ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanded:first-of-type{margin-top:0}ion-input input::-webkit-date-and-time-value{text-align:start}.ion-datetime-button-overlay{--width: fit-content;--height: fit-content}.ion-datetime-button-overlay ion-datetime.datetime-grid{width:320px;min-height:320px}[ion-last-focus],header[tabindex="-1"]:focus,[role=banner][tabindex="-1"]:focus,main[tabindex="-1"]:focus,[role=main][tabindex="-1"]:focus,h1[tabindex="-1"]:focus,[role=heading][aria-level="1"][tabindex="-1"]:focus{outline:none}.popover-viewport:has(>ion-content){overflow:hidden}@supports not selector(:has(> ion-content)){.popover-viewport{overflow:hidden}}audio,canvas,progress,video{vertical-align:baseline}audio:not([controls]){display:none;height:0}b,strong{font-weight:700}img{max-width:100%}hr{height:1px;border-width:0;box-sizing:content-box}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}label,input,select,textarea{font-family:inherit;line-height:normal}textarea{overflow:auto;height:auto;font:inherit;color:inherit}textarea::placeholder{padding-left:2px}form,input,optgroup,select{margin:0;font:inherit;color:inherit}html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}a,a div,a span,a ion-icon,a ion-label,button,button div,button span,button ion-icon,button ion-label,.ion-tappable,[tappable],[tappable] div,[tappable] span,[tappable] ion-icon,[tappable] ion-label,input,textarea{touch-action:manipulation}a ion-label,button ion-label{pointer-events:none}button{padding:0;border:0;border-radius:0;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;cursor:pointer;-webkit-appearance:button}[tappable]{cursor:pointer}a[disabled],button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}html{width:100%;height:100%;-webkit-text-size-adjust:100%;text-size-adjust:100%}html.ion-ce body{display:block}html.plt-pwa{height:100vh}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin:0;padding:0;position:fixed;width:100%;max-width:100%;height:100%;max-height:100%;transform:translateZ(0);text-rendering:optimizeLegibility;overflow:hidden;touch-action:manipulation;-webkit-user-drag:none;-ms-content-zooming:none;word-wrap:break-word;overscroll-behavior-y:none;-webkit-text-size-adjust:none;text-size-adjust:none}html{font-family:var(--ion-font-family)}@supports (-webkit-touch-callout: none){html{font:var(--ion-dynamic-font, 16px var(--ion-font-family))}}a{background-color:transparent;color:var(--ion-color-primary, #0054e9)}h1,h2,h3,h4,h5,h6{margin-top:16px;margin-bottom:10px;font-weight:500;line-height:1.2}h1{margin-top:20px;font-size:1.625rem}h2{margin-top:18px;font-size:1.5rem}h3{font-size:1.375rem}h4{font-size:1.25rem}h5{font-size:1.125rem}h6{font-size:1rem}small{font-size:75%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}.ion-no-padding{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;padding:0}.ion-padding{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-top{--padding-top: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px)}.ion-padding-start{--padding-start: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px)}.ion-padding-end{--padding-end: var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-padding-bottom{--padding-bottom: var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-vertical{--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-horizontal{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-no-margin{--margin-start: 0;--margin-end: 0;--margin-top: 0;--margin-bottom: 0;margin:0}.ion-margin{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-top{--margin-top: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px)}.ion-margin-start{--margin-start: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px)}.ion-margin-end{--margin-end: var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-margin-bottom{--margin-bottom: var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-vertical{--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-horizontal{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-float-left{float:left!important}.ion-float-right{float:right!important}.ion-float-start{float:left!important}:host-context([dir=rtl]) .ion-float-start{float:right!important}[dir=rtl] .ion-float-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-start:dir(rtl){float:right!important}}.ion-float-end{float:right!important}:host-context([dir=rtl]) .ion-float-end{float:left!important}[dir=rtl] .ion-float-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-end:dir(rtl){float:left!important}}@media (min-width: 576px){.ion-float-sm-left{float:left!important}.ion-float-sm-right{float:right!important}.ion-float-sm-start{float:left!important}:host-context([dir=rtl]) .ion-float-sm-start{float:right!important}[dir=rtl] .ion-float-sm-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-sm-start:dir(rtl){float:right!important}}.ion-float-sm-end{float:right!important}:host-context([dir=rtl]) .ion-float-sm-end{float:left!important}[dir=rtl] .ion-float-sm-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-sm-end:dir(rtl){float:left!important}}}@media (min-width: 768px){.ion-float-md-left{float:left!important}.ion-float-md-right{float:right!important}.ion-float-md-start{float:left!important}:host-context([dir=rtl]) .ion-float-md-start{float:right!important}[dir=rtl] .ion-float-md-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-md-start:dir(rtl){float:right!important}}.ion-float-md-end{float:right!important}:host-context([dir=rtl]) .ion-float-md-end{float:left!important}[dir=rtl] .ion-float-md-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-md-end:dir(rtl){float:left!important}}}@media (min-width: 992px){.ion-float-lg-left{float:left!important}.ion-float-lg-right{float:right!important}.ion-float-lg-start{float:left!important}:host-context([dir=rtl]) .ion-float-lg-start{float:right!important}[dir=rtl] .ion-float-lg-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-lg-start:dir(rtl){float:right!important}}.ion-float-lg-end{float:right!important}:host-context([dir=rtl]) .ion-float-lg-end{float:left!important}[dir=rtl] .ion-float-lg-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-lg-end:dir(rtl){float:left!important}}}@media (min-width: 1200px){.ion-float-xl-left{float:left!important}.ion-float-xl-right{float:right!important}.ion-float-xl-start{float:left!important}:host-context([dir=rtl]) .ion-float-xl-start{float:right!important}[dir=rtl] .ion-float-xl-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-xl-start:dir(rtl){float:right!important}}.ion-float-xl-end{float:right!important}:host-context([dir=rtl]) .ion-float-xl-end{float:left!important}[dir=rtl] .ion-float-xl-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-xl-end:dir(rtl){float:left!important}}}.ion-text-center{text-align:center!important}.ion-text-justify{text-align:justify!important}.ion-text-start{text-align:start!important}.ion-text-end{text-align:end!important}.ion-text-left{text-align:left!important}.ion-text-right{text-align:right!important}.ion-text-nowrap{white-space:nowrap!important}.ion-text-wrap{white-space:normal!important}@media (min-width: 576px){.ion-text-sm-center{text-align:center!important}.ion-text-sm-justify{text-align:justify!important}.ion-text-sm-start{text-align:start!important}.ion-text-sm-end{text-align:end!important}.ion-text-sm-left{text-align:left!important}.ion-text-sm-right{text-align:right!important}.ion-text-sm-nowrap{white-space:nowrap!important}.ion-text-sm-wrap{white-space:normal!important}}@media (min-width: 768px){.ion-text-md-center{text-align:center!important}.ion-text-md-justify{text-align:justify!important}.ion-text-md-start{text-align:start!important}.ion-text-md-end{text-align:end!important}.ion-text-md-left{text-align:left!important}.ion-text-md-right{text-align:right!important}.ion-text-md-nowrap{white-space:nowrap!important}.ion-text-md-wrap{white-space:normal!important}}@media (min-width: 992px){.ion-text-lg-center{text-align:center!important}.ion-text-lg-justify{text-align:justify!important}.ion-text-lg-start{text-align:start!important}.ion-text-lg-end{text-align:end!important}.ion-text-lg-left{text-align:left!important}.ion-text-lg-right{text-align:right!important}.ion-text-lg-nowrap{white-space:nowrap!important}.ion-text-lg-wrap{white-space:normal!important}}@media (min-width: 1200px){.ion-text-xl-center{text-align:center!important}.ion-text-xl-justify{text-align:justify!important}.ion-text-xl-start{text-align:start!important}.ion-text-xl-end{text-align:end!important}.ion-text-xl-left{text-align:left!important}.ion-text-xl-right{text-align:right!important}.ion-text-xl-nowrap{white-space:nowrap!important}.ion-text-xl-wrap{white-space:normal!important}}.ion-text-uppercase{text-transform:uppercase!important}.ion-text-lowercase{text-transform:lowercase!important}.ion-text-capitalize{text-transform:capitalize!important}@media (min-width: 576px){.ion-text-sm-uppercase{text-transform:uppercase!important}.ion-text-sm-lowercase{text-transform:lowercase!important}.ion-text-sm-capitalize{text-transform:capitalize!important}}@media (min-width: 768px){.ion-text-md-uppercase{text-transform:uppercase!important}.ion-text-md-lowercase{text-transform:lowercase!important}.ion-text-md-capitalize{text-transform:capitalize!important}}@media (min-width: 992px){.ion-text-lg-uppercase{text-transform:uppercase!important}.ion-text-lg-lowercase{text-transform:lowercase!important}.ion-text-lg-capitalize{text-transform:capitalize!important}}@media (min-width: 1200px){.ion-text-xl-uppercase{text-transform:uppercase!important}.ion-text-xl-lowercase{text-transform:lowercase!important}.ion-text-xl-capitalize{text-transform:capitalize!important}}.ion-align-content-start{align-content:flex-start!important}.ion-align-content-end{align-content:flex-end!important}.ion-align-content-center{align-content:center!important}.ion-align-content-between{align-content:space-between!important}.ion-align-content-around{align-content:space-around!important}.ion-align-content-stretch{align-content:stretch!important}@media (min-width: 576px){.ion-align-content-sm-start{align-content:flex-start!important}.ion-align-content-sm-end{align-content:flex-end!important}.ion-align-content-sm-center{align-content:center!important}.ion-align-content-sm-between{align-content:space-between!important}.ion-align-content-sm-around{align-content:space-around!important}.ion-align-content-sm-stretch{align-content:stretch!important}}@media (min-width: 768px){.ion-align-content-md-start{align-content:flex-start!important}.ion-align-content-md-end{align-content:flex-end!important}.ion-align-content-md-center{align-content:center!important}.ion-align-content-md-between{align-content:space-between!important}.ion-align-content-md-around{align-content:space-around!important}.ion-align-content-md-stretch{align-content:stretch!important}}@media (min-width: 992px){.ion-align-content-lg-start{align-content:flex-start!important}.ion-align-content-lg-end{align-content:flex-end!important}.ion-align-content-lg-center{align-content:center!important}.ion-align-content-lg-between{align-content:space-between!important}.ion-align-content-lg-around{align-content:space-around!important}.ion-align-content-lg-stretch{align-content:stretch!important}}@media (min-width: 1200px){.ion-align-content-xl-start{align-content:flex-start!important}.ion-align-content-xl-end{align-content:flex-end!important}.ion-align-content-xl-center{align-content:center!important}.ion-align-content-xl-between{align-content:space-between!important}.ion-align-content-xl-around{align-content:space-around!important}.ion-align-content-xl-stretch{align-content:stretch!important}}.ion-align-items-start{align-items:start!important}.ion-align-items-end{align-items:end!important}.ion-align-items-center{align-items:center!important}.ion-align-items-stretch{align-items:stretch!important}.ion-align-items-baseline{align-items:baseline!important}@media (min-width: 576px){.ion-align-items-sm-start{align-items:start!important}.ion-align-items-sm-end{align-items:end!important}.ion-align-items-sm-center{align-items:center!important}.ion-align-items-sm-stretch{align-items:stretch!important}.ion-align-items-sm-baseline{align-items:baseline!important}}@media (min-width: 768px){.ion-align-items-md-start{align-items:start!important}.ion-align-items-md-end{align-items:end!important}.ion-align-items-md-center{align-items:center!important}.ion-align-items-md-stretch{align-items:stretch!important}.ion-align-items-md-baseline{align-items:baseline!important}}@media (min-width: 992px){.ion-align-items-lg-start{align-items:start!important}.ion-align-items-lg-end{align-items:end!important}.ion-align-items-lg-center{align-items:center!important}.ion-align-items-lg-stretch{align-items:stretch!important}.ion-align-items-lg-baseline{align-items:baseline!important}}@media (min-width: 1200px){.ion-align-items-xl-start{align-items:start!important}.ion-align-items-xl-end{align-items:end!important}.ion-align-items-xl-center{align-items:center!important}.ion-align-items-xl-stretch{align-items:stretch!important}.ion-align-items-xl-baseline{align-items:baseline!important}}.ion-align-self-start{align-self:start!important}.ion-align-self-end{align-self:end!important}.ion-align-self-center{align-self:center!important}.ion-align-self-stretch{align-self:stretch!important}.ion-align-self-baseline{align-self:baseline!important}.ion-align-self-auto{align-self:auto!important}@media (min-width: 576px){.ion-align-self-sm-start{align-self:start!important}.ion-align-self-sm-end{align-self:end!important}.ion-align-self-sm-center{align-self:center!important}.ion-align-self-sm-stretch{align-self:stretch!important}.ion-align-self-sm-baseline{align-self:baseline!important}.ion-align-self-sm-auto{align-self:auto!important}}@media (min-width: 768px){.ion-align-self-md-start{align-self:start!important}.ion-align-self-md-end{align-self:end!important}.ion-align-self-md-center{align-self:center!important}.ion-align-self-md-stretch{align-self:stretch!important}.ion-align-self-md-baseline{align-self:baseline!important}.ion-align-self-md-auto{align-self:auto!important}}@media (min-width: 992px){.ion-align-self-lg-start{align-self:start!important}.ion-align-self-lg-end{align-self:end!important}.ion-align-self-lg-center{align-self:center!important}.ion-align-self-lg-stretch{align-self:stretch!important}.ion-align-self-lg-baseline{align-self:baseline!important}.ion-align-self-lg-auto{align-self:auto!important}}@media (min-width: 1200px){.ion-align-self-xl-start{align-self:start!important}.ion-align-self-xl-end{align-self:end!important}.ion-align-self-xl-center{align-self:center!important}.ion-align-self-xl-stretch{align-self:stretch!important}.ion-align-self-xl-baseline{align-self:baseline!important}.ion-align-self-xl-auto{align-self:auto!important}}.ion-justify-content-start{justify-content:flex-start!important}.ion-justify-content-end{justify-content:flex-end!important}.ion-justify-content-center{justify-content:center!important}.ion-justify-content-between{justify-content:space-between!important}.ion-justify-content-around{justify-content:space-around!important}.ion-justify-content-evenly{justify-content:space-evenly!important}@media (min-width: 576px){.ion-justify-content-sm-start{justify-content:flex-start!important}.ion-justify-content-sm-end{justify-content:flex-end!important}.ion-justify-content-sm-center{justify-content:center!important}.ion-justify-content-sm-between{justify-content:space-between!important}.ion-justify-content-sm-around{justify-content:space-around!important}.ion-justify-content-sm-evenly{justify-content:space-evenly!important}}@media (min-width: 768px){.ion-justify-content-md-start{justify-content:flex-start!important}.ion-justify-content-md-end{justify-content:flex-end!important}.ion-justify-content-md-center{justify-content:center!important}.ion-justify-content-md-between{justify-content:space-between!important}.ion-justify-content-md-around{justify-content:space-around!important}.ion-justify-content-md-evenly{justify-content:space-evenly!important}}@media (min-width: 992px){.ion-justify-content-lg-start{justify-content:flex-start!important}.ion-justify-content-lg-end{justify-content:flex-end!important}.ion-justify-content-lg-center{justify-content:center!important}.ion-justify-content-lg-between{justify-content:space-between!important}.ion-justify-content-lg-around{justify-content:space-around!important}.ion-justify-content-lg-evenly{justify-content:space-evenly!important}}@media (min-width: 1200px){.ion-justify-content-xl-start{justify-content:flex-start!important}.ion-justify-content-xl-end{justify-content:flex-end!important}.ion-justify-content-xl-center{justify-content:center!important}.ion-justify-content-xl-between{justify-content:space-between!important}.ion-justify-content-xl-around{justify-content:space-around!important}.ion-justify-content-xl-evenly{justify-content:space-evenly!important}}.ion-flex-row{flex-direction:row!important}.ion-flex-row-reverse{flex-direction:row-reverse!important}.ion-flex-column{flex-direction:column!important}.ion-flex-column-reverse{flex-direction:column-reverse!important}@media (min-width: 576px){.ion-flex-sm-row{flex-direction:row!important}.ion-flex-sm-row-reverse{flex-direction:row-reverse!important}.ion-flex-sm-column{flex-direction:column!important}.ion-flex-sm-column-reverse{flex-direction:column-reverse!important}}@media (min-width: 768px){.ion-flex-md-row{flex-direction:row!important}.ion-flex-md-row-reverse{flex-direction:row-reverse!important}.ion-flex-md-column{flex-direction:column!important}.ion-flex-md-column-reverse{flex-direction:column-reverse!important}}@media (min-width: 992px){.ion-flex-lg-row{flex-direction:row!important}.ion-flex-lg-row-reverse{flex-direction:row-reverse!important}.ion-flex-lg-column{flex-direction:column!important}.ion-flex-lg-column-reverse{flex-direction:column-reverse!important}}@media (min-width: 1200px){.ion-flex-xl-row{flex-direction:row!important}.ion-flex-xl-row-reverse{flex-direction:row-reverse!important}.ion-flex-xl-column{flex-direction:column!important}.ion-flex-xl-column-reverse{flex-direction:column-reverse!important}}.ion-wrap{flex-wrap:wrap!important}.ion-nowrap{flex-wrap:nowrap!important}.ion-wrap-reverse{flex-wrap:wrap-reverse!important}.ion-flex-wrap{flex-wrap:wrap!important}.ion-flex-nowrap{flex-wrap:nowrap!important}.ion-flex-wrap-reverse{flex-wrap:wrap-reverse!important}@media (min-width: 576px){.ion-flex-sm-wrap{flex-wrap:wrap!important}.ion-flex-sm-nowrap{flex-wrap:nowrap!important}.ion-flex-sm-wrap-reverse{flex-wrap:wrap-reverse!important}}@media (min-width: 768px){.ion-flex-md-wrap{flex-wrap:wrap!important}.ion-flex-md-nowrap{flex-wrap:nowrap!important}.ion-flex-md-wrap-reverse{flex-wrap:wrap-reverse!important}}@media (min-width: 992px){.ion-flex-lg-wrap{flex-wrap:wrap!important}.ion-flex-lg-nowrap{flex-wrap:nowrap!important}.ion-flex-lg-wrap-reverse{flex-wrap:wrap-reverse!important}}@media (min-width: 1200px){.ion-flex-xl-wrap{flex-wrap:wrap!important}.ion-flex-xl-nowrap{flex-wrap:nowrap!important}.ion-flex-xl-wrap-reverse{flex-wrap:wrap-reverse!important}}.ion-flex-1{flex:1!important}.ion-flex-auto{flex:auto!important}.ion-flex-initial{flex:initial!important}.ion-flex-none{flex:none!important}@media (min-width: 576px){.ion-flex-sm-1{flex:1!important}.ion-flex-sm-auto{flex:auto!important}.ion-flex-sm-initial{flex:initial!important}.ion-flex-sm-none{flex:none!important}}@media (min-width: 768px){.ion-flex-md-1{flex:1!important}.ion-flex-md-auto{flex:auto!important}.ion-flex-md-initial{flex:initial!important}.ion-flex-md-none{flex:none!important}}@media (min-width: 992px){.ion-flex-lg-1{flex:1!important}.ion-flex-lg-auto{flex:auto!important}.ion-flex-lg-initial{flex:initial!important}.ion-flex-lg-none{flex:none!important}}@media (min-width: 1200px){.ion-flex-xl-1{flex:1!important}.ion-flex-xl-auto{flex:auto!important}.ion-flex-xl-initial{flex:initial!important}.ion-flex-xl-none{flex:none!important}}.ion-flex-grow-0{flex-grow:0!important}.ion-flex-grow-1{flex-grow:1!important}.ion-flex-shrink-0{flex-shrink:0!important}.ion-flex-shrink-1{flex-shrink:1!important}@media (min-width: 576px){.ion-flex-sm-grow-0{flex-grow:0!important}.ion-flex-sm-grow-1{flex-grow:1!important}.ion-flex-sm-shrink-0{flex-shrink:0!important}.ion-flex-sm-shrink-1{flex-shrink:1!important}}@media (min-width: 768px){.ion-flex-md-grow-0{flex-grow:0!important}.ion-flex-md-grow-1{flex-grow:1!important}.ion-flex-md-shrink-0{flex-shrink:0!important}.ion-flex-md-shrink-1{flex-shrink:1!important}}@media (min-width: 992px){.ion-flex-lg-grow-0{flex-grow:0!important}.ion-flex-lg-grow-1{flex-grow:1!important}.ion-flex-lg-shrink-0{flex-shrink:0!important}.ion-flex-lg-shrink-1{flex-shrink:1!important}}@media (min-width: 1200px){.ion-flex-xl-grow-0{flex-grow:0!important}.ion-flex-xl-grow-1{flex-grow:1!important}.ion-flex-xl-shrink-0{flex-shrink:0!important}.ion-flex-xl-shrink-1{flex-shrink:1!important}}.ion-order-first{order:-1!important}.ion-order-0{order:0!important}.ion-order-1{order:1!important}.ion-order-2{order:2!important}.ion-order-3{order:3!important}.ion-order-4{order:4!important}.ion-order-5{order:5!important}.ion-order-6{order:6!important}.ion-order-7{order:7!important}.ion-order-8{order:8!important}.ion-order-9{order:9!important}.ion-order-10{order:10!important}.ion-order-11{order:11!important}.ion-order-12{order:12!important}.ion-order-last{order:13!important}@media (min-width: 576px){.ion-order-sm-first{order:-1!important}.ion-order-sm-0{order:0!important}.ion-order-sm-1{order:1!important}.ion-order-sm-2{order:2!important}.ion-order-sm-3{order:3!important}.ion-order-sm-4{order:4!important}.ion-order-sm-5{order:5!important}.ion-order-sm-6{order:6!important}.ion-order-sm-7{order:7!important}.ion-order-sm-8{order:8!important}.ion-order-sm-9{order:9!important}.ion-order-sm-10{order:10!important}.ion-order-sm-11{order:11!important}.ion-order-sm-12{order:12!important}.ion-order-sm-last{order:13!important}}@media (min-width: 768px){.ion-order-md-first{order:-1!important}.ion-order-md-0{order:0!important}.ion-order-md-1{order:1!important}.ion-order-md-2{order:2!important}.ion-order-md-3{order:3!important}.ion-order-md-4{order:4!important}.ion-order-md-5{order:5!important}.ion-order-md-6{order:6!important}.ion-order-md-7{order:7!important}.ion-order-md-8{order:8!important}.ion-order-md-9{order:9!important}.ion-order-md-10{order:10!important}.ion-order-md-11{order:11!important}.ion-order-md-12{order:12!important}.ion-order-md-last{order:13!important}}@media (min-width: 992px){.ion-order-lg-first{order:-1!important}.ion-order-lg-0{order:0!important}.ion-order-lg-1{order:1!important}.ion-order-lg-2{order:2!important}.ion-order-lg-3{order:3!important}.ion-order-lg-4{order:4!important}.ion-order-lg-5{order:5!important}.ion-order-lg-6{order:6!important}.ion-order-lg-7{order:7!important}.ion-order-lg-8{order:8!important}.ion-order-lg-9{order:9!important}.ion-order-lg-10{order:10!important}.ion-order-lg-11{order:11!important}.ion-order-lg-12{order:12!important}.ion-order-lg-last{order:13!important}}@media (min-width: 1200px){.ion-order-xl-first{order:-1!important}.ion-order-xl-0{order:0!important}.ion-order-xl-1{order:1!important}.ion-order-xl-2{order:2!important}.ion-order-xl-3{order:3!important}.ion-order-xl-4{order:4!important}.ion-order-xl-5{order:5!important}.ion-order-xl-6{order:6!important}.ion-order-xl-7{order:7!important}.ion-order-xl-8{order:8!important}.ion-order-xl-9{order:9!important}.ion-order-xl-10{order:10!important}.ion-order-xl-11{order:11!important}.ion-order-xl-12{order:12!important}.ion-order-xl-last{order:13!important}}.ion-hide,.ion-hide-up,.ion-hide-down{display:none!important}@media (min-width: 576px){.ion-hide-sm-up{display:none!important}}@media (max-width: 575.98px){.ion-hide-sm-down{display:none!important}}@media (min-width: 768px){.ion-hide-md-up{display:none!important}}@media (max-width: 767.98px){.ion-hide-md-down{display:none!important}}@media (min-width: 992px){.ion-hide-lg-up{display:none!important}}@media (max-width: 991.98px){.ion-hide-lg-down{display:none!important}}@media (min-width: 1200px){.ion-hide-xl-up{display:none!important}}@media (max-width: 1199.98px){.ion-hide-xl-down{display:none!important}}.ion-display-none{display:none!important}@media (min-width: 576px){.ion-display-sm-none{display:none!important}}@media (min-width: 768px){.ion-display-md-none{display:none!important}}@media (min-width: 992px){.ion-display-lg-none{display:none!important}}@media (min-width: 1200px){.ion-display-xl-none{display:none!important}}.ion-display-inline{display:inline!important}@media (min-width: 576px){.ion-display-sm-inline{display:inline!important}}@media (min-width: 768px){.ion-display-md-inline{display:inline!important}}@media (min-width: 992px){.ion-display-lg-inline{display:inline!important}}@media (min-width: 1200px){.ion-display-xl-inline{display:inline!important}}.ion-display-inline-block{display:inline-block!important}@media (min-width: 576px){.ion-display-sm-inline-block{display:inline-block!important}}@media (min-width: 768px){.ion-display-md-inline-block{display:inline-block!important}}@media (min-width: 992px){.ion-display-lg-inline-block{display:inline-block!important}}@media (min-width: 1200px){.ion-display-xl-inline-block{display:inline-block!important}}.ion-display-block{display:block!important}@media (min-width: 576px){.ion-display-sm-block{display:block!important}}@media (min-width: 768px){.ion-display-md-block{display:block!important}}@media (min-width: 992px){.ion-display-lg-block{display:block!important}}@media (min-width: 1200px){.ion-display-xl-block{display:block!important}}.ion-display-flex{display:flex!important}@media (min-width: 576px){.ion-display-sm-flex{display:flex!important}}@media (min-width: 768px){.ion-display-md-flex{display:flex!important}}@media (min-width: 992px){.ion-display-lg-flex{display:flex!important}}@media (min-width: 1200px){.ion-display-xl-flex{display:flex!important}}.ion-display-inline-flex{display:inline-flex!important}@media (min-width: 576px){.ion-display-sm-inline-flex{display:inline-flex!important}}@media (min-width: 768px){.ion-display-md-inline-flex{display:inline-flex!important}}@media (min-width: 992px){.ion-display-lg-inline-flex{display:inline-flex!important}}@media (min-width: 1200px){.ion-display-xl-inline-flex{display:inline-flex!important}}.ion-display-grid{display:grid!important}@media (min-width: 576px){.ion-display-sm-grid{display:grid!important}}@media (min-width: 768px){.ion-display-md-grid{display:grid!important}}@media (min-width: 992px){.ion-display-lg-grid{display:grid!important}}@media (min-width: 1200px){.ion-display-xl-grid{display:grid!important}}.ion-display-inline-grid{display:inline-grid!important}@media (min-width: 576px){.ion-display-sm-inline-grid{display:inline-grid!important}}@media (min-width: 768px){.ion-display-md-inline-grid{display:inline-grid!important}}@media (min-width: 992px){.ion-display-lg-inline-grid{display:inline-grid!important}}@media (min-width: 1200px){.ion-display-xl-inline-grid{display:inline-grid!important}}.ion-display-table{display:table!important}@media (min-width: 576px){.ion-display-sm-table{display:table!important}}@media (min-width: 768px){.ion-display-md-table{display:table!important}}@media (min-width: 992px){.ion-display-lg-table{display:table!important}}@media (min-width: 1200px){.ion-display-xl-table{display:table!important}}.ion-display-table-cell{display:table-cell!important}@media (min-width: 576px){.ion-display-sm-table-cell{display:table-cell!important}}@media (min-width: 768px){.ion-display-md-table-cell{display:table-cell!important}}@media (min-width: 992px){.ion-display-lg-table-cell{display:table-cell!important}}@media (min-width: 1200px){.ion-display-xl-table-cell{display:table-cell!important}}.ion-display-table-row{display:table-row!important}@media (min-width: 576px){.ion-display-sm-table-row{display:table-row!important}}@media (min-width: 768px){.ion-display-md-table-row{display:table-row!important}}@media (min-width: 992px){.ion-display-lg-table-row{display:table-row!important}}@media (min-width: 1200px){.ion-display-xl-table-row{display:table-row!important}}.ion-palette-dark{--ion-color-primary: #4d8dff;--ion-color-primary-rgb: 77, 141, 255;--ion-color-primary-contrast: #000;--ion-color-primary-contrast-rgb: 0, 0, 0;--ion-color-primary-shade: #447ce0;--ion-color-primary-tint: #5f98ff;--ion-color-secondary: #46b1ff;--ion-color-secondary-rgb: 70, 177, 255;--ion-color-secondary-contrast: #000;--ion-color-secondary-contrast-rgb: 0, 0, 0;--ion-color-secondary-shade: #3e9ce0;--ion-color-secondary-tint: #59b9ff;--ion-color-tertiary: #8482fb;--ion-color-tertiary-rgb: 132, 130, 251;--ion-color-tertiary-contrast: #000;--ion-color-tertiary-contrast-rgb: 0, 0, 0;--ion-color-tertiary-shade: #7472dd;--ion-color-tertiary-tint: #908ffb;--ion-color-success: #2dd55b;--ion-color-success-rgb: 45, 213, 91;--ion-color-success-contrast: #000;--ion-color-success-contrast-rgb: 0, 0, 0;--ion-color-success-shade: #28bb50;--ion-color-success-tint: #42d96b;--ion-color-warning: #ffce31;--ion-color-warning-rgb: 255, 206, 49;--ion-color-warning-contrast: #000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0b52b;--ion-color-warning-tint: #ffd346;--ion-color-danger: #f24c58;--ion-color-danger-rgb: 242, 76, 88;--ion-color-danger-contrast: #000;--ion-color-danger-contrast-rgb: 0, 0, 0;--ion-color-danger-shade: #d5434d;--ion-color-danger-tint: #f35e69;--ion-color-light: #222428;--ion-color-light-rgb: 34, 36, 40;--ion-color-light-contrast: #fff;--ion-color-light-contrast-rgb: 255, 255, 255;--ion-color-light-shade: #1e2023;--ion-color-light-tint: #383a3e;--ion-color-medium: #989aa2;--ion-color-medium-rgb: 152, 154, 162;--ion-color-medium-contrast: #000;--ion-color-medium-contrast-rgb: 0, 0, 0;--ion-color-medium-shade: #86888f;--ion-color-medium-tint: #a2a4ab;--ion-color-dark: #f4f5f8;--ion-color-dark-rgb: 244, 245, 248;--ion-color-dark-contrast: #000;--ion-color-dark-contrast-rgb: 0, 0, 0;--ion-color-dark-shade: #d7d8da;--ion-color-dark-tint: #f5f6f9}.ion-palette-dark.ios{--ion-background-color: #000000;--ion-background-color-rgb: 0, 0, 0;--ion-text-color: #ffffff;--ion-text-color-rgb: 255, 255, 255;--ion-background-color-step-50: #0d0d0d;--ion-background-color-step-100: #1a1a1a;--ion-background-color-step-150: #262626;--ion-background-color-step-200: #333333;--ion-background-color-step-250: #404040;--ion-background-color-step-300: #4d4d4d;--ion-background-color-step-350: #595959;--ion-background-color-step-400: #666666;--ion-background-color-step-450: #737373;--ion-background-color-step-500: #808080;--ion-background-color-step-550: #8c8c8c;--ion-background-color-step-600: #999999;--ion-background-color-step-650: #a6a6a6;--ion-background-color-step-700: #b3b3b3;--ion-background-color-step-750: #bfbfbf;--ion-background-color-step-800: #cccccc;--ion-background-color-step-850: #d9d9d9;--ion-background-color-step-900: #e6e6e6;--ion-background-color-step-950: #f2f2f2;--ion-text-color-step-50: #f2f2f2;--ion-text-color-step-100: #e6e6e6;--ion-text-color-step-150: #d9d9d9;--ion-text-color-step-200: #cccccc;--ion-text-color-step-250: #bfbfbf;--ion-text-color-step-300: #b3b3b3;--ion-text-color-step-350: #a6a6a6;--ion-text-color-step-400: #999999;--ion-text-color-step-450: #8c8c8c;--ion-text-color-step-500: #808080;--ion-text-color-step-550: #737373;--ion-text-color-step-600: #666666;--ion-text-color-step-650: #595959;--ion-text-color-step-700: #4d4d4d;--ion-text-color-step-750: #404040;--ion-text-color-step-800: #333333;--ion-text-color-step-850: #262626;--ion-text-color-step-900: #1a1a1a;--ion-text-color-step-950: #0d0d0d;--ion-item-background: #000000;--ion-card-background: #1c1c1d}.ion-palette-dark.ios ion-modal{--ion-background-color: var(--ion-color-step-100, var(--ion-background-color-step-100));--ion-toolbar-background: var(--ion-color-step-150, var(--ion-background-color-step-150));--ion-toolbar-border-color: var(--ion-color-step-250, var(--ion-background-color-step-250))}.ion-palette-dark.md{--ion-background-color: #121212;--ion-background-color-rgb: 18, 18, 18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255, 255, 255;--ion-background-color-step-50: #1e1e1e;--ion-background-color-step-100: #2a2a2a;--ion-background-color-step-150: #363636;--ion-background-color-step-200: #414141;--ion-background-color-step-250: #4d4d4d;--ion-background-color-step-300: #595959;--ion-background-color-step-350: #656565;--ion-background-color-step-400: #717171;--ion-background-color-step-450: #7d7d7d;--ion-background-color-step-500: #898989;--ion-background-color-step-550: #949494;--ion-background-color-step-600: #a0a0a0;--ion-background-color-step-650: #acacac;--ion-background-color-step-700: #b8b8b8;--ion-background-color-step-750: #c4c4c4;--ion-background-color-step-800: #d0d0d0;--ion-background-color-step-850: #dbdbdb;--ion-background-color-step-900: #e7e7e7;--ion-background-color-step-950: #f3f3f3;--ion-text-color-step-50: #f3f3f3;--ion-text-color-step-100: #e7e7e7;--ion-text-color-step-150: #dbdbdb;--ion-text-color-step-200: #d0d0d0;--ion-text-color-step-250: #c4c4c4;--ion-text-color-step-300: #b8b8b8;--ion-text-color-step-350: #acacac;--ion-text-color-step-400: #a0a0a0;--ion-text-color-step-450: #949494;--ion-text-color-step-500: #898989;--ion-text-color-step-550: #7d7d7d;--ion-text-color-step-600: #717171;--ion-text-color-step-650: #656565;--ion-text-color-step-700: #595959;--ion-text-color-step-750: #4d4d4d;--ion-text-color-step-800: #414141;--ion-text-color-step-850: #363636;--ion-text-color-step-900: #2a2a2a;--ion-text-color-step-950: #1e1e1e;--ion-item-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-tab-bar-background: #1f1f1f;--ion-card-background: #1e1e1e}body.dark{--ion-color-primary: #428cff;--ion-color-primary-rgb: 66, 140, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3a7be0;--ion-color-primary-tint: #5598ff;--ion-color-secondary: #50c8ff;--ion-color-secondary-rgb: 80, 200, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #46b0e0;--ion-color-secondary-tint: #62ceff;--ion-color-tertiary: #6a64ff;--ion-color-tertiary-rgb: 106, 100, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #5d58e0;--ion-color-tertiary-tint: #7974ff;--ion-color-success: #2fdf75;--ion-color-success-rgb: 47, 223, 117;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0, 0, 0;--ion-color-success-shade: #29c467;--ion-color-success-tint: #44e283;--ion-color-warning: #ffd534;--ion-color-warning-rgb: 255, 213, 52;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0bb2e;--ion-color-warning-tint: #ffd948;--ion-color-danger: #ff4961;--ion-color-danger-rgb: 255, 73, 97;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #e04055;--ion-color-danger-tint: #ff5b71;--ion-color-dark: #f4f5f8;--ion-color-dark-rgb: 244, 245, 248;--ion-color-dark-contrast: #000000;--ion-color-dark-contrast-rgb: 0, 0, 0;--ion-color-dark-shade: #d7d8da;--ion-color-dark-tint: #f5f6f9;--ion-color-medium: #989aa2;--ion-color-medium-rgb: 152, 154, 162;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0, 0, 0;--ion-color-medium-shade: #86888f;--ion-color-medium-tint: #a2a4ab;--ion-color-light: #222428;--ion-color-light-rgb: 34, 36, 40;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255, 255, 255;--ion-color-light-shade: #1e2023;--ion-color-light-tint: #383a3e;--ion-background-color: #121212;--ion-background-color-rgb: 18, 18, 18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255, 255, 255;--ion-border-color: #222222;--ion-color-step-50: #1e1e1e;--ion-color-step-100: #2a2a2a;--ion-color-step-150: #363636;--ion-color-step-200: #414141;--ion-color-step-250: #4d4d4d;--ion-color-step-300: #595959;--ion-color-step-350: #656565;--ion-color-step-400: #717171;--ion-color-step-450: #7d7d7d;--ion-color-step-500: #898989;--ion-color-step-550: #949494;--ion-color-step-600: #a0a0a0;--ion-color-step-650: #acacac;--ion-color-step-700: #b8b8b8;--ion-color-step-750: #c4c4c4;--ion-color-step-800: #d0d0d0;--ion-color-step-850: #dbdbdb;--ion-color-step-900: #e7e7e7;--ion-color-step-950: #f3f3f3;--ion-card-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-toolbar-border-color: #222222;--ion-item-background: #1e1e1e}body{transition:background-color .3s ease,color .3s ease}ion-card,ion-toolbar,ion-item,ion-content{transition:background-color .3s ease,color .3s ease}ion-button{min-height:44px;min-width:44px}ion-fab-button{--size: 56px}ion-item{min-height:48px}@media (max-width: 768px){.gallery-grid{display:grid;grid-template-columns:1fr!important;gap:16px;padding:16px}.gallery-card{width:100%;margin:0}.gallery-card ion-card-header{padding:12px}.gallery-card ion-card-title{font-size:1.1rem}.gallery-card img{height:250px;object-fit:cover}}@media (min-width: 769px) and (max-width: 1024px){.gallery-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;padding:16px}}@media (min-width: 1025px){.gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;padding:20px;max-width:1400px;margin:0 auto}}ion-content{--overflow: auto;-webkit-overflow-scrolling:touch}img{max-width:100%;height:auto;display:block}.image-placeholder{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:loading 1.5s infinite}@keyframes loading{0%{background-position:200% 0}to{background-position:-200% 0}}@media (max-width: 768px){ion-searchbar{--padding-start: 12px;--padding-end: 12px;padding:8px 0}}@media (max-width: 768px){ion-segment{padding:8px 16px}ion-segment-button{min-height:40px;font-size:.9rem}}@media (max-width: 768px){.babylon-canvas{height:300px!important}.exhibits-container{padding:12px}.exhibits-container ion-card{margin:8px 0}}@media (max-width: 768px){.quiz-container{padding:12px}.quiz-container ion-card{margin:8px 0}.quiz-container ion-card-title{font-size:1.1rem}.quiz-container ion-radio-group ion-item{--padding-start: 12px;--padding-end: 12px}}@media (max-width: 768px){.artifact-detail-container{padding:12px}.artifact-detail-container img{height:250px;object-fit:cover;border-radius:8px}.artifact-detail-container ion-card{margin:8px 0}}@media (max-width: 768px){.qr-scanner-modal{--width: 100%;--height: 100%}#qr-reader{width:100%!important}}@media (max-width: 768px){.audio-player{padding:12px}.audio-controls{flex-wrap:wrap;gap:8px}.audio-controls button{min-width:44px;min-height:44px}}@media (max-width: 768px){ion-button{--padding-start: 16px;--padding-end: 16px;margin:4px 0}}ion-fab{position:fixed}@media (max-width: 768px){ion-fab[vertical=bottom][horizontal=end]{bottom:70px;right:16px}}@media (max-width: 768px){ion-tab-bar{height:56px;padding-bottom:env(safe-area-inset-bottom)}ion-tab-button{font-size:.75rem}}@media (max-width: 768px){ion-card{box-shadow:0 2px 8px rgba(0,0,0,.1)}}.skeleton{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:loading 1.5s infinite;border-radius:4px}.skeleton-text{height:16px;margin:8px 0}.skeleton-title{height:24px;width:60%;margin:12px 0}.skeleton-image{height:200px;width:100%;border-radius:8px}ion-refresher{z-index:1}.haptic-feedback{animation:haptic-pulse .3s ease-out}@keyframes haptic-pulse{0%{transform:scale(1)}50%{transform:scale(.95)}to{transform:scale(1)}}.swipe-indicator{position:absolute;top:50%;transform:translateY(-50%);font-size:2rem;opacity:0;transition:opacity .3s;pointer-events:none}.swipe-indicator.left{left:20px}.swipe-indicator.right{right:20px}.swipe-indicator.active{opacity:.5}@media (max-width: 768px){body{font-size:16px}h1{font-size:1.75rem}h2{font-size:1.5rem}h3{font-size:1.25rem}p{line-height:1.6}}@supports (padding: env(safe-area-inset-top)){ion-header{padding-top:env(safe-area-inset-top)}ion-footer{padding-bottom:env(safe-area-inset-bottom)}}\n/*$vite$:1*/',document.head.appendChild(e);var Ie={exports:{}},Te={},ke={exports:{}},Re={};
/**
       * @license React
       * scheduler.production.js
       *
       * Copyright (c) Meta Platforms, Inc. and affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */
!function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,o=e[n];if(!(0<i(o,t)))break e;e[n]=t,e[r]=o,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length,a=o>>>1;n<a;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,r))c<o&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<o&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,w="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=r(c);null!==i;){if(null===i.callback)n(c);else{if(!(i.startTime<=e))break;n(c),i.sortIndex=i.expirationTime,t(l,i)}i=r(c)}}function v(e){if(g=!1,b(e),!p)if(null!==r(l))p=!0,R();else{var t=r(c);null!==t&&O(v,t.startTime-e)}}var _,E=!1,S=-1,C=5,x=-1;function A(){return!(e.unstable_now()-x<C)}function I(){if(E){var t=e.unstable_now();x=t;var i=!0;try{e:{p=!1,g&&(g=!1,w(S),S=-1),f=!0;var o=h;try{t:{for(b(t),d=r(l);null!==d&&!(d.expirationTime>t&&A());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,b(t),i=!0;break t}d===r(l)&&n(l),b(t)}else n(l);d=r(l)}if(null!==d)i=!0;else{var u=r(c);null!==u&&O(v,u.startTime-t),i=!1}}break e}finally{d=null,h=o,f=!1}i=void 0}}finally{i?_():E=!1}}}if("function"==typeof y)_=function(){y(I)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,k=T.port2;T.port1.onmessage=I,_=function(){k.postMessage(null)}}else _=function(){m(I,0)};function R(){E||(E=!0,_())}function O(t,r){S=m(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,R())},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,i,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,n){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return n={id:u++,callback:i,priorityLevel:n,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(n.sortIndex=o,t(c,n),null===r(l)&&n===r(c)&&(g?(w(S),S=-1):g=!0,O(v,o-a))):(n.sortIndex=s,t(l,n),p||f||(p=!0,R())),n},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(Re),ke.exports=Re;var Oe=ke.exports,Ne=re,De=ne;
/**
       * @license React
       * react-dom-client.production.js
       *
       * Copyright (c) Meta Platforms, Inc. and affiliates.
       *
       * This source code is licensed under the MIT license found in the
       * LICENSE file in the root directory of this source tree.
       */function Pe(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Me(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var Be=Symbol.for("react.element"),je=Symbol.for("react.transitional.element"),Le=Symbol.for("react.portal"),Fe=Symbol.for("react.fragment"),ze=Symbol.for("react.strict_mode"),Ue=Symbol.for("react.profiler"),Ve=Symbol.for("react.provider"),He=Symbol.for("react.consumer"),qe=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),Ge=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy"),Ke=Symbol.for("react.offscreen"),Qe=Symbol.for("react.memo_cache_sentinel"),Ze=Symbol.iterator;function Je(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ze&&e[Ze]||e["@@iterator"])?e:null}var et=Symbol.for("react.client.reference");function tt(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===et?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Fe:return"Fragment";case Le:return"Portal";case Ue:return"Profiler";case ze:return"StrictMode";case Ge:return"Suspense";case $e:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case qe:return(e.displayName||"Context")+".Provider";case He:return(e._context.displayName||"Context")+".Consumer";case We:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Xe:return null!==(t=e.displayName||null)?t:tt(e.type)||"Memo";case Ye:t=e._payload,e=e._init;try{return tt(e(t))}catch(r){}}return null}var rt,nt,it=Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=Object.assign;function at(e){if(void 0===rt)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);rt=t&&t[1]||"",nt=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+rt+e+nt}var st=!1;function lt(e,t){if(!e||st)return"";st=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(i){var n=i}Reflect.construct(e,[],r)}else{try{r.call()}catch(o){n=o}e.call(r.prototype)}}else{try{throw Error()}catch(a){n=a}(r=e())&&"function"==typeof r.catch&&r.catch(function(){})}}catch(s){if(s&&n&&"string"==typeof s.stack)return[s.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=n.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),c=s.split("\n");for(i=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(n===l.length||i===c.length)for(n=l.length-1,i=c.length-1;1<=n&&0<=i&&l[n]!==c[i];)i--;for(;1<=n&&0<=i;n--,i--)if(l[n]!==c[i]){if(1!==n||1!==i)do{if(n--,0>--i||l[n]!==c[i]){var u="\n"+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=n&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?at(r):""}function ct(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return e=lt(e.type,!1);case 11:return e=lt(e.type.render,!1);case 1:return e=lt(e.type,!0);default:return""}}function ut(e){try{var t="";do{t+=ct(e),e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}function dt(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function ht(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function ft(e){if(dt(e)!==e)throw Error(Pe(188))}function pt(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=pt(e)))return t;e=e.sibling}return null}var gt=Array.isArray,mt=De.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wt={pending:!1,data:null,method:null,action:null},yt=[],bt=-1;function vt(e){return{current:e}}function _t(e){0>bt||(e.current=yt[bt],yt[bt]=null,bt--)}function Et(e,t){bt++,yt[bt]=e.current,e.current=t}var St=vt(null),Ct=vt(null),xt=vt(null),At=vt(null);function It(e,t){switch(Et(xt,t),Et(Ct,e),Et(St,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Ch(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=xh(e=Ch(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}_t(St),Et(St,t)}function Tt(){_t(St),_t(Ct),_t(xt)}function kt(e){null!==e.memoizedState&&Et(At,e);var t=St.current,r=xh(t,e.type);t!==r&&(Et(Ct,e),Et(St,r))}function Rt(e){Ct.current===e&&(_t(St),_t(Ct)),At.current===e&&(_t(At),df._currentValue=wt)}var Ot=Object.prototype.hasOwnProperty,Nt=Oe.unstable_scheduleCallback,Dt=Oe.unstable_cancelCallback,Pt=Oe.unstable_shouldYield,Mt=Oe.unstable_requestPaint,Bt=Oe.unstable_now,jt=Oe.unstable_getCurrentPriorityLevel,Lt=Oe.unstable_ImmediatePriority,Ft=Oe.unstable_UserBlockingPriority,zt=Oe.unstable_NormalPriority,Ut=Oe.unstable_LowPriority,Vt=Oe.unstable_IdlePriority,Ht=Oe.log,qt=Oe.unstable_setDisableYieldValue,Wt=null,Gt=null;function $t(e){if("function"==typeof Ht&&qt(e),Gt&&"function"==typeof Gt.setStrictMode)try{Gt.setStrictMode(Wt,e)}catch(t){}}var Xt=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(Yt(e)/Kt|0)|0},Yt=Math.log,Kt=Math.LN2,Qt=128,Zt=4194304;function Jt(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function er(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,a=e.warmLanes;e=0!==e.finishedLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?n=Jt(r):0!==(o&=s)?n=Jt(o):e||0!==(a=s&~a)&&(n=Jt(a)):0!==(s=r&~i)?n=Jt(s):0!==o?n=Jt(o):e||0!==(a=r&~a)&&(n=Jt(a)),0===n?0:0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(a=t&-t)||32===i&&4194176&a)?t:n}function tr(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function rr(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function nr(){var e=Qt;return!(4194176&(Qt<<=1))&&(Qt=128),e}function ir(){var e=Zt;return!(62914560&(Zt<<=1))&&(Zt=4194304),e}function or(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ar(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function sr(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Xt(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194218&r}function lr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Xt(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}function cr(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function ur(){var e=mt.p;return 0!==e?e:void 0===(e=window.event)?32:Af(e.type)}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,fr="__reactProps$"+dr,pr="__reactContainer$"+dr,gr="__reactEvents$"+dr,mr="__reactListeners$"+dr,wr="__reactHandles$"+dr,yr="__reactResources$"+dr,br="__reactMarker$"+dr;function vr(e){delete e[hr],delete e[fr],delete e[gr],delete e[mr],delete e[wr]}function _r(e){var t=e[hr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pr]||r[hr]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Bh(e);null!==e;){if(r=e[hr])return r;e=Bh(e)}return t}r=(e=r).parentNode}return null}function Er(e){if(e=e[hr]||e[pr]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Sr(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(Pe(33))}function Cr(e){var t=e[yr];return t||(t=e[yr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xr(e){e[br]=!0}var Ar=new Set,Ir={};function Tr(e,t){kr(e,t),kr(e+"Capture",t)}function kr(e,t){for(Ir[e]=t,e=0;e<t.length;e++)Ar.add(t[e])}var Rr=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Or=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nr={},Dr={};function Pr(e,t,r){if(i=t,Ot.call(Dr,i)||!Ot.call(Nr,i)&&(Or.test(i)?Dr[i]=!0:(Nr[i]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var i}function Mr(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function Br(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function jr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Lr(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Fr(e){e._valueTracker||(e._valueTracker=function(e){var t=Lr(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function zr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Lr(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Ur(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var Vr=/[\n"\\]/g;function Hr(e){return e.replace(Vr,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function qr(e,t,r,n,i,o,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+jr(t)):e.value!==""+jr(t)&&(e.value=""+jr(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?Gr(e,a,jr(t)):null!=r?Gr(e,a,jr(r)):null!=n&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+jr(s):e.removeAttribute("name")}function Wr(e,t,r,n,i,o,a,s){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=r){if(("submit"===o||"reset"===o)&&null==t)return;r=null!=r?""+jr(r):"",t=null!=t?""+jr(t):r,s||t===e.value||(e.value=t),e.defaultValue=t}n="function"!=typeof(n=null!=n?n:i)&&"symbol"!=typeof n&&!!n,e.checked=s?e.checked:!!n,e.defaultChecked=!!n,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function Gr(e,t,r){"number"===t&&Ur(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function $r(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+jr(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Xr(e,t,r){null==t||((t=""+jr(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+jr(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function Yr(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(Pe(92));if(gt(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=jr(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function Kr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var Qr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zr(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"==typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!=typeof r||0===r||Qr.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Jr(e,t,r){if(null!=t&&"object"!=typeof t)throw Error(Pe(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&r[i]!==n&&Zr(e,i,n)}else for(var o in t)t.hasOwnProperty(o)&&Zr(e,o,t[o])}function en(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nn(e){return rn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var on=null;function an(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var sn=null,ln=null;function cn(e){var t=Er(e);if(t&&(e=t.stateNode)){var r=e[fr]||null;e:switch(e=t.stateNode,t.type){case"input":if(qr(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Hr(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=n[fr]||null;if(!i)throw Error(Pe(90));qr(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&zr(n)}break e;case"textarea":Xr(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&$r(e,!!r.multiple,t,!1)}}}var un=!1;function dn(e,t,r){if(un)return e(t,r);un=!0;try{return e(t)}finally{if(un=!1,(null!==sn||null!==ln)&&(hd(),sn&&(t=sn,e=ln,ln=sn=null,cn(t),e)))for(t=0;t<e.length;t++)cn(e[t])}}function hn(e,t){var r=e.stateNode;if(null===r)return null;var n=r[fr]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(Pe(231,t,typeof r));return r}var fn=!1;if(Rr)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){fn=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch(Bb){fn=!1}var gn=null,mn=null,wn=null;function yn(){if(wn)return wn;var e,t,r=mn,n=r.length,i="value"in gn?gn.value:gn.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[o-t];t++);return wn=i.slice(e,1<t?1-t:void 0)}function bn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function vn(){return!0}function _n(){return!1}function En(e){function t(t,r,n,i,o){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?vn:_n,this.isPropagationStopped=_n,this}return ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=vn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=vn)},persist:function(){},isPersistent:vn}),t}var Sn,Cn,xn,An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},In=En(An),Tn=ot({},An,{view:0,detail:0}),kn=En(Tn),Rn=ot({},Tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Un,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xn&&(xn&&"mousemove"===e.type?(Sn=e.screenX-xn.screenX,Cn=e.screenY-xn.screenY):Cn=Sn=0,xn=e),Sn)},movementY:function(e){return"movementY"in e?e.movementY:Cn}}),On=En(Rn),Nn=En(ot({},Rn,{dataTransfer:0})),Dn=En(ot({},Tn,{relatedTarget:0})),Pn=En(ot({},An,{animationName:0,elapsedTime:0,pseudoElement:0})),Mn=En(ot({},An,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Bn=En(ot({},An,{data:0})),jn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Fn[e])&&!!t[e]}function Un(){return zn}var Vn=En(ot({},Tn,{key:function(e){if(e.key){var t=jn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=bn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ln[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Un,charCode:function(e){return"keypress"===e.type?bn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?bn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Hn=En(ot({},Rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),qn=En(ot({},Tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Un})),Wn=En(ot({},An,{propertyName:0,elapsedTime:0,pseudoElement:0})),Gn=En(ot({},Rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),$n=En(ot({},An,{newState:0,oldState:0})),Xn=[9,13,27,32],Yn=Rr&&"CompositionEvent"in window,Kn=null;Rr&&"documentMode"in document&&(Kn=document.documentMode);var Qn=Rr&&"TextEvent"in window&&!Kn,Zn=Rr&&(!Yn||Kn&&8<Kn&&11>=Kn),Jn=String.fromCharCode(32),ei=!1;function ti(e,t){switch(e){case"keyup":return-1!==Xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ri(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ni=!1,ii={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ii[e.type]:"textarea"===t}function ai(e,t,r,n){sn?ln?ln.push(n):ln=[n]:sn=n,0<(t=uh(t,"onChange")).length&&(r=new In("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var si=null,li=null;function ci(e){rh(e,0)}function ui(e){if(zr(Sr(e)))return e}function di(e,t){if("change"===e)return t}var hi=!1;if(Rr){var fi;if(Rr){var pi="oninput"in document;if(!pi){var gi=document.createElement("div");gi.setAttribute("oninput","return;"),pi="function"==typeof gi.oninput}fi=pi}else fi=!1;hi=fi&&(!document.documentMode||9<document.documentMode)}function mi(){si&&(si.detachEvent("onpropertychange",wi),li=si=null)}function wi(e){if("value"===e.propertyName&&ui(li)){var t=[];ai(t,li,e,an(e)),dn(ci,t)}}function yi(e,t,r){"focusin"===e?(mi(),li=r,(si=t).attachEvent("onpropertychange",wi)):"focusout"===e&&mi()}function bi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ui(li)}function vi(e,t){if("click"===e)return ui(t)}function _i(e,t){if("input"===e||"change"===e)return ui(t)}var Ei="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Si(e,t){if(Ei(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ot.call(t,i)||!Ei(e[i],t[i]))return!1}return!0}function Ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xi(e,t){var r,n=Ci(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ci(n)}}function Ai(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ai(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ii(e){for(var t=Ur((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Ur((e=t.contentWindow).document)}return t}function Ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ki(e,t){var r=Ii(t);t=e.focusedElem;var n=e.selectionRange;if(r!==t&&t&&t.ownerDocument&&Ai(t.ownerDocument.documentElement,t)){if(null!==n&&Ti(t))if(e=n.start,void 0===(r=n.end)&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if((r=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){r=r.getSelection();var i=t.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!r.extend&&o>n&&(i=n,n=o,o=i),i=xi(t,o);var a=xi(t,n);i&&a&&(1!==r.rangeCount||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),r.removeAllRanges(),o>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}for(e=[],r=t;r=r.parentNode;)1===r.nodeType&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<e.length;t++)(r=e[t]).element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Ri=Rr&&"documentMode"in document&&11>=document.documentMode,Oi=null,Ni=null,Di=null,Pi=!1;function Mi(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;Pi||null==Oi||Oi!==Ur(n)||(n="selectionStart"in(n=Oi)&&Ti(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Di&&Si(Di,n)||(Di=n,0<(n=uh(Ni,"onSelect")).length&&(t=new In("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Oi)))}function Bi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ji={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},Li={},Fi={};function zi(e){if(Li[e])return Li[e];if(!ji[e])return e;var t,r=ji[e];for(t in r)if(r.hasOwnProperty(t)&&t in Fi)return Li[e]=r[t];return e}Rr&&(Fi=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);var Ui=zi("animationend"),Vi=zi("animationiteration"),Hi=zi("animationstart"),qi=zi("transitionrun"),Wi=zi("transitionstart"),Gi=zi("transitioncancel"),$i=zi("transitionend"),Xi=new Map,Yi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ki(e,t){Xi.set(e,t),Tr(t,[e])}var Qi=[],Zi=0,Ji=0;function eo(){for(var e=Zi,t=Ji=Zi=0;t<e;){var r=Qi[t];Qi[t++]=null;var n=Qi[t];Qi[t++]=null;var i=Qi[t];Qi[t++]=null;var o=Qi[t];if(Qi[t++]=null,null!==n&&null!==i){var a=n.pending;null===a?i.next=i:(i.next=a.next,a.next=i),n.pending=i}0!==o&&io(r,i,o)}}function to(e,t,r,n){Qi[Zi++]=e,Qi[Zi++]=t,Qi[Zi++]=r,Qi[Zi++]=n,Ji|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function ro(e,t,r,n){return to(e,t,r,n),oo(e)}function no(e,t){return to(e,null,null,t),oo(e)}function io(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var i=!1,o=e.return;null!==o;)o.childLanes|=r,null!==(n=o.alternate)&&(n.childLanes|=r),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;i&&null!==t&&3===e.tag&&(o=e.stateNode,i=31-Xt(r),null===(e=(o=o.hiddenUpdates)[i])?o[i]=[t]:e.push(t),t.lane=536870912|r)}function oo(e){if(50<rd)throw rd=0,nd=null,Error(Pe(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var ao={},so=new WeakMap;function lo(e,t){if("object"==typeof e&&null!==e){var r=so.get(e);return void 0!==r?r:(t={value:e,source:t,stack:ut(t)},so.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var co=[],uo=0,ho=null,fo=0,po=[],go=0,mo=null,wo=1,yo="";function bo(e,t){co[uo++]=fo,co[uo++]=ho,ho=e,fo=t}function vo(e,t,r){po[go++]=wo,po[go++]=yo,po[go++]=mo,mo=e;var n=wo;e=yo;var i=32-Xt(n)-1;n&=~(1<<i),r+=1;var o=32-Xt(t)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,wo=1<<32-Xt(t)+i|r<<i|n,yo=o+e}else wo=1<<o|r<<i|n,yo=e}function _o(e){null!==e.return&&(bo(e,1),vo(e,1,0))}function Eo(e){for(;e===ho;)ho=co[--uo],co[uo]=null,fo=co[--uo],co[uo]=null;for(;e===mo;)mo=po[--go],po[go]=null,yo=po[--go],po[go]=null,wo=po[--go],po[go]=null}var So=null,Co=null,xo=!1,Ao=null,Io=!1,To=Error(Pe(519));function ko(e){throw Po(lo(Error(Pe(418,"")),e)),To}function Ro(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[hr]=e,t[fr]=n,r){case"dialog":nh("cancel",t),nh("close",t);break;case"iframe":case"object":case"embed":nh("load",t);break;case"video":case"audio":for(r=0;r<eh.length;r++)nh(eh[r],t);break;case"source":nh("error",t);break;case"img":case"image":case"link":nh("error",t),nh("load",t);break;case"details":nh("toggle",t);break;case"input":nh("invalid",t),Wr(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),Fr(t);break;case"select":nh("invalid",t);break;case"textarea":nh("invalid",t),Yr(t,n.value,n.defaultValue,n.children),Fr(t)}"string"!=typeof(r=n.children)&&"number"!=typeof r&&"bigint"!=typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||mh(t.textContent,r)?(null!=n.popover&&(nh("beforetoggle",t),nh("toggle",t)),null!=n.onScroll&&nh("scroll",t),null!=n.onScrollEnd&&nh("scrollend",t),null!=n.onClick&&(t.onclick=wh),t=!0):t=!1,t||ko(e)}function Oo(e){for(So=e.return;So;)switch(So.tag){case 3:case 27:return void(Io=!0);case 5:case 13:return void(Io=!1);default:So=So.return}}function No(e){if(e!==So)return!1;if(!xo)return Oo(e),xo=!0,!1;var t,r=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Ah(e.type,e.memoizedProps)),t=!t),t&&(r=!0),r&&Co&&ko(e),Oo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Pe(317));e:{for(e=e.nextSibling,r=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){Co=Mh(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}Co=null}}else Co=So?Mh(e.stateNode.nextSibling):null;return!0}function Do(){Co=So=null,xo=!1}function Po(e){null===Ao?Ao=[e]:Ao.push(e)}var Mo=Error(Pe(460)),Bo=Error(Pe(474)),jo={then:function(){}};function Lo(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Fo(){}function zo(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Fo,Fo),t=r),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===Mo)throw Error(Pe(483));throw e;default:if("string"==typeof t.status)t.then(Fo,Fo);else{if(null!==(e=ku)&&100<e.shellSuspendCounter)throw Error(Pe(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===Mo)throw Error(Pe(483));throw e}throw Uo=t,Mo}}var Uo=null;function Vo(){if(null===Uo)throw Error(Pe(459));var e=Uo;return Uo=null,e}var Ho=null,qo=0;function Wo(e){var t=qo;return qo+=1,null===Ho&&(Ho=[]),zo(Ho,e,t)}function Go(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $o(e,t){if(t.$$typeof===Be)throw Error(Pe(525));throw e=Object.prototype.toString.call(t),Error(Pe(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=du(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=33554434,r):n:(t.flags|=33554434,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function s(e,t,r,n){return null===t||6!==t.tag?((t=mu(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var o=r.type;return o===Fe?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===Ye&&Xo(o)===t.type)?(Go(t=i(t,r.props),r),t.return=e,t):(Go(t=fu(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=wu(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function u(e,t,r,n,o){return null===t||7!==t.tag?((t=pu(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=mu(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case je:return Go(r=fu(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case Le:return(t=wu(t,e.mode,r)).return=e,t;case Ye:return d(e,t=(0,t._init)(t._payload),r)}if(gt(t)||Je(t))return(t=pu(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return d(e,Wo(t),r);if(t.$$typeof===qe)return d(e,ec(e,t),r);$o(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==i?null:s(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case je:return r.key===i?l(e,t,r,n):null;case Le:return r.key===i?c(e,t,r,n):null;case Ye:return h(e,t,r=(i=r._init)(r._payload),n)}if(gt(r)||Je(r))return null!==i?null:u(e,t,r,n,null);if("function"==typeof r.then)return h(e,t,Wo(r),n);if(r.$$typeof===qe)return h(e,t,ec(e,r),n);$o(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return s(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case je:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case Le:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case Ye:return f(e,t,r,n=(0,n._init)(n._payload),i)}if(gt(n)||Je(n))return u(t,e=e.get(r)||null,n,i,null);if("function"==typeof n.then)return f(e,t,r,Wo(n),i);if(n.$$typeof===qe)return f(e,t,r,ec(t,n),i);$o(t,n)}return null}function p(s,l,c,u){if("object"==typeof c&&null!==c&&c.type===Fe&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case je:e:{for(var g=c.key;null!==l;){if(l.key===g){if((g=c.type)===Fe){if(7===l.tag){r(s,l.sibling),(u=i(l,c.props.children)).return=s,s=u;break e}}else if(l.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===Ye&&Xo(g)===l.type){r(s,l.sibling),Go(u=i(l,c.props),c),u.return=s,s=u;break e}r(s,l);break}t(s,l),l=l.sibling}c.type===Fe?((u=pu(c.props.children,s.mode,u,c.key)).return=s,s=u):(Go(u=fu(c.type,c.key,c.props,null,s.mode,u),c),u.return=s,s=u)}return a(s);case Le:e:{for(g=c.key;null!==l;){if(l.key===g){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){r(s,l.sibling),(u=i(l,c.children||[])).return=s,s=u;break e}r(s,l);break}t(s,l),l=l.sibling}(u=wu(c,s.mode,u)).return=s,s=u}return a(s);case Ye:return p(s,l,c=(g=c._init)(c._payload),u)}if(gt(c))return function(i,a,s,l){for(var c=null,u=null,p=a,g=a=0,m=null;null!==p&&g<s.length;g++){p.index>g?(m=p,p=null):m=p.sibling;var w=h(i,p,s[g],l);if(null===w){null===p&&(p=m);break}e&&p&&null===w.alternate&&t(i,p),a=o(w,a,g),null===u?c=w:u.sibling=w,u=w,p=m}if(g===s.length)return r(i,p),xo&&bo(i,g),c;if(null===p){for(;g<s.length;g++)null!==(p=d(i,s[g],l))&&(a=o(p,a,g),null===u?c=p:u.sibling=p,u=p);return xo&&bo(i,g),c}for(p=n(p);g<s.length;g++)null!==(m=f(p,i,g,s[g],l))&&(e&&null!==m.alternate&&p.delete(null===m.key?g:m.key),a=o(m,a,g),null===u?c=m:u.sibling=m,u=m);return e&&p.forEach(function(e){return t(i,e)}),xo&&bo(i,g),c}(s,l,c,u);if(Je(c)){if("function"!=typeof(g=Je(c)))throw Error(Pe(150));return function(i,a,s,l){if(null==s)throw Error(Pe(151));for(var c=null,u=null,p=a,g=a=0,m=null,w=s.next();null!==p&&!w.done;g++,w=s.next()){p.index>g?(m=p,p=null):m=p.sibling;var y=h(i,p,w.value,l);if(null===y){null===p&&(p=m);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,g),null===u?c=y:u.sibling=y,u=y,p=m}if(w.done)return r(i,p),xo&&bo(i,g),c;if(null===p){for(;!w.done;g++,w=s.next())null!==(w=d(i,w.value,l))&&(a=o(w,a,g),null===u?c=w:u.sibling=w,u=w);return xo&&bo(i,g),c}for(p=n(p);!w.done;g++,w=s.next())null!==(w=f(p,i,g,w.value,l))&&(e&&null!==w.alternate&&p.delete(null===w.key?g:w.key),a=o(w,a,g),null===u?c=w:u.sibling=w,u=w);return e&&p.forEach(function(e){return t(i,e)}),xo&&bo(i,g),c}(s,l,c=g.call(c),u)}if("function"==typeof c.then)return p(s,l,Wo(c),u);if(c.$$typeof===qe)return p(s,l,ec(s,c),u);$o(s,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==l&&6===l.tag?(r(s,l.sibling),(u=i(l,c)).return=s,s=u):(r(s,l),(u=mu(c,s.mode,u)).return=s,s=u),a(s)):r(s,l)}return function(e,t,r,n){try{qo=0;var i=p(e,t,r,n);return Ho=null,i}catch(a){if(a===Mo)throw a;var o=cu(29,a,null,e.mode);return o.lanes=n,o.return=e,o}}}var Ko=Yo(!0),Qo=Yo(!1),Zo=vt(null),Jo=vt(0);function ea(e,t){Et(Jo,e=ju),Et(Zo,t),ju=e|t.baseLanes}function ta(){Et(Jo,ju),Et(Zo,Zo.current)}function ra(){ju=Jo.current,_t(Zo),_t(Jo)}var na=vt(null),ia=null;function oa(e){var t=e.alternate;Et(ca,1&ca.current),Et(na,e),null===ia&&(null===t||null!==Zo.current||null!==t.memoizedState)&&(ia=e)}function aa(e){if(22===e.tag){if(Et(ca,ca.current),Et(na,e),null===ia){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ia=e)}}else sa()}function sa(){Et(ca,ca.current),Et(na,na.current)}function la(e){_t(na),ia===e&&(ia=null),_t(ca)}var ca=vt(0);function ua(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var da="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ha=Oe.unstable_scheduleCallback,fa=Oe.unstable_NormalPriority,pa={$$typeof:qe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ga(){return{controller:new da,data:new Map,refCount:0}}function ma(e){e.refCount--,0===e.refCount&&ha(fa,function(){e.controller.abort()})}var wa=null,ya=0,ba=0,va=null;function _a(){if(0===--ya&&null!==wa){null!==va&&(va.status="fulfilled");var e=wa;wa=null,ba=0,va=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ea=it.S;it.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===wa){var r=wa=[];ya=0,ba=Yd(),va={status:"pending",value:void 0,then:function(e){r.push(e)}}}ya++,t.then(_a,_a)}(0,t),null!==Ea&&Ea(e,t)};var Sa=vt(null);function Ca(){var e=Sa.current;return null!==e?e:ku.pooledCache}function xa(e,t){Et(Sa,null===t?Sa.current:t.pool)}function Aa(){var e=Ca();return null===e?null:{parent:pa._currentValue,pool:e}}var Ia=0,Ta=null,ka=null,Ra=null,Oa=!1,Na=!1,Da=!1,Pa=0,Ma=0,Ba=null,ja=0;function La(){throw Error(Pe(321))}function Fa(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ei(e[r],t[r]))return!1;return!0}function za(e,t,r,n,i,o){return Ia=o,Ta=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,it.H=null===e||null===e.memoizedState?el:tl,Da=!1,o=r(n,i),Da=!1,Na&&(o=Va(t,r,n,i)),Ua(e),o}function Ua(e){it.H=Js;var t=null!==ka&&null!==ka.next;if(Ia=0,Ra=ka=Ta=null,Oa=!1,Ma=0,Ba=null,t)throw Error(Pe(300));null===e||yl||null!==(e=e.dependencies)&&Ql(e)&&(yl=!0)}function Va(e,t,r,n){Ta=e;var i=0;do{if(Na&&(Ba=null),Ma=0,Na=!1,25<=i)throw Error(Pe(301));if(i+=1,Ra=ka=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}it.H=rl,o=t(r,n)}while(Na);return o}function Ha(){var e=it.H,t=e.useState()[0];return t="function"==typeof t.then?Ya(t):t,e=e.useState()[0],(null!==ka?ka.memoizedState:null)!==e&&(Ta.flags|=1024),t}function qa(){var e=0!==Pa;return Pa=0,e}function Wa(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Ga(e){if(Oa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Oa=!1}Ia=0,Ra=ka=Ta=null,Na=!1,Ma=Pa=0,Ba=null}function $a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ra?Ta.memoizedState=Ra=e:Ra=Ra.next=e,Ra}function Xa(){if(null===ka){var e=Ta.alternate;e=null!==e?e.memoizedState:null}else e=ka.next;var t=null===Ra?Ta.memoizedState:Ra.next;if(null!==t)Ra=t,ka=e;else{if(null===e){if(null===Ta.alternate)throw Error(Pe(467));throw Error(Pe(310))}e={memoizedState:(ka=e).memoizedState,baseState:ka.baseState,baseQueue:ka.baseQueue,queue:ka.queue,next:null},null===Ra?Ta.memoizedState=Ra=e:Ra=Ra.next=e}return Ra}function Ya(e){var t=Ma;return Ma+=1,null===Ba&&(Ba=[]),e=zo(Ba,e,t),t=Ta,null===(null===Ra?t.memoizedState:Ra.next)&&(t=t.alternate,it.H=null===t||null===t.memoizedState?el:tl),e}function Ka(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ya(e);if(e.$$typeof===qe)return Jl(e)}throw Error(Pe(438,String(e)))}function Qa(e){var t=null,r=Ta.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=Ta.alternate;null!==n&&null!==(n=n.updateQueue)&&null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},Ta.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=Qe;return t.index++,r}function Za(e,t){return"function"==typeof t?t(e):t}function Ja(e){return es(Xa(),ka,e)}function es(e,t,r){var n=e.queue;if(null===n)throw Error(Pe(311));n.lastRenderedReducer=r;var i=e.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}t.baseQueue=i=o,n.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var s=a=null,l=null,c=t=i.next,u=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(Ou&d)===d:(Ia&d)===d){var h=c.revertLane;if(0===h)null!==l&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===ba&&(u=!0);else{if((Ia&h)===h){c=c.next,h===ba&&(u=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(s=l=d,a=o):l=l.next=d,Ta.lanes|=h,Fu|=h}d=c.action,Da&&r(o,d),o=c.hasEagerState?c.eagerState:r(o,d)}else h={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(s=l=h,a=o):l=l.next=h,Ta.lanes|=d,Fu|=d;c=c.next}while(null!==c&&c!==t);if(null===l?a=o:l.next=s,!Ei(o,e.memoizedState)&&(yl=!0,u&&null!==(r=va)))throw r;e.memoizedState=o,e.baseState=a,e.baseQueue=l,n.lastRenderedState=o}return null===i&&(n.lanes=0),[e.memoizedState,n.dispatch]}function ts(e){var t=Xa(),r=t.queue;if(null===r)throw Error(Pe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Ei(o,t.memoizedState)||(yl=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function rs(e,t,r){var n=Ta,i=Xa(),o=xo;if(o){if(void 0===r)throw Error(Pe(407));r=r()}else r=t();var a=!Ei((ka||i).memoizedState,r);if(a&&(i.memoizedState=r,yl=!0),i=i.queue,Is(os.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==Ra&&1&Ra.memoizedState.tag){if(n.flags|=2048,Es(9,is.bind(null,n,i,r,t),{destroy:void 0},null),null===ku)throw Error(Pe(349));o||60&Ia||ns(n,t,r)}return r}function ns(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=Ta.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ta.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function is(e,t,r,n){t.value=r,t.getSnapshot=n,as(t)&&ss(e)}function os(e,t,r){return r(function(){as(t)&&ss(e)})}function as(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ei(e,r)}catch(n){return!0}}function ss(e){var t=no(e,2);null!==t&&ad(t,0,2)}function ls(e){var t=$a();if("function"==typeof e){var r=e;if(e=r(),Da){$t(!0);try{r()}finally{$t(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:e},t}function cs(e,t,r,n){return e.baseState=r,es(e,ka,"function"==typeof n?n:Za)}function us(e,t,r,n,i){if(Ks(e))throw Error(Pe(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==it.T?r(!0):o.isTransition=!1,n(o),null===(r=t.pending)?(o.next=t.pending=o,ds(t,o)):(o.next=r.next,t.pending=r.next=o)}}function ds(e,t){var r=t.action,n=t.payload,i=e.state;if(t.isTransition){var o=it.T,a={};it.T=a;try{var s=r(i,n),l=it.S;null!==l&&l(a,s),hs(e,t,s)}catch(c){ps(e,t,c)}finally{it.T=o}}else try{hs(e,t,o=r(i,n))}catch(u){ps(e,t,u)}}function hs(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then(function(r){fs(e,t,r)},function(r){return ps(e,t,r)}):fs(e,t,r)}function fs(e,t,r){t.status="fulfilled",t.value=r,gs(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,ds(e,r)))}function ps(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,gs(t),t=t.next}while(t!==n)}e.action=null}function gs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ms(e,t){return t}function ws(e,t){if(xo){var r=ku.formState;if(null!==r){e:{var n=Ta;if(xo){if(Co){t:{for(var i=Co,o=Io;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=Mh(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){Co=Mh(i.nextSibling),n="F!"===i.data;break e}}ko(n)}n=!1}n&&(t=r[0])}}return(r=$a()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},r.queue=n,r=$s.bind(null,Ta,n),n.dispatch=r,n=ls(!1),o=Ys.bind(null,Ta,!1,n.queue),i={state:t,dispatch:null,action:e,pending:null},(n=$a()).queue=i,r=us.bind(null,Ta,i,o,r),i.dispatch=r,n.memoizedState=e,[t,r,!1]}function ys(e){return bs(Xa(),ka,e)}function bs(e,t,r){t=es(e,t,ms)[0],e=Ja(Za)[0],t="object"==typeof t&&null!==t&&"function"==typeof t.then?Ya(t):t;var n=Xa(),i=n.queue,o=i.dispatch;return r!==n.memoizedState&&(Ta.flags|=2048,Es(9,vs.bind(null,i,r),{destroy:void 0},null)),[t,o,e]}function vs(e,t){e.action=t}function _s(e){var t=Xa(),r=ka;if(null!==r)return bs(t,r,e);Xa(),t=t.memoizedState;var n=(r=Xa()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function Es(e,t,r,n){return e={tag:e,create:t,inst:r,deps:n,next:null},null===(t=Ta.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ta.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ss(){return Xa().memoizedState}function Cs(e,t,r,n){var i=$a();Ta.flags|=e,i.memoizedState=Es(1|t,r,{destroy:void 0},void 0===n?null:n)}function xs(e,t,r,n){var i=Xa();n=void 0===n?null:n;var o=i.memoizedState.inst;null!==ka&&null!==n&&Fa(n,ka.memoizedState.deps)?i.memoizedState=Es(t,r,o,n):(Ta.flags|=e,i.memoizedState=Es(1|t,r,o,n))}function As(e,t){Cs(8390656,8,e,t)}function Is(e,t){xs(2048,8,e,t)}function Ts(e,t){return xs(4,2,e,t)}function ks(e,t){return xs(4,4,e,t)}function Rs(e,t){if("function"==typeof t){e=e();var r=t(e);return function(){"function"==typeof r?r():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Os(e,t,r){r=null!=r?r.concat([e]):null,xs(4,4,Rs.bind(null,t,e),r)}function Ns(){}function Ds(e,t){var r=Xa();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Fa(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ps(e,t){var r=Xa();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Fa(t,n[1]))return n[0];if(n=e(),Da){$t(!0);try{e()}finally{$t(!1)}}return r.memoizedState=[n,t],n}function Ms(e,t,r){return void 0===r||1073741824&Ia?e.memoizedState=t:(e.memoizedState=r,e=od(),Ta.lanes|=e,Fu|=e,r)}function Bs(e,t,r,n){return Ei(r,t)?r:null!==Zo.current?(e=Ms(e,r,n),Ei(e,t)||(yl=!0),e):42&Ia?(e=od(),Ta.lanes|=e,Fu|=e,t):(yl=!0,e.memoizedState=r)}function js(e,t,r,n,i){var o=mt.p;mt.p=0!==o&&8>o?o:8;var a,s,l,c=it.T,u={};it.T=u,Ys(e,!1,t,r);try{var d=i(),h=it.S;null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then?Xs(e,t,(a=n,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l),id()):Xs(e,t,n,id())}catch(f){Xs(e,t,{then:function(){},status:"rejected",reason:f},id())}finally{mt.p=o,it.T=c}}function Ls(){}function Fs(e,t,r,n){if(5!==e.tag)throw Error(Pe(476));var i=zs(e).queue;js(e,i,t,wt,null===r?Ls:function(){return Us(e),r(n)})}function zs(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:wt,baseState:wt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:wt},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Us(e){Xs(e,zs(e).next.queue,{},id())}function Vs(){return Jl(df)}function Hs(){return Xa().memoizedState}function qs(){return Xa().memoizedState}function Ws(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=id(),n=ac(t,e=oc(r),r);return null!==n&&(ad(n,0,r),sc(n,t,r)),t={cache:ga()},void(e.payload=t)}t=t.return}}function Gs(e,t,r){var n=id();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ks(e)?Qs(t,r):null!==(r=ro(e,t,r,n))&&(ad(r,0,n),Zs(r,t,n))}function $s(e,t,r){Xs(e,t,r,id())}function Xs(e,t,r,n){var i={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))Qs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Ei(s,a))return to(e,t,i,0),null===ku&&eo(),!1}catch(l){}if(null!==(r=ro(e,t,i,n)))return ad(r,0,n),Zs(r,t,n),!0}return!1}function Ys(e,t,r,n){if(n={lane:2,revertLane:Yd(),action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e)){if(t)throw Error(Pe(479))}else null!==(t=ro(e,r,n,2))&&ad(t,0,2)}function Ks(e){var t=e.alternate;return e===Ta||null!==t&&t===Ta}function Qs(e,t){Na=Oa=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zs(e,t,r){if(4194176&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,lr(e,r)}}var Js={readContext:Jl,use:Ka,useCallback:La,useContext:La,useEffect:La,useImperativeHandle:La,useLayoutEffect:La,useInsertionEffect:La,useMemo:La,useReducer:La,useRef:La,useState:La,useDebugValue:La,useDeferredValue:La,useTransition:La,useSyncExternalStore:La,useId:La};Js.useCacheRefresh=La,Js.useMemoCache=La,Js.useHostTransitionStatus=La,Js.useFormState=La,Js.useActionState=La,Js.useOptimistic=La;var el={readContext:Jl,use:Ka,useCallback:function(e,t){return $a().memoizedState=[e,void 0===t?null:t],e},useContext:Jl,useEffect:As,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,Cs(4194308,4,Rs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){Cs(4,2,e,t)},useMemo:function(e,t){var r=$a();t=void 0===t?null:t;var n=e();if(Da){$t(!0);try{e()}finally{$t(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=$a();if(void 0!==r){var i=r(t);if(Da){$t(!0);try{r(t)}finally{$t(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=Gs.bind(null,Ta,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},$a().memoizedState=e},useState:function(e){var t=(e=ls(e)).queue,r=$s.bind(null,Ta,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Ns,useDeferredValue:function(e,t){return Ms($a(),e,t)},useTransition:function(){var e=ls(!1);return e=js.bind(null,Ta,e.queue,!0,!1),$a().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=Ta,i=$a();if(xo){if(void 0===r)throw Error(Pe(407));r=r()}else{if(r=t(),null===ku)throw Error(Pe(349));60&Ou||ns(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,As(os.bind(null,n,o,e),[e]),n.flags|=2048,Es(9,is.bind(null,n,o,r,t),{destroy:void 0},null),r},useId:function(){var e=$a(),t=ku.identifierPrefix;if(xo){var r=yo;t=":"+t+"R"+(r=(wo&~(1<<32-Xt(wo)-1)).toString(32)+r),0<(r=Pa++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ja++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return $a().memoizedState=Ws.bind(null,Ta)}};el.useMemoCache=Qa,el.useHostTransitionStatus=Vs,el.useFormState=ws,el.useActionState=ws,el.useOptimistic=function(e){var t=$a();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=Ys.bind(null,Ta,!0,r),r.dispatch=t,[e,t]};var tl={readContext:Jl,use:Ka,useCallback:Ds,useContext:Jl,useEffect:Is,useImperativeHandle:Os,useInsertionEffect:Ts,useLayoutEffect:ks,useMemo:Ps,useReducer:Ja,useRef:Ss,useState:function(){return Ja(Za)},useDebugValue:Ns,useDeferredValue:function(e,t){return Bs(Xa(),ka.memoizedState,e,t)},useTransition:function(){var e=Ja(Za)[0],t=Xa().memoizedState;return["boolean"==typeof e?e:Ya(e),t]},useSyncExternalStore:rs,useId:Hs};tl.useCacheRefresh=qs,tl.useMemoCache=Qa,tl.useHostTransitionStatus=Vs,tl.useFormState=ys,tl.useActionState=ys,tl.useOptimistic=function(e,t){return cs(Xa(),0,e,t)};var rl={readContext:Jl,use:Ka,useCallback:Ds,useContext:Jl,useEffect:Is,useImperativeHandle:Os,useInsertionEffect:Ts,useLayoutEffect:ks,useMemo:Ps,useReducer:ts,useRef:Ss,useState:function(){return ts(Za)},useDebugValue:Ns,useDeferredValue:function(e,t){var r=Xa();return null===ka?Ms(r,e,t):Bs(r,ka.memoizedState,e,t)},useTransition:function(){var e=ts(Za)[0],t=Xa().memoizedState;return["boolean"==typeof e?e:Ya(e),t]},useSyncExternalStore:rs,useId:Hs};function nl(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:ot({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}rl.useCacheRefresh=qs,rl.useMemoCache=Qa,rl.useHostTransitionStatus=Vs,rl.useFormState=_s,rl.useActionState=_s,rl.useOptimistic=function(e,t){var r=Xa();return null!==ka?cs(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])};var il={isMounted:function(e){return!!(e=e._reactInternals)&&dt(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=id(),i=oc(n);i.payload=t,null!=r&&(i.callback=r),null!==(t=ac(e,i,n))&&(ad(t,0,n),sc(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=id(),i=oc(n);i.tag=1,i.payload=t,null!=r&&(i.callback=r),null!==(t=ac(e,i,n))&&(ad(t,0,n),sc(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=id(),n=oc(r);n.tag=2,null!=t&&(n.callback=t),null!==(t=ac(e,n,r))&&(ad(t,0,r),sc(t,e,r))}};function ol(e,t,r,n,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&Si(r,n)&&Si(i,o))}function al(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&il.enqueueReplaceState(t,t.state,null)}function sl(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var i in r===t&&(r=ot({},r)),e)void 0===r[i]&&(r[i]=e[i]);return r}var ll="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function cl(e){ll(e)}function ul(e){console.error(e)}function dl(e){ll(e)}function hl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function fl(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function pl(e,t,r){return(r=oc(r)).tag=3,r.payload={element:null},r.callback=function(){hl(e,t)},r}function gl(e){return(e=oc(e)).tag=3,e}function ml(e,t,r,n){var i=r.type.getDerivedStateFromError;if("function"==typeof i){var o=n.value;e.payload=function(){return i(o)},e.callback=function(){fl(t,r,n)}}var a=r.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){fl(t,r,n),"function"!=typeof i&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var wl=Error(Pe(461)),yl=!1;function bl(e,t,r,n){t.child=null===e?Qo(t,null,r,n):Ko(t,e.child,r,n)}function vl(e,t,r,n,i){r=r.render;var o=t.ref;if("ref"in n){var a={};for(var s in n)"ref"!==s&&(a[s]=n[s])}else a=n;return Zl(t),n=za(e,t,r,a,o,i),s=qa(),null===e||yl?(xo&&s&&_o(t),t.flags|=1,bl(e,t,n,i),t.child):(Wa(e,t,i),zl(e,t,i))}function _l(e,t,r,n,i){if(null===e){var o=r.type;return"function"!=typeof o||uu(o)||void 0!==o.defaultProps||null!==r.compare?((e=fu(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,El(e,t,o,n,i))}if(o=e.child,!Ul(e,i)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:Si)(a,n)&&e.ref===t.ref)return zl(e,t,i)}return t.flags|=1,(e=du(o,n)).ref=t.ref,e.return=t,t.child=e}function El(e,t,r,n,i){if(null!==e){var o=e.memoizedProps;if(Si(o,n)&&e.ref===t.ref){if(yl=!1,t.pendingProps=n=o,!Ul(e,i))return t.lanes=e.lanes,zl(e,t,i);131072&e.flags&&(yl=!0)}}return Al(e,t,r,n,i)}function Sl(e,t,r){var n=t.pendingProps,i=n.children,o=!!(2&t.stateNode._pendingVisibility),a=null!==e?e.memoizedState:null;if(xl(e,t),"hidden"===n.mode||o){if(128&t.flags){if(n=null!==a?a.baseLanes|r:r,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~n}else t.childLanes=0,t.child=null;return Cl(e,t,n,r)}if(!(536870912&r))return t.lanes=t.childLanes=536870912,Cl(e,t,null!==a?a.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&xa(0,null!==a?a.cachePool:null),null!==a?ea(t,a):ta(),aa(t)}else null!==a?(xa(0,a.cachePool),ea(t,a),sa(),t.memoizedState=null):(null!==e&&xa(0,null),ta(),sa());return bl(e,t,i,r),t.child}function Cl(e,t,r,n){var i=Ca();return i=null===i?null:{parent:pa._currentValue,pool:i},t.memoizedState={baseLanes:r,cachePool:i},null!==e&&xa(0,null),ta(),aa(t),null!==e&&Kl(e,t,n,!0),null}function xl(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(Pe(284));null!==e&&e.ref===r||(t.flags|=2097664)}}function Al(e,t,r,n,i){return Zl(t),r=za(e,t,r,n,void 0,i),n=qa(),null===e||yl?(xo&&n&&_o(t),t.flags|=1,bl(e,t,r,i),t.child):(Wa(e,t,i),zl(e,t,i))}function Il(e,t,r,n,i,o){return Zl(t),t.updateQueue=null,r=Va(t,n,r,i),Ua(e),n=qa(),null===e||yl?(xo&&n&&_o(t),t.flags|=1,bl(e,t,r,o),t.child):(Wa(e,t,o),zl(e,t,o))}function Tl(e,t,r,n,i){if(Zl(t),null===t.stateNode){var o=ao,a=r.contextType;"object"==typeof a&&null!==a&&(o=Jl(a)),o=new r(n,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=il,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=n,o.state=t.memoizedState,o.refs={},nc(t),a=r.contextType,o.context="object"==typeof a&&null!==a?Jl(a):ao,o.state=t.memoizedState,"function"==typeof(a=r.getDerivedStateFromProps)&&(nl(t,r,a,n),o.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(a=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&il.enqueueReplaceState(o,o.state,null),dc(t,n,o,i),uc(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=sl(r,s);o.props=l;var c=o.context,u=r.contextType;a=ao,"object"==typeof u&&null!==u&&(a=Jl(u));var d=r.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||c!==a)&&al(t,o,n,a),rc=!1;var h=t.memoizedState;o.state=h,dc(t,n,o,i),uc(),c=t.memoizedState,s||h!==c||rc?("function"==typeof d&&(nl(t,r,d,n),c=t.memoizedState),(l=rc||ol(t,r,l,n,h,c,a))?(u||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=a,n=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ic(e,t),u=sl(r,a=t.memoizedProps),o.props=u,d=t.pendingProps,h=o.context,c=r.contextType,l=ao,"object"==typeof c&&null!==c&&(l=Jl(c)),(c="function"==typeof(s=r.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&al(t,o,n,l),rc=!1,h=t.memoizedState,o.state=h,dc(t,n,o,i),uc();var f=t.memoizedState;a!==d||h!==f||rc||null!==e&&null!==e.dependencies&&Ql(e.dependencies)?("function"==typeof s&&(nl(t,r,s,n),f=t.memoizedState),(u=rc||ol(t,r,u,n,h,f,l)||null!==e&&null!==e.dependencies&&Ql(e.dependencies))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=l,n=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return o=n,xl(e,t),n=!!(128&t.flags),o||n?(o=t.stateNode,r=n&&"function"!=typeof r.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&n?(t.child=Ko(t,e.child,null,i),t.child=Ko(t,null,r,i)):bl(e,t,r,i),t.memoizedState=o.state,e=t.child):e=zl(e,t,i),e}function kl(e,t,r,n){return Do(),t.flags|=256,bl(e,t,r,n),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0};function Ol(e){return{baseLanes:e,cachePool:Aa()}}function Nl(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=Vu),e}function Dl(e,t,r){var n,i=t.pendingProps,o=!1,a=!!(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&!!(2&ca.current)),n&&(o=!0,t.flags&=-129),n=!!(32&t.flags),t.flags&=-33,null===e){if(xo){if(o?oa(t):sa(),xo){var s,l=Co;if(s=l){e:{for(s=l,l=Io;8!==s.nodeType;){if(!l){l=null;break e}if(null===(s=Mh(s.nextSibling))){l=null;break e}}l=s}null!==l?(t.memoizedState={dehydrated:l,treeContext:null!==mo?{id:wo,overflow:yo}:null,retryLane:536870912},(s=cu(18,null,null,0)).stateNode=l,s.return=t,t.child=s,So=t,Co=null,s=!0):s=!1}s||ko(t)}if(null!==(l=t.memoizedState)&&null!==(l=l.dehydrated))return"$!"===l.data?t.lanes=16:t.lanes=536870912,null;la(t)}return l=i.children,i=i.fallback,o?(sa(),l=Ml({mode:"hidden",children:l},o=t.mode),i=pu(i,o,r,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(o=t.child).memoizedState=Ol(r),o.childLanes=Nl(e,n,r),t.memoizedState=Rl,i):(oa(t),Pl(t,l))}if(null!==(s=e.memoizedState)&&null!==(l=s.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Bl(e,t,r)):null!==t.memoizedState?(sa(),t.child=e.child,t.flags|=128,t=null):(sa(),o=i.fallback,l=t.mode,i=Ml({mode:"visible",children:i.children},l),(o=pu(o,l,r,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,Ko(t,e.child,null,r),(i=t.child).memoizedState=Ol(r),i.childLanes=Nl(e,n,r),t.memoizedState=Rl,t=o);else if(oa(t),"$!"===l.data){if(n=l.nextSibling&&l.nextSibling.dataset)var c=n.dgst;n=c,(i=Error(Pe(419))).stack="",i.digest=n,Po({value:i,source:null,stack:null}),t=Bl(e,t,r)}else if(yl||Kl(e,t,r,!1),n=0!==(r&e.childLanes),yl||n){if(null!==(n=ku)){if(42&(i=r&-r))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(0!==(i=0!==(i&(n.suspendedLanes|r))?0:i)&&i!==s.retryLane)throw s.retryLane=i,no(e,i),ad(n,0,i),wl}"$?"===l.data||yd(),t=Bl(e,t,r)}else"$?"===l.data?(t.flags|=128,t.child=e.child,t=Md.bind(null,e),l._reactRetry=t,t=null):(e=s.treeContext,Co=Mh(l.nextSibling),So=t,xo=!0,Ao=null,Io=!1,null!==e&&(po[go++]=wo,po[go++]=yo,po[go++]=mo,wo=e.id,yo=e.overflow,mo=t),(t=Pl(t,i.children)).flags|=4096);return t}return o?(sa(),o=i.fallback,l=t.mode,c=(s=e.child).sibling,(i=du(s,{mode:"hidden",children:i.children})).subtreeFlags=31457280&s.subtreeFlags,null!==c?o=du(c,o):(o=pu(o,l,r,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(l=e.child.memoizedState)?l=Ol(r):(null!==(s=l.cachePool)?(c=pa._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Aa(),l={baseLanes:l.baseLanes|r,cachePool:s}),o.memoizedState=l,o.childLanes=Nl(e,n,r),t.memoizedState=Rl,i):(oa(t),e=(r=e.child).sibling,(r=du(r,{mode:"visible",children:i.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function Pl(e,t){return(t=Ml({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ml(e,t){return gu(e,t,0,null)}function Bl(e,t,r){return Ko(t,e.child,null,r),(e=Pl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Xl(e.return,t,r)}function Ll(e,t,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Fl(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(bl(e,t,n.children,r),2&(n=ca.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jl(e,r,t);else if(19===e.tag)jl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(Et(ca,n),i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===ua(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Ll(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ua(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Ll(t,!0,r,null,o);break;case"together":Ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(Kl(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(Pe(153));if(null!==t.child){for(r=du(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=du(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ul(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ql(e))}function Vl(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)yl=!0;else{if(!(Ul(e,r)||128&t.flags))return yl=!1,function(e,t,r){switch(t.tag){case 3:It(t,t.stateNode.containerInfo),Gl(0,pa,e.memoizedState.cache),Do();break;case 27:case 5:kt(t);break;case 4:It(t,t.stateNode.containerInfo);break;case 10:Gl(0,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(oa(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Dl(e,t,r):(oa(t),null!==(e=zl(e,t,r))?e.sibling:null);oa(t);break;case 19:var i=!!(128&e.flags);if((n=0!==(r&t.childLanes))||(Kl(e,t,r,!1),n=0!==(r&t.childLanes)),i){if(n)return Fl(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(ca,ca.current),n)break;return null;case 22:case 23:return t.lanes=0,Sl(e,t,r);case 24:Gl(0,pa,e.memoizedState.cache)}return zl(e,t,r)}(e,t,r);yl=!!(131072&e.flags)}else yl=!1,xo&&1048576&t.flags&&vo(t,fo,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,i=n._init;if(n=i(n._payload),t.type=n,"function"!=typeof n){if(null!=n){if((i=n.$$typeof)===We){t.tag=11,t=vl(null,t,n,e,r);break e}if(i===Xe){t.tag=14,t=_l(null,t,n,e,r);break e}}throw t=tt(n)||n,Error(Pe(306,t,""))}uu(n)?(e=sl(n,e),t.tag=1,t=Tl(null,t,n,e,r)):(t.tag=0,t=Al(null,t,n,e,r))}return t;case 0:return Al(e,t,t.type,t.pendingProps,r);case 1:return Tl(e,t,n=t.type,i=sl(n,t.pendingProps),r);case 3:e:{if(It(t,t.stateNode.containerInfo),null===e)throw Error(Pe(387));var o=t.pendingProps;n=(i=t.memoizedState).element,ic(e,t),dc(t,o,null,r);var a=t.memoizedState;if(o=a.cache,Gl(0,pa,o),o!==i.cache&&Yl(t,[pa],r,!0),uc(),o=a.element,i.isDehydrated){if(i={element:o,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=kl(e,t,o,r);break e}if(o!==n){Po(n=lo(Error(Pe(424)),t)),t=kl(e,t,o,r);break e}for(Co=Mh(t.stateNode.containerInfo.firstChild),So=t,xo=!0,Ao=null,Io=!0,r=Qo(t,null,o,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(Do(),o===n){t=zl(e,t,r);break e}bl(e,t,o,r)}t=t.child}return t;case 26:return xl(e,t),null===e?(r=qh(t.type,null,t.pendingProps,null))?t.memoizedState=r:xo||(r=t.type,e=t.pendingProps,(n=Sh(xt.current).createElement(r))[hr]=t,n[fr]=e,vh(n,r,e),xr(n),t.stateNode=n):t.memoizedState=qh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return kt(t),null===e&&xo&&(n=t.stateNode=jh(t.type,t.pendingProps,xt.current),So=t,Io=!0,Co=Mh(n.firstChild)),n=t.pendingProps.children,null!==e||xo?bl(e,t,n,r):t.child=Ko(t,null,n,r),xl(e,t),t.child;case 5:return null===e&&xo&&((i=n=Co)&&(n=function(e,t,r,n){for(;1===e.nodeType;){var i=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[br])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=Mh(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,Io),null!==n?(t.stateNode=n,So=t,Co=Mh(n.firstChild),Io=!1,i=!0):i=!1),i||ko(t)),kt(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,n=o.children,Ah(i,o)?n=null:null!==a&&Ah(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=za(e,t,Ha,null,null,r),df._currentValue=i),xl(e,t),bl(e,t,n,r),t.child;case 6:return null===e&&xo&&((e=r=Co)&&(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=Mh(e.nextSibling)))return null}return e}(r,t.pendingProps,Io),null!==r?(t.stateNode=r,So=t,Co=null,e=!0):e=!1),e||ko(t)),null;case 13:return Dl(e,t,r);case 4:return It(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ko(t,null,n,r):bl(e,t,n,r),t.child;case 11:return vl(e,t,t.type,t.pendingProps,r);case 7:return bl(e,t,t.pendingProps,r),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,Gl(0,t.type,n.value),bl(e,t,n.children,r),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,Zl(t),n=n(i=Jl(i)),t.flags|=1,bl(e,t,n,r),t.child;case 14:return _l(e,t,t.type,t.pendingProps,r);case 15:return El(e,t,t.type,t.pendingProps,r);case 19:return Fl(e,t,r);case 22:return Sl(e,t,r);case 24:return Zl(t),n=Jl(pa),null===e?(null===(i=Ca())&&(i=ku,o=ga(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=r),i=o),t.memoizedState={parent:n,cache:i},nc(t),Gl(0,pa,i)):(0!==(e.lanes&r)&&(ic(e,t),dc(t,null,null,r),uc()),i=e.memoizedState,o=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Gl(0,pa,n)):(n=o.cache,Gl(0,pa,n),n!==i.cache&&Yl(t,[pa],r,!0))),bl(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(Pe(156,t.tag))}var Hl=vt(null),ql=null,Wl=null;function Gl(e,t,r){Et(Hl,t._currentValue),t._currentValue=r}function $l(e){e._currentValue=Hl.current,_t(Hl)}function Xl(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yl(e,t,r,n){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var a=i.child;o=o.firstContext;e:for(;null!==o;){var s=o;o=i;for(var l=0;l<t.length;l++)if(s.context===t[l]){o.lanes|=r,null!==(s=o.alternate)&&(s.lanes|=r),Xl(o.return,r,e),n||(a=null);break e}o=s.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(Pe(341));a.lanes|=r,null!==(o=a.alternate)&&(o.lanes|=r),Xl(a,r,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Kl(e,t,r,n){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(524288&i.flags)o=!0;else if(262144&i.flags)break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(Pe(387));if(null!==(a=a.memoizedProps)){var s=i.type;Ei(i.pendingProps.value,a.value)||(null!==e?e.push(s):e=[s])}}else if(i===At.current){if(null===(a=i.alternate))throw Error(Pe(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(df):e=[df])}i=i.return}null!==e&&Yl(t,e,r,n),t.flags|=262144}function Ql(e){for(e=e.firstContext;null!==e;){if(!Ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Zl(e){ql=e,Wl=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Jl(e){return tc(ql,e)}function ec(e,t){return null===ql&&Zl(e),tc(e,t)}function tc(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===Wl){if(null===e)throw Error(Pe(308));Wl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wl=Wl.next=t;return r}var rc=!1;function nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oc(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ac(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&Tu){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=oo(e),io(e,null,r),t}return to(e,n,t,r),oo(e)}function sc(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194176&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,lr(e,r)}}function lc(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var cc=!1;function uc(){if(cc&&null!==va)throw va}function dc(e,t,r,n){cc=!1;var i=e.updateQueue;rc=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l)}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=-536870913&s.lane,f=h!==s.lane;if(f?(Ou&h)===h:(n&h)===h){0!==h&&h===ba&&(cc=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var p=e,g=s;h=t;var m=r;switch(g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(m,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=g.payload)?p.call(m,d,h):p))break e;d=ot({},d,h);break e;case 2:rc=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),Fu|=a,e.lanes=a,e.memoizedState=d}}function hc(e,t){if("function"!=typeof e)throw Error(Pe(191,e));e.call(t)}function fc(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)hc(r[e],t)}function pc(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var i=n.next;r=i;do{if((r.tag&e)===e){n=void 0;var o=r.create,a=r.inst;n=o(),a.destroy=n}r=r.next}while(r!==i)}}catch(s){Od(t,t.return,s)}}function gc(e,t,r){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var o=i.next;n=o;do{if((n.tag&e)===e){var a=n.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=r;try{s()}catch(c){Od(i,l,c)}}}n=n.next}while(n!==o)}}catch(c){Od(t,t.return,c)}}function mc(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{fc(t,r)}catch(n){Od(e,e.return,n)}}}function wc(e,t,r){r.props=sl(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){Od(e,t,n)}}function yc(e,t){try{var r=e.ref;if(null!==r){var n=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=n;break;default:i=n}"function"==typeof r?e.refCleanup=r(i):r.current=i}}catch(o){Od(e,t,o)}}function bc(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"==typeof n)try{n()}catch(i){Od(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(o){Od(e,t,o)}else r.current=null}function vc(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(i){Od(e,e.return,i)}}function _c(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,a=null,s=null,l=null,c=null,u=null;for(f in r){var d=r[f];if(r.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":l=d;default:n.hasOwnProperty(f)||yh(e,t,f,null,n,d)}}for(var h in n){var f=n[h];if(d=r[h],n.hasOwnProperty(h)&&(null!=f||null!=d))switch(h){case"type":o=f;break;case"name":i=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":a=f;break;case"defaultValue":s=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(Pe(137,t));break;default:f!==d&&yh(e,t,h,f,n,d)}}return void qr(e,a,s,l,c,u,o,i);case"select":for(o in f=a=s=h=null,r)if(l=r[o],r.hasOwnProperty(o)&&null!=l)switch(o){case"value":break;case"multiple":f=l;default:n.hasOwnProperty(o)||yh(e,t,o,null,n,l)}for(i in n)if(o=n[i],l=r[i],n.hasOwnProperty(i)&&(null!=o||null!=l))switch(i){case"value":h=o;break;case"defaultValue":s=o;break;case"multiple":a=o;default:o!==l&&yh(e,t,i,o,n,l)}return t=s,r=a,n=f,void(null!=h?$r(e,!!r,h,!1):!!n!=!!r&&(null!=t?$r(e,!!r,t,!0):$r(e,!!r,r?[]:"",!1)));case"textarea":for(s in f=h=null,r)if(i=r[s],r.hasOwnProperty(s)&&null!=i&&!n.hasOwnProperty(s))switch(s){case"value":case"children":break;default:yh(e,t,s,null,n,i)}for(a in n)if(i=n[a],o=r[a],n.hasOwnProperty(a)&&(null!=i||null!=o))switch(a){case"value":h=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(Pe(91));break;default:i!==o&&yh(e,t,a,i,n,o)}return void Xr(e,h,f);case"option":for(var p in r)h=r[p],r.hasOwnProperty(p)&&null!=h&&!n.hasOwnProperty(p)&&("selected"===p?e.selected=!1:yh(e,t,p,null,n,h));for(l in n)h=n[l],f=r[l],!n.hasOwnProperty(l)||h===f||null==h&&null==f||("selected"===l?e.selected=h&&"function"!=typeof h&&"symbol"!=typeof h:yh(e,t,l,h,n,f));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)h=r[g],r.hasOwnProperty(g)&&null!=h&&!n.hasOwnProperty(g)&&yh(e,t,g,null,n,h);for(c in n)if(h=n[c],f=r[c],n.hasOwnProperty(c)&&h!==f&&(null!=h||null!=f))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(Pe(137,t));break;default:yh(e,t,c,h,n,f)}return;default:if(en(t)){for(var m in r)h=r[m],r.hasOwnProperty(m)&&void 0!==h&&!n.hasOwnProperty(m)&&bh(e,t,m,void 0,n,h);for(u in n)h=n[u],f=r[u],!n.hasOwnProperty(u)||h===f||void 0===h&&void 0===f||bh(e,t,u,h,n,f);return}}for(var w in r)h=r[w],r.hasOwnProperty(w)&&null!=h&&!n.hasOwnProperty(w)&&yh(e,t,w,null,n,h);for(d in n)h=n[d],f=r[d],!n.hasOwnProperty(d)||h===f||null==h&&null==f||yh(e,t,d,h,n,f)}(n,e.type,r,t),n[fr]=t}catch(i){Od(e,e.return,i)}}function Ec(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ec(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=wh));else if(4!==n&&27!==n&&null!==(e=e.child))for(Cc(e,t,r),e=e.sibling;null!==e;)Cc(e,t,r),e=e.sibling}function xc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&27!==n&&null!==(e=e.child))for(xc(e,t,r),e=e.sibling;null!==e;)xc(e,t,r),e=e.sibling}var Ac=!1,Ic=!1,Tc=!1,kc="function"==typeof WeakSet?WeakSet:Set,Rc=null,Oc=!1;function Nc(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Wc(e,r),4&n&&pc(5,r);break;case 1:if(Wc(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(s){Od(r,r.return,s)}else{var i=sl(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){Od(r,r.return,l)}}64&n&&mc(r),512&n&&yc(r,r.return);break;case 3:if(Wc(e,r),64&n&&null!==(n=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:e=r.child.stateNode}try{fc(n,e)}catch(s){Od(r,r.return,s)}}break;case 26:Wc(e,r),512&n&&yc(r,r.return);break;case 27:case 5:Wc(e,r),null===t&&4&n&&vc(r),512&n&&yc(r,r.return);break;case 12:default:Wc(e,r);break;case 13:Wc(e,r),4&n&&Lc(e,r);break;case 22:if(!(i=null!==r.memoizedState||Ac)){t=null!==t&&null!==t.memoizedState||Ic;var o=Ac,a=Ic;Ac=i,(Ic=t)&&!a?$c(e,r,!!(8772&r.subtreeFlags)):Wc(e,r),Ac=o,Ic=a}512&n&&("manual"===r.memoizedProps.mode?yc(r,r.return):bc(r,r.return))}}function Dc(e){var t=e.alternate;null!==t&&(e.alternate=null,Dc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&vr(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pc=null,Mc=!1;function Bc(e,t,r){for(r=r.child;null!==r;)jc(e,t,r),r=r.sibling}function jc(e,t,r){if(Gt&&"function"==typeof Gt.onCommitFiberUnmount)try{Gt.onCommitFiberUnmount(Wt,r)}catch(a){}switch(r.tag){case 26:Ic||bc(r,t),Bc(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:Ic||bc(r,t);var n=Pc,i=Mc;for(Pc=r.stateNode,Bc(e,t,r),t=(r=r.stateNode).attributes;t.length;)r.removeAttributeNode(t[0]);vr(r),Pc=n,Mc=i;break;case 5:Ic||bc(r,t);case 6:i=Pc;var o=Mc;if(Pc=null,Bc(e,t,r),Mc=o,null!==(Pc=i))if(Mc)try{e=Pc,n=r.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)}catch(s){Od(r,t,s)}else try{Pc.removeChild(r.stateNode)}catch(s){Od(r,t,s)}break;case 18:null!==Pc&&(Mc?(t=Pc,r=r.stateNode,8===t.nodeType?Dh(t.parentNode,r):1===t.nodeType&&Dh(t,r),qf(t)):Dh(Pc,r.stateNode));break;case 4:n=Pc,i=Mc,Pc=r.stateNode.containerInfo,Mc=!0,Bc(e,t,r),Pc=n,Mc=i;break;case 0:case 11:case 14:case 15:Ic||gc(2,r,t),Ic||gc(4,r,t),Bc(e,t,r);break;case 1:Ic||(bc(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount&&wc(r,t,n)),Bc(e,t,r);break;case 21:Bc(e,t,r);break;case 22:Ic||bc(r,t),Ic=(n=Ic)||null!==r.memoizedState,Bc(e,t,r),Ic=n;break;default:Bc(e,t,r)}}function Lc(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{qf(e)}catch(r){Od(t,t.return,r)}}function Fc(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kc),t;default:throw Error(Pe(435,e.tag))}}(e);t.forEach(function(t){var n=Bd.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function zc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n],o=e,a=t,s=a;e:for(;null!==s;){switch(s.tag){case 27:case 5:Pc=s.stateNode,Mc=!1;break e;case 3:case 4:Pc=s.stateNode.containerInfo,Mc=!0;break e}s=s.return}if(null===Pc)throw Error(Pe(160));jc(o,a,i),Pc=null,Mc=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Vc(t,e),t=t.sibling}var Uc=null;function Vc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zc(t,e),Hc(e),4&n&&(gc(3,e,e.return),pc(3,e),gc(5,e,e.return));break;case 1:zc(t,e),Hc(e),512&n&&(Ic||null===r||bc(r,r.return)),64&n&&Ac&&null!==(e=e.updateQueue)&&null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n));break;case 26:var i=Uc;if(zc(t,e),Hc(e),512&n&&(Ic||null===r||bc(r,r.return)),4&n){var o=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":(!(o=i.getElementsByTagName("title")[0])||o[br]||o[hr]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(n),i.head.insertBefore(o,i.querySelector("head > title"))),vh(o,n,r),o[hr]=e,xr(o),n=o;break e;case"link":var a=tf("link","href",i).get(n+(r.href||""));if(a)for(var s=0;s<a.length;s++)if((o=a[s]).getAttribute("href")===(null==r.href?null:r.href)&&o.getAttribute("rel")===(null==r.rel?null:r.rel)&&o.getAttribute("title")===(null==r.title?null:r.title)&&o.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){a.splice(s,1);break t}vh(o=i.createElement(n),n,r),i.head.appendChild(o);break;case"meta":if(a=tf("meta","content",i).get(n+(r.content||"")))for(s=0;s<a.length;s++)if((o=a[s]).getAttribute("content")===(null==r.content?null:""+r.content)&&o.getAttribute("name")===(null==r.name?null:r.name)&&o.getAttribute("property")===(null==r.property?null:r.property)&&o.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&o.getAttribute("charset")===(null==r.charSet?null:r.charSet)){a.splice(s,1);break t}vh(o=i.createElement(n),n,r),i.head.appendChild(o);break;default:throw Error(Pe(468,n))}o[hr]=e,xr(o),n=o}e.stateNode=n}else rf(i,e.type,e.stateNode);else e.stateNode=Kh(i,n,e.memoizedProps);else o!==n?(null===o?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):o.count--,null===n?rf(i,e.type,e.stateNode):Kh(i,n,e.memoizedProps)):null===n&&null!==e.stateNode&&_c(e,e.memoizedProps,r.memoizedProps)}break;case 27:if(4&n&&null===e.alternate){i=e.stateNode,o=e.memoizedProps;try{for(var l=i.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[br]||"HEAD"===u||"BODY"===u||"SCRIPT"===u||"STYLE"===u||"LINK"===u&&"stylesheet"===l.rel.toLowerCase()||i.removeChild(l),l=c}for(var d=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);vh(i,d,o),i[hr]=e,i[fr]=o}catch(p){Od(e,e.return,p)}}case 5:if(zc(t,e),Hc(e),512&n&&(Ic||null===r||bc(r,r.return)),32&e.flags){i=e.stateNode;try{Kr(i,"")}catch(p){Od(e,e.return,p)}}4&n&&null!=e.stateNode&&_c(e,i=e.memoizedProps,null!==r?r.memoizedProps:i),1024&n&&(Tc=!0);break;case 6:if(zc(t,e),Hc(e),4&n){if(null===e.stateNode)throw Error(Pe(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(p){Od(e,e.return,p)}}break;case 3:if(ef=null,i=Uc,Uc=zh(t.containerInfo),zc(t,e),Uc=i,Hc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qf(t.containerInfo)}catch(p){Od(e,e.return,p)}Tc&&(Tc=!1,qc(e));break;case 4:n=Uc,Uc=zh(e.stateNode.containerInfo),zc(t,e),Hc(e),Uc=n;break;case 12:zc(t,e),Hc(e);break;case 13:zc(t,e),Hc(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==r&&null!==r.memoizedState)&&($u=Bt()),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,Fc(e,n));break;case 22:if(512&n&&(Ic||null===r||bc(r,r.return)),l=null!==e.memoizedState,c=null!==r&&null!==r.memoizedState,Ac=(u=Ac)||l,Ic=(d=Ic)||c,zc(t,e),Ic=d,Ac=u,Hc(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&n&&(t._visibility=l?-2&t._visibility:1|t._visibility,l&&(t=Ac||Ic,null===r||c||t||Gc(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(r=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===r){c=r=t;try{if(i=c.stateNode,l)"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{a=c.stateNode;var f=null!=(s=c.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null;a.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(p){Od(c,c.return,p)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(p){Od(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&null!==(n=e.updateQueue)&&null!==(r=n.retryQueue)&&(n.retryQueue=null,Fc(e,r));break;case 19:zc(t,e),Hc(e),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,Fc(e,n));break;case 21:break;default:zc(t,e),Hc(e)}}function Hc(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var r=e.return;null!==r;){if(Ec(r)){var n=r;break e}r=r.return}throw Error(Pe(160))}switch(n.tag){case 27:var i=n.stateNode;xc(e,Sc(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(Kr(o,""),n.flags&=-33),xc(e,Sc(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;Cc(e,Sc(e),a);break;default:throw Error(Pe(161))}}}catch(s){Od(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function qc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;qc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Wc(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Nc(e,t.alternate,t),t=t.sibling}function Gc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:gc(4,t,t.return),Gc(t);break;case 1:bc(t,t.return);var r=t.stateNode;"function"==typeof r.componentWillUnmount&&wc(t,t.return,r),Gc(t);break;case 26:case 27:case 5:bc(t,t.return),Gc(t);break;case 22:bc(t,t.return),null===t.memoizedState&&Gc(t);break;default:Gc(t)}e=e.sibling}}function $c(e,t,r){for(r=r&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:$c(i,o,r),pc(4,o);break;case 1:if($c(i,o,r),"function"==typeof(i=(n=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){Od(n,n.return,c)}if(null!==(i=(n=o).updateQueue)){var s=n.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hc(l[i],s)}catch(c){Od(n,n.return,c)}}r&&64&a&&mc(o),yc(o,o.return);break;case 26:case 27:case 5:$c(i,o,r),r&&null===n&&4&a&&vc(o),yc(o,o.return);break;case 12:default:$c(i,o,r);break;case 13:$c(i,o,r),r&&4&a&&Lc(i,o);break;case 22:null===o.memoizedState&&$c(i,o,r),yc(o,o.return)}t=t.sibling}}function Xc(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&ma(r))}function Yc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ma(e))}function Kc(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Qc(e,t,r,n),t=t.sibling}function Qc(e,t,r,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Kc(e,t,r,n),2048&i&&pc(9,t);break;case 3:Kc(e,t,r,n),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ma(e)));break;case 12:if(2048&i){Kc(e,t,r,n),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Od(t,t.return,l)}}else Kc(e,t,r,n);break;case 23:break;case 22:o=t.stateNode,null!==t.memoizedState?4&o._visibility?Kc(e,t,r,n):Jc(e,t):4&o._visibility?Kc(e,t,r,n):(o._visibility|=4,Zc(e,t,r,n,!!(10256&t.subtreeFlags))),2048&i&&Xc(t.alternate,t);break;case 24:Kc(e,t,r,n),2048&i&&Yc(t.alternate,t);break;default:Kc(e,t,r,n)}}function Zc(e,t,r,n,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=r,l=n,c=a.flags;switch(a.tag){case 0:case 11:case 15:Zc(o,a,s,l,i),pc(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?4&u._visibility?Zc(o,a,s,l,i):Jc(o,a):(u._visibility|=4,Zc(o,a,s,l,i)),i&&2048&c&&Xc(a.alternate,a);break;case 24:Zc(o,a,s,l,i),i&&2048&c&&Yc(a.alternate,a);break;default:Zc(o,a,s,l,i)}t=t.sibling}}function Jc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,i=n.flags;switch(n.tag){case 22:Jc(r,n),2048&i&&Xc(n.alternate,n);break;case 24:Jc(r,n),2048&i&&Yc(n.alternate,n);break;default:Jc(r,n)}t=t.sibling}}var eu=8192;function tu(e){if(e.subtreeFlags&eu)for(e=e.child;null!==e;)ru(e),e=e.sibling}function ru(e){switch(e.tag){case 26:tu(e),e.flags&eu&&null!==e.memoizedState&&function(e,t,r){if(null===of)throw Error(Pe(475));var n=of;if(!("stylesheet"!==t.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&t.state.loading)){if(null===t.instance){var i=Wh(r.href),o=e.querySelector(Gh(i));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(n.count++,n=sf.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=o,void xr(o);o=e.ownerDocument||e,r=$h(r),(i=Lh.get(i))&&Zh(r,i),xr(o=o.createElement("link"));var a=o;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),vh(o,"link",r),t.instance=o}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(n.count++,t=sf.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(Uc,e.memoizedState,e.memoizedProps);break;case 5:default:tu(e);break;case 3:case 4:var t=Uc;Uc=zh(e.stateNode.containerInfo),tu(e),Uc=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=eu,eu=16777216,tu(e),eu=t):tu(e))}}function nu(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function iu(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Rc=n,su(n,e)}nu(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)ou(e),e=e.sibling}function ou(e){switch(e.tag){case 0:case 11:case 15:iu(e),2048&e.flags&&gc(9,e,e.return);break;case 3:case 12:default:iu(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,au(e)):iu(e)}}function au(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Rc=n,su(n,e)}nu(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:gc(8,t,t.return),au(t);break;case 22:4&(r=t.stateNode)._visibility&&(r._visibility&=-5,au(t));break;default:au(t)}e=e.sibling}}function su(e,t){for(;null!==Rc;){var r=Rc;switch(r.tag){case 0:case 11:case 15:gc(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:ma(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,Rc=n;else e:for(r=e;null!==Rc;){var i=(n=Rc).sibling,o=n.return;if(Dc(n),n===r){Rc=null;break e}if(null!==i){i.return=o,Rc=i;break e}Rc=o}}}function lu(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cu(e,t,r,n){return new lu(e,t,r,n)}function uu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function du(e,t){var r=e.alternate;return null===r?((r=cu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=31457280&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function hu(e,t){e.flags&=31457282;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fu(e,t,r,n,i,o){var a=0;if(n=e,"function"==typeof e)uu(e)&&(a=1);else if("string"==typeof e)a=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,r,St.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case Fe:return pu(r.children,i,o,t);case ze:a=8,i|=24;break;case Ue:return(e=cu(12,r,t,2|i)).elementType=Ue,e.lanes=o,e;case Ge:return(e=cu(13,r,t,i)).elementType=Ge,e.lanes=o,e;case $e:return(e=cu(19,r,t,i)).elementType=$e,e.lanes=o,e;case Ke:return gu(r,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ve:case qe:a=10;break e;case He:a=9;break e;case We:a=11;break e;case Xe:a=14;break e;case Ye:a=16,n=null;break e}a=29,r=Error(Pe(130,null===e?"null":typeof e,"")),n=null}return(t=cu(a,r,t,i)).elementType=e,t.type=n,t.lanes=o,t}function pu(e,t,r,n){return(e=cu(7,e,n,t)).lanes=r,e}function gu(e,t,r,n){(e=cu(22,e,n,t)).elementType=Ke,e.lanes=r;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(Pe(456));if(!(2&i._pendingVisibility)){var t=no(e,2);null!==t&&(i._pendingVisibility|=2,ad(t,0,2))}},attach:function(){var e=i._current;if(null===e)throw Error(Pe(456));if(2&i._pendingVisibility){var t=no(e,2);null!==t&&(i._pendingVisibility&=-3,ad(t,0,2))}}};return e.stateNode=i,e}function mu(e,t,r){return(e=cu(6,e,null,t)).lanes=r,e}function wu(e,t,r){return(t=cu(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yu(e){e.flags|=4}function bu(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!nf(t)){if(null!==(t=na.current)&&((4194176&Ou)===Ou?null!==ia:(62914560&Ou)!==Ou&&!(536870912&Ou)||t!==ia))throw Uo=jo,Bo;e.flags|=8192}}function vu(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ir():536870912,e.lanes|=t,Hu|=t)}function _u(e,t){if(!xo)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Eu(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=31457280&i.subtreeFlags,n|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Su(e,t,r){var n=t.pendingProps;switch(Eo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Eu(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),$l(pa),Tt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(No(t)?yu(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Ao&&(ld(Ao),Ao=null))),Eu(t),null;case 26:return r=t.memoizedState,null===e?(yu(t),null!==r?(Eu(t),bu(t,r)):(Eu(t),t.flags&=-16777217)):r?r!==e.memoizedState?(yu(t),Eu(t),bu(t,r)):(Eu(t),t.flags&=-16777217):(e.memoizedProps!==n&&yu(t),Eu(t),t.flags&=-16777217),null;case 27:Rt(t),r=xt.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&yu(t);else{if(!n){if(null===t.stateNode)throw Error(Pe(166));return Eu(t),null}e=St.current,No(t)?Ro(t):(e=jh(i,n,r),t.stateNode=e,yu(t))}return Eu(t),null;case 5:if(Rt(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&yu(t);else{if(!n){if(null===t.stateNode)throw Error(Pe(166));return Eu(t),null}if(e=St.current,No(t))Ro(t);else{switch(i=Sh(xt.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof n.is?i.createElement("select",{is:n.is}):i.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"==typeof n.is?i.createElement(r,{is:n.is}):i.createElement(r)}}e[hr]=t,e[fr]=n;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(vh(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&yu(t)}}return Eu(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&yu(t);else{if("string"!=typeof n&&null===t.stateNode)throw Error(Pe(166));if(e=xt.current,No(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(i=So))switch(i.tag){case 27:case 5:n=i.memoizedProps}e[hr]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||mh(e.nodeValue,r)))||ko(t)}else(e=Sh(e).createTextNode(n))[hr]=t,t.stateNode=e}return Eu(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=No(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(Pe(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(Pe(317));i[hr]=t}else Do(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Eu(t),i=!1}else null!==Ao&&(ld(Ao),Ao=null),i=!0;if(!i)return 256&t.flags?(la(t),t):(la(t),null)}if(la(t),128&t.flags)return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){i=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(i=n.alternate.memoizedState.cachePool.pool);var o=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),vu(t,t.updateQueue),Eu(t),null;case 4:return Tt(),null===e&&ah(t.stateNode.containerInfo),Eu(t),null;case 10:return $l(t.type),Eu(t),null;case 19:if(_t(ca),null===(i=t.memoizedState))return Eu(t),null;if(n=!!(128&t.flags),null===(o=i.rendering))if(n)_u(i,!1);else{if(0!==Lu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=ua(e))){for(t.flags|=128,_u(i,!1),e=o.updateQueue,t.updateQueue=e,vu(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)hu(r,e),r=r.sibling;return Et(ca,1&ca.current|2),t.child}e=e.sibling}null!==i.tail&&Bt()>Xu&&(t.flags|=128,n=!0,_u(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ua(o))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,vu(t,e),_u(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!xo)return Eu(t),null}else 2*Bt()-i.renderingStartTime>Xu&&536870912!==r&&(t.flags|=128,n=!0,_u(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Bt(),t.sibling=null,e=ca.current,Et(ca,n?1&e|2:1&e),t):(Eu(t),null);case 22:case 23:return la(t),ra(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?!!(536870912&r)&&!(128&t.flags)&&(Eu(t),6&t.subtreeFlags&&(t.flags|=8192)):Eu(t),null!==(r=t.updateQueue)&&vu(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&_t(Sa),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),$l(pa),Eu(t),null;case 25:return null}throw Error(Pe(156,t.tag))}function Cu(e,t){switch(Eo(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $l(pa),Tt(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Rt(t),null;case 13:if(la(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(Pe(340));Do()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _t(ca),null;case 4:return Tt(),null;case 10:return $l(t.type),null;case 22:case 23:return la(t),ra(),null!==e&&_t(Sa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return $l(pa),null;default:return null}}function xu(e,t){switch(Eo(t),t.tag){case 3:$l(pa),Tt();break;case 26:case 27:case 5:Rt(t);break;case 4:Tt();break;case 13:la(t);break;case 19:_t(ca);break;case 10:$l(t.type);break;case 22:case 23:la(t),ra(),null!==e&&_t(Sa);break;case 24:$l(pa)}}var Au={getCacheForType:function(e){var t=Jl(pa),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},Iu="function"==typeof WeakMap?WeakMap:Map,Tu=0,ku=null,Ru=null,Ou=0,Nu=0,Du=null,Pu=!1,Mu=!1,Bu=!1,ju=0,Lu=0,Fu=0,zu=0,Uu=0,Vu=0,Hu=0,qu=null,Wu=null,Gu=!1,$u=0,Xu=1/0,Yu=null,Ku=null,Qu=!1,Zu=null,Ju=0,ed=0,td=null,rd=0,nd=null;function id(){return 2&Tu&&0!==Ou?Ou&-Ou:null!==it.T?0!==ba?ba:Yd():ur()}function od(){0===Vu&&(Vu=536870912&Ou&&!xo?536870912:nr());var e=na.current;return null!==e&&(e.flags|=32),Vu}function ad(e,t,r){(e===ku&&2===Nu||null!==e.cancelPendingCommit)&&(pd(e,0),dd(e,Ou,Vu,!1)),ar(e,r),2&Tu&&e===ku||(e===ku&&(!(2&Tu)&&(zu|=r),4===Lu&&dd(e,Ou,Vu,!1)),Hd(e))}function sd(e,t,r){if(6&Tu)throw Error(Pe(327));for(var n=!r&&!(60&t)&&0===(t&e.expiredLanes)||tr(e,t),i=n?function(e,t){var r=Tu;Tu|=2;var n=md(),i=wd();ku!==e||Ou!==t?(Yu=null,Xu=Bt()+500,pd(e,t)):Mu=tr(e,t);e:for(;;)try{if(0!==Nu&&null!==Ru){t=Ru;var o=Du;t:switch(Nu){case 1:Nu=0,Du=null,Cd(e,t,o,1);break;case 2:if(Lo(o)){Nu=0,Du=null,Sd(t);break}t=function(){2===Nu&&ku===e&&(Nu=7),Hd(e)},o.then(t,t);break e;case 3:Nu=7;break e;case 4:Nu=5;break e;case 7:Lo(o)?(Nu=0,Du=null,Sd(t)):(Nu=0,Du=null,Cd(e,t,o,7));break;case 5:var a=null;switch(Ru.tag){case 26:a=Ru.memoizedState;case 5:case 27:var s=Ru;if(!a||nf(a)){Nu=0,Du=null;var l=s.sibling;if(null!==l)Ru=l;else{var c=s.return;null!==c?(Ru=c,xd(c)):Ru=null}break t}}Nu=0,Du=null,Cd(e,t,o,5);break;case 6:Nu=0,Du=null,Cd(e,t,o,6);break;case 8:fd(),Lu=6;break e;default:throw Error(Pe(462))}}_d();break}catch(u){gd(e,u)}return Wl=ql=null,it.H=n,it.A=i,Tu=r,null!==Ru?0:(ku=null,Ou=0,eo(),Lu)}(e,t):bd(e,t,!0),o=n;;){if(0===i){Mu&&!n&&dd(e,t,0,!1);break}if(6===i)dd(e,t,0,!Pu);else{if(r=e.current.alternate,o&&!ud(r)){i=bd(e,t,!1),o=!1;continue}if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!=(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var s=e;i=qu;var l=s.current.memoizedState.isDehydrated;if(l&&(pd(s,a).flags|=256),2!==(a=bd(s,a,!1))){if(Bu&&!l){s.errorRecoveryDisabledLanes|=o,zu|=o,i=4;break e}o=Wu,Wu=i,null!==o&&ld(o)}i=a}if(o=!1,2!==i)continue}}if(1===i){pd(e,0),dd(e,t,0,!0);break}e:{switch(n=e,i){case 0:case 1:throw Error(Pe(345));case 4:if((4194176&t)===t){dd(n,t,Vu,!Pu);break e}break;case 2:Wu=null;break;case 3:case 5:break;default:throw Error(Pe(329))}if(n.finishedWork=r,n.finishedLanes=t,(62914560&t)===t&&10<(o=$u+300-Bt())){if(dd(n,t,Vu,!Pu),0!==er(n,0))break e;n.timeoutHandle=Th(cd.bind(null,n,r,Wu,Yu,Gu,t,Vu,zu,Hu,Pu,2,-0,0),o)}else cd(n,r,Wu,Yu,Gu,t,Vu,zu,Hu,Pu,0,-0,0)}}break}Hd(e)}function ld(e){null===Wu?Wu=e:Wu.push.apply(Wu,e)}function cd(e,t,r,n,i,o,a,s,l,c,u,d,h){var f=t.subtreeFlags;if((8192&f||!(16785408&~f))&&(of={stylesheets:null,count:0,unsuspend:af},ru(t),null!==(t=function(){if(null===of)throw Error(Pe(475));var e=of;return e.stylesheets&&0===e.count&&cf(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&cf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}())))return e.cancelPendingCommit=t(Id.bind(null,e,r,n,i,a,s,l,1,d,h)),void dd(e,o,a,!c);Id(e,r,n,i,a,s,l)}function ud(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&null!==(r=t.updateQueue)&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Ei(o(),i))return!1}catch(a){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dd(e,t,r,n){t&=~Uu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var o=31-Xt(i),a=1<<o;n[o]=-1,i&=~a}0!==r&&sr(e,r,t)}function hd(){return!!(6&Tu)||(qd(0),!1)}function fd(){if(null!==Ru){if(0===Nu)var e=Ru.return;else Wl=ql=null,Ga(e=Ru),Ho=null,qo=0,e=Ru;for(;null!==e;)xu(e.alternate,e),e=e.return;Ru=null}}function pd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,kh(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),fd(),ku=e,Ru=r=du(e.current,null),Ou=t,Nu=0,Du=null,Pu=!1,Mu=tr(e,t),Bu=!1,Hu=Vu=Uu=zu=Fu=Lu=0,Wu=qu=null,Gu=!1,8&t&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var i=31-Xt(n),o=1<<i;t|=e[i],n&=~o}return ju=t,eo(),r}function gd(e,t){Ta=null,it.H=Js,t===Mo?(t=Vo(),Nu=3):t===Bo?(t=Vo(),Nu=4):Nu=t===wl?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,Du=t,null===Ru&&(Lu=1,hl(e,lo(t,e.current)))}function md(){var e=it.H;return it.H=Js,null===e?Js:e}function wd(){var e=it.A;return it.A=Au,e}function yd(){Lu=4,Pu||(4194176&Ou)!==Ou&&null!==na.current||(Mu=!0),!(134217727&Fu)&&!(134217727&zu)||null===ku||dd(ku,Ou,Vu,!1)}function bd(e,t,r){var n=Tu;Tu|=2;var i=md(),o=wd();ku===e&&Ou===t||(Yu=null,pd(e,t)),t=!1;var a=Lu;e:for(;;)try{if(0!==Nu&&null!==Ru){var s=Ru,l=Du;switch(Nu){case 8:fd(),a=6;break e;case 3:case 2:case 6:null===na.current&&(t=!0);var c=Nu;if(Nu=0,Du=null,Cd(e,s,l,c),r&&Mu){a=0;break e}break;default:c=Nu,Nu=0,Du=null,Cd(e,s,l,c)}}vd(),a=Lu;break}catch(u){gd(e,u)}return t&&e.shellSuspendCounter++,Wl=ql=null,Tu=n,it.H=i,it.A=o,null===Ru&&(ku=null,Ou=0,eo()),a}function vd(){for(;null!==Ru;)Ed(Ru)}function _d(){for(;null!==Ru&&!Pt();)Ed(Ru)}function Ed(e){var t=Vl(e.alternate,e,ju);e.memoizedProps=e.pendingProps,null===t?xd(e):Ru=t}function Sd(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Il(r,t,t.pendingProps,t.type,void 0,Ou);break;case 11:t=Il(r,t,t.pendingProps,t.type.render,t.ref,Ou);break;case 5:Ga(t);default:xu(r,t),t=Vl(r,t=Ru=hu(t,ju),ju)}e.memoizedProps=e.pendingProps,null===t?xd(e):Ru=t}function Cd(e,t,r,n){Wl=ql=null,Ga(t),Ho=null,qo=0;var i=t.return;try{if(function(e,t,r,n,i){if(r.flags|=32768,null!==n&&"object"==typeof n&&"function"==typeof n.then){if(null!==(t=r.alternate)&&Kl(t,r,i,!0),null!==(r=na.current)){switch(r.tag){case 13:return null===ia?yd():null===r.alternate&&0===Lu&&(Lu=3),r.flags&=-257,r.flags|=65536,r.lanes=i,n===jo?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),Nd(e,n,i)),!1;case 22:return r.flags|=65536,n===jo?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),Nd(e,n,i)),!1}throw Error(Pe(435,r.tag))}return Nd(e,n,i),yd(),!1}if(xo)return null!==(t=na.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==To&&Po(lo(e=Error(Pe(422),{cause:n}),r))):(n!==To&&Po(lo(t=Error(Pe(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,n=lo(n,r),lc(e,i=pl(e.stateNode,n,i)),4!==Lu&&(Lu=2)),!1;var o=Error(Pe(520),{cause:n});if(o=lo(o,r),null===qu?qu=[o]:qu.push(o),4!==Lu&&(Lu=2),null===t)return!0;n=lo(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=i&-i,r.lanes|=e,lc(r,e=pl(r.stateNode,n,e)),!1;case 1:if(t=r.type,o=r.stateNode,!(128&r.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==Ku&&Ku.has(o))))return r.flags|=65536,i&=-i,r.lanes|=i,ml(i=gl(i),e,r,n),lc(r,i),!1}r=r.return}while(null!==r);return!1}(e,i,t,r,Ou))return Lu=1,hl(e,lo(r,e.current)),void(Ru=null)}catch(o){if(null!==i)throw Ru=i,o;return Lu=1,hl(e,lo(r,e.current)),void(Ru=null)}32768&t.flags?(xo||1===n?e=!0:Mu||536870912&Ou?e=!1:(Pu=e=!0,(2===n||3===n||6===n)&&null!==(n=na.current)&&13===n.tag&&(n.flags|=16384)),Ad(t,e)):xd(t)}function xd(e){var t=e;do{if(32768&t.flags)return void Ad(t,Pu);e=t.return;var r=Su(t.alternate,t,ju);if(null!==r)return void(Ru=r);if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Lu&&(Lu=5)}function Ad(e,t){do{var r=Cu(e.alternate,e);if(null!==r)return r.flags&=32767,void(Ru=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(Ru=e);Ru=e=r}while(null!==e);Lu=6,Ru=null}function Id(e,t,r,n,i,o,a,s,l,c){var u=it.T,d=mt.p;try{mt.p=2,it.T=null,function(e,t,r,n,i,o,a,s){do{kd()}while(null!==Zu);if(6&Tu)throw Error(Pe(327));var l=e.finishedWork;if(n=e.finishedLanes,null===l)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(function(e,t,r,n,i,o){var a=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=a&~r;0<r;){var u=31-Xt(r),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}r&=~d}0!==n&&sr(e,n,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,c|=Ji,o,a,s),e===ku&&(Ru=ku=null,Ou=0),!(10256&l.subtreeFlags)&&!(10256&l.flags)||Qu||(Qu=!0,ed=c,td=r,Nt(zt,function(){return kd(),null})),r=!!(15990&l.flags),15990&l.subtreeFlags||r?(r=it.T,it.T=null,o=mt.p,mt.p=2,a=Tu,Tu|=4,function(e,t){if(e=e.containerInfo,_h=bf,Ti(e=Ii(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(g){r=null;break e}var a=0,s=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==r||0!==i&&3!==d.nodeType||(s=a+i),d!==o||0!==n&&3!==d.nodeType||(l=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===r&&++c===i&&(s=a),h===o&&++u===n&&(l=a),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}r=-1===s||-1===l?null:{start:s,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Eh={focusedElem:e,selectionRange:r},bf=!1,Rc=t;null!==Rc;)if(e=(t=Rc).child,1028&t.subtreeFlags&&null!==e)e.return=t,Rc=e;else for(;null!==Rc;){switch(o=(t=Rc).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,r=t,i=o.memoizedProps,o=o.memoizedState,n=r.stateNode;try{var p=sl(r.type,i,(r.elementType,r.type));e=n.getSnapshotBeforeUpdate(p,o),n.__reactInternalSnapshotBeforeUpdate=e}catch(m){Od(r,r.return,m)}}break;case 3:if(1024&e)if(9===(r=(e=t.stateNode.containerInfo).nodeType))Ph(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ph(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(Pe(163))}if(null!==(e=t.sibling)){e.return=t.return,Rc=e;break}Rc=t.return}p=Oc,Oc=!1}(e,l),Vc(l,e),ki(Eh,e.containerInfo),bf=!!_h,Eh=_h=null,e.current=l,Nc(e,l.alternate,l),Mt(),Tu=a,mt.p=o,it.T=r):e.current=l,Qu?(Qu=!1,Zu=e,Ju=n):Td(e,c),0===(c=e.pendingLanes)&&(Ku=null),function(e){if(Gt&&"function"==typeof Gt.onCommitFiberRoot)try{Gt.onCommitFiberRoot(Wt,e,void 0,!(128&~e.current.flags))}catch(t){}}(l.stateNode),Hd(e),null!==t)for(i=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],i(c.value,{componentStack:c.stack});!!(3&Ju)&&kd(),c=e.pendingLanes,4194218&n&&42&c?e===nd?rd++:(rd=0,nd=e):rd=0,qd(0)}(e,t,r,n,d,i,o,a)}finally{it.T=u,mt.p=d}}function Td(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,ma(t))}function kd(){if(null!==Zu){var e=Zu,t=ed;ed=0;var r=cr(Ju),n=it.T,i=mt.p;try{if(mt.p=32>r?32:r,it.T=null,null===Zu)var o=!1;else{r=td,td=null;var a=Zu,s=Ju;if(Zu=null,Ju=0,6&Tu)throw Error(Pe(331));var l=Tu;if(Tu|=4,ou(a.current),Qc(a,a.current,s,r),Tu=l,qd(0),Gt&&"function"==typeof Gt.onPostCommitFiberRoot)try{Gt.onPostCommitFiberRoot(Wt,a)}catch(c){}o=!0}return o}finally{mt.p=i,it.T=n,Td(e,t)}}return!1}function Rd(e,t,r){t=lo(r,t),null!==(e=ac(e,t=pl(e.stateNode,t,2),2))&&(ar(e,2),Hd(e))}function Od(e,t,r){if(3===e.tag)Rd(e,e,r);else for(;null!==t;){if(3===t.tag){Rd(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Ku||!Ku.has(n))){e=lo(r,e),null!==(n=ac(t,r=gl(2),2))&&(ml(r,n,t,e),ar(n,2),Hd(n));break}}t=t.return}}function Nd(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new Iu;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(Bu=!0,i.add(r),e=Dd.bind(null,e,t,r),t.then(e,e))}function Dd(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ku===e&&(Ou&r)===r&&(4===Lu||3===Lu&&(62914560&Ou)===Ou&&300>Bt()-$u?!(2&Tu)&&pd(e,0):Uu|=r,Hu===Ou&&(Hu=0)),Hd(e)}function Pd(e,t){0===t&&(t=ir()),null!==(e=no(e,t))&&(ar(e,t),Hd(e))}function Md(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Pd(e,r)}function Bd(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(Pe(314))}null!==n&&n.delete(t),Pd(e,r)}var jd=null,Ld=null,Fd=!1,zd=!1,Ud=!1,Vd=0;function Hd(e){var t;e!==Ld&&null===e.next&&(null===Ld?jd=Ld=e:Ld=Ld.next=e),zd=!0,Fd||(Fd=!0,t=Wd,Oh(function(){6&Tu?Nt(Lt,t):t()}))}function qd(e,t){if(!Ud&&zd){Ud=!0;do{for(var r=!1,n=jd;null!==n;){if(0!==e){var i=n.pendingLanes;if(0===i)var o=0;else{var a=n.suspendedLanes,s=n.pingedLanes;o=(1<<31-Xt(42|e)+1)-1,o=201326677&(o&=i&~(a&~s))?201326677&o|1:o?2|o:0}0!==o&&(r=!0,Xd(n,o))}else o=Ou,!(3&(o=er(n,n===ku?o:0)))||tr(n,o)||(r=!0,Xd(n,o));n=n.next}}while(r);Ud=!1}}function Wd(){zd=Fd=!1;var e,t=0;0!==Vd&&(((e=window.event)&&"popstate"===e.type?e!==Ih&&(Ih=e,!0):(Ih=null,!1))&&(t=Vd),Vd=0);for(var r=Bt(),n=null,i=jd;null!==i;){var o=i.next,a=Gd(i,r);0===a?(i.next=null,null===n?jd=o:n.next=o,null===o&&(Ld=n)):(n=i,(0!==t||3&a)&&(zd=!0)),i=o}qd(t)}function Gd(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-Xt(o),s=1<<a,l=i[a];-1===l?0!==(s&r)&&0===(s&n)||(i[a]=rr(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(r=Ou,r=er(e,e===(t=ku)?r:0),n=e.callbackNode,0===r||e===t&&2===Nu||null!==e.cancelPendingCommit)return null!==n&&null!==n&&Dt(n),e.callbackNode=null,e.callbackPriority=0;if(!(3&r)||tr(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&Dt(n),cr(r)){case 2:case 8:r=Ft;break;case 32:default:r=zt;break;case 268435456:r=Vt}return n=$d.bind(null,e),r=Nt(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&Dt(n),e.callbackPriority=2,e.callbackNode=null,2}function $d(e,t){var r=e.callbackNode;if(kd()&&e.callbackNode!==r)return null;var n=Ou;return 0===(n=er(e,e===ku?n:0))?null:(sd(e,n,t),Gd(e,Bt()),null!=e.callbackNode&&e.callbackNode===r?$d.bind(null,e):null)}function Xd(e,t){if(kd())return null;sd(e,t,!0)}function Yd(){return 0===Vd&&(Vd=nr()),Vd}function Kd(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:nn(""+e)}function Qd(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Zd=0;Zd<Yi.length;Zd++){var Jd=Yi[Zd];Ki(Jd.toLowerCase(),"on"+(Jd[0].toUpperCase()+Jd.slice(1)))}Ki(Ui,"onAnimationEnd"),Ki(Vi,"onAnimationIteration"),Ki(Hi,"onAnimationStart"),Ki("dblclick","onDoubleClick"),Ki("focusin","onFocus"),Ki("focusout","onBlur"),Ki(qi,"onTransitionRun"),Ki(Wi,"onTransitionStart"),Ki(Gi,"onTransitionCancel"),Ki($i,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),th=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eh));function rh(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=c;try{o(i)}catch(u){ll(u)}i.currentTarget=null,o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=c;try{o(i)}catch(u){ll(u)}i.currentTarget=null,o=l}}}}function nh(e,t){var r=t[gr];void 0===r&&(r=t[gr]=new Set);var n=e+"__bubble";r.has(n)||(sh(t,e,2,!1),r.add(n))}function ih(e,t,r){var n=0;t&&(n|=4),sh(r,e,n,t)}var oh="_reactListening"+Math.random().toString(36).slice(2);function ah(e){if(!e[oh]){e[oh]=!0,Ar.forEach(function(t){"selectionchange"!==t&&(th.has(t)||ih(t,!1,e),ih(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[oh]||(t[oh]=!0,ih("selectionchange",!1,t))}}function sh(e,t,r,n){switch(Af(t)){case 2:var i=vf;break;case 8:i=_f;break;default:i=Ef}r=i.bind(null,t,r,e),i=void 0,!fn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function lh(e,t,r,n,i){var o=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=_r(s)))return;if(5===(l=a.tag)||6===l||26===l||27===l){n=o=a;continue e}s=s.parentNode}}n=n.return}dn(function(){var n=o,i=an(r),a=[];e:{var s=Xi.get(e);if(void 0!==s){var l=In,c=e;switch(e){case"keypress":if(0===bn(r))break e;case"keydown":case"keyup":l=Vn;break;case"focusin":c="focus",l=Dn;break;case"focusout":c="blur",l=Dn;break;case"beforeblur":case"afterblur":l=Dn;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=On;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=qn;break;case Ui:case Vi:case Hi:l=Pn;break;case $i:l=Wn;break;case"scroll":case"scrollend":l=kn;break;case"wheel":l=Gn;break;case"copy":case"cut":case"paste":l=Mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Hn;break;case"toggle":case"beforetoggle":l=$n}var u=!!(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=n;null!==p;){var g=p;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===h||null!=(g=hn(p,h))&&u.push(ch(p,g,f)),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,r,i),a.push({event:s,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===on||!(c=r.relatedTarget||r.fromElement)||!_r(c)&&!c[pr])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?_r(c):null)&&(d=dt(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=n),l!==c)){if(u=On,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Hn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:Sr(l),f=null==c?s:Sr(c),(s=new u(g,p+"leave",l,r,i)).target=d,s.relatedTarget=f,g=null,_r(i)===n&&((u=new u(h,p+"enter",c,r,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=dh(f))p++;for(f=0,g=h;g;g=dh(g))f++;for(;0<p-f;)u=dh(u),p--;for(;0<f-p;)h=dh(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=dh(u),h=dh(h)}u=null}else u=null;null!==l&&hh(a,s,l,u,!1),null!==c&&null!==d&&hh(a,d,c,u,!0)}if("select"===(l=(s=n?Sr(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=di;else if(oi(s))if(hi)m=_i;else{m=bi;var w=yi}else!(l=s.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?n&&en(n.elementType)&&(m=di):m=vi;switch(m&&(m=m(e,n))?ai(a,m,r,i):(w&&w(e,s,n),"focusout"===e&&n&&"number"===s.type&&null!=n.memoizedProps.value&&Gr(s,"number",s.value)),w=n?Sr(n):window,e){case"focusin":(oi(w)||"true"===w.contentEditable)&&(Oi=w,Ni=n,Di=null);break;case"focusout":Di=Ni=Oi=null;break;case"mousedown":Pi=!0;break;case"contextmenu":case"mouseup":case"dragend":Pi=!1,Mi(a,r,i);break;case"selectionchange":if(Ri)break;case"keydown":case"keyup":Mi(a,r,i)}var y;if(Yn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ni?ti(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Zn&&"ko"!==r.locale&&(ni||"onCompositionStart"!==b?"onCompositionEnd"===b&&ni&&(y=yn()):(mn="value"in(gn=i)?gn.value:gn.textContent,ni=!0)),0<(w=uh(n,b)).length&&(b=new Bn(b,e,null,r,i),a.push({event:b,listeners:w}),(y||null!==(y=ri(r)))&&(b.data=y))),(y=Qn?function(e,t){switch(e){case"compositionend":return ri(t);case"keypress":return 32!==t.which?null:(ei=!0,Jn);case"textInput":return(e=t.data)===Jn&&ei?null:e;default:return null}}(e,r):function(e,t){if(ni)return"compositionend"===e||!Yn&&ti(e,t)?(e=yn(),wn=mn=gn=null,ni=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zn&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(b=uh(n,"onBeforeInput")).length&&(w=new Bn("onBeforeInput","beforeinput",null,r,i),a.push({event:w,listeners:b}),w.data=y),function(e,t,r,n,i){if("submit"===t&&r&&r.stateNode===i){var o=Kd((i[fr]||null).action),a=n.submitter;a&&null!==(t=(t=a[fr]||null)?Kd(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new In("action","action",null,n,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Vd){var e=a?Qd(i,a):new FormData(i);Fs(r,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"==typeof o&&(s.preventDefault(),e=a?Qd(i,a):new FormData(i),Fs(r,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(a,e,n,r,i)}rh(a,t)})}function ch(e,t,r){return{instance:e,listener:t,currentTarget:r}}function uh(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=hn(e,r))&&n.unshift(ch(e,i,o)),null!=(i=hn(e,t))&&n.push(ch(e,i,o))),e=e.return}return n}function dh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function hh(e,t,r,n,i){for(var o=t._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===n)break;5!==s&&26!==s&&27!==s||null===c||(l=c,i?null!=(c=hn(r,o))&&a.unshift(ch(r,c,l)):i||null!=(c=hn(r,o))&&a.push(ch(r,c,l))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var fh=/\r\n?/g,ph=/\u0000|\uFFFD/g;function gh(e){return("string"==typeof e?e:""+e).replace(fh,"\n").replace(ph,"")}function mh(e,t){return t=gh(t),gh(e)===t}function wh(){}function yh(e,t,r,n,i,o){switch(r){case"children":"string"==typeof n?"body"===t||"textarea"===t&&""===n||Kr(e,n):("number"==typeof n||"bigint"==typeof n)&&"body"!==t&&Kr(e,""+n);break;case"className":Mr(e,"class",n);break;case"tabIndex":Mr(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Mr(e,r,n);break;case"style":Jr(e,n,o);break;case"data":if("object"!==t){Mr(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=nn(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"==typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===r?("input"!==t&&yh(e,t,"name",i.name,i,null),yh(e,t,"formEncType",i.formEncType,i,null),yh(e,t,"formMethod",i.formMethod,i,null),yh(e,t,"formTarget",i.formTarget,i,null)):(yh(e,t,"encType",i.encType,i,null),yh(e,t,"method",i.method,i,null),yh(e,t,"target",i.target,i,null))),null==n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=nn(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=wh);break;case"onScroll":null!=n&&nh("scroll",e);break;case"onScrollEnd":null!=n&&nh("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(Pe(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(Pe(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"muted":e.muted=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"==typeof n||"boolean"==typeof n||"symbol"==typeof n){e.removeAttribute("xlink:href");break}r=nn(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"==typeof n||"symbol"==typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":nh("beforetoggle",e),nh("toggle",e),Pr(e,"popover",n);break;case"xlinkActuate":Br(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Br(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Br(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Br(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Br(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Br(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Br(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Br(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Br(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Pr(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&Pr(e,r=tn.get(r)||r,n)}}function bh(e,t,r,n,i,o){switch(r){case"style":Jr(e,n,o);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(Pe(61));if(null!=(r=n.__html)){if(null!=i.children)throw Error(Pe(60));e.innerHTML=r}}break;case"children":"string"==typeof n?Kr(e,n):("number"==typeof n||"bigint"==typeof n)&&Kr(e,""+n);break;case"onScroll":null!=n&&nh("scroll",e);break;case"onScrollEnd":null!=n&&nh("scrollend",e);break;case"onClick":null!=n&&(e.onclick=wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ir.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(i=r.endsWith("Capture"),t=r.slice(2,i?r.length-7:void 0),"function"==typeof(o=null!=(o=e[fr]||null)?o[r]:null)&&e.removeEventListener(t,o,i),"function"!=typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):Pr(e,r,n):("function"!=typeof o&&null!==o&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,i)))}}function vh(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nh("error",e),nh("load",e);var n,i=!1,o=!1;for(n in r)if(r.hasOwnProperty(n)){var a=r[n];if(null!=a)switch(n){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Pe(137,t));default:yh(e,t,n,a,r,null)}}return o&&yh(e,t,"srcSet",r.srcSet,r,null),void(i&&yh(e,t,"src",r.src,r,null));case"input":nh("invalid",e);var s=n=a=o=null,l=null,c=null;for(i in r)if(r.hasOwnProperty(i)){var u=r[i];if(null!=u)switch(i){case"name":o=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":n=u;break;case"defaultValue":s=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(Pe(137,t));break;default:yh(e,t,i,u,r,null)}}return Wr(e,n,s,l,c,a,o,!1),void Fr(e);case"select":for(o in nh("invalid",e),i=a=n=null,r)if(r.hasOwnProperty(o)&&null!=(s=r[o]))switch(o){case"value":n=s;break;case"defaultValue":a=s;break;case"multiple":i=s;default:yh(e,t,o,s,r,null)}return t=n,r=a,e.multiple=!!i,void(null!=t?$r(e,!!i,t,!1):null!=r&&$r(e,!!i,r,!0));case"textarea":for(a in nh("invalid",e),n=o=i=null,r)if(r.hasOwnProperty(a)&&null!=(s=r[a]))switch(a){case"value":i=s;break;case"defaultValue":o=s;break;case"children":n=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(Pe(91));break;default:yh(e,t,a,s,r,null)}return Yr(e,i,o,n),void Fr(e);case"option":for(l in r)r.hasOwnProperty(l)&&null!=(i=r[l])&&("selected"===l?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:yh(e,t,l,i,r,null));return;case"dialog":nh("cancel",e),nh("close",e);break;case"iframe":case"object":nh("load",e);break;case"video":case"audio":for(i=0;i<eh.length;i++)nh(eh[i],e);break;case"image":nh("error",e),nh("load",e);break;case"details":nh("toggle",e);break;case"embed":case"source":case"link":nh("error",e),nh("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in r)if(r.hasOwnProperty(c)&&null!=(i=r[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(Pe(137,t));default:yh(e,t,c,i,r,null)}return;default:if(en(t)){for(u in r)r.hasOwnProperty(u)&&void 0!==(i=r[u])&&bh(e,t,u,i,r,void 0);return}}for(s in r)r.hasOwnProperty(s)&&null!=(i=r[s])&&yh(e,t,s,i,r,null)}var _h=null,Eh=null;function Sh(e){return 9===e.nodeType?e:e.ownerDocument}function Ch(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Ah(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ih=null,Th="function"==typeof setTimeout?setTimeout:void 0,kh="function"==typeof clearTimeout?clearTimeout:void 0,Rh="function"==typeof Promise?Promise:void 0,Oh="function"==typeof queueMicrotask?queueMicrotask:void 0!==Rh?function(e){return Rh.resolve(null).then(e).catch(Nh)}:Th;function Nh(e){setTimeout(function(){throw e})}function Dh(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void qf(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);qf(t)}function Ph(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Ph(r),vr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function Mh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function Bh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function jh(e,t,r){switch(t=Sh(r),e){case"html":if(!(e=t.documentElement))throw Error(Pe(452));return e;case"head":if(!(e=t.head))throw Error(Pe(453));return e;case"body":if(!(e=t.body))throw Error(Pe(454));return e;default:throw Error(Pe(451))}}var Lh=new Map,Fh=new Set;function zh(e){return"function"==typeof e.getRootNode?e.getRootNode():e.ownerDocument}var Uh=mt.d;mt.d={f:function(){var e=Uh.f(),t=hd();return e||t},r:function(e){var t=Er(e);null!==t&&5===t.tag&&"form"===t.type?Us(t):Uh.r(e)},D:function(e){Uh.D(e),Hh("dns-prefetch",e,null)},C:function(e,t){Uh.C(e,t),Hh("preconnect",e,t)},L:function(e,t,r){Uh.L(e,t,r);var n=Vh;if(n&&e&&t){var i='link[rel="preload"][as="'+Hr(t)+'"]';"image"===t&&r&&r.imageSrcSet?(i+='[imagesrcset="'+Hr(r.imageSrcSet)+'"]',"string"==typeof r.imageSizes&&(i+='[imagesizes="'+Hr(r.imageSizes)+'"]')):i+='[href="'+Hr(e)+'"]';var o=i;switch(t){case"style":o=Wh(e);break;case"script":o=Xh(e)}Lh.has(o)||(e=ot({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),Lh.set(o,e),null!==n.querySelector(i)||"style"===t&&n.querySelector(Gh(o))||"script"===t&&n.querySelector(Yh(o))||(vh(t=n.createElement("link"),"link",e),xr(t),n.head.appendChild(t)))}},m:function(e,t){Uh.m(e,t);var r=Vh;if(r&&e){var n=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+Hr(n)+'"][href="'+Hr(e)+'"]',o=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Xh(e)}if(!Lh.has(o)&&(e=ot({rel:"modulepreload",href:e},t),Lh.set(o,e),null===r.querySelector(i))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Yh(o)))return}vh(n=r.createElement("link"),"link",e),xr(n),r.head.appendChild(n)}}},X:function(e,t){Uh.X(e,t);var r=Vh;if(r&&e){var n=Cr(r).hoistableScripts,i=Xh(e),o=n.get(i);o||((o=r.querySelector(Yh(i)))||(e=ot({src:e,async:!0},t),(t=Lh.get(i))&&Jh(e,t),xr(o=r.createElement("script")),vh(o,"link",e),r.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}},S:function(e,t,r){Uh.S(e,t,r);var n=Vh;if(n&&e){var i=Cr(n).hoistableStyles,o=Wh(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=n.querySelector(Gh(o)))s.loading=5;else{e=ot({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Lh.get(o))&&Zh(e,r);var l=a=n.createElement("link");xr(l),vh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Qh(a,t,n)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Uh.M(e,t);var r=Vh;if(r&&e){var n=Cr(r).hoistableScripts,i=Xh(e),o=n.get(i);o||((o=r.querySelector(Yh(i)))||(e=ot({src:e,async:!0,type:"module"},t),(t=Lh.get(i))&&Jh(e,t),xr(o=r.createElement("script")),vh(o,"link",e),r.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}}};var Vh="undefined"==typeof document?null:document;function Hh(e,t,r){var n=Vh;if(n&&"string"==typeof t&&t){var i=Hr(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof r&&(i+='[crossorigin="'+r+'"]'),Fh.has(i)||(Fh.add(i),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(i)&&(vh(t=n.createElement("link"),"link",e),xr(t),n.head.appendChild(t)))}}function qh(e,t,r,n){var i,o,a,s,l=(l=xt.current)?zh(l):null;if(!l)throw Error(Pe(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof r.precedence&&"string"==typeof r.href?(t=Wh(r.href),(n=(r=Cr(l).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"==typeof r.href&&"string"==typeof r.precedence){e=Wh(r.href);var c=Cr(l).hoistableStyles,u=c.get(e);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,u),(c=l.querySelector(Gh(e)))&&!c._p&&(u.instance=c,u.state.loading=5),Lh.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Lh.set(e,r),c||(i=l,o=e,a=r,s=u.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?s.loading=1:(o=i.createElement("link"),s.preload=o,o.addEventListener("load",function(){return s.loading|=1}),o.addEventListener("error",function(){return s.loading|=2}),vh(o,"link",a),xr(o),i.head.appendChild(o))))),t&&null===n)throw Error(Pe(528,""));return u}if(t&&null!==n)throw Error(Pe(529,""));return null;case"script":return t=r.async,"string"==typeof(r=r.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Xh(r),(n=(r=Cr(l).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(Pe(444,e))}}function Wh(e){return'href="'+Hr(e)+'"'}function Gh(e){return'link[rel="stylesheet"]['+e+"]"}function $h(e){return ot({},e,{"data-precedence":e.precedence,precedence:null})}function Xh(e){return'[src="'+Hr(e)+'"]'}function Yh(e){return"script[async]"+e}function Kh(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Hr(r.href)+'"]');if(n)return t.instance=n,xr(n),n;var i=ot({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return xr(n=(e.ownerDocument||e).createElement("style")),vh(n,"style",i),Qh(n,r.precedence,e),t.instance=n;case"stylesheet":i=Wh(r.href);var o=e.querySelector(Gh(i));if(o)return t.state.loading|=4,t.instance=o,xr(o),o;n=$h(r),(i=Lh.get(i))&&Zh(n,i),xr(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),vh(o,"link",n),t.state.loading|=4,Qh(o,r.precedence,e),t.instance=o;case"script":return o=Xh(r.src),(i=e.querySelector(Yh(o)))?(t.instance=i,xr(i),i):(n=r,(i=Lh.get(o))&&Jh(n=ot({},r),i),xr(i=(e=e.ownerDocument||e).createElement("script")),vh(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(Pe(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Qh(n,r.precedence,e));return t.instance}function Qh(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,o=i,a=0;a<n.length;a++){var s=n[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Zh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Jh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ef=null;function tf(e,t,r){if(null===ef){var n=new Map,i=ef=new Map;i.set(r,n)}else(n=(i=ef).get(r))||(n=new Map,i.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),i=0;i<r.length;i++){var o=r[i];if(!(o[br]||o[hr]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=n.get(a);s?s.push(o):n.set(a,[o])}}return n}function rf(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function nf(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var of=null;function af(){}function sf(){if(this.count--,0===this.count)if(this.stylesheets)cf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lf=null;function cf(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lf=new Map,t.forEach(uf,e),lf=null,sf.call(e))}function uf(e,t){if(!(4&t.state.loading)){var r=lf.get(e);if(r)var n=r.get(null);else{r=new Map,lf.set(e,r);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(r.set(a.dataset.precedence,a),n=a)}n&&r.set(null,n)}a=(i=t.instance).getAttribute("data-precedence"),(o=r.get(a)||n)===n&&r.set(null,i),r.set(a,i),this.count++,n=sf.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var df={$$typeof:qe,Provider:null,Consumer:null,_currentValue:wt,_currentValue2:wt,_threadCount:0};function hf(e,t,r,n,i,o,a,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function ff(e,t,r,n,i,o,a,s,l,c,u,d){return e=new hf(e,t,r,a,s,l,c,d),t=1,!0===o&&(t|=24),o=cu(3,null,null,t),e.current=o,o.stateNode=e,(t=ga()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:n,isDehydrated:r,cache:t},nc(o),e}function pf(e){return e?e=ao:ao}function gf(e,t,r,n,i,o){i=pf(i),null===n.context?n.context=i:n.pendingContext=i,(n=oc(t)).payload={element:r},null!==(o=void 0===o?null:o)&&(n.callback=o),null!==(r=ac(e,n,t))&&(ad(r,0,t),sc(r,e,t))}function mf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function wf(e,t){mf(e,t),(e=e.alternate)&&mf(e,t)}function yf(e){if(13===e.tag){var t=no(e,67108864);null!==t&&ad(t,0,67108864),wf(e,67108864)}}var bf=!0;function vf(e,t,r,n){var i=it.T;it.T=null;var o=mt.p;try{mt.p=2,Ef(e,t,r,n)}finally{mt.p=o,it.T=i}}function _f(e,t,r,n){var i=it.T;it.T=null;var o=mt.p;try{mt.p=8,Ef(e,t,r,n)}finally{mt.p=o,it.T=i}}function Ef(e,t,r,n){if(bf){var i=Sf(n);if(null===i)lh(e,t,n,Cf,r),Mf(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Tf=Bf(Tf,e,t,r,n,i),!0;case"dragenter":return kf=Bf(kf,e,t,r,n,i),!0;case"mouseover":return Rf=Bf(Rf,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Of.set(o,Bf(Of.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Nf.set(o,Bf(Nf.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Mf(e,n),4&t&&-1<Pf.indexOf(e)){for(;null!==i;){var o=Er(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=Jt(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-Xt(a);s.entanglements[1]|=l,a&=~l}Hd(o),!(6&Tu)&&(Xu=Bt()+500,qd(0))}}break;case 13:null!==(s=no(o,2))&&ad(s,0,2),hd(),wf(o,2)}if(null===(o=Sf(n))&&lh(e,t,n,Cf,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else lh(e,t,n,null,r)}}function Sf(e){return xf(e=an(e))}var Cf=null;function xf(e){if(Cf=null,null!==(e=_r(e))){var t=dt(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=ht(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Cf=e,null}function Af(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jt()){case Lt:return 2;case Ft:return 8;case zt:case Ut:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var If=!1,Tf=null,kf=null,Rf=null,Of=new Map,Nf=new Map,Df=[],Pf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mf(e,t){switch(e){case"focusin":case"focusout":Tf=null;break;case"dragenter":case"dragleave":kf=null;break;case"mouseover":case"mouseout":Rf=null;break;case"pointerover":case"pointerout":Of.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nf.delete(t.pointerId)}}function Bf(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=Er(t))&&yf(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jf(e){var t=_r(e.target);if(null!==t){var r=dt(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=ht(r)))return e.blockedOn=t,void function(e,t){var r=mt.p;try{return mt.p=e,t()}finally{mt.p=r}}(e.priority,function(){if(13===r.tag){var e=id(),t=no(r,e);null!==t&&ad(t,0,e),wf(r,e)}})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Sf(e.nativeEvent);if(null!==r)return null!==(t=Er(r))&&yf(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);on=n,r.target.dispatchEvent(n),on=null,t.shift()}return!0}function Ff(e,t,r){Lf(e)&&r.delete(t)}function zf(){If=!1,null!==Tf&&Lf(Tf)&&(Tf=null),null!==kf&&Lf(kf)&&(kf=null),null!==Rf&&Lf(Rf)&&(Rf=null),Of.forEach(Ff),Nf.forEach(Ff)}function Uf(e,t){e.blockedOn===t&&(e.blockedOn=null,If||(If=!0,Oe.unstable_scheduleCallback(Oe.unstable_NormalPriority,zf)))}var Vf=null;function Hf(e){Vf!==e&&(Vf=e,Oe.unstable_scheduleCallback(Oe.unstable_NormalPriority,function(){Vf===e&&(Vf=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],i=e[t+2];if("function"!=typeof n){if(null===xf(n||r))continue;break}var o=Er(r);null!==o&&(e.splice(t,3),t-=3,Fs(o,{pending:!0,data:i,method:r.method,action:n},n,i))}}))}function qf(e){function t(t){return Uf(t,e)}null!==Tf&&Uf(Tf,e),null!==kf&&Uf(kf,e),null!==Rf&&Uf(Rf,e),Of.forEach(t),Nf.forEach(t);for(var r=0;r<Df.length;r++){var n=Df[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Df.length&&null===(r=Df[0]).blockedOn;)jf(r),null===r.blockedOn&&Df.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var i=r[n],o=r[n+1],a=i[fr]||null;if("function"==typeof o)a||Hf(r);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[fr]||null)s=a.formAction;else if(null!==xf(i))continue}else s=a.action;"function"==typeof s?r[n+1]=s:(r.splice(n,3),n-=3),Hf(r)}}}function Wf(e){this._internalRoot=e}function Gf(e){this._internalRoot=e}Gf.prototype.render=Wf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(Pe(409));gf(t.current,id(),e,t,null,null)},Gf.prototype.unmount=Wf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&kd(),gf(e.current,2,null,e,null,null),hd(),t[pr]=null}},Gf.prototype.unstable_scheduleHydration=function(e){if(e){var t=ur();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Df.length&&0!==t&&t<Df[r].priority;r++);Df.splice(r,0,e),0===r&&jf(e)}};var $f=Ne.version;if("19.0.0"!==$f)throw Error(Pe(527,$f,"19.0.0"));mt.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Pe(188));throw e=Object.keys(e).join(","),Error(Pe(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=dt(e)))throw Error(Pe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return ft(i),e;if(o===n)return ft(i),t;o=o.sibling}throw Error(Pe(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(Pe(189))}}if(r.alternate!==n)throw Error(Pe(190))}if(3!==r.tag)throw Error(Pe(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?pt(e):null)?null:e.stateNode};var Xf={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:it,findFiberByHostInstance:_r,reconcilerVersion:"19.0.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{Wt=Yf.inject(Xf),Gt=Yf}catch(jb){}}Te.createRoot=function(e,t){if(!Me(e))throw Error(Pe(299));var r=!1,n="",i=cl,o=ul,a=dl;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(a=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=ff(e,1,!1,null,0,r,n,i,o,a,0,null),e[pr]=t.current,ah(8===e.nodeType?e.parentNode:e),new Wf(t)},Te.hydrateRoot=function(e,t,r){if(!Me(e))throw Error(Pe(299));var n=!1,i="",o=cl,a=ul,s=dl,l=null;return null!=r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onUncaughtError&&(o=r.onUncaughtError),void 0!==r.onCaughtError&&(a=r.onCaughtError),void 0!==r.onRecoverableError&&(s=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&r.unstable_transitionCallbacks,void 0!==r.formState&&(l=r.formState)),(t=ff(e,1,!0,t,0,n,i,o,a,s,0,l)).context=pf(null),r=t.current,(i=oc(n=id())).callback=null,ac(r,i,n),t.current.lanes=n,ar(t,n),Hd(t),e[pr]=t.current,ah(e),new Gf(t)},Te.version="19.0.0",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(jb){console.error(jb)}}(),Ie.exports=Te;var Kf,Qf=Ie.exports;class Zf extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Jf extends Zf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ep extends Zf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class tp extends Zf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Kf||(Kf={}));class rp{constructor(e,{headers:t={},customFetch:r,region:n=Kf.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return r(this,arguments,void 0,function*(e,t={}){var r;let n,i;try{const{headers:o,method:a,body:s,signal:l,timeout:c}=t;let u={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let f;d&&"any"!==d&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),s&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?"undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=s):"string"==typeof s?(u["Content-Type"]="text/plain",f=s):"undefined"!=typeof FormData&&s instanceof FormData?f=s:(u["Content-Type"]="application/json",f=JSON.stringify(s)):f=s;let p=l;c&&(i=new AbortController,n=setTimeout(()=>i.abort(),c),l?(p=i.signal,l.addEventListener("abort",()=>i.abort())):p=i.signal);const g=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:f,signal:p}).catch(e=>{throw new Jf(e)}),m=g.headers.get("x-relay-error");if(m&&"true"===m)throw new ep(g);if(!g.ok)throw new tp(g);let w,y=(null!==(r=g.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return w="application/json"===y?yield g.json():"application/octet-stream"===y||"application/pdf"===y?yield g.blob():"text/event-stream"===y?g:"multipart/form-data"===y?yield g.formData():yield g.text(),{data:w,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof tp||o instanceof ep?o.context:void 0}}finally{n&&clearTimeout(n)}})}}var np={};const ip=ie(n);var op,ap,sp,lp,cp,up,dp={},hp={},fp={},pp={},gp={},mp={};function wp(){if(op)return mp;op=1,Object.defineProperty(mp,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return mp.default=e,mp}function yp(){if(ap)return gp;ap=1,Object.defineProperty(gp,"__esModule",{value:!0});const e=ip.__importDefault(wp());return gp.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(t,r){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var r,n,i,o;let a=null,s=null,l=null,c=t.status,u=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(s="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(r=this.headers.get("Accept"))||void 0===r?void 0:r.includes("application/vnd.pgrst.plan+text"))?e:JSON.parse(e))}const e=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),o=null===(i=t.headers.get("content-range"))||void 0===i?void 0:i.split("/");e&&o&&o.length>1&&(l=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,c=406,u="Not Acceptable"):s=1===s.length?s[0]:null)}else{const r=await t.text();try{a=JSON.parse(r),Array.isArray(a)&&404===t.status&&(s=[],a=null,c=200,u="OK")}catch(d){404===t.status&&""===r?(c=204,u="No Content"):a={message:r}}if(a&&this.isMaybeSingle&&(null===(o=null==a?void 0:a.details)||void 0===o?void 0:o.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&this.shouldThrowOnError)throw new e.default(a)}return{error:a,data:s,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,r,n,i,o,a;let s="";const l=null==e?void 0:e.cause;if(l){const o=null!==(t=null==l?void 0:l.message)&&void 0!==t?t:"",a=null!==(r=null==l?void 0:l.code)&&void 0!==r?r:"";s=`${null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"FetchError"}: ${null==e?void 0:e.message}`,s+=`\n\nCaused by: ${null!==(i=null==l?void 0:l.name)&&void 0!==i?i:"Error"}: ${o}`,a&&(s+=` (${a})`),(null==l?void 0:l.stack)&&(s+=`\n${l.stack}`)}else s=null!==(o=null==e?void 0:e.stack)&&void 0!==o?o:"";return{error:{message:`${null!==(a=null==e?void 0:e.name)&&void 0!==a?a:"FetchError"}: ${null==e?void 0:e.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}},gp}function bp(){if(sp)return pp;sp=1,Object.defineProperty(pp,"__esModule",{value:!0});const e=ip.__importDefault(yp());class t extends e.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=void 0===n?"offset":`${n}.offset`,o=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const s=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${s};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return pp.default=t,pp}function vp(){if(lp)return fp;lp=1,Object.defineProperty(fp,"__esModule",{value:!0});const e=ip.__importDefault(bp()),t=new RegExp("[,()]");class r extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,r){const n=Array.from(new Set(r)).map(e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");const o=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}return fp.default=r,fp}function _p(){if(cp)return hp;cp=1,Object.defineProperty(hp,"__esModule",{value:!0});const e=ip.__importDefault(vp());return hp.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(t,r){const{head:n=!1,count:i}=null!=r?r:{},o=n?"HEAD":"GET";let a=!1;const s=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",s),i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==r&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(t,{count:r}={}){var n;return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}},hp}Object.defineProperty(np,"__esModule",{value:!0});var Ep=np.PostgrestError=np.PostgrestBuilder=np.PostgrestTransformBuilder=np.PostgrestFilterBuilder=np.PostgrestQueryBuilder=np.PostgrestClient=void 0;const Sp=ip,Cp=Sp.__importDefault(function(){if(up)return dp;up=1,Object.defineProperty(dp,"__esModule",{value:!0});const e=ip,t=e.__importDefault(_p()),r=e.__importDefault(vp());class n{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:o}={}){var a;let s;const l=new URL(`${this.url}/rpc/${e}`);let c;n||i?(s=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(s="POST",c=t);const u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new r.default({method:s,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}}return dp.default=n,dp}());var xp=np.PostgrestClient=Cp.default;const Ap=Sp.__importDefault(_p());var Ip=np.PostgrestQueryBuilder=Ap.default;const Tp=Sp.__importDefault(vp());var kp=np.PostgrestFilterBuilder=Tp.default;const Rp=Sp.__importDefault(bp());var Op=np.PostgrestTransformBuilder=Rp.default;const Np=Sp.__importDefault(yp());var Dp=np.PostgrestBuilder=Np.default;const Pp=Sp.__importDefault(wp());Ep=np.PostgrestError=Pp.default;var Mp=np.default={PostgrestClient:Cp.default,PostgrestQueryBuilder:Ap.default,PostgrestFilterBuilder:Tp.default,PostgrestTransformBuilder:Rp.default,PostgrestBuilder:Np.default,PostgrestError:Pp.default};const Bp=Ae({__proto__:null,get PostgrestBuilder(){return Dp},get PostgrestClient(){return xp},get PostgrestError(){return Ep},get PostgrestFilterBuilder(){return kp},get PostgrestQueryBuilder(){return Ip},get PostgrestTransformBuilder(){return Op},default:Mp},[np]),{PostgrestClient:jp,PostgrestQueryBuilder:Lp,PostgrestFilterBuilder:Fp,PostgrestTransformBuilder:zp,PostgrestBuilder:Up,PostgrestError:Vp}=Mp||Bp;class Hp{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(Fg){return!1}}}const qp="1.0.0",Wp=qp,Gp=1e4;var $p,Xp,Yp,Kp,Qp,Zp;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}($p||($p={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Xp||(Xp={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Yp||(Yp={})),function(e){e.websocket="websocket"}(Kp||(Kp={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Qp||(Qp={}));class Jp{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r,n,i;const o=e.topic,a=null!==(t=e.ref)&&void 0!==t?t:"",s=null!==(r=e.join_ref)&&void 0!==r?r:"",l=e.payload.event,c=null!==(i=null===(n=e.payload)||void 0===n?void 0:n.payload)&&void 0!==i?i:new ArrayBuffer(0),u=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+a.length+o.length+l.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let h=new DataView(d),f=0;h.setUint8(f++,this.KINDS.userBroadcastPush),h.setUint8(f++,s.length),h.setUint8(f++,a.length),h.setUint8(f++,o.length),h.setUint8(f++,l.length),h.setUint8(f++,this.BINARY_ENCODING),Array.from(s,e=>h.setUint8(f++,e.charCodeAt(0))),Array.from(a,e=>h.setUint8(f++,e.charCodeAt(0))),Array.from(o,e=>h.setUint8(f++,e.charCodeAt(0))),Array.from(l,e=>h.setUint8(f++,e.charCodeAt(0)));var p=new Uint8Array(d.byteLength+c.byteLength);return p.set(new Uint8Array(d),0),p.set(new Uint8Array(c),d.byteLength),p.buffer}_encodeJsonUserBroadcastPush(e){var t,r,n,i;const o=e.topic,a=null!==(t=e.ref)&&void 0!==t?t:"",s=null!==(r=e.join_ref)&&void 0!==r?r:"",l=e.payload.event,c=null!==(i=null===(n=e.payload)||void 0===n?void 0:n.payload)&&void 0!==i?i:{},u=(new TextEncoder).encode(JSON.stringify(c)).buffer,d=this.USER_BROADCAST_PUSH_META_LENGTH+s.length+a.length+o.length+l.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),p=0;f.setUint8(p++,this.KINDS.userBroadcastPush),f.setUint8(p++,s.length),f.setUint8(p++,a.length),f.setUint8(p++,o.length),f.setUint8(p++,l.length),f.setUint8(p++,this.JSON_ENCODING),Array.from(s,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(a,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(o,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(p++,e.charCodeAt(0)));var g=new Uint8Array(h.byteLength+u.byteLength);return g.set(new Uint8Array(h),0),g.set(new Uint8Array(u),h.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){const r=JSON.parse(e),[n,i,o,a,s]=r;return t({join_ref:n,ref:i,topic:o,event:a,payload:s})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,n)}_decodeUserBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4);let s=this.HEADER_LENGTH+4;const l=r.decode(e.slice(s,s+n));s+=n;const c=r.decode(e.slice(s,s+i));s+=i;const u=r.decode(e.slice(s,s+o));s+=o;const d=e.slice(s,e.byteLength),h=a===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return o>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}}class eg{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Zp||(Zp={}));const tg=(e,t,r={})=>{var n;const i=null!==(n=r.skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((r,n)=>(r[n]=rg(n,e,t,i),r),{}):{}},rg=(e,t,r,n)=>{const i=t.find(t=>t.name===e),o=null==i?void 0:i.type,a=r[e];return o&&!n.includes(o)?ng(o,a):ig(a)},ng=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return lg(t,r)}switch(e){case Zp.bool:return og(t);case Zp.float4:case Zp.float8:case Zp.int2:case Zp.int4:case Zp.int8:case Zp.numeric:case Zp.oid:return ag(t);case Zp.json:case Zp.jsonb:return sg(t);case Zp.timestamp:return cg(t);case Zp.abstime:case Zp.date:case Zp.daterange:case Zp.int4range:case Zp.int8range:case Zp.money:case Zp.reltime:case Zp.text:case Zp.time:case Zp.timestamptz:case Zp.timetz:case Zp.tsrange:case Zp.tstzrange:default:return ig(t)}},ig=e=>e,og=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ag=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},sg=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},lg=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const o=e.slice(1,r);try{n=JSON.parse("["+o+"]")}catch(i){n=o?o.split(","):[]}return n.map(e=>ng(t,e))}return e},cg=e=>"string"==typeof e?e.replace(" ","T"):e,ug=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class dg{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hg,fg,pg,gg;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(hg||(hg={}));class mg{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mg.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=mg.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=mg.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const i=this.cloneDeep(e),o=this.transformState(t),a={},s={};return this.map(i,(e,t)=>{o[e]||(s[e]=t)}),this.map(o,(e,t)=>{const r=i[e];if(r){const n=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),o=t.filter(e=>i.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);o.length>0&&(a[e]=o),l.length>0&&(s[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:s},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(t,n)=>{var i;const o=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(n),o.length>0){const r=e[t].map(e=>e.presence_ref),n=o.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,o,n)}),this.map(o,(t,r)=>{let i=e[t];if(!i)return;const o=r.map(e=>e.presence_ref);i=i.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=i,n(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(fg||(fg={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(pg||(pg={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(gg||(gg={}));class wg{constructor(e,t={config:{}},r){var n,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Xp.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new dg(this,Yp.join,this.params,this.timeout),this.rejoinTimer=new eg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xp.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xp.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Xp.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xp.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Xp.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yp.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new mg(this),this.broadcastEndpointURL=ug(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(i=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===i?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Xp.closed){const{config:{broadcast:o,presence:a,private:s}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[pg.PRESENCE]&&this.bindings[pg.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),u={},d={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:l,private:s};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(gg.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(gg.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,i=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,o=[];for(let r=0;r<i;r++){const i=n[r],{filter:{event:a,schema:s,table:l,filter:c}}=i,u=t&&t[r];if(!u||u.event!==a||u.schema!==s||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Xp.errored,void(null==e||e(gg.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e(gg.SUBSCRIBED))}null==e||e(gg.SUBSCRIBED)}).receive("error",t=>{this.state=Xp.errored,null==e||e(gg.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(gg.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Xp.joined&&e===pg.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===a.status)return{success:!0};let s=a.statusText;try{const e=await a.json();s=e.error||e.message||s}catch(l){}return Promise.reject(new Error(s))}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,i,o;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xp.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yp.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new dg(this,Yp.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xp.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new dg(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:s,leave:l,join:c}=Yp;if(r&&[a,s,l,c].indexOf(o)>=0&&r!==this._joinRef())return;let u=this._onMessage(o,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===o}).map(e=>e.callback(u,r)):null===(i=this.bindings[o])||void 0===i||i.filter(e=>{var r,n,i,a,s,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,a=null===(r=e.filter)||void 0===r?void 0:r.event;return o&&(null===(n=t.ids)||void 0===n?void 0:n.includes(o))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const r=null===(s=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:o}=e,a={schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:o};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===Xp.closed}_isJoined(){return this.state===Xp.joined}_isJoining(){return this.state===Xp.joining}_isLeaving(){return this.state===Xp.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&wg.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yp.close,{},e)}_onError(e){this._on(Yp.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xp.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=tg(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=tg(e.columns,e.old_record)),t}}const yg=()=>{},bg=25e3,vg=10,_g=100,Eg=[1e3,2e3,5e3,1e4];class Sg{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gp,this.transport=null,this.heartbeatIntervalMs=bg,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yg,this.ref=0,this.reconnectTimer=null,this.vsn=Wp,this.logger=yg,this.conn=null,this.sendBuffer=[],this.serializer=new Jp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Kp.websocket}`,this.httpEndpoint=ug(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hp.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case $p.connecting:return Qp.Connecting;case $p.open:return Qp.Open;case $p.closing:return Qp.Closing;default:return Qp.Closed}}isConnected(){return this.connectionState()===Qp.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new wg(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(Bb){this.log("error","error in heartbeat callback",Bb)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},_g)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(Bb){this.log("error","error in heartbeat callback",Bb)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(Bb){this.log("error","error in heartbeat callback",Bb)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(Bb){this.log("error","error in heartbeat callback",Bb)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:i}=e,o=i?`(${i})`:"",a=n.status||"";this.log("receive",`${a} ${t} ${r} ${o}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===$p.open||this.conn.readyState===$p.connecting)try{this.conn.close()}catch(Bb){this.log("error","Error closing connection",Bb)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yp.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.84.0"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(Yp.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(Bb){this.log("error",`error in ${e} callback`,Bb)}})}catch(Bb){this.log("error",`error triggering ${e} callbacks`,Bb)}}_setupReconnectionTimer(){this.reconnectTimer=new eg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vg)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,i,o,a,s,l,c,u,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:Gp,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:bg,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(o=null==e?void 0:e.accessToken)&&void 0!==o?o:null,this.heartbeatCallback=null!==(a=null==e?void 0:e.heartbeatCallback)&&void 0!==a?a:yg,this.vsn=null!==(s=null==e?void 0:e.vsn)&&void 0!==s?s:Wp,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>Eg[e-1]||1e4,this.vsn){case qp:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null==e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Cg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function xg(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ag extends Cg{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ig extends Cg{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Tg=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),kg=e=>{if(Array.isArray(e))return e.map(e=>kg(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=kg(r)}),t},Rg=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Og=(e,t,n)=>r(void 0,void 0,void 0,function*(){const r=yield Response;e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(r=>{const n=e.status||500,i=(null==r?void 0:r.statusCode)||n+"";t(new Ag(Rg(r),n,i))}).catch(e=>{t(new Ig(Rg(e),e))}):t(new Ig(Rg(e),e))}),Ng=(e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r)):i};function Dg(e,t,n,i,o,a){return r(this,void 0,void 0,function*(){return new Promise((r,s)=>{e(n,Ng(t,i,o,a)).then(e=>{if(!e.ok)throw e;return(null==i?void 0:i.noResolveJson)?e:e.json()}).then(e=>r(e)).catch(e=>Og(e,s,i))})})}function Pg(e,t,n,i){return r(this,void 0,void 0,function*(){return Dg(e,"GET",t,n,i)})}function Mg(e,t,n,i,o){return r(this,void 0,void 0,function*(){return Dg(e,"POST",t,i,o,n)})}function Bg(e,t,n,i,o){return r(this,void 0,void 0,function*(){return Dg(e,"PUT",t,i,o,n)})}function jg(e,t,n,i,o){return r(this,void 0,void 0,function*(){return Dg(e,"DELETE",t,i,o,n)})}class Lg{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return r(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xg(e))return{data:null,error:e};throw e}})}}var Fg;class zg{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Fg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lg(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return r(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(xg(e))return{data:null,error:e};throw e}})}}Fg=Symbol.toStringTag;const Ug={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hg{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Tg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,i){return r(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},Vg),i);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const s=o.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),s&&r.append("metadata",this.encodeMetadata(s)),r.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(r=n,r.has("cacheControl")||r.append("cacheControl",o.cacheControl),s&&!r.has("metadata")&&r.append("metadata",this.encodeMetadata(s))):(r=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,s&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(s))),("undefined"!=typeof ReadableStream&&r instanceof ReadableStream||r&&"object"==typeof r&&"pipe"in r&&"function"==typeof r.pipe)&&!o.duplex&&(o.duplex="half")),(null==i?void 0:i.headers)&&(a=Object.assign(Object.assign({},a),i.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Bg:Mg)(this.fetch,`${this.url}/object/${c}`,r,Object.assign({headers:a},(null==o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}upload(e,t,n){return r(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return r(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Vg.upsert},i),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]=`max-age=${t.cacheControl}`,o["content-type"]=t.contentType),{data:{path:r,fullPath:(yield Bg(this.fetch,a.toString(),e,{headers:o})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(xg(s))return{data:null,error:s};throw s}})}createSignedUploadUrl(e,t){return r(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const i=yield Mg(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Cg("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}update(e,t,n){return r(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return r(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}copy(e,t,n){return r(this,void 0,void 0,function*(){try{return{data:{path:(yield Mg(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return r(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Mg(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return r(this,void 0,void 0,function*(){try{const r=yield Mg(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=n?`?${n}`:"",o=this._getFinalPath(e);return new zg(()=>Pg(this.fetch,`${this.url}/${r}/${o}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return r(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Pg(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:kg(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}exists(e){return r(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,i){return r(this,void 0,void 0,function*(){return Dg(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xg(n)&&n instanceof Ig){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);const o=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&n.push(a);let s=n.join("&");return""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${s}`)}}}remove(e){return r(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}list(e,t,n){return r(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ug),t),{prefix:e||""});return{data:yield Mg(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}listV2(e,t){return r(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Mg(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const qg="2.84.0",Wg={"X-Client-Info":`storage-js/${qg}`};class Gg{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);(null==n?void 0:n.useNewHostname)&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wg),t),this.fetch=Tg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return r(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Pg(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}getBucket(e){return r(this,void 0,void 0,function*(){try{return{data:yield Pg(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}createBucket(e){return r(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Mg(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return r(this,void 0,void 0,function*(){try{return{data:yield Bg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(xg(r))return{data:null,error:r};throw r}})}emptyBucket(e){return r(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}deleteBucket(e){return r(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class $g{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wg),t),this.fetch=Tg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return r(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}listBuckets(e){return r(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Pg(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}deleteBucket(e){return r(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(xg(t))return{data:null,error:t};throw t}})}}const Xg={"X-Client-Info":`storage-js/${qg}`,"Content-Type":"application/json"};class Yg extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Kg(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class Qg extends Yg{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zg extends Yg{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Jg;!function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}(Jg||(Jg={}));const em=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),tm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rm=(e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function nm(e,t,n,i,o,a){return r(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,rm(t,i,o,a)).then(e=>{if(!e.ok)throw e;if(null==i?void 0:i.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>s(e)).catch(e=>((e,t,n)=>r(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const r=e.status||500,n=e;if("function"==typeof n.json)n.json().then(e=>{const n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new Qg(tm(e),r,n))}).catch(()=>{const e=r+"",i=n.statusText||`HTTP ${r} error`;t(new Qg(i,r,e))});else{const e=r+"",i=n.statusText||`HTTP ${r} error`;t(new Qg(i,r,e))}}else t(new Zg(tm(e),e))}))(e,l,i))})})}function im(e,t,n,i,o){return r(this,void 0,void 0,function*(){return nm(e,"POST",t,i,o,n)})}class om{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xg),t),this.fetch=em(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return r(this,void 0,void 0,function*(){try{return{data:(yield im(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}getIndex(e,t){return r(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kg(r))return{data:null,error:r};throw r}})}listIndexes(e){return r(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return r(this,void 0,void 0,function*(){try{return{data:(yield im(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kg(r))return{data:null,error:r};throw r}})}}class am{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xg),t),this.fetch=em(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return r(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield im(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}getVectors(e){return r(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}listVectors(e){return r(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield im(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}queryVectors(e){return r(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}deleteVectors(e){return r(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield im(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}}class sm{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xg),t),this.fetch=em(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return r(this,void 0,void 0,function*(){try{return{data:(yield im(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}getBucket(e){return r(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}listBuckets(){return r(this,arguments,void 0,function*(e={}){try{return{data:yield im(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}deleteBucket(e){return r(this,void 0,void 0,function*(){try{return{data:(yield im(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kg(t))return{data:null,error:t};throw t}})}}class lm extends sm{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new cm(this.url,this.headers,e,this.fetch)}}class cm extends om{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return r(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return r(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return r(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return r(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new um(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class um extends am{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return r(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return r(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return r(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return r(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return r(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class dm extends Gg{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Hg(this.url,this.headers,e,this.fetch)}get vectors(){return new lm(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $g(this.url+"/iceberg",this.headers,this.fetch)}}let hm="";hm="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const fm={headers:{"X-Client-Info":`supabase-js-${hm}/2.84.0`}},pm={schema:"public"},gm={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mm={},wm=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),ym=(e,t,r)=>{const n=wm(r),i=Headers;return async(r,o)=>{var a;const s=null!==(a=await t())&&void 0!==a?a:e;let l=new i(null==o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${s}`),n(r,Object.assign(Object.assign({},o),{headers:l}))}},bm="2.84.0",vm=3e4,_m=9e4,Em={"X-Client-Info":`gotrue-js/${bm}`},Sm="X-Supabase-Api-Version",Cm={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},xm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Am extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Im(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Tm extends Am{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class km extends Am{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Rm extends Am{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class Om extends Rm{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Nm extends Rm{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dm extends Rm{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Pm extends Rm{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mm extends Rm{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bm extends Rm{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function jm(e){return Im(e)&&"AuthRetryableFetchError"===e.name}class Lm extends Rm{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Fm extends Rm{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Um=" \t\n\r=".split(""),Vm=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Um.length;t+=1)e[Um[t].charCodeAt(0)]=-2;for(let t=0;t<zm.length;t+=1)e[zm[t].charCodeAt(0)]=t;return e})();function Hm(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(zm[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(zm[e]),t.queuedBits-=6}}function qm(e,t,r){const n=Vm[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Wm(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let a=0;a<e.length;a+=1)qm(e.charCodeAt(a),i,o);return t.join("")}function Gm(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function $m(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)qm(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Xm(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Gm(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Ym(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Hm(e,r,n)),Hm(null,r,n),t.join("")}const Km=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Qm={tested:!1,writable:!1},Zm=()=>{if(!Km())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Bb){return!1}if(Qm.tested)return Qm.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qm.tested=!0,Qm.writable=!0}catch(Bb){Qm.tested=!0,Qm.writable=!1}return Qm.writable},Jm=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),ew=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},tw=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(Fg){return r}},rw=async(e,t)=>{await e.removeItem(t)};class nw{constructor(){this.promise=new nw.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function iw(e){const t=e.split(".");if(3!==t.length)throw new Fm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!xm.test(t[r]))throw new Fm("JWT not in base64url format");return{header:JSON.parse(Wm(t[0])),payload:JSON.parse(Wm(t[1])),signature:$m(t[2]),raw:{header:t[0],payload:t[1]}}}function ow(e){return("0"+e.toString(16)).substr(-2)}async function aw(e){if("undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder)return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sw(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,ow).join("")}();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await ew(e,`${t}-code-verifier`,i);const o=await aw(n);return[o,n===o?"plain":"s256"]}nw.promiseConstructor=Promise;const lw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,cw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function uw(e){if(!cw.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dw(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hw(e){return JSON.parse(JSON.stringify(e))}const fw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pw=[502,503,504];async function gw(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new Bm(fw(e),0);if(pw.includes(e.status))throw new Bm(fw(e),e.status);let n,i;try{n=await e.json()}catch(Bb){throw new km(fw(Bb),Bb)}const o=function(e){const t=e.headers.get(Sm);if(!t)return null;if(!t.match(lw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Bb){return null}}(e);if(o&&o.getTime()>=Cm.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?i=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(i=n.error_code),i){if("weak_password"===i)throw new Lm(fw(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Om}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Lm(fw(n),e.status,n.weak_password.reasons);throw new Tm(fw(n),e.status||500,i)}async function mw(e,t,r,n){var i;const o=Object.assign({},null==n?void 0:n.headers);o[Sm]||(o[Sm]=Cm.name),(null==n?void 0:n.jwt)&&(o.Authorization=`Bearer ${n.jwt}`);const a=null!==(i=null==n?void 0:n.query)&&void 0!==i?i:{};(null==n?void 0:n.redirectTo)&&(a.redirect_to=n.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,r,n,i,o){const a=((e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))})(t,n,i,o);let s;try{s=await e(r,Object.assign({},a))}catch(Bb){throw console.error(Bb),new Bm(fw(Bb),0)}if(s.ok||await gw(s),null==n?void 0:n.noResolveJson)return s;try{return await s.json()}catch(Bb){await gw(Bb)}}(e,t,r+s,{headers:o,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function ww(e){var t;let r=null;var n;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n))),{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function yw(e){const t=ww(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function bw(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function vw(e){return{data:e,error:null}}function _w(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:a}=e,s=i(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:o,verification_type:a},user:Object.assign({},s)},error:null}}function Ew(e){return e}const Sw=["global","local","others"];class Cw{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Jm(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Sw[0]){if(Sw.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sw.join(", ")}`);try{return await mw(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Im(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await mw(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:bw})}catch(r){if(Im(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=i(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await mw(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:_w,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Im(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await mw(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bw})}catch(t){if(Im(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,o,a,s;try{const l={nextPage:null,lastPage:0,total:0},c=await mw(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:Ew});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(s=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==s?s:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Im(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){uw(e);try{return await mw(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bw})}catch(t){if(Im(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){uw(e);try{return await mw(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:bw})}catch(r){if(Im(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){uw(e);try{return await mw(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:bw})}catch(r){if(Im(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){uw(e.userId);try{const{data:t,error:r}=await mw(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Im(t))return{data:null,error:t};throw t}}async _deleteFactor(e){uw(e.userId),uw(e.id);try{return{data:await mw(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Im(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,i,o,a,s;try{const l={nextPage:null,lastPage:0,total:0},c=await mw(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:Ew});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(s=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==s?s:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Im(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await mw(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Im(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await mw(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Im(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await mw(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(Im(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await mw(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Im(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await mw(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Im(t))return{data:null,error:t};throw t}}}function xw(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Aw=!!(globalThis&&Zm()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Iw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Tw extends Iw{}async function kw(e,t,r){Aw&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Aw&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw Aw&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Tw(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Aw)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Bb){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Bb)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Aw&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Aw&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}function Rw(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Ow(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Nw extends Error{constructor({message:e,code:t,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=null!=n?n:r instanceof Error?r.name:void 0)&&void 0!==i?i:"Unknown Error",this.code=t}}class Dw extends Nw{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Pw({error:e,options:t}){var r,n,i;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Nw({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(r=o.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new Nw({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(n=o.authenticatorSelection)||void 0===n?void 0:n.userVerification))return new Nw({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(i=o.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new Nw({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Nw({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Nw({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name)return 0===o.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Nw({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Nw({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Uw(t))return new Nw({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(o.rp.id!==t)return new Nw({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Nw({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Nw({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nw({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Mw({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Nw({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Nw({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Uw(t))return new Nw({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new Nw({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Nw({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nw({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const Bw=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function jw(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,o=i(e,["challenge","user","excludeCredentials"]),a=$m(t).buffer,s=Object.assign(Object.assign({},r),{id:$m(r.id).buffer}),l=Object.assign(Object.assign({},o),{challenge:a,user:s});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];l.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:$m(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return l}function Lw(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=i(e,["challenge","allowCredentials"]),o=$m(t).buffer,a=Object.assign(Object.assign({},n),{challenge:o});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:$m(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}function Fw(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ym(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ym(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function zw(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ym(new Uint8Array(i.authenticatorData)),clientDataJSON:Ym(new Uint8Array(i.clientDataJSON)),signature:Ym(new Uint8Array(i.signature)),userHandle:i.userHandle?Ym(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Uw(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Vw(){var e,t;return!!(Km()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Hw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ww(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(const i of e)if(i)for(const e in i){const o=i[e];if(void 0!==o)if(Array.isArray(o))n[e]=o;else if(r(o))n[e]=o;else if(t(o)){const r=n[e];t(r)?n[e]=Ww(r,o):n[e]=Ww(o)}else n[e]=o}return n}class Gw{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const s=null!=n?n:Bw.createNewAbortSignal();if("create"===o.webauthn.type){const{user:e}=o.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(o.webauthn.type){case"create":{const t=function(e,t){return Ww(Hw,e,t||{})}(o.webauthn.credential_options.publicKey,null==i?void 0:i.create),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dw("Browser returned unexpected credential type",t)}:{data:null,error:new Dw("Empty credential response",t)}}catch(jb){return{data:null,error:Pw({error:jb,options:e})}}}({publicKey:t,signal:s});return r?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}case"request":{const t=function(e,t){return Ww(qw,e,t||{})}(o.webauthn.credential_options.publicKey,null==i?void 0:i.request),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dw("Browser returned unexpected credential type",t)}:{data:null,error:new Dw("Empty credential response",t)}}catch(jb){return{data:null,error:Mw({error:jb,options:e})}}}(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:t,signal:s}));return r?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}}}catch(o){return Im(o)?{data:null,error:o}:{data:null,error:new km("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},i){if(!t)return{data:null,error:new Am("rpId is required for WebAuthn authentication")};try{if(!Vw())return{data:null,error:new km("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:a};const{webauthn:s}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:s.type,rpId:t,rpOrigins:r,credential_response:s.credential_response}})}catch(o){return Im(o)?{data:null,error:o}:{data:null,error:new km("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},i){if(!t)return{data:null,error:new Am("rpId is required for WebAuthn registration")};try{if(!Vw())return{data:null,error:new km("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(t=>{var r;return null===(r=t.data)||void 0===r?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};const{data:s,error:l}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:n},{create:i});return s?this._verify({factorId:o.id,challengeId:s.challengeId,webauthn:{rpId:t,rpOrigins:r,type:s.webauthn.type,credential_response:s.webauthn.credential_response}}):{data:null,error:l}}catch(o){return Im(o)?{data:null,error:o}:{data:null,error:new km("Unexpected error in register",o)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Bb){"undefined"!=typeof self&&(self.globalThis=self)}}();const $w={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Em,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xw(e,t,r){return await r()}const Yw={};class Kw{get jwks(){var e,t;return null!==(t=null===(e=Yw[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Yw[this.storageKey]=Object.assign(Object.assign({},Yw[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Yw[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Yw[this.storageKey]=Object.assign(Object.assign({},Yw[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},$w),e);if(this.storageKey=i.storageKey,this.instanceID=null!==(t=Kw.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Kw.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.instanceID>0&&Km()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Cw({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Jm(i.fetch),this.lock=i.lock||Xw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Km()&&(null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=kw:this.lock=Xw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Gw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Zm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=xw(this.memoryStorage)),Km()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Bb){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Bb)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${bm}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(Km()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(Bb){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Km()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Im(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Im(t)?this._returnResult({error:t}):this._returnResult({error:new km("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const i=await mw(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:ww}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),this._returnResult({data:{user:l,session:s},error:null})}catch(i){if(Im(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,r,n;try{let i;if("email"in e){const{email:r,password:n,options:o}=e;let a=null,s=null;"pkce"===this.flowType&&([a,s]=await sw(this.storage,this.storageKey)),i=await mw(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==o?void 0:o.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:a,code_challenge_method:s},xform:ww})}else{if(!("phone"in e))throw new Dm("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:a}=e;i=await mw(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:o,data:null!==(r=null==a?void 0:a.data)&&void 0!==r?r:{},channel:null!==(n=null==a?void 0:a.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:ww})}}const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),this._returnResult({data:{user:l,session:s},error:null})}catch(i){if(Im(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:i}=e;t=await mw(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:yw})}else{if(!("phone"in e))throw new Dm("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:i}=e;t=await mw(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:yw})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new Nm;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(Im(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,i,o,a,s,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:g}=e;let m;if(Km())if("object"==typeof d)m=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");m=e.ethereum}else{if("object"!=typeof d||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=d}const w=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href),y=await m.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=Rw(y[0]);let v=null===(r=null==g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!v){const e=await m.request({method:"eth_chainId"});v=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${u?`${u}://${n}`:n} wants you to sign in with your Ethereum account:\n${Rw(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${d}\nVersion: ${h}\nChain ID: ${r}${a?`\nNonce: ${a}`:""}\nIssued At: ${o.toISOString()}`;if(i&&(p+=`\nExpiration Time: ${i.toISOString()}`),s&&(p+=`\nNot Before: ${s.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:w.host,address:b,statement:p,uri:w.href,version:"1",chainId:v,nonce:null===(n=null==g?void 0:g.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(o=null===(i=null==g?void 0:g.signInWithEthereum)||void 0===i?void 0:i.issuedAt)&&void 0!==o?o:new Date,expirationTime:null===(a=null==g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.expirationTime,notBefore:null===(s=null==g?void 0:g.signInWithEthereum)||void 0===s?void 0:s.notBefore,requestId:null===(l=null==g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==g?void 0:g.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await m.request({method:"personal_sign",params:[Ow(h),b]})}try{const{data:t,error:r}=await mw(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:ww});if(r)throw r;if(!t||!t.session||!t.user){const e=new Nm;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(p){if(Im(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,r,n,i,o,a,s,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:g,options:m}=e;let w;if(Km())if("object"==typeof h)w=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");w=e.solana}else{if("object"!=typeof h||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=h}const y=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in w&&w.signIn){const e=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==m?void 0:m.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in w&&"function"==typeof w.signMessage&&"publicKey"in w&&"object"==typeof w&&w.publicKey&&"toBase58"in w.publicKey&&"function"==typeof w.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${y.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(n=null===(r=null==m?void 0:m.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(i=null==m?void 0:m.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null===(o=null==m?void 0:m.signInWithSolana)||void 0===o?void 0:o.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null===(a=null==m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null===(s=null==m?void 0:m.signInWithSolana)||void 0===s?void 0:s.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null===(l=null==m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await w.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await mw(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Ym(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ww});if(r)throw r;if(!t||!t.session||!t.user){const e=new Nm;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(g){if(Im(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(e){const t=await tw(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await mw(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ww});if(await rw(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user){const e=new Nm;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:i})}catch(i){if(Im(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:i,nonce:o}=e,a=await mw(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ww}),{data:s,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s||!s.session||!s.user){const e=new Nm;return this._returnResult({data:{user:null,session:null},error:e})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:s,error:l})}catch(t){if(Im(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,i,o;try{if("email"in e){const{email:n,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await sw(this.storage,this.storageKey));const{error:s}=await mw(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(r=null==i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:t,options:r}=e,{data:a,error:s}=await mw(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(i=null==r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(o=null==r?void 0:r.channel)&&void 0!==o?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:s})}throw new Dm("You must provide either an email or phone number.")}catch(a){if(Im(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:o,error:a}=await mw(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ww});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const s=o.session,l=o.user;return(null==s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),this._returnResult({data:{user:l,session:s},error:null})}catch(n){if(Im(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n,i,o;try{let a=null,s=null;"pkce"===this.flowType&&([a,s]=await sw(this.storage,this.storageKey));const l=await mw(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:vw});return(null===(i=l.data)||void 0===i?void 0:i.url)&&Km()&&!(null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(a){if(Im(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Om;const{error:n}=await mw(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(Im(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await mw(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await mw(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a})}throw new Dm("You must provide either an email or phone number and a type")}catch(t){if(Im(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(Bb){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Bb){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await tw(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<_m;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await tw(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=dw()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!=typeof r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await mw(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bw}):await this._useSession(async e=>{var t,r,n;const{data:i,error:o}=e;if(o)throw o;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await mw(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:bw}):{data:{user:null},error:new Om}})}catch(t){if(Im(t))return function(e){return Im(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await rw(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Om;const o=n.session;let a=null,s=null;"pkce"===this.flowType&&null!=e.email&&([a,s]=await sw(this.storage,this.storageKey));const{data:l,error:c}=await mw(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:s}),jwt:o.access_token,xform:bw});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(Im(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Om;const t=Date.now()/1e3;let r=t,n=!0,i=null;const{payload:o}=iw(e.access_token);if(o.exp&&(r=o.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:n,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(Im(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:i}=t;if(i)throw i;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new Om;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Im(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Km())throw new Pm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Pm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Mm("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Pm("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Mm("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:s,token_type:l}=e;if(!(i&&a&&o&&l))throw new Pm("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;s&&(d=parseInt(s));const h=d-c;1e3*h<=vm&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:g}=await this._getUser(i);if(g)throw g;const m={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:d,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(r){if(Im(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await tw(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({error:i});const o=null===(r=n.session)||void 0===r?void 0:r.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return Im(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await rw(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:i}=t;if(i)throw i;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(jb){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",jb),console.error(jb)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await sw(this.storage,this.storageKey,!0));try{return await mw(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Im(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,i,o,a;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await mw(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(o=s.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0})});if(n)throw n;return Km()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(r){if(Im(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:i}}=t;if(n)throw n;const{options:o,provider:a,token:s,access_token:l,nonce:c}=e,u=await mw(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null==i?void 0:i.access_token)&&void 0!==r?r:void 0,body:{provider:a,id_token:s,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:ww}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new Nm})}catch(n){if(Im(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)throw o;return await mw(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await mw(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ww})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&jm(t)&&Date.now()+r-i<vm},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await r(i);if(!n(i,null,t))return void e(t)}catch(Bb){if(!n(i,Bb))return void t(Bb)}})()}))}catch(i){if(this._debug(t,"error",i),Im(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Km()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await tw(this.storage,this.storageKey);if(i&&this.userStorage){let t=await tw(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await ew(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:dw()}else if(i&&!i.user&&!i.user){const e=await tw(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await rw(this.storage,this.storageKey+"-user"),await ew(this.storage,this.storageKey,i)):i.user=dw()}if(this._debug(r,"session from storage",i),!this._isValidSession(i))return this._debug(r,"session is not valid"),void(null!==i&&await this._removeSession());const o=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<_m;if(this._debug(r,`session has${o?"":" not"} expired with margin of 90000s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),jm(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(jb){return this._debug(r,"error",jb),void console.error(jb)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Om;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new nw;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Om;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(i){if(this._debug(n,"error",i),Im(i)){const e={data:null,error:i};return jm(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(Bb){n.push(Bb)}});if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ew(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=hw(e);await ew(this.storage,this.storageKey,n)}else{const e=hw(t);await ew(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await rw(this.storage,this.storageKey),await rw(this.storage,this.storageKey+"-code-verifier"),await rw(this.storage,this.storageKey+"-user"),this.userStorage&&await rw(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Km()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Bb){console.error("removing visibilitychange callback failed",Bb)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),vm);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/vm);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(Bb){console.error("Auto refresh tick failed with error. This is likely a transient error.",Bb)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Bb){if(!(Bb.isAcquireTimeout||Bb instanceof Iw))throw Bb;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Km()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await sw(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?this._returnResult({data:null,error:i}):await mw(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:s,error:l}=await mw(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===s.type&&(null===(n=null==s?void 0:s.totp)||void 0===n?void 0:n.qr_code)&&(s.totp.qr_code=`data:image/svg+xml;utf-8,${s.totp.qr_code}`),this._returnResult({data:s,error:null}))})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Fw(e.webauthn.credential_response):zw(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:s}=await mw(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return s?this._returnResult({data:null,error:s}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:s}))})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=await mw(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:jw(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Lw(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(i),"verified"===i.status&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=iw(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;return(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(a="aal2"),{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await mw(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Om})})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Om});const o=await mw(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return o.data&&o.data.redirect_url&&Km()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Im(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Om});const o=await mw(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return o.data&&o.data.redirect_url&&Km()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Im(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await mw(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Om})})}catch(e){if(Im(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await mw(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Om})})}catch(t){if(Im(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>n)return r;const{data:i,error:o}=await mw(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:s}}=iw(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:i,header:n,signature:o},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,o,Xm(`${a}.${s}`))))throw new Fm("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(Im(r))return this._returnResult({data:null,error:r});throw r}}}Kw.nextInstanceID={};const Qw=Kw;class Zw extends Qw{constructor(e){super(e)}}class Jw{constructor(e,t,r){var n,i,o;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const s=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,n;const{db:i,auth:o,realtime:a,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(r=null==d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null==s?void 0:s.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:pm,realtime:mm,auth:Object.assign(Object.assign({},gm),{storageKey:s}),global:fm});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(i=l.global.headers)&&void 0!==i?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=l.auth)&&void 0!==o?o:{},this.headers,l.global.fetch),this.fetch=ym(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new jp(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new dm(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new rp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:a,lock:s,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:s,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Sg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ey=((e,t,r)=>new Jw(e,t,r))("https://qlhvvhballsotkknrpgk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsaHZ2aGJhbGxzb3Rra25ycGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NTUzODEsImV4cCI6MjA3OTIzMTM4MX0.v7z5VCHX2OY99a_ViYRThGIQLo2eqjpYxNgQfo5afCo"),ty=()=>null!==ey,ry=re.createContext(void 0),ny=({children:e})=>{const[t,r]=re.useState(null),[n,i]=re.useState(null),[a,s]=re.useState(!0),[l,c]=re.useState(!1);re.useEffect(()=>{var e;if("true"===localStorage.getItem("guestMode"))return c(!0),void s(!1);null==ey||ey.auth.getSession().then(({data:{session:e}})=>{var t;i(e),r(null!==(t=null==e?void 0:e.user)&&void 0!==t?t:null),s(!1)});const{data:{subscription:t}}=null!==(e=null==ey?void 0:ey.auth.onAuthStateChange((e,t)=>{var n;i(t),r(null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null),c(!1),localStorage.removeItem("guestMode"),s(!1)}))&&void 0!==e?e:{data:{subscription:null}};return()=>null==t?void 0:t.unsubscribe()},[]);const u={user:t,session:n,loading:a,isGuest:l,signUp:async(e,t)=>{if(!ey)return{error:{message:"Supabase not configured"}};const{error:r}=await ey.auth.signUp({email:e,password:t});return{error:r}},signIn:async(e,t)=>{if(!ey)return{error:{message:"Supabase not configured"}};const{error:r}=await ey.auth.signInWithPassword({email:e,password:t});return{error:r}},signInWithGoogle:async()=>{if(!ey)return{error:{message:"Supabase not configured"}};const{error:e}=await ey.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/museum-app/`}});return{error:e}},signInWithApple:async()=>{if(!ey)return{error:{message:"Supabase not configured"}};const{error:e}=await ey.auth.signInWithOAuth({provider:"apple",options:{redirectTo:`${window.location.origin}/museum-app/`}});return{error:e}},signOut:async()=>{ey&&(await ey.auth.signOut(),c(!1),localStorage.removeItem("guestMode"))},continueAsGuest:()=>{c(!0),localStorage.setItem("guestMode","true")}};return o.jsx(ry.Provider,{value:u,children:e})},iy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm108.25 138.29l-134.4 160a16 16 0 01-12 5.71h-.27a16 16 0 01-11.89-5.3l-57.6-64a16 16 0 1123.78-21.4l45.29 50.32 122.59-145.91a16 16 0 0124.5 20.58z'/></svg>",oy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M160 368L32 256l128-112M352 368l128-112-128-112M304 96l-96 320' class='ionicon-fill-none ionicon-stroke-width'/></svg>",ay="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M448 341.37V170.61A32 32 0 00432.11 143l-152-88.46a47.94 47.94 0 00-48.24 0L79.89 143A32 32 0 0064 170.61v170.76A32 32 0 0079.89 369l152 88.46a48 48 0 0048.24 0l152-88.46A32 32 0 00448 341.37z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M69 153.99l187 110 187-110M256 463.99v-200' class='ionicon-fill-none ionicon-stroke-width'/></svg>",sy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 448a32 32 0 01-18-5.57c-78.59-53.35-112.62-89.93-131.39-112.8-40-48.75-59.15-98.8-58.61-153C48.63 114.52 98.46 64 159.08 64c44.08 0 74.61 24.83 92.39 45.51a6 6 0 009.06 0C278.31 88.81 308.84 64 352.92 64c60.62 0 110.45 50.52 111.08 112.64.54 54.21-18.63 104.26-58.61 153-18.77 22.87-52.8 59.45-131.39 112.8a32 32 0 01-18 5.56z'/></svg>",ly="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M352.92 80C288 80 256 144 256 144s-32-64-96.92-64c-52.76 0-94.54 44.14-95.08 96.81-1.1 109.33 86.73 187.08 183 252.42a16 16 0 0018 0c96.26-65.34 184.09-143.09 183-252.42-.54-52.67-42.32-96.81-95.08-96.81z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",cy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='48' y='80' width='416' height='352' rx='48' ry='48' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='336' cy='176' r='32' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M304 335.79l-90.66-90.49a32 32 0 00-43.87-1.3L48 352M224 432l123.34-123.34a32 32 0 0143.11-2L464 368' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",uy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 56C145.72 56 56 145.72 56 256s89.72 200 200 200 200-89.72 200-200S366.28 56 256 56zm0 82a26 26 0 11-26 26 26 26 0 0126-26zm48 226h-88a16 16 0 010-32h28v-88h-16a16 16 0 010-32h32a16 16 0 0116 16v104h28a16 16 0 010 32z'/></svg>",dy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M48 112h288M192 64v48M272 448l96-224 96 224M301.5 384h133M281.3 112S257 206 199 277 80 384 80 384' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 336s-35-27-72-75-56-85-56-85' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",hy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M208 352h-64a96 96 0 010-192h64M304 160h64a96 96 0 010 192h-64M163.29 256h187.42' stroke-linecap='round' stroke-linejoin='round' stroke-width='36' class='ionicon-fill-none'/></svg>",fy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M424 80H88a56.06 56.06 0 00-56 56v240a56.06 56.06 0 0056 56h336a56.06 56.06 0 0056-56V136a56.06 56.06 0 00-56-56zm-14.18 92.63l-144 112a16 16 0 01-19.64 0l-144-112a16 16 0 1119.64-25.26L256 251.73l134.18-104.36a16 16 0 0119.64 25.26z'/></svg>",py="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M160 136c0-30.62 4.51-61.61 16-88C99.57 81.27 48 159.32 48 248c0 119.29 96.71 216 216 216 88.68 0 166.73-51.57 200-128-26.39 11.49-57.38 16-88 16-119.29 0-216-96.71-216-216z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",gy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M342 444h46a56 56 0 0056-56v-46M444 170v-46a56 56 0 00-56-56h-46M170 444h-46a56 56 0 01-56-56v-46M68 170v-46a56 56 0 0156-56h46' stroke-linecap='round' stroke-linejoin='round' stroke-width='44' class='ionicon-fill-none'/></svg>",my="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 192h40a40 40 0 0140 40v192a40 40 0 01-40 40H136a40 40 0 01-40-40V232a40 40 0 0140-40h40M336 128l-80-80-80 80M256 321V48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",wy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M256 48v48M256 416v48M403.08 108.92l-33.94 33.94M142.86 369.14l-33.94 33.94M464 256h-48M96 256H48M403.08 403.08l-33.94-33.94M142.86 142.86l-33.94-33.94' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='256' r='80' stroke-linecap='round' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",yy=()=>{const{t:e}=he(),t=oe(),{signIn:r,signUp:n,signInWithGoogle:i,signInWithApple:m,continueAsGuest:w}=(()=>{const e=re.useContext(ry);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e})(),[y,b]=re.useState(!1),[v,_]=re.useState(!1),[E,S]=re.useState(""),[C,x]=re.useState(""),[A,I]=re.useState(!1),[T,k]=re.useState(!1),[R,O]=re.useState("");return o.jsx(a,{children:o.jsx(s,{fullscreen:!0,className:"welcome-content",children:o.jsxs("div",{className:"welcome-container",children:[o.jsxs("div",{className:"welcome-header",children:[o.jsx("div",{className:"logo-container",children:o.jsxs("svg",{className:"museum-logo",width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("polyline",{points:"25,50 60,18 95,50",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),o.jsx("polyline",{points:"32,44 60,25 88,44",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),o.jsx("line",{x1:"35",y1:"55",x2:"35",y2:"85",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"}),o.jsx("line",{x1:"60",y1:"55",x2:"60",y2:"95",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"}),o.jsx("line",{x1:"85",y1:"55",x2:"85",y2:"85",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"}),o.jsx("line",{x1:"25",y1:"100",x2:"95",y2:"100",stroke:"rgba(255, 255, 255, 0.95)",strokeWidth:"3",strokeLinecap:"round"})]})}),o.jsx("h1",{className:"app-title",children:e("virtualMuseum")||"Virtual Museum"}),o.jsx("p",{className:"app-tagline",children:e("exploreHistory")||"Explore History in Your Hands"})]}),o.jsxs("div",{className:"auth-container",children:[y?o.jsx(o.Fragment,{children:o.jsx(u,{className:"auth-card",children:o.jsxs(d,{children:[o.jsx("h2",{className:"auth-title",children:v?e("signUp")||"Sign Up":e("login")||"Login"}),R&&o.jsx(h,{color:"danger",className:"error-text",children:o.jsx("p",{children:R})}),o.jsxs(f,{lines:"none",className:"auth-input",children:[o.jsx(c,{icon:fy,slot:"start"}),o.jsx(p,{type:"email",placeholder:e("email")||"Email",value:E,onIonInput:e=>S(e.detail.value)})]}),o.jsxs(f,{lines:"none",className:"auth-input",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M368 192h-16v-80a96 96 0 10-192 0v80h-16a64.07 64.07 0 00-64 64v176a64.07 64.07 0 0064 64h224a64.07 64.07 0 0064-64V256a64.07 64.07 0 00-64-64zm-48 0H192v-80a64 64 0 11128 0z'/></svg>",slot:"start"}),o.jsx(p,{type:A?"text":"password",placeholder:e("password")||"Password",value:C,onIonInput:e=>x(e.detail.value)}),o.jsx(c,{icon:A?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M432 448a15.92 15.92 0 01-11.31-4.69l-352-352a16 16 0 0122.62-22.62l352 352A16 16 0 01432 448zM248 315.85l-51.79-51.79a2 2 0 00-3.39 1.69 64.11 64.11 0 0053.49 53.49 2 2 0 001.69-3.39zM264 196.15L315.87 248a2 2 0 003.4-1.69 64.13 64.13 0 00-53.55-53.55 2 2 0 00-1.72 3.39z'/><path d='M491 273.36a32.2 32.2 0 00-.1-34.76c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.68 96a226.54 226.54 0 00-71.82 11.79 4 4 0 00-1.56 6.63l47.24 47.24a4 4 0 003.82 1.05 96 96 0 01116 116 4 4 0 001.05 3.81l67.95 68a4 4 0 005.4.24 343.81 343.81 0 0067.24-77.4zM256 352a96 96 0 01-93.3-118.63 4 4 0 00-1.05-3.81l-66.84-66.87a4 4 0 00-5.41-.23c-24.39 20.81-47 46.13-67.67 75.72a31.92 31.92 0 00-.64 35.54c26.41 41.33 60.39 76.14 98.28 100.65C162.06 402 207.92 416 255.68 416a238.22 238.22 0 0072.64-11.55 4 4 0 001.61-6.64l-47.47-47.46a4 4 0 00-3.81-1.05A96 96 0 01256 352z'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='64'/><path d='M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96c-42.52 0-84.33 12.15-124.27 36.11-40.73 24.43-77.63 60.12-109.68 106.07a31.92 31.92 0 00-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416c46.71 0 93.81-14.43 136.2-41.72 38.46-24.77 72.72-59.66 99.08-100.92a32.2 32.2 0 00-.1-34.76zM256 352a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>",slot:"end",onClick:()=>I(!A),style:{cursor:"pointer"}})]}),o.jsx(l,{expand:"block",onClick:async()=>{if(!E||!C)return void O(e("pleaseEnterEmailPassword")||"Please enter email and password");k(!0),O("");const{error:i}=v?await n(E,C):await r(E,C);i?(O(i.message),k(!1)):v?(O(e("checkEmailVerification")||"Please check your email to verify your account"),k(!1)):t.push("/tabs/gallery")},disabled:T,className:"submit-button",children:T?o.jsx(g,{name:"crescent"}):v?e("signUp")||"Sign Up":e("login")||"Login"}),o.jsxs("div",{className:"auth-switch",children:[o.jsx(h,{children:v?e("alreadyHaveAccount")||"Already have an account?":e("dontHaveAccount")||"Don't have an account?"}),o.jsx(l,{fill:"clear",size:"small",onClick:()=>{_(!v),O("")},children:v?e("login")||"Login":e("signUp")||"Sign Up"})]}),o.jsx(l,{fill:"clear",size:"small",onClick:()=>b(!1),className:"back-button",children:e("back")||"Back"})]})})}):o.jsxs(o.Fragment,{children:[o.jsxs(l,{expand:"block",className:"social-button google-button",onClick:async()=>{k(!0),O("");const{error:e}=await i();e&&(O(e.message),k(!1))},disabled:T,children:[o.jsx(c,{slot:"start",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M473.16 221.48l-2.26-9.59H262.46v88.22H387c-12.93 61.4-72.93 93.72-121.94 93.72-35.66 0-73.25-15-98.13-39.11a140.08 140.08 0 01-41.8-98.88c0-37.16 16.7-74.33 41-98.78s61-38.13 97.49-38.13c41.79 0 71.74 22.19 82.94 32.31l62.69-62.36C390.86 72.72 340.34 32 261.6 32c-60.75 0-119 23.27-161.58 65.71C58 139.5 36.25 199.93 36.25 256s20.58 113.48 61.3 155.6c43.51 44.92 105.13 68.4 168.58 68.4 57.73 0 112.45-22.62 151.45-63.66 38.34-40.4 58.17-96.3 58.17-154.9 0-24.67-2.48-39.32-2.59-39.96z'/></svg>"}),e("continueWithGoogle")||"Continue with Google"]}),o.jsxs(l,{expand:"block",className:"social-button apple-button",onClick:async()=>{k(!0),O("");const{error:e}=await m();e&&(O(e.message),k(!1))},disabled:T,children:[o.jsx(c,{slot:"start",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M349.13 136.86c-40.32 0-57.36 19.24-85.44 19.24-28.79 0-50.75-19.1-85.69-19.1-34.2 0-70.67 20.88-93.83 56.45-32.52 50.16-27 144.63 25.67 225.11 18.84 28.81 44 61.12 77 61.47h.6c28.68 0 37.2-18.78 76.67-19h.6c38.88 0 46.68 18.89 75.24 18.89h.6c33-.35 59.51-36.15 78.35-64.85 13.56-20.64 18.6-31 29-54.35-76.19-28.92-88.43-136.93-13.08-178.34-23-28.8-55.32-45.48-85.79-45.48z'/><path d='M340.25 32c-24 1.63-52 16.91-68.4 36.86-14.88 18.08-27.12 44.9-22.32 70.91h1.92c25.56 0 51.72-15.39 67-35.11 14.72-18.77 25.88-45.37 21.8-72.66z'/></svg>"}),e("continueWithApple")||"Continue with Apple"]}),o.jsx("div",{className:"divider",children:o.jsx("span",{children:e("or")||"or"})}),o.jsxs(l,{expand:"block",fill:"outline",className:"email-toggle-button",onClick:()=>b(!0),children:[o.jsx(c,{slot:"start",icon:fy}),e("continueWithEmail")||"Continue with Email"]})]}),o.jsx("div",{className:"guest-mode",children:o.jsx(l,{fill:"clear",onClick:()=>{w(),t.push("/tabs/gallery")},className:"guest-button",children:e("continueAsGuest")||"Continue as Guest"})})]}),o.jsx("div",{className:"welcome-footer",children:o.jsx("p",{children:e("welcomeFooter")||"Discover ancient artifacts, explore 3D exhibits, and test your knowledge"})})]})})})};var by;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(by||(by={}));var vy,_y,Ey=new Map([[by.QR_CODE,"QR_CODE"],[by.AZTEC,"AZTEC"],[by.CODABAR,"CODABAR"],[by.CODE_39,"CODE_39"],[by.CODE_93,"CODE_93"],[by.CODE_128,"CODE_128"],[by.DATA_MATRIX,"DATA_MATRIX"],[by.MAXICODE,"MAXICODE"],[by.ITF,"ITF"],[by.EAN_13,"EAN_13"],[by.EAN_8,"EAN_8"],[by.PDF_417,"PDF_417"],[by.RSS_14,"RSS_14"],[by.RSS_EXPANDED,"RSS_EXPANDED"],[by.UPC_A,"UPC_A"],[by.UPC_E,"UPC_E"],[by.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Sy(e){return Object.values(by).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(vy||(vy={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(_y||(_y={}));var Cy,xy=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[_y.SCAN_TYPE_CAMERA,_y.SCAN_TYPE_FILE],e}(),Ay=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Ey.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Ey.get(t))},e}(),Iy=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(Cy||(Cy={}));var Ty=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:Cy.UNKWOWN_ERROR}},e}(),ky=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function Ry(e){return null==e}var Oy=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Ny=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!=typeof e){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if(n.has(a))return t.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},e}(),Dy={exports:{}};!function(e){function t(e){return null==e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function n(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function o(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}var a,s=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.defineProperty(n,"name",{value:r.name,enumerable:!1}),i(n,r.prototype),o(n),n}return n(t,e),t}(Error);class l extends s{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}l.kind="Exception";class c extends l{}c.kind="ArgumentException";class u extends l{}u.kind="IllegalArgumentException";class d{constructor(e){if(this.binarizer=e,null===e)throw new u("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,r,n){const i=this.binarizer.getLuminanceSource().crop(e,t,r,n);return new d(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new d(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new d(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(Bb){return""}}}class h extends l{static getChecksumInstance(){return new h}}h.kind="ChecksumException";class f{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class p{static arraycopy(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}static currentTimeMillis(){return Date.now()}}class g extends l{}g.kind="IndexOutOfBoundsException";class m extends g{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}m.kind="ArrayIndexOutOfBoundsException";class w{static fill(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t}static fillWithin(e,t,r,n){w.rangeCheck(e.length,t,r);for(let i=t;i<r;i++)e[i]=n}static rangeCheck(e,t,r){if(t>r)throw new u("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new m(t);if(r>e)throw new m(r)}static asList(...e){return e}static create(e,t,r){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(r))}static createInt32Array(e,t,r){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(r))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const r of e)t=31*t+r;return t}static fillUint8Array(e,t){for(let r=0;r!==e.length;r++)e[r]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)}static copyOfRange(e,t,r){const n=r-t,i=new Int32Array(n);return p.arraycopy(e,t,i,0,n),i}static binarySearch(e,t,r){void 0===r&&(r=w.numberComparator);let n=0,i=e.length-1;for(;n<=i;){const o=i+n>>1,a=r(t,e[o]);if(a>0)n=o+1;else{if(!(a<0))return o;i=o-1}}return-n-1}static numberComparator(e,t){return e-t}}class y{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let r=31;return t=e<<16,0!==t&&(r-=16,e=t),t=e<<8,0!==t&&(r-=8,e=t),t=e<<4,0!==t&&(r-=4,e=t),t=e<<2,0!==t&&(r-=2,e=t),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}y.MIN_VALUE_32_BITS=-2147483648,y.MAX_VALUE=Number.MAX_SAFE_INTEGER;class b{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=null==t?b.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=b.makeArray(e);p.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return!!(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),i=r[n];i&=~((1<<(31&e))-1);const o=r.length;for(;0===i;){if(++n===o)return t;i=r[n]}const a=32*n+y.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),i=~r[n];i&=~((1<<(31&e))-1);const o=r.length;for(;0===i;){if(++n===o)return t;i=~r[n]}const a=32*n+y.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new u;if(t===e)return;t--;const r=Math.floor(e/32),n=Math.floor(t/32),i=this.bits;for(let o=r;o<=n;o++){const a=(2<<(o<n?31:31&t))-(1<<(o>r?0:31&e));i[o]|=a}}clear(){const e=this.bits.length,t=this.bits;for(let r=0;r<e;r++)t[r]=0}isRange(e,t,r){if(t<e||e<0||t>this.size)throw new u;if(t===e)return!0;t--;const n=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let a=n;a<=i;a++){const s=(2<<(a<i?31:31&t))-(1<<(a>n?0:31&e))&4294967295;if((o[a]&s)!==(r?s:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new u("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let r=t;r>0;r--)this.appendBit(1==(e>>r-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let r=0;r<t;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new u("Sizes don't match");const t=this.bits;for(let r=0,n=t.length;r<n;r++)t[r]^=e.bits[r]}toBytes(e,t,r,n){for(let i=0;i<n;i++){let n=0;for(let t=0;t<8;t++)this.get(e)&&(n|=1<<7-t),e++;t[r+i]=n}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,n=this.bits;for(let i=0;i<r;i++){let r=n[i];r=r>>1&1431655765|(1431655765&r)<<1,r=r>>2&858993459|(858993459&r)<<2,r=r>>4&252645135|(252645135&r)<<4,r=r>>8&16711935|(16711935&r)<<8,r=r>>16&65535|(65535&r)<<16,e[t-i]=r}if(this.size!==32*r){const t=32*r-this.size;let n=e[0]>>>t;for(let i=1;i<r;i++){const r=e[i];n|=r<<32-t,e[i-1]=n,n=r>>>t}e[r-1]=n}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof b))return!1;const t=e;return this.size===t.size&&w.equals(this.bits,t.bits)}hashCode(){return 31*this.size+w.hashCode(this.bits)}toString(){let e="";for(let t=0,r=this.size;t<r;t++)7&t||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new b(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(a||(a={}));var v,_=a;class E extends l{static getFormatInstance(){return new E}}E.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(v||(v={}));class S{constructor(e,t,r,...n){this.valueIdentifier=e,this.name=r,this.values="number"==typeof t?Int32Array.from([t]):t,this.otherEncodingNames=n,S.VALUE_IDENTIFIER_TO_ECI.set(e,this),S.NAME_TO_ECI.set(r,this);const i=this.values;for(let o=0,a=i.length;o!==a;o++){const e=i[o];S.VALUES_TO_ECI.set(e,this)}for(const o of n)S.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new E("incorect value");const t=S.VALUES_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}static getCharacterSetECIByName(e){const t=S.NAME_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}equals(e){if(!(e instanceof S))return!1;const t=e;return this.getName()===t.getName()}}S.VALUE_IDENTIFIER_TO_ECI=new Map,S.VALUES_TO_ECI=new Map,S.NAME_TO_ECI=new Map,S.Cp437=new S(v.Cp437,Int32Array.from([0,2]),"Cp437"),S.ISO8859_1=new S(v.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),S.ISO8859_2=new S(v.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),S.ISO8859_3=new S(v.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),S.ISO8859_4=new S(v.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),S.ISO8859_5=new S(v.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),S.ISO8859_6=new S(v.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),S.ISO8859_7=new S(v.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),S.ISO8859_8=new S(v.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),S.ISO8859_9=new S(v.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),S.ISO8859_10=new S(v.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),S.ISO8859_11=new S(v.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),S.ISO8859_13=new S(v.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),S.ISO8859_14=new S(v.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),S.ISO8859_15=new S(v.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),S.ISO8859_16=new S(v.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),S.SJIS=new S(v.SJIS,20,"SJIS","Shift_JIS"),S.Cp1250=new S(v.Cp1250,21,"Cp1250","windows-1250"),S.Cp1251=new S(v.Cp1251,22,"Cp1251","windows-1251"),S.Cp1252=new S(v.Cp1252,23,"Cp1252","windows-1252"),S.Cp1256=new S(v.Cp1256,24,"Cp1256","windows-1256"),S.UnicodeBigUnmarked=new S(v.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),S.UTF8=new S(v.UTF8,26,"UTF8","UTF-8"),S.ASCII=new S(v.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),S.Big5=new S(v.Big5,28,"Big5"),S.GB18030=new S(v.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),S.EUC_KR=new S(v.EUC_KR,30,"EUC_KR","EUC-KR");class C extends l{}C.kind="UnsupportedOperationException";class x{static decode(e,t){const r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!x.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):"undefined"==typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"==typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof S?e:S.getCharacterSetECIByName(e)}static decodeFallback(e,t){const r=this.encodingCharacterSet(t);if(x.isDecodeFallbackSupported(r)){let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+="%"+n}return decodeURIComponent(t)}if(r.equals(S.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new C(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(S.UTF8)||e.equals(S.ISO8859_1)||e.equals(S.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let n=0;n<t.length;n++)r.push(t[n].charCodeAt(0));return new Uint8Array(r)}}class A{static castAsNonUtf8Char(e,t=null){const r=t?t.getName():this.ISO88591;return x.decode(new Uint8Array([e]),r)}static guessEncoding(e,t){if(null!=t&&void 0!==t.get(_.CHARACTER_SET))return t.get(_.CHARACTER_SET).toString();const r=e.length;let n=!0,i=!0,o=!0,a=0,s=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0,g=0,m=0;const w=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let y=0;y<r&&(n||i||o);y++){const t=255&e[y];o&&(a>0?128&t?a--:o=!1:128&t&&(64&t?(a++,32&t?(a++,16&t?(a++,8&t?o=!1:c++):l++):s++):o=!1)),n&&(t>127&&t<160?n=!1:t>159&&(t<192||215===t||247===t)&&m++),i&&(u>0?t<64||127===t||t>252?i=!1:u--:128===t||160===t||t>239?i=!1:t>160&&t<224?(d++,f=0,h++,h>p&&(p=h)):t>127?(u++,h=0,f++,f>g&&(g=f)):(h=0,f=0))}return o&&a>0&&(o=!1),i&&u>0&&(i=!1),o&&(w||s+l+c>0)?A.UTF8:i&&(A.ASSUME_SHIFT_JIS||p>=3||g>=3)?A.SHIFT_JIS:n&&i?2===p&&2===d||10*m>=r?A.SHIFT_JIS:A.ISO88591:n?A.ISO88591:i?A.SHIFT_JIS:o?A.UTF8:A.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let r=-1;function n(e,n,i,o,a,s){if("%%"===e)return"%";if(void 0===t[++r])return;e=o?parseInt(o.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),d=i&&i[0]+""=="0"?"0":" ";for(;l.length<u;)l=void 0!==n?l+d:d+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,n)}static getBytes(e,t){return x.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}A.SHIFT_JIS=S.SJIS.getName(),A.GB2312="GB2312",A.ISO88591=S.ISO8859_1.getName(),A.EUC_JP="EUC_JP",A.UTF8=S.UTF8.getName(),A.PLATFORM_DEFAULT_ENCODING=A.UTF8,A.ASSUME_SHIFT_JIS=!1;class I{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"==typeof e?this.value+=e.toString():this.encoding?this.value+=A.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,r){for(let n=t;t<t+r;n++)this.append(e[n]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class T{constructor(e,t,r,n){if(this.width=e,this.height=t,this.rowSize=r,this.bits=n,null==t&&(t=e),this.height=t,e<1||t<1)throw new u("Both dimensions must be greater than 0");null==r&&(r=Math.floor((e+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,r=e[0].length,n=new T(r,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<r;e++)t[e]&&n.set(e,i)}return n}static parseFromString(e,t,r){if(null===e)throw new u("stringRepresentation cannot be null");const n=new Array(e.length);let i=0,o=0,a=-1,s=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new u("row lengths do not match");o=i,s++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,n[i]=!0,i++;else{if(e.substring(l,l+r.length)!==r)throw new u("illegal character encountered: "+e.substring(l));l+=r.length,n[i]=!1,i++}if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new u("row lengths do not match");s++}const c=new T(a,s);for(let u=0;u<i;u++)n[u]&&c.set(Math.floor(u%a),Math.floor(u/a));return c}get(e,t){const r=t*this.rowSize+Math.floor(e/32);return!!(this.bits[r]>>>(31&e)&1)}set(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295}unset(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)}flip(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new u("input matrix dimensions do not match");const t=new b(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*r,a=e.getRow(i,t).getBitArray();for(let e=0;e<r;e++)n[o+e]^=a[e]}}clear(){const e=this.bits,t=e.length;for(let r=0;r<t;r++)e[r]=0}setRegion(e,t,r,n){if(t<0||e<0)throw new u("Left and top must be nonnegative");if(n<1||r<1)throw new u("Height and width must be at least 1");const i=e+r,o=t+n;if(o>this.height||i>this.width)throw new u("The region must fit inside the matrix");const a=this.rowSize,s=this.bits;for(let l=t;l<o;l++){const t=l*a;for(let r=e;r<i;r++)s[t+Math.floor(r/32)]|=1<<(31&r)&4294967295}}getRow(e,t){null==t||t.getSize()<this.width?t=new b(this.width):t.clear();const r=this.rowSize,n=this.bits,i=e*r;for(let o=0;o<r;o++)t.setBulk(32*o,n[i+o]);return t}setRow(e,t){p.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let r=new b(e),n=new b(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)r=this.getRow(i,r),n=this.getRow(t-1-i,n),r.reverse(),n.reverse(),this.setRow(i,n),this.setRow(t-1-i,r)}getEnclosingRectangle(){const e=this.width,t=this.height,r=this.rowSize,n=this.bits;let i=e,o=t,a=-1,s=-1;for(let l=0;l<t;l++)for(let e=0;e<r;e++){const t=n[l*r+e];if(0!==t){if(l<o&&(o=l),l>s&&(s=l),32*e<i){let r=0;for(;!(t<<31-r&4294967295);)r++;32*e+r<i&&(i=32*e+r)}if(32*e+31>a){let r=31;for(;t>>>r===0;)r--;32*e+r>a&&(a=32*e+r)}}}return a<i||s<o?null:Int32Array.from([i,o,a-i+1,s-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let r=0;for(;r<t.length&&0===t[r];)r++;if(r===t.length)return null;const n=r/e;let i=r%e*32;const o=t[r];let a=0;for(;!(o<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,n])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let r=t.length-1;for(;r>=0&&0===t[r];)r--;if(r<0)return null;const n=Math.floor(r/e);let i=32*Math.floor(r%e);const o=t[r];let a=31;for(;o>>>a===0;)a--;return i+=a,Int32Array.from([i,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof T))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&w.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+w.hashCode(this.bits),e}toString(e="X ",t="  ",r="\n"){return this.buildToString(e,t,r)}buildToString(e,t,r){let n=new I;for(let i=0,o=this.height;i<o;i++){for(let r=0,o=this.width;r<o;r++)n.append(this.get(r,i)?e:t);n.append(r)}return n.toString()}clone(){return new T(this.width,this.height,this.rowSize,this.bits.slice())}}class k extends l{static getNotFoundInstance(){return new k}}k.kind="NotFoundException";class R extends f{constructor(e){super(e),this.luminances=R.EMPTY,this.buckets=new Int32Array(R.LUMINANCE_BUCKETS)}getBlackRow(e,t){const r=this.getLuminanceSource(),n=r.getWidth();null==t||t.getSize()<n?t=new b(n):t.clear(),this.initArrays(n);const i=r.getRow(e,this.luminances),o=this.buckets;for(let s=0;s<n;s++)o[(255&i[s])>>R.LUMINANCE_SHIFT]++;const a=R.estimateBlackPoint(o);if(n<3)for(let s=0;s<n;s++)(255&i[s])<a&&t.set(s);else{let e=255&i[0],r=255&i[1];for(let o=1;o<n-1;o++){const n=255&i[o+1];(4*r-e-n)/2<a&&t.set(o),e=r,r=n}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight(),n=new T(t,r);this.initArrays(t);const i=this.buckets;for(let s=1;s<5;s++){const n=Math.floor(r*s/5),o=e.getRow(n,this.luminances),a=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<a;e++)i[(255&o[e])>>R.LUMINANCE_SHIFT]++}const o=R.estimateBlackPoint(i),a=e.getMatrix();for(let s=0;s<r;s++){const e=s*t;for(let r=0;r<t;r++)(255&a[e+r])<o&&n.set(r,s)}return n}createBinarizer(e){return new R(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let r=0;r<R.LUMINANCE_BUCKETS;r++)t[r]=0}static estimateBlackPoint(e){const t=e.length;let r=0,n=0,i=0;for(let c=0;c<t;c++)e[c]>i&&(n=c,i=e[c]),e[c]>r&&(r=e[c]);let o=0,a=0;for(let c=0;c<t;c++){const t=c-n,r=e[c]*t*t;r>a&&(o=c,a=r)}if(n>o){const e=n;n=o,o=e}if(o-n<=t/16)throw new k;let s=o-1,l=-1;for(let c=o-1;c>n;c--){const t=c-n,i=t*t*(o-c)*(r-e[c]);i>l&&(s=c,l=i)}return s<<R.LUMINANCE_SHIFT}}R.LUMINANCE_BITS=5,R.LUMINANCE_SHIFT=8-R.LUMINANCE_BITS,R.LUMINANCE_BUCKETS=1<<R.LUMINANCE_BITS,R.EMPTY=Uint8ClampedArray.from([0]);class O extends R{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight();if(t>=O.MINIMUM_DIMENSION&&r>=O.MINIMUM_DIMENSION){const n=e.getMatrix();let i=t>>O.BLOCK_SIZE_POWER;0!==(t&O.BLOCK_SIZE_MASK)&&i++;let o=r>>O.BLOCK_SIZE_POWER;0!==(r&O.BLOCK_SIZE_MASK)&&o++;const a=O.calculateBlackPoints(n,i,o,t,r),s=new T(t,r);O.calculateThresholdForBlock(n,i,o,t,r,a,s),this.matrix=s}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new O(e)}static calculateThresholdForBlock(e,t,r,n,i,o,a){const s=i-O.BLOCK_SIZE,l=n-O.BLOCK_SIZE;for(let c=0;c<r;c++){let i=c<<O.BLOCK_SIZE_POWER;i>s&&(i=s);const u=O.cap(c,2,r-3);for(let r=0;r<t;r++){let s=r<<O.BLOCK_SIZE_POWER;s>l&&(s=l);const c=O.cap(r,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=o[u+e];d+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=d/25;O.thresholdBlock(e,s,i,h,n,a)}}}static cap(e,t,r){return e<t?t:e>r?r:e}static thresholdBlock(e,t,r,n,i,o){for(let a=0,s=r*i+t;a<O.BLOCK_SIZE;a++,s+=i)for(let i=0;i<O.BLOCK_SIZE;i++)(255&e[s+i])<=n&&o.set(t+i,r+a)}static calculateBlackPoints(e,t,r,n,i){const o=i-O.BLOCK_SIZE,a=n-O.BLOCK_SIZE,s=new Array(r);for(let l=0;l<r;l++){s[l]=new Int32Array(t);let r=l<<O.BLOCK_SIZE_POWER;r>o&&(r=o);for(let i=0;i<t;i++){let t=i<<O.BLOCK_SIZE_POWER;t>a&&(t=a);let o=0,c=255,u=0;for(let i=0,a=r*n+t;i<O.BLOCK_SIZE;i++,a+=n){for(let t=0;t<O.BLOCK_SIZE;t++){const r=255&e[a+t];o+=r,r<c&&(c=r),r>u&&(u=r)}if(u-c>O.MIN_DYNAMIC_RANGE)for(i++,a+=n;i<O.BLOCK_SIZE;i++,a+=n)for(let t=0;t<O.BLOCK_SIZE;t++)o+=255&e[a+t]}let d=o>>2*O.BLOCK_SIZE_POWER;if(u-c<=O.MIN_DYNAMIC_RANGE&&(d=c/2,l>0&&i>0)){const e=(s[l-1][i]+2*s[l][i-1]+s[l-1][i-1])/4;c<e&&(d=e)}s[l][i]=d}}return s}}O.BLOCK_SIZE_POWER=3,O.BLOCK_SIZE=1<<O.BLOCK_SIZE_POWER,O.BLOCK_SIZE_MASK=O.BLOCK_SIZE-1,O.MINIMUM_DIMENSION=5*O.BLOCK_SIZE,O.MIN_DYNAMIC_RANGE=24;class N{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,r,n){throw new C("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new C("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new C("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new I;for(let r=0;r<this.height;r++){const n=this.getRow(r,e);for(let e=0;e<this.width;e++){const r=255&n[e];let i;i=r<64?"#":r<128?"+":r<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class D extends N{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const r=this.delegate.getRow(e,t),n=this.getWidth();for(let i=0;i<n;i++)r[i]=255-(255&r[i]);return r}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(t);for(let n=0;n<t;n++)r[n]=255-(255&e[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,r,n){return new D(this.delegate.crop(e,t,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new D(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new D(this.delegate.rotateCounterClockwise45())}}class P extends N{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=P.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return P.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,r){const n=new Uint8ClampedArray(t*r);for(let i=0,o=0,a=e.length;i<a;i+=4,o++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,n[o]=t}return n}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const r=this.getWidth(),n=e*r;return null===t?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,r,n){return super.crop(e,t,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),r=t.getContext("2d"),n=e*P.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(n))*i+Math.abs(Math.sin(n))*o),s=Math.ceil(Math.abs(Math.sin(n))*i+Math.abs(Math.cos(n))*o);return t.width=a,t.height=s,r.translate(a/2,s/2),r.rotate(n),r.drawImage(this.canvas,i/-2,o/-2),this.buffer=P.makeBufferFromCanvasImageData(t),this}invert(){return new D(this)}}P.DEGREE_TO_RADIANS=Math.PI/180;class M{constructor(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B,j=(globalThis||ae||self||window?(globalThis||ae||self||window||void 0).__awaiter:void 0)||function(e,t,r,n){function i(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(Bb){o(Bb)}}function s(e){try{l(n.throw(e))}catch(Bb){o(Bb)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())})};class L{constructor(e,t=500,r){this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return j(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const r of e){const e="video"===r.kind?"videoinput":r.kind;if("videoinput"!==e)continue;const n={deviceId:r.deviceId||r.id,label:r.label||`Video device ${t.length+1}`,kind:e,groupId:r.groupId};t.push(n)}return t})}getVideoInputDevices(){return j(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new M(e.deviceId,e.label))})}findDeviceById(e){return j(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return j(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return j(this,void 0,void 0,function*(){let r;this.reset(),r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,t)})}decodeOnceFromConstraints(e,t){return j(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,t)})}decodeOnceFromStream(e,t){return j(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,t,r){return j(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,r)})}decodeFromVideoDevice(e,t,r){return j(this,void 0,void 0,function*(){let n;n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:n};return yield this.decodeFromConstraints(i,t,r)})}decodeFromConstraints(e,t,r){return j(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(n,t,r)})}decodeFromStream(e,t,r){return j(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return j(this,void 0,void 0,function*(){const r=this.prepareVideoElement(t);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((t,r)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return j(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(Fg){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const r=document.getElementById(e);if(!r)throw new c(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new c(`element with id '${e}' must be an ${t} element`);return r}decodeFromImage(e,t){if(!e&&!t)throw new c("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new c("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,r){if(void 0===e&&void 0===t)throw new c("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new c("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let r;return this.imageElement=t,r=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),r}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)}_decodeFromVideoElementSetup(e){if(!e)throw new c("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new c("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const r=this._decodeOnLoadImage(t);return t.src=e,r}decodeFromVideoUrl(e){if(!e)throw new c("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r}decodeFromVideoUrlContinuously(e,t){if(!e)throw new c("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,t);return r.src=e,n}_decodeOnLoadImage(e){return new Promise((t,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return j(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return j(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return void 0===e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"==typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,r=!0){this._stopAsyncDecode=!1;const n=(i,o)=>{if(this._stopAsyncDecode)return o(new k("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(Bb){if(t&&Bb instanceof k||(Bb instanceof h||Bb instanceof E)&&r)return setTimeout(n,this._timeBetweenDecodingAttempts,i,o);o(Bb)}};return new Promise((e,t)=>n(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const n=this.decode(e);t(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(Bb){t(null,Bb),(Bb instanceof h||Bb instanceof E||Bb instanceof k)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,r){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,r=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),r=new P(t),n=new O(r);return new d(n)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let r,n;return void 0!==e&&(e instanceof HTMLVideoElement?(r=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=n+"px",t.width=r,t.height=n,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(jb){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(jb){e.src=""}this.videoElement.removeAttribute("src")}}class F{constructor(e,t,r=(null==t?0:8*t.length),n,i,o=p.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=n,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=null==r?null==t?0:8*t.length:r,this.resultPoints=n,this.format=i,this.resultMetadata=null,this.timestamp=null==o?p.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const r=new Array(t.length+e.length);p.arraycopy(t,0,r,0,t.length),p.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(B||(B={}));var z,U=B;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(z||(z={}));var V,H,q,W,G,$,X=z;class Y{constructor(e,t,r,n,i=-1,o=-1){this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=null==e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class K{exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Q{constructor(e,t){if(0===t.length)throw new u;this.field=e;const r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-e),p.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let r;if(1===e){r=0;for(let e=0,n=t.length;e!==n;e++){const n=t[e];r=K.addOrSubtract(r,n)}return r}r=t[0];const n=t.length,i=this.field;for(let o=1;o<n;o++)r=K.addOrSubtract(i.multiply(e,r),t[o]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){const e=t;t=r,r=e}let n=new Int32Array(r.length);const i=r.length-t.length;p.arraycopy(r,0,n,0,i);for(let o=i;o<r.length;o++)n[o]=K.addOrSubtract(t[o-i],r[o]);return new Q(this.field,n)}multiply(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,o=new Int32Array(r+i-1),a=this.field;for(let s=0;s<r;s++){const e=t[s];for(let t=0;t<i;t++)o[s+t]=K.addOrSubtract(o[s+t],a.multiply(e,n[t]))}return new Q(a,o)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,r=this.field,n=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)n[o]=r.multiply(i[o],e);return new Q(r,n)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return this.field.getZero();const r=this.coefficients,n=r.length,i=new Int32Array(n+e),o=this.field;for(let a=0;a<n;a++)i[a]=o.multiply(r[a],t);return new Q(o,i)}divide(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new u("Divide by 0");const t=this.field;let r=t.getZero(),n=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;n.getDegree()>=e.getDegree()&&!n.isZero();){const i=n.getDegree()-e.getDegree(),a=t.multiply(n.getCoefficient(n.getDegree()),o),s=e.multiplyByMonomial(i,a),l=t.buildMonomial(i,a);r=r.addOrSubtract(l),n=n.addOrSubtract(s)}return[r,n]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);if(0!==r){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),0===t||1!==r){const t=this.field.log(r);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class Z extends l{}Z.kind="ArithmeticException";class J extends K{constructor(e,t,r){super(),this.primitive=e,this.size=t,this.generatorBase=r;const n=new Int32Array(t);let i=1;for(let a=0;a<t;a++)n[a]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=n;const o=new Int32Array(t);for(let a=0;a<t-1;a++)o[n[a]]=a;this.logTable=o,this.zero=new Q(this,Int32Array.from([0])),this.one=new Q(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;const r=new Int32Array(e+1);return r[0]=t,new Q(this,r)}inverse(e){if(0===e)throw new Z;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+y.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}J.AZTEC_DATA_12=new J(4201,4096,1),J.AZTEC_DATA_10=new J(1033,1024,1),J.AZTEC_DATA_6=new J(67,64,1),J.AZTEC_PARAM=new J(19,16,1),J.QR_CODE_FIELD_256=new J(285,256,0),J.DATA_MATRIX_FIELD_256=new J(301,256,1),J.AZTEC_DATA_8=J.DATA_MATRIX_FIELD_256,J.MAXICODE_FIELD_64=J.AZTEC_DATA_6;class ee extends l{}ee.kind="ReedSolomonException";class te extends l{}te.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const r=this.field,n=new Q(r,e),i=new Int32Array(t);let o=!0;for(let h=0;h<t;h++){const e=n.evaluateAt(r.exp(h+r.getGeneratorBase()));i[i.length-1-h]=e,0!==e&&(o=!1)}if(o)return;const a=new Q(r,i),s=this.runEuclideanAlgorithm(r.buildMonomial(t,1),a,t),l=s[0],c=s[1],u=this.findErrorLocations(l),d=this.findErrorMagnitudes(c,u);for(let h=0;h<u.length;h++){const t=e.length-1-r.log(u[h]);if(t<0)throw new ee("Bad error location");e[t]=J.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){const r=e;e=t,t=r}const n=this.field;let i=e,o=t,a=n.getZero(),s=n.getOne();for(;o.getDegree()>=(r/2|0);){let e=i,t=a;if(i=o,a=s,i.isZero())throw new ee("r_{i-1} was zero");o=e;let r=n.getZero();const l=i.getCoefficient(i.getDegree()),c=n.inverse(l);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const e=o.getDegree()-i.getDegree(),t=n.multiply(o.getCoefficient(o.getDegree()),c);r=r.addOrSubtract(n.buildMonomial(e,t)),o=o.addOrSubtract(i.multiplyByMonomial(e,t))}if(s=r.multiply(a).addOrSubtract(t),o.getDegree()>=i.getDegree())throw new te("Division algorithm failed to reduce polynomial?")}const l=s.getCoefficient(0);if(0===l)throw new ee("sigmaTilde(0) was zero");const c=n.inverse(l);return[s.multiplyScalar(c),o.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(t);let n=0;const i=this.field;for(let o=1;o<i.getSize()&&n<t;o++)0===e.evaluateAt(o)&&(r[n]=i.inverse(o),n++);if(n!==t)throw new ee("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,t){const r=t.length,n=new Int32Array(r),i=this.field;for(let o=0;o<r;o++){const a=i.inverse(t[o]);let s=1;for(let e=0;e<r;e++)if(o!==e){const r=i.multiply(t[e],a),n=1&r?-2&r:1|r;s=i.multiply(s,n)}n[o]=i.multiply(e.evaluateAt(a),i.inverse(s)),0!==i.getGeneratorBase()&&(n[o]=i.multiply(n[o],a))}return n}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(V||(V={}));class ne{decode(e){this.ddata=e;let t=e.getBits(),r=this.extractBits(t),n=this.correctBits(r),i=ne.convertBoolArrayToByteArray(n),o=ne.getEncodedData(n),a=new Y(i,o,null,null);return a.setNumBits(n.length),a}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,r=V.UPPER,n=V.UPPER,i="",o=0;for(;o<t;)if(n===V.BINARY){if(t-o<5)break;let a=ne.readCode(e,o,5);if(o+=5,0===a){if(t-o<11)break;a=ne.readCode(e,o,11)+31,o+=11}for(let r=0;r<a;r++){if(t-o<8){o=t;break}const r=ne.readCode(e,o,8);i+=A.castAsNonUtf8Char(r),o+=8}n=r}else{let a=n===V.DIGIT?4:5;if(t-o<a)break;let s=ne.readCode(e,o,a);o+=a;let l=ne.getCharacter(n,s);l.startsWith("CTRL_")?(r=n,n=ne.getTable(l.charAt(5)),"L"===l.charAt(6)&&(r=n)):(i+=l,n=r)}return i}static getTable(e){switch(e){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;default:return V.UPPER}}static getCharacter(e,t){switch(e){case V.UPPER:return ne.UPPER_TABLE[t];case V.LOWER:return ne.LOWER_TABLE[t];case V.MIXED:return ne.MIXED_TABLE[t];case V.PUNCT:return ne.PUNCT_TABLE[t];case V.DIGIT:return ne.DIGIT_TABLE[t];default:throw new te("Bad table")}}correctBits(e){let t,r;this.ddata.getNbLayers()<=2?(r=6,t=J.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=J.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=J.AZTEC_DATA_10):(r=12,t=J.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),i=e.length/r;if(i<n)throw new E;let o=e.length%r,a=new Int32Array(i);for(let h=0;h<i;h++,o+=r)a[h]=ne.readCode(e,o,r);try{new re(t).decode(a,i-n)}catch(d){throw new E(d)}let s=(1<<r)-1,l=0;for(let h=0;h<n;h++){let e=a[h];if(0===e||e===s)throw new E;1!==e&&e!==s-1||l++}let c=new Array(n*r-l),u=0;for(let h=0;h<n;h++){let e=a[h];if(1===e||e===s-1)c.fill(e>1,u,u+r-1),u+=r-1;else for(let t=r-1;t>=0;--t)c[u++]=!!(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(t?11:14)+4*r,i=new Int32Array(n),o=new Array(this.totalBitsInLayer(r,t));if(t)for(let a=0;a<i.length;a++)i[a]=a;else{let e=n+1+2*y.truncDivision(y.truncDivision(n,2)-1,15),t=n/2,r=y.truncDivision(e,2);for(let n=0;n<t;n++){let e=n+y.truncDivision(n,15);i[t-n-1]=r-e-1,i[t+n]=r+e+1}}for(let a=0,s=0;a<r;a++){let l=4*(r-a)+(t?9:12),c=2*a,u=n-1-c;for(let t=0;t<l;t++){let r=2*t;for(let n=0;n<2;n++)o[s+r+n]=e.get(i[c+n],i[c+t]),o[s+2*l+r+n]=e.get(i[c+t],i[u-n]),o[s+4*l+r+n]=e.get(i[u-n],i[u-t]),o[s+6*l+r+n]=e.get(i[u-t],i[c+n])}s+=8*l}return o}static readCode(e,t,r){let n=0;for(let i=t;i<t+r;i++)n<<=1,e[i]&&(n|=1);return n}static readByte(e,t){let r=e.length-t;return r>=8?ne.readCode(e,t,8):ne.readCode(e,t,r)<<8-r}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let r=0;r<t.length;r++)t[r]=ne.readByte(e,8*r);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ne.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ne.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ne.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ne.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ne.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ie{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,r,n){const i=e-r,o=t-n;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let r=0,n=e.length;r!==n;r++)t+=e[r];return t}}class oe{static floatToIntBits(e){return e}}oe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class se{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof se){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*oe.floatToIntBits(this.x)+oe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),n=this.distance(e[0],e[2]);let i,o,a;if(r>=t&&r>=n?(o=e[0],i=e[1],a=e[2]):n>=r&&n>=t?(o=e[1],i=e[0],a=e[2]):(o=e[2],i=e[0],a=e[1]),this.crossProductZ(i,o,a)<0){const e=i;i=a,a=e}e[0]=i,e[1]=o,e[2]=a}static distance(e,t){return ie.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,r){const n=t.x,i=t.y;return(r.x-n)*(e.y-i)-(r.y-i)*(e.x-n)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,r,n,i){super(e,t),this.compact=r,this.nbDatablocks=n,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,r,n){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==t&&(t=ue.INIT_SIZE),null==r&&(r=e.getWidth()/2|0),null==n&&(n=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=n-i,this.downInit=n+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}detect(){let e=this.leftInit,t=this.rightInit,r=this.upInit,n=this.downInit,i=!1,o=!0,a=!1,s=!1,l=!1,c=!1,u=!1;const d=this.width,h=this.height;for(;o;){o=!1;let f=!0;for(;(f||!s)&&t<d;)f=this.containsBlackPoint(r,n,t,!1),f?(t++,o=!0,s=!0):s||t++;if(t>=d){i=!0;break}let p=!0;for(;(p||!l)&&n<h;)p=this.containsBlackPoint(e,t,n,!0),p?(n++,o=!0,l=!0):l||n++;if(n>=h){i=!0;break}let g=!0;for(;(g||!c)&&e>=0;)g=this.containsBlackPoint(r,n,e,!1),g?(e--,o=!0,c=!0):c||e--;if(e<0){i=!0;break}let m=!0;for(;(m||!u)&&r>=0;)m=this.containsBlackPoint(e,t,r,!0),m?(r--,o=!0,u=!0):u||r--;if(r<0){i=!0;break}o&&(a=!0)}if(!i&&a){const i=t-e;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,n-t,e+t,n);if(null==o)throw new k;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,r+t,e+t,r);if(null==a)throw new k;let s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,r+e,t-e,r);if(null==s)throw new k;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,n-e,t-e,n);if(null==l)throw new k;return this.centerEdges(l,o,s,a)}throw new k}getBlackPointOnSegment(e,t,r,n){const i=ie.round(ie.distance(e,t,r,n)),o=(r-e)/i,a=(n-t)/i,s=this.image;for(let l=0;l<i;l++){const r=ie.round(e+l*o),n=ie.round(t+l*a);if(s.get(r,n))return new se(r,n)}return null}centerEdges(e,t,r,n){const i=e.getX(),o=e.getY(),a=t.getX(),s=t.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),h=ue.CORR;return i<this.width/2?[new se(u-h,d+h),new se(a+h,s+h),new se(l-h,c-h),new se(i+h,o-h)]:[new se(u+h,d+h),new se(a+h,s-h),new se(l-h,c+h),new se(i-h,o-h)]}containsBlackPoint(e,t,r,n){const i=this.image;if(n){for(let o=e;o<=t;o++)if(i.get(o,r))return!0}else for(let o=e;o<=t;o++)if(i.get(r,o))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class de{static checkAndNudgePoints(e,t){const r=e.getWidth(),n=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const e=Math.floor(t[o]),a=Math.floor(t[o+1]);if(e<-1||e>r||a<-1||a>n)throw new k;i=!1,-1===e?(t[o]=0,i=!0):e===r&&(t[o]=r-1,i=!0),-1===a?(t[o+1]=0,i=!0):a===n&&(t[o+1]=n-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const e=Math.floor(t[o]),a=Math.floor(t[o+1]);if(e<-1||e>r||a<-1||a>n)throw new k;i=!1,-1===e?(t[o]=0,i=!0):e===r&&(t[o]=r-1,i=!0),-1===a?(t[o+1]=0,i=!0):a===n&&(t[o+1]=n-1,i=!0)}}}class he{constructor(e,t,r,n,i,o,a,s,l){this.a11=e,this.a21=t,this.a31=r,this.a12=n,this.a22=i,this.a32=o,this.a13=a,this.a23=s,this.a33=l}static quadrilateralToQuadrilateral(e,t,r,n,i,o,a,s,l,c,u,d,h,f,p,g){const m=he.quadrilateralToSquare(e,t,r,n,i,o,a,s);return he.squareToQuadrilateral(l,c,u,d,h,f,p,g).times(m)}transformPoints(e){const t=e.length,r=this.a11,n=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],f=i*t+s*h+u;e[d]=(r*t+o*h+l)/f,e[d+1]=(n*t+a*h+c)/f}}transformPointsWithValues(e,t){const r=this.a11,n=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],f=t[h],p=i*d+s*f+u;e[h]=(r*d+o*f+l)/p,t[h]=(n*d+a*f+c)/p}}static squareToQuadrilateral(e,t,r,n,i,o,a,s){const l=e-r+i-a,c=t-n+o-s;if(0===l&&0===c)return new he(r-e,i-r,e,n-t,o-n,t,0,0,1);{const u=r-i,d=a-i,h=n-o,f=s-o,p=u*f-d*h,g=(l*f-d*c)/p,m=(u*c-l*h)/p;return new he(r-e+g*r,a-e+m*a,e,n-t+g*n,s-t+m*s,t,g,m,1)}}static quadrilateralToSquare(e,t,r,n,i,o,a,s){return he.squareToQuadrilateral(e,t,r,n,i,o,a,s).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends de{sampleGrid(e,t,r,n,i,o,a,s,l,c,u,d,h,f,p,g,m,w,y){const b=he.quadrilateralToQuadrilateral(n,i,o,a,s,l,c,u,d,h,f,p,g,m,w,y);return this.sampleGridWithTransform(e,t,r,b)}sampleGridWithTransform(e,t,r,n){if(t<=0||r<=0)throw new k;const i=new T(t,r),o=new Float32Array(2*t);for(let s=0;s<r;s++){const t=o.length,r=s+.5;for(let e=0;e<t;e+=2)o[e]=e/2+.5,o[e+1]=r;n.transformPoints(o),de.checkAndNudgePoints(e,o);try{for(let r=0;r<t;r+=2)e.get(Math.floor(o[r]),Math.floor(o[r+1]))&&i.set(r/2,s)}catch(a){throw new k}}return i}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new fe;class ge{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){let e=r[0];r[0]=r[2],r[2]=e}this.extractParameters(r);let n=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),i=this.getMatrixCornerPoints(r);return new ce(n,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new k;let t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);let n=0;for(let o=0;o<4;o++){let e=r[(this.shift+o)%4];this.compact?(n<<=7,n+=e>>1&127):(n<<=10,n+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let r=0;e.forEach((e,n,i)=>{r=(e>>t-2<<1)+(1&e)+(r<<3)}),r=((1&r)<<11)+(r>>1);for(let n=0;n<4;n++)if(y.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new k}getCorrectedParameterData(e,t){let r,n;t?(r=7,n=2):(r=10,n=4);let i=r-n,o=new Int32Array(r);for(let l=r-1;l>=0;--l)o[l]=15&e,e>>=4;try{new re(J.AZTEC_PARAM).decode(o,i)}catch(s){throw new k}let a=0;for(let l=0;l<n;l++)a=(a<<4)+o[l];return a}getBullsEyeCorners(e){let t=e,r=e,n=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,o,1,-1),a=this.getFirstDifferent(r,o,1,1),s=this.getFirstDifferent(n,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(e,a,s,l))break}t=e,r=a,n=s,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;let a=new se(t.getX()+.5,t.getY()-.5),s=new se(r.getX()+.5,r.getY()+.5),l=new se(n.getX()-.5,n.getY()+.5),c=new se(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,s,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,r,n;try{let i=new ue(this.image).detect();e=i[0],t=i[1],r=i[2],n=i[3]}catch(Bb){let o=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new ge(o+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(o+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ge(o-7,a+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ge(o-7,a-7),!1,-1,-1).toResultPoint()}let i=ie.round((e.getX()+n.getX()+t.getX()+r.getX())/4),o=ie.round((e.getY()+n.getY()+t.getY()+r.getY())/4);try{let a=new ue(this.image,15,i,o).detect();e=a[0],t=a[1],r=a[2],n=a[3]}catch(Bb){e=this.getFirstDifferent(new ge(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,o+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,o-7),!1,-1,-1).toResultPoint()}return i=ie.round((e.getX()+n.getX()+t.getX()+r.getX())/4),o=ie.round((e.getY()+n.getY()+t.getY()+r.getY())/4),new ge(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,r,n,i){let o=pe.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,s,s,l,s,l,l,s,l,t.getX(),t.getY(),r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY())}sampleLine(e,t,r){let n=0,i=this.distanceResultPoint(e,t),o=i/r,a=e.getX(),s=e.getY(),l=o*(t.getX()-e.getX())/i,c=o*(t.getY()-e.getY())/i;for(let u=0;u<r;u++)this.image.get(ie.round(a+u*l),ie.round(s+u*c))&&(n|=1<<r-u-1);return n}isWhiteOrBlackRectangle(e,t,r,n){let i=3;e=new ge(e.getX()-i,e.getY()+i),t=new ge(t.getX()-i,t.getY()-i),r=new ge(r.getX()+i,r.getY()-i),n=new ge(n.getX()+i,n.getY()+i);let o=this.getColor(n,e);if(0===o)return!1;let a=this.getColor(e,t);return a===o&&(a=this.getColor(t,r),a===o&&(a=this.getColor(r,n),a===o))}getColor(e,t){let r=this.distancePoint(e,t),n=(t.getX()-e.getX())/r,i=(t.getY()-e.getY())/r,o=0,a=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(r);for(let d=0;d<c;d++)a+=n,s+=i,this.image.get(ie.round(a),ie.round(s))!==l&&o++;let u=o/r;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,r,n){let i=e.getX()+r,o=e.getY()+n;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=r,o+=n;for(i-=r,o-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=r;for(i-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=n;return o-=n,new ge(i,o)}expandSquare(e,t,r){let n=r/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new se(a+n*i,s+n*o),c=new se(a-n*i,s-n*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[l,new se(a+n*i,s+n*o),c,new se(a-n*i,s-n*o)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=ie.round(e.getX()),r=ie.round(e.getY());return this.isValid(t,r)}distancePoint(e,t){return ie.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return ie.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(y.truncDivision(this.nbLayers-4,8)+1)+15}}class we{decode(e,t=null){let r=null,n=new me(e.getBlackMatrix()),i=null,o=null;try{let e=n.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ne).decode(e)}catch(Bb){r=Bb}if(null==o)try{let e=n.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ne).decode(e)}catch(Bb){if(null!=r)throw r;throw Bb}let a=new F(o.getText(),o.getRawBytes(),o.getNumBits(),i,U.AZTEC,p.currentTimeMillis()),s=o.getByteSegments();null!=s&&a.putMetadata(X.BYTE_SEGMENTS,s);let l=o.getECLevel();return null!=l&&a.putMetadata(X.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(null!=e){let r=e.get(_.NEED_RESULT_POINT_CALLBACK);null!=r&&t.forEach((e,t,n)=>{r.foundPossibleResultPoint(e)})}}reset(){}}class ye extends L{constructor(e=500){super(new we,e)}}class be{decode(e,t){try{return this.doDecode(e,t)}catch(r){if(t&&!0===t.get(_.TRY_HARDER)&&e.isRotateSupported()){const r=e.rotateCounterClockwise(),n=this.doDecode(r,t),i=n.getResultMetadata();let o=270;null!==i&&!0===i.get(X.ORIENTATION)&&(o+=i.get(X.ORIENTATION)%360),n.putMetadata(X.ORIENTATION,o);const a=n.getResultPoints();if(null!==a){const e=r.getHeight();for(let t=0;t<a.length;t++)a[t]=new se(e-a[t].getY()-1,a[t].getX())}return n}throw new k}}reset(){}doDecode(e,t){const r=e.getWidth(),n=e.getHeight();let i=new b(r);const o=t&&!0===t.get(_.TRY_HARDER),a=Math.max(1,n>>(o?8:5));let s;s=o?n:15;const l=Math.trunc(n/2);for(let d=0;d<s;d++){const o=Math.trunc((d+1)/2),s=l+a*(1&d?-o:o);if(s<0||s>=n)break;try{i=e.getBlackRow(s,i)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(_.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,r)=>e.set(r,t)),e.delete(_.NEED_RESULT_POINT_CALLBACK),t=e}try{const n=this.decodeRow(s,i,t);if(1===e){n.putMetadata(X.ORIENTATION,180);const e=n.getResultPoints();null!==e&&(e[0]=new se(r-e[0].getX()-1,e[0].getY()),e[1]=new se(r-e[1].getX()-1,e[1].getY()))}return n}catch(u){}}}throw new k}static recordPattern(e,t,r){const n=r.length;for(let l=0;l<n;l++)r[l]=0;const i=e.getSize();if(t>=i)throw new k;let o=!e.get(t),a=0,s=t;for(;s<i;){if(e.get(s)!==o)r[a]++;else{if(++a===n)break;r[a]=1,o=!o}s++}if(a!==n&&(a!==n-1||s!==i))throw new k}static recordPatternInReverse(e,t,r){let n=r.length,i=e.get(t);for(;t>0&&n>=0;)e.get(--t)!==i&&(n--,i=!i);if(n>=0)throw new k;be.recordPattern(e,t+1,r)}static patternMatchVariance(e,t,r){const n=e.length;let i=0,o=0;for(let l=0;l<n;l++)i+=e[l],o+=t[l];if(i<o)return Number.POSITIVE_INFINITY;const a=i/o;r*=a;let s=0;for(let l=0;l<n;l++){const n=e[l],i=t[l]*a,o=n>i?n-i:i-n;if(o>r)return Number.POSITIVE_INFINITY;s+=o}return s/i}}class ve extends be{static findStartPattern(e){const t=e.getSize(),r=e.getNextSet(0);let n=0,i=Int32Array.from([0,0,0,0,0,0]),o=r,a=!1;const s=6;for(let l=r;l<t;l++)if(e.get(l)!==a)i[n]++;else{if(n===s-1){let t=ve.MAX_AVG_VARIANCE,r=-1;for(let e=ve.CODE_START_A;e<=ve.CODE_START_C;e++){const n=be.patternMatchVariance(i,ve.CODE_PATTERNS[e],ve.MAX_INDIVIDUAL_VARIANCE);n<t&&(t=n,r=e)}if(r>=0&&e.isRange(Math.max(0,o-(l-o)/2),o,!1))return Int32Array.from([o,l,r]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[n-1]=0,i[n]=0,n--}else n++;i[n]=1,a=!a}throw new k}static decodeCode(e,t,r){be.recordPattern(e,r,t);let n=ve.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<ve.CODE_PATTERNS.length;o++){const e=ve.CODE_PATTERNS[o],r=this.patternMatchVariance(t,e,ve.MAX_INDIVIDUAL_VARIANCE);r<n&&(n=r,i=o)}if(i>=0)return i;throw new k}decodeRow(e,t,r){const n=r&&!0===r.get(_.ASSUME_GS1),i=ve.findStartPattern(t),o=i[2];let a=0;const s=new Uint8Array(20);let l;switch(s[a++]=o,o){case ve.CODE_START_A:l=ve.CODE_CODE_A;break;case ve.CODE_START_B:l=ve.CODE_CODE_B;break;case ve.CODE_START_C:l=ve.CODE_CODE_C;break;default:throw new E}let c=!1,u=!1,d="",f=i[0],p=i[1];const g=Int32Array.from([0,0,0,0,0,0]);let m=0,w=0,y=o,b=0,v=!0,S=!1,C=!1;for(;!c;){const e=u;switch(u=!1,m=w,w=ve.decodeCode(t,g,p),s[a++]=w,w!==ve.CODE_STOP&&(v=!0),w!==ve.CODE_STOP&&(b++,y+=b*w),f=p,p+=g.reduce((e,t)=>e+t,0),w){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new E}switch(l){case ve.CODE_CODE_A:if(w<64)d+=C===S?String.fromCharCode(" ".charCodeAt(0)+w):String.fromCharCode(" ".charCodeAt(0)+w+128),C=!1;else if(w<96)d+=C===S?String.fromCharCode(w-64):String.fromCharCode(w+64),C=!1;else switch(w!==ve.CODE_STOP&&(v=!1),w){case ve.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!S&&C?(S=!0,C=!1):S&&C?(S=!1,C=!1):C=!0;break;case ve.CODE_SHIFT:u=!0,l=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_B:if(w<96)d+=C===S?String.fromCharCode(" ".charCodeAt(0)+w):String.fromCharCode(" ".charCodeAt(0)+w+128),C=!1;else switch(w!==ve.CODE_STOP&&(v=!1),w){case ve.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!S&&C?(S=!0,C=!1):S&&C?(S=!1,C=!1):C=!0;break;case ve.CODE_SHIFT:u=!0,l=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_C:if(w<100)w<10&&(d+="0"),d+=w;else switch(w!==ve.CODE_STOP&&(v=!1),w){case ve.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_STOP:c=!0}}e&&(l=l===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const x=p-f;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-f)/2),!1))throw new k;if(y-=b*m,y%103!==m)throw new h;const A=d.length;if(0===A)throw new k;A>0&&v&&(d=l===ve.CODE_CODE_C?d.substring(0,A-2):d.substring(0,A-1));const I=(i[1]+i[0])/2,T=f+x/2,R=s.length,O=new Uint8Array(R);for(let h=0;h<R;h++)O[h]=s[h];const N=[new se(I,e),new se(T,e)];return new F(d,O,0,N,U.CODE_128,(new Date).getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class _e extends be{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let i,o,a=_e.findAsteriskPattern(t,n),s=t.getNextSet(a[1]),l=t.getSize();do{_e.recordPattern(t,s,n);let e=_e.toNarrowWidePattern(n);if(e<0)throw new k;i=_e.patternToChar(e),this.decodeRowResult+=i,o=s;for(let t of n)s+=t;s=t.getNextSet(s)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let h of n)u+=h;if(s!==l&&2*(s-o-u)<u)throw new k;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let r=0;r<e;r++)t+=_e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(e)!==_e.ALPHABET_STRING.charAt(t%43))throw new h;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new k;c=this.extendedMode?_e.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(a[1]+a[0])/2,f=o+u/2;return new F(c,null,0,[new se(d,e),new se(f,e)],U.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let r=e.getSize(),n=e.getNextSet(0),i=0,o=n,a=!1,s=t.length;for(let l=n;l<r;l++)if(e.get(l)!==a)t[i]++;else{if(i===s-1){if(this.toNarrowWidePattern(t)===_e.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new k}static toNarrowWidePattern(e){let t,r=e.length,n=0;do{let i=2147483647;for(let t of e)t<i&&t>n&&(i=t);n=i,t=0;let o=0,a=0;for(let s=0;s<r;s++){let i=e[s];i>n&&(a|=1<<r-1-s,t++,o+=i)}if(3===t){for(let i=0;i<r&&t>0;i++){let r=e[i];if(r>n&&(t--,2*r>=o))return-1}return a}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<_e.CHARACTER_ENCODINGS.length;t++)if(_e.CHARACTER_ENCODINGS[t]===e)return _e.ALPHABET_STRING.charAt(t);if(e===_e.ASTERISK_ENCODING)return"*";throw new k}static decodeExtended(e){let t=e.length,r="";for(let n=0;n<t;n++){let t=e.charAt(n);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(n+1),o="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new E;o=""}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new E;o=":"}}r+=o,n++}else r+=t}return r}}_e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_e.ASTERISK_ENCODING=148;class Ee extends be{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,r){let n=this.decodeStart(t),i=this.decodeEnd(t),o=new I;Ee.decodeMiddle(t,n[1],i[0],o);let a=o.toString(),s=null;null!=r&&(s=r.get(_.ALLOWED_LENGTHS)),null==s&&(s=Ee.DEFAULT_ALLOWED_LENGTHS);let l=a.length,c=!1,u=0;for(let h of s){if(l===h){c=!0;break}h>u&&(u=h)}if(!c&&l>u&&(c=!0),!c)throw new E;const d=[new se(n[1],e),new se(i[0],e)];return new F(a,null,0,d,U.ITF,(new Date).getTime())}static decodeMiddle(e,t,r,n){let i=new Int32Array(10),o=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),o.fill(0),a.fill(0);t<r;){be.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;o[e]=i[t],a[e]=i[t+1]}let r=Ee.decodeDigit(o);n.append(r.toString()),r=this.decodeDigit(a),n.append(r.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=Ee.skipWhiteSpace(e),r=Ee.findGuardPattern(e,t,Ee.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,t){let r=10*this.narrowLineWidth;r=r<t?r:t;for(let n=t-1;r>0&&n>=0&&!e.get(n);n--)r--;if(0!==r)throw new k}static skipWhiteSpace(e){const t=e.getSize(),r=e.getNextSet(0);if(r===t)throw new k;return r}decodeEnd(e){e.reverse();try{let r,n=Ee.skipWhiteSpace(e);try{r=Ee.findGuardPattern(e,n,Ee.END_PATTERN_REVERSED[0])}catch(t){t instanceof k&&(r=Ee.findGuardPattern(e,n,Ee.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}}static findGuardPattern(e,t,r){let n=r.length,i=new Int32Array(n),o=e.getSize(),a=!1,s=0,l=t;i.fill(0);for(let c=t;c<o;c++)if(e.get(c)!==a)i[s]++;else{if(s===n-1){if(be.patternMatchVariance(i,r,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],p.arraycopy(i,2,i,0,s-1),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,a=!a}throw new k}static decodeDigit(e){let t=Ee.MAX_AVG_VARIANCE,r=-1,n=Ee.PATTERNS.length;for(let i=0;i<n;i++){let n=Ee.PATTERNS[i],o=be.patternMatchVariance(e,n,Ee.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,r=i):o===t&&(r=-1)}if(r>=0)return r%10;throw new k}}Ee.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ee.MAX_AVG_VARIANCE=.38,Ee.MAX_INDIVIDUAL_VARIANCE=.5,Ee.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ee.START_PATTERN=Int32Array.from([1,1,1,1]),Ee.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Se extends be{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,r=!1,n=0,i=Int32Array.from([0,0,0]);for(;!r;){i=Int32Array.from([0,0,0]),t=Se.findGuardPattern(e,n,!1,this.START_END_PATTERN,i);let o=t[0];n=t[1];let a=o-(n-o);a>=0&&(r=e.isRange(a,o,!1))}return t}static checkChecksum(e){return Se.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return Se.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}return(1e3-r)%10}static decodeEnd(e,t){return Se.findGuardPattern(e,t,!1,Se.START_END_PATTERN,new Int32Array(Se.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,r,n){return this.findGuardPattern(e,t,r,n,new Int32Array(n.length))}static findGuardPattern(e,t,r,n,i){let o=e.getSize(),a=0,s=t=r?e.getNextUnset(t):e.getNextSet(t),l=n.length,c=r;for(let u=t;u<o;u++)if(e.get(u)!==c)i[a]++;else{if(a===l-1){if(be.patternMatchVariance(i,n,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return Int32Array.from([s,u]);s+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<a-1;t++)i[t]=e[t];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,c=!c}throw new k}static decodeDigit(e,t,r,n){this.recordPattern(e,r,t);let i=this.MAX_AVG_VARIANCE,o=-1,a=n.length;for(let s=0;s<a;s++){let e=n[s],r=be.patternMatchVariance(t,e,Se.MAX_INDIVIDUAL_VARIANCE);r<i&&(i=r,o=s)}if(o>=0)return o;throw new k}}Se.MAX_AVG_VARIANCE=.48,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.START_END_PATTERN=Int32Array.from([1,1,1]),Se.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Se.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Se.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ce{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),o=n.toString(),a=Ce.parseExtensionString(o),s=[new se((r[0]+r[1])/2,e),new se(i,e)],l=new F(o,null,0,s,U.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],a=0;for(let l=0;l<5&&o<i;l++){let t=Se.decodeDigit(e,n,o,Se.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(a|=1<<4-l),4!==l&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(5!==r.length)throw new k;let s=this.determineCheckDigit(a);if(Ce.extensionChecksum(r.toString())!==s)throw new k;return o}static extensionChecksum(e){let t=e.length,r=0;for(let n=t-2;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(let n=t-1;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new k}static parseExtensionString(e){if(5!==e.length)return null;let t=Ce.parseExtension5String(e);return null==t?null:new Map([[X.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let r=parseInt(e.substring(1)),n=r%100;return t+(r/100).toString()+"."+(n<10?"0"+n:n.toString())}}class xe{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),o=n.toString(),a=xe.parseExtensionString(o),s=[new se((r[0]+r[1])/2,e),new se(i,e)],l=new F(o,null,0,s,U.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],a=0;for(let s=0;s<2&&o<i;s++){let t=Se.decodeDigit(e,n,o,Se.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(a|=1<<1-s),1!==s&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(2!==r.length)throw new k;if(parseInt(r.toString())%4!==a)throw new k;return o}static parseExtensionString(e){return 2!==e.length?null:new Map([[X.ISSUE_NUMBER,parseInt(e)]])}}class Ae{static decodeRow(e,t,r){let n=Se.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ce).decodeRow(e,t,n)}catch(jb){return(new xe).decodeRow(e,t,n)}}}Ae.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ie extends Se{constructor(){super(),this.decodeRowStringBuffer="",Ie.L_AND_G_PATTERNS=Ie.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ie.L_PATTERNS[e-10],r=new Int32Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[t.length-e-1];Ie.L_AND_G_PATTERNS[e]=r}}decodeRow(e,t,r){let n=Ie.findStartGuardPattern(t),i=null==r?null:r.get(_.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new se((n[0]+n[1])/2,e);i.foundPossibleResultPoint(t)}let o=this.decodeMiddle(t,n,this.decodeRowStringBuffer),a=o.rowOffset,s=o.resultString;if(null!=i){const t=new se(a,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,a);if(null!=i){const t=new se((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new k;let d=s.toString();if(d.length<8)throw new E;if(!Ie.checkChecksum(d))throw new h;let f=(n[1]+n[0])/2,p=(l[1]+l[0])/2,g=this.getBarcodeFormat(),m=[new se(f,e),new se(p,e)],w=new F(d,null,0,m,g,(new Date).getTime()),y=0;try{let r=Ae.decodeRow(e,t,l[1]);w.putMetadata(X.UPC_EAN_EXTENSION,r.getText()),w.putAllMetadata(r.getResultMetadata()),w.addResultPoints(r.getResultPoints()),y=r.getText().length}catch(v){}let b=null==r?null:r.get(_.ALLOWED_EAN_EXTENSIONS);if(null!=b){let e=!1;for(let t in b)if(y.toString()===t){e=!0;break}if(!e)throw new k}return w}decodeEnd(e,t){return Ie.findGuardPattern(e,t,!1,Ie.START_END_PATTERN,new Int32Array(Ie.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ie.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return Ie.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}return(1e3-r)%10}}class Te extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],a=0;for(let s=0;s<6&&o<i;s++){let t=Ie.decodeDigit(e,n,o,Ie.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(a|=1<<5-s)}r=Te.determineFirstDigit(r,a),o=Ie.findGuardPattern(e,o,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<6&&o<i;s++){let t=Ie.decodeDigit(e,n,o,Ie.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)o+=e}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return U.EAN_13}static determineFirstDigit(e,t){for(let r=0;r<10;r++)if(t===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode("0".charCodeAt(0)+r)+e;throw new k}}Te.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ke extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1];for(let a=0;a<4&&o<i;a++){let t=Ie.decodeDigit(e,n,o,Ie.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)o+=e}o=Ie.findGuardPattern(e,o,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&o<i;a++){let t=Ie.decodeDigit(e,n,o,Ie.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)o+=e}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return U.EAN_8}}class Re extends Ie{constructor(){super(...arguments),this.ean13Reader=new Te}getBarcodeFormat(){return U.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,r))}decodeMiddle(e,t,r){return this.ean13Reader.decodeMiddle(e,t,r)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let r=new F(t.substring(1),null,null,e.getResultPoints(),U.UPC_A);return null!=e.getResultMetadata()&&r.putAllMetadata(e.getResultMetadata()),r}throw new k}reset(){this.ean13Reader.reset()}}class Oe extends Ie{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters.map(e=>e);n[0]=0,n[1]=0,n[2]=0,n[3]=0;const i=e.getSize();let o=t[1],a=0;for(let s=0;s<6&&o<i;s++){const t=Oe.decodeDigit(e,n,o,Oe.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(a|=1<<5-s)}return{rowOffset:o,resultString:Oe.determineNumSysAndCheckDigit(r,a)}}decodeEnd(e,t){return Oe.findGuardPatternWithoutCounters(e,t,!0,Oe.MIDDLE_END_PATTERN)}checkChecksum(e){return Ie.checkChecksum(Oe.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return String.fromCharCode("0".charCodeAt(0)+r)+e+String.fromCharCode("0".charCodeAt(0)+n);throw k.getNotFoundInstance()}getBarcodeFormat(){return U.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),r=new I;r.append(e.charAt(0));let n=t[5];switch(n){case 0:case 1:case 2:r.appendChars(t,0,2),r.append(n),r.append("0000"),r.appendChars(t,2,3);break;case 3:r.appendChars(t,0,3),r.append("00000"),r.appendChars(t,3,2);break;case 4:r.appendChars(t,0,4),r.append("00000"),r.append(t[4]);break;default:r.appendChars(t,0,5),r.append("0000"),r.append(n)}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Oe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Oe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ne extends be{constructor(e){super();let r=null==e?null:e.get(_.POSSIBLE_FORMATS),n=[];t(r)?(n.push(new Te),n.push(new Re),n.push(new ke),n.push(new Oe)):(r.indexOf(U.EAN_13)>-1&&n.push(new Te),r.indexOf(U.UPC_A)>-1&&n.push(new Re),r.indexOf(U.EAN_8)>-1&&n.push(new ke),r.indexOf(U.UPC_E)>-1&&n.push(new Oe)),this.readers=n}decodeRow(e,t,r){for(let n of this.readers)try{const i=n.decodeRow(e,t,r),o=i.getBarcodeFormat()===U.EAN_13&&"0"===i.getText().charAt(0),a=null==r?null:r.get(_.POSSIBLE_FORMATS),s=null==a||a.includes(U.UPC_A);if(o&&s){const e=i.getRawBytes(),t=new F(i.getText().substring(1),e,e?e.length:null,i.getResultPoints(),U.UPC_A);return t.putAllMetadata(i.getResultMetadata()),t}return i}catch(jb){}throw new k}reset(){for(let e of this.readers)e.reset()}}class De extends be{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let r=0;r<t.length;r++)if(be.patternMatchVariance(e,t[r],De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return r;throw new k}static count(e){return ie.sum(new Int32Array(e))}static increment(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]>n&&(n=t[i],r=i);e[r]++}static decrement(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]<n&&(n=t[i],r=i);e[r]--}static isFinderPattern(e){let t=e[0]+e[1],r=t/(t+e[2]+e[3]);if(r>=De.MIN_FINDER_PATTERN_RATIO&&r<=De.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of e)n>r&&(r=n),n<t&&(t=n);return r<10*t}return!1}}De.MAX_AVG_VARIANCE=.2,De.MAX_INDIVIDUAL_VARIANCE=.45,De.MIN_FINDER_PATTERN_RATIO=9.5/12,De.MAX_FINDER_PATTERN_RATIO=12.5/14;class Pe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Pe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Me{constructor(e,t,r,n,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new se(r,i)),this.resultPoints.push(new se(n,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Me))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Be{constructor(){}static getRSSvalue(e,t,r){let n=0;for(let s of e)n+=s;let i=0,o=0,a=e.length;for(let s=0;s<a-1;s++){let l;for(l=1,o|=1<<s;l<e[s];l++,o&=~(1<<s)){let e=Be.combins(n-l-1,a-s-2);if(r&&0===o&&n-l-(a-s-1)>=a-s-1&&(e-=Be.combins(n-l-(a-s),a-s-2)),a-s-1>1){let r=0;for(let e=n-l-(a-s-2);e>t;e--)r+=Be.combins(n-l-e-1,a-s-3);e-=r*(a-1-s)}else n-l>t&&e--;i+=e}n-=l}return i}static combins(e,t){let r,n;e-t>t?(n=t,r=e-t):(n=e-t,r=t);let i=1,o=1;for(let a=e;a>r;a--)i*=a,o<=n&&(i/=o,o++);for(;o<=n;)i/=o,o++;return i}}class je{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let r=new b(12*t),n=0,i=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)i&1<<o&&r.set(n),n++;for(let o=1;o<e.length;++o){let t=e[o],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)i&1<<e&&r.set(n),n++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)e&1<<t&&r.set(n),n++}}return r}}class Le{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fe{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class ze extends Fe{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===ze.FNC1}}ze.FNC1="$";class Ue extends Fe{constructor(e,t,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ve extends Fe{constructor(e,t,r){if(super(e),t<0||t>10||r<0||r>10)throw new E;this.firstDigit=t,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ve.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ve.FNC1}isAnyFNC1(){return this.firstDigit===Ve.FNC1||this.secondDigit===Ve.FNC1}}Ve.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new k;let t=e.substring(0,2);for(let i of He.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,i[2],e):He.processFixedAI(2,i[1],e);if(e.length<3)throw new k;let r=e.substring(0,3);for(let i of He.THREE_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,i[2],e):He.processFixedAI(3,i[1],e);for(let i of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);if(e.length<4)throw new k;let n=e.substring(0,4);for(let i of He.FOUR_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,i[2],e):He.processFixedAI(4,i[1],e);throw new k}static processFixedAI(e,t,r){if(r.length<e)throw new k;let n=r.substring(0,e);if(r.length<e+t)throw new k;let i=r.substring(e,e+t),o=r.substring(e+t),a="("+n+")"+i,s=He.parseFieldsInGeneralPurpose(o);return null==s?a:a+s}static processVariableAI(e,t,r){let n,i=r.substring(0,e);n=r.length<e+t?r.length:e+t;let o=r.substring(e,n),a=r.substring(n),s="("+i+")"+o,l=He.parseFieldsInGeneralPurpose(a);return null==l?s:s+l}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class qe{constructor(e){this.buffer=new I,this.information=e}decodeAllCodes(e,t){let r=t,n=null;for(;;){let t=this.decodeGeneralPurposeField(r,n),i=He.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),n=t.isRemaining()?""+t.getRemainingValue():null,r===t.getNewPosition())break;r=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new Ve(this.information.getSize(),0===t?Ve.FNC1:t-1,Ve.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new Ve(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return qe.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,r){let n=0;for(let i=0;i<r;++i)e.get(t+i)&&(n|=1<<r-i-1);return n}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new Ue(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ue(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let r=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),r===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new Ue(this.current.getPosition(),this.buffer.toString()):new Ue(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Le(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Le(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Le(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Le(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Le(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Le(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Le(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));let r,n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ze(e+7,""+(n+1));if(n>=90&&n<116)return new ze(e+7,""+(n+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new E}return new ze(e+8,r)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));let r,n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ze(e+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new te("Decoding invalid alphanumeric value: "+n)}return new ze(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class We{constructor(e){this.information=e,this.generalDecoder=new qe(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ge extends We{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,r)}encodeCompressedGtinWithoutAI(e,t,r){for(let n=0;n<4;++n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*n,10);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r)}Ge.appendCheckDigit(e,r)}static appendCheckDigit(e,t){let r=0;for(let n=0;n<13;n++){let i=e.charAt(n+t).charCodeAt(0)-"0".charCodeAt(0);r+=1&n?i:3*i}r=10-r%10,10===r&&(r=0),e.append(r)}}Ge.GTIN_SIZE=40;class $e extends Ge{constructor(e){super(e)}parseInformation(){let e=new I;e.append("(01)");let t=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,$e.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,$e.HEADER_SIZE+44)}}$e.HEADER_SIZE=4;class Xe extends We{constructor(e){super(e)}parseInformation(){let e=new I;return this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE)}}Xe.HEADER_SIZE=5;class Ye extends Ge{constructor(e){super(e)}encodeCompressedWeight(e,t,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,r);this.addWeightCode(e,n);let i=this.checkWeight(n),o=1e5;for(let a=0;a<5;++a)i/o===0&&e.append("0"),o/=10;e.append(i)}}class Ke extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ke.HEADER_SIZE+Ye.GTIN_SIZE+Ke.WEIGHT_SIZE)throw new k;let e=new I;return this.encodeCompressedGtin(e,Ke.HEADER_SIZE),this.encodeCompressedWeight(e,Ke.HEADER_SIZE+Ye.GTIN_SIZE,Ke.WEIGHT_SIZE),e.toString()}}Ke.HEADER_SIZE=5,Ke.WEIGHT_SIZE=15;class Qe extends Ke{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ze extends Ke{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new I;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+Ge.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+Ge.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new I;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(n.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Ye{constructor(e,t,r){super(e),this.dateCode=r,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new k;let e=new I;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==r)return;e.append("("),e.append(this.dateCode),e.append(")");let n=r%32;r/=32;let i=r%12+1;r/=12;let o=r;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),n/10==0&&e.append("0"),e.append(n)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function rt(e){try{if(e.get(1))return new $e(e);if(!e.get(2))return new Xe(e);switch(qe.extractNumericValueFromBitArray(e,1,4)){case 4:return new Qe(e);case 5:return new Ze(e)}switch(qe.extractNumericValueFromBitArray(e,1,5)){case 12:return new Je(e);case 13:return new et(e)}switch(qe.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(Bb){throw console.log(Bb),new te("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class nt{constructor(e,t,r,n){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof nt&&nt.equalsOrNull(e.leftchar,t.leftchar)&&nt.equalsOrNull(e.rightchar,t.rightchar)&&nt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:nt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let r;return e.forEach((e,n)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(r=!0)})}),r}}class ot extends De{constructor(e){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,r){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(e,t))}catch(Bb){this.verbose&&console.log(Bb)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof k){if(!this.pairs.length)throw new k;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(e,!1),r){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new k}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(Bb){this.verbose&&console.log(Bb)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let r of e)this.pairs.push(r.getPairs());if(this.pairs.push(t.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let n=new Array(e);n.push(t);try{return this.checkRows(n,r+1)}catch(Bb){this.verbose&&console.log(Bb)}}throw new k}static isValidSequence(e){for(let t of ot.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let r=!0;for(let n=0;n<e.length;n++)if(e[n].getFinderPattern().getValue()!=t[n]){r=!1;break}if(r)return!0}return!1}storeRow(e,t){let r=0,n=!1,i=!1;for(;r<this.rows.length;){let t=this.rows[r];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}n=t.isEquivalent(this.pairs),r++}i||n||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let r of t)if(r.getPairs().length!==e.length)for(let t of r.getPairs())for(let r of e)if(nt.equals(t,r))break}static isPartialRow(e,t){for(let r of t){let t=!0;for(let n of e){let e=!1;for(let t of r.getPairs())if(n.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=rt(je.buildBitArray(e)).parseInformation(),r=e[0].getFinderPattern().getResultPoints(),n=e[e.length-1].getFinderPattern().getResultPoints(),i=[r[0],r[1],n[0],n[1]];return new F(t,null,null,i,U.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),r=e.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let e=this.pairs.get(o);n+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(n+=t.getChecksumPortion(),i++)}return n%=211,211*(i-4)+n==t.getValue()}static getNextSecondBar(e,t){let r;return e.get(t)?(r=e.getNextUnset(t),r=e.getNextSet(r)):(r=e.getNextSet(t),r=e.getNextUnset(r)),r}retrieveNextPair(e,t,r){let n,i=t.length%2==0;this.startFromEven&&(i=!i);let o=!0,a=-1;do{this.findNextPair(e,t,a),n=this.parseFoundFinderPattern(e,r,i),null==n?a=ot.getNextSecondBar(e,this.startEnd[0]):o=!1}while(o);let s,l=this.decodeDataCharacter(e,n,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new k;try{s=this.decodeDataCharacter(e,n,i,!1)}catch(Bb){s=null,this.verbose&&console.log(Bb)}return new nt(l,s,n,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i,o=e.getSize();i=r>=0?r:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let s=!1;for(;i<o&&(s=!e.get(i),s);)i++;let l=0,c=i;for(let u=i;u<o;u++)if(e.get(u)!=s)n[l]++;else{if(3==l){if(a&&ot.reverseCounters(n),ot.isFinderPattern(n))return this.startEnd[0]=c,void(this.startEnd[1]=u);a&&ot.reverseCounters(n),c+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,s=!s}throw new k}static reverseCounters(e){let t=e.length;for(let r=0;r<t/2;++r){let n=e[r];e[r]=e[t-r-1],e[t-r-1]=n}}parseFoundFinderPattern(e,t,r){let n,i,o;if(r){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,n=this.startEnd[0]-t,i=t,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),n=o-this.startEnd[1];let a,s=this.getDecodeFinderCounters();p.arraycopy(s,0,s,1,s.length-1),s[0]=n;try{a=this.parseFinderValue(s,ot.FINDER_PATTERNS)}catch(Bb){return null}return new Me(a,[i,o],i,o,t)}decodeDataCharacter(e,t,r,n){let i=this.getDataCharacterCounters();for(let C=0;C<i.length;C++)i[C]=0;if(n)ot.recordPatternInReverse(e,t.getStartEnd()[0],i);else{ot.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let r=i[e];i[e]=i[t],i[t]=r}}let o=17,a=ie.sum(new Int32Array(i))/o,s=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(a-s)/s>.3)throw new k;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let C=0;C<i.length;C++){let e=1*i[C]/a,t=e+.5;if(t<1){if(e<.3)throw new k;t=1}else if(t>8){if(e>8.7)throw new k;t=8}let r=C/2;1&C?(c[r]=t,d[r]=e-t):(l[r]=t,u[r]=e-t)}this.adjustOddEvenCounts(o);let h=4*t.getValue()+(r?0:2)+(n?0:1)-1,f=0,p=0;for(let C=l.length-1;C>=0;C--){if(ot.isNotA1left(t,r,n)){let e=ot.WEIGHTS[h][2*C];p+=l[C]*e}f+=l[C]}let g=0;for(let C=c.length-1;C>=0;C--)if(ot.isNotA1left(t,r,n)){let e=ot.WEIGHTS[h][2*C+1];g+=c[C]*e}let m=p+g;if(1&f||f>13||f<4)throw new k;let w=(13-f)/2,y=ot.SYMBOL_WIDEST[w],b=9-y,v=Be.getRSSvalue(l,y,!0),_=Be.getRSSvalue(c,b,!1),E=ot.EVEN_TOTAL_SUBSET[w],S=ot.GSUM[w];return new Pe(v*E+_+S,m)}static isNotA1left(e,t,r){return!(0==e.getValue()&&t&&r)}adjustOddEvenCounts(e){let t=ie.sum(new Int32Array(this.getOddCounts())),r=ie.sum(new Int32Array(this.getEvenCounts())),n=!1,i=!1;t>13?i=!0:t<4&&(n=!0);let o=!1,a=!1;r>13?a=!0:r<4&&(o=!0);let s=t+r-e,l=!(1&~t),c=!(1&r);if(1==s)if(l){if(c)throw new k;i=!0}else{if(!c)throw new k;a=!0}else if(-1==s)if(l){if(c)throw new k;n=!0}else{if(!c)throw new k;o=!0}else{if(0!=s)throw new k;if(l){if(!c)throw new k;t<r?(n=!0,a=!0):(i=!0,o=!0)}else if(c)throw new k}if(n){if(i)throw new k;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new k;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class at extends Pe{constructor(e,t,r){super(e,t),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class st extends De{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,r){const n=this.decodePair(t,!1,e,r);st.addOrTally(this.possibleLeftPairs,n),t.reverse();let i=this.decodePair(t,!0,e,r);st.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&st.checkChecksum(o,e))return st.constructResult(o,e);throw new k}static addOrTally(e,t){if(null==t)return;let r=!1;for(let n of e)if(n.getValue()===t.getValue()){n.incrementCount(),r=!0;break}r||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let r=4537077*e.getValue()+t.getValue(),n=new String(r).toString(),i=new I;for(let l=13-n.length;l>0;l--)i.append("0");i.append(n);let o=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);o+=1&l?e:3*e}o=10-o%10,10===o&&(o=0),i.append(o.toString());let a=e.getFinderPattern().getResultPoints(),s=t.getFinderPattern().getResultPoints();return new F(i.toString(),null,0,[a[0],a[1],s[0],s[1]],U.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let r=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,n=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(e,t,r,n){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,r,t,i),a=null==n?null:n.get(_.NEED_RESULT_POINT_CALLBACK);if(null!=a){let n=(i[0]+i[1])/2;t&&(n=e.getSize()-1-n),a.foundPossibleResultPoint(new se(n,r))}let s=this.decodeDataCharacter(e,o,!0),l=this.decodeDataCharacter(e,o,!1);return new at(1597*s.getValue()+l.getValue(),s.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(jb){return null}}decodeDataCharacter(e,t,r){let n=this.getDataCharacterCounters();for(let g=0;g<n.length;g++)n[g]=0;if(r)be.recordPatternInReverse(e,t.getStartEnd()[0],n);else{be.recordPattern(e,t.getStartEnd()[1]+1,n);for(let e=0,t=n.length-1;e<t;e++,t--){let r=n[e];n[e]=n[t],n[t]=r}}let i=r?16:15,o=ie.sum(new Int32Array(n))/i,a=this.getOddCounts(),s=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let g=0;g<n.length;g++){let e=n[g]/o,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let r=Math.floor(g/2);1&g?(s[r]=t,c[r]=e-t):(a[r]=t,l[r]=e-t)}this.adjustOddEvenCounts(r,i);let u=0,d=0;for(let g=a.length-1;g>=0;g--)d*=9,d+=a[g],u+=a[g];let h=0,f=0;for(let g=s.length-1;g>=0;g--)h*=9,h+=s[g],f+=s[g];let p=d+3*h;if(r){if(1&u||u>12||u<4)throw new k;let e=(12-u)/2,t=st.OUTSIDE_ODD_WIDEST[e],r=9-t,n=Be.getRSSvalue(a,t,!1),i=Be.getRSSvalue(s,r,!0),o=st.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=st.OUTSIDE_GSUM[e];return new Pe(n*o+i+l,p)}{if(1&f||f>10||f<4)throw new k;let e=(10-f)/2,t=st.INSIDE_ODD_WIDEST[e],r=9-t,n=Be.getRSSvalue(a,t,!0),i=Be.getRSSvalue(s,r,!1),o=st.INSIDE_ODD_TOTAL_SUBSET[e],l=st.INSIDE_GSUM[e];return new Pe(i*o+n+l,p)}}findFinderPattern(e,t){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=e.getSize(),i=!1,o=0;for(;o<n&&(i=!e.get(o),t!==i);)o++;let a=0,s=o;for(let l=o;l<n;l++)if(e.get(l)!==i)r[a]++;else{if(3===a){if(De.isFinderPattern(r))return[s,l];s+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,a--}else a++;r[a]=1,i=!i}throw new k}parseFoundFinderPattern(e,t,r,n){let i=e.get(n[0]),o=n[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const a=n[0]-o,s=this.getDecodeFinderCounters(),l=new Int32Array(s.length);p.arraycopy(s,0,l,1,s.length-1),l[0]=a;const c=this.parseFinderValue(l,st.FINDER_PATTERNS);let u=o,d=n[1];return r&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new Me(c,[o,n[1]],u,d,t)}adjustOddEvenCounts(e,t){let r=ie.sum(new Int32Array(this.getOddCounts())),n=ie.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,a=!1,s=!1;e?(r>12?o=!0:r<4&&(i=!0),n>12?s=!0:n<4&&(a=!0)):(r>11?o=!0:r<5&&(i=!0),n>10?s=!0:n<4&&(a=!0));let l=r+n-t,c=(1&r)==(e?1:0),u=!(1&~n);if(1===l)if(c){if(u)throw new k;o=!0}else{if(!u)throw new k;s=!0}else if(-1===l)if(c){if(u)throw new k;i=!0}else{if(!u)throw new k;a=!0}else{if(0!==l)throw new k;if(c){if(!u)throw new k;r<n?(i=!0,s=!0):(o=!0,a=!0)}else if(u)throw new k}if(i){if(o)throw new k;De.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&De.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new k;De.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&De.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],st.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],st.OUTSIDE_GSUM=[0,161,961,2015,2715],st.INSIDE_GSUM=[0,336,1036,1516],st.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],st.INSIDE_ODD_WIDEST=[2,4,6,8],st.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends be{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const r=e?e.get(_.POSSIBLE_FORMATS):null,n=e&&void 0!==e.get(_.ASSUME_CODE_39_CHECK_DIGIT);r?((r.includes(U.EAN_13)||r.includes(U.UPC_A)||r.includes(U.EAN_8)||r.includes(U.UPC_E))&&this.readers.push(new Ne(e)),r.includes(U.CODE_39)&&this.readers.push(new _e(n)),r.includes(U.CODE_128)&&this.readers.push(new ve),r.includes(U.ITF)&&this.readers.push(new Ee),r.includes(U.RSS_14)&&this.readers.push(new st),r.includes(U.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new Ne(e)),this.readers.push(new _e),this.readers.push(new Ne(e)),this.readers.push(new ve),this.readers.push(new Ee),this.readers.push(new st),this.readers.push(new ot(this.verbose)))}decodeRow(e,t,r){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,r)}catch(n){}throw new k}reset(){this.readers.forEach(e=>e.reset())}}class ct extends L{constructor(e=500,t){super(new lt(t),e,t)}}class ut{constructor(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,r,n,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=i,this.ecBlocks=o;let a=0;const s=o.getECCodewords(),l=o.getECBlocks();for(let c of l)a+=c.getCount()*(c.getDataCodewords()+s);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(1&e||1&t)throw new E;for(let r of ht.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===t)return r;throw new E}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ut(5,new dt(1,3))),new ht(2,12,12,10,10,new ut(7,new dt(1,5))),new ht(3,14,14,12,12,new ut(10,new dt(1,8))),new ht(4,16,16,14,14,new ut(12,new dt(1,12))),new ht(5,18,18,16,16,new ut(14,new dt(1,18))),new ht(6,20,20,18,18,new ut(18,new dt(1,22))),new ht(7,22,22,20,20,new ut(20,new dt(1,30))),new ht(8,24,24,22,22,new ut(24,new dt(1,36))),new ht(9,26,26,24,24,new ut(28,new dt(1,44))),new ht(10,32,32,14,14,new ut(36,new dt(1,62))),new ht(11,36,36,16,16,new ut(42,new dt(1,86))),new ht(12,40,40,18,18,new ut(48,new dt(1,114))),new ht(13,44,44,20,20,new ut(56,new dt(1,144))),new ht(14,48,48,22,22,new ut(68,new dt(1,174))),new ht(15,52,52,24,24,new ut(42,new dt(2,102))),new ht(16,64,64,14,14,new ut(56,new dt(2,140))),new ht(17,72,72,16,16,new ut(36,new dt(4,92))),new ht(18,80,80,18,18,new ut(48,new dt(4,114))),new ht(19,88,88,20,20,new ut(56,new dt(4,144))),new ht(20,96,96,22,22,new ut(68,new dt(4,174))),new ht(21,104,104,24,24,new ut(56,new dt(6,136))),new ht(22,120,120,18,18,new ut(68,new dt(6,175))),new ht(23,132,132,20,20,new ut(62,new dt(8,163))),new ht(24,144,144,22,22,new ut(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ut(7,new dt(1,5))),new ht(26,8,32,6,14,new ut(11,new dt(1,10))),new ht(27,12,26,10,24,new ut(14,new dt(1,16))),new ht(28,12,36,10,16,new ut(18,new dt(1,22))),new ht(29,16,36,14,16,new ut(24,new dt(1,32))),new ht(30,16,48,14,22,new ut(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||1&t)throw new E;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new T(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),r=e.getWidth();return ht.getVersionForDimensions(t,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,r=4,n=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let a=!1,s=!1,l=!1,c=!1;do{if(r!==i||0!==n||a)if(r===i-2&&0===n&&3&o&&!s)e[t++]=255&this.readCorner2(i,o),r-=2,n+=2,s=!0;else if(r!==i+4||2!==n||7&o||l)if(r!==i-2||0!==n||4!=(7&o)||c){do{r<i&&n>=0&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,o)),r-=2,n+=2}while(r>=0&&n<o);r+=1,n+=3;do{r>=0&&n<o&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,o)),r+=2,n-=2}while(r<i&&n>=0);r+=3,n+=1}else e[t++]=255&this.readCorner4(i,o),r-=2,n+=2,c=!0;else e[t++]=255&this.readCorner3(i,o),r-=2,n+=2,l=!0;else e[t++]=255&this.readCorner1(i,o),r-=2,n+=2,a=!0}while(r<i||n<o);if(t!==this.version.getTotalCodewords())throw new E;return e}readModule(e,t,r,n){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,r,n){let i=0;return this.readModule(e-2,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-2,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t,r,n)&&(i|=1),i<<=1,this.readModule(e,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e,t,r,n)&&(i|=1),i}readCorner1(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}readCorner2(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner3(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner4(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new u("Dimension of bitMatrix must match the version size");const n=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/n|0,a=r/i|0,s=new T(a*i,o*n);for(let l=0;l<o;++l){const t=l*n;for(let r=0;r<a;++r){const o=r*i;for(let a=0;a<n;++a){const c=l*(n+2)+1+a,u=t+a;for(let t=0;t<i;++t){const n=r*(i+2)+1+t;if(e.get(n,c)){const e=o+t;s.set(e,u)}}}}}return s}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const r=t.getECBlocks();let n=0;const i=r.getECBlocks();for(let u of i)n+=u.getCount();const o=new Array(n);let a=0;for(let u of i)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=r.getECCodewords()+e;o[a++]=new pt(e,new Uint8Array(t))}const s=o[0].codewords.length-r.getECCodewords(),l=s-1;let c=0;for(let u=0;u<l;u++)for(let t=0;t<a;t++)o[t].codewords[u]=e[c++];const d=24===t.getVersionNumber(),h=d?8:a;for(let u=0;u<h;u++)o[u].codewords[s-1]=e[c++];const f=o[0].codewords.length;for(let u=s;u<f;u++)for(let t=0;t<a;t++){const r=d?(t+8)%a:t,n=d&&r>7?u-1:u;o[r].codewords[n]=e[c++]}if(c!==e.length)throw new u;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new u(""+e);let t=0,r=this.bitOffset,n=this.byteOffset;const i=this.bytes;if(r>0){const o=8-r,a=e<o?e:o,s=o-a,l=255>>8-a<<s;t=(i[n]&l)>>s,e-=a,r+=a,8===r&&(r=0,n++)}if(e>0){for(;e>=8;)t=t<<8|255&i[n],n++,e-=8;if(e>0){const o=8-e,a=255>>o<<o;t=t<<e|(i[n]&a)>>o,r+=e}}return this.bitOffset=r,this.byteOffset=n,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(H||(H={}));class mt{static decode(e){const t=new gt(e),r=new I,n=new I,i=new Array;let o=H.ASCII_ENCODE;do{if(o===H.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,n);else{switch(o){case H.C40_ENCODE:this.decodeC40Segment(t,r);break;case H.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case H.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case H.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case H.BASE256_ENCODE:this.decodeBase256Segment(t,r,i);break;default:throw new E}o=H.ASCII_ENCODE}}while(o!==H.PAD_ENCODE&&t.available()>0);return n.length()>0&&r.append(n.toString()),new Y(e,r.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,r){let n=!1;do{let i=e.readBits(8);if(0===i)throw new E;if(i<=128)return n&&(i+=128),t.append(String.fromCharCode(i-1)),H.ASCII_ENCODE;if(129===i)return H.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return H.C40_ENCODE;case 231:return H.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return H.ANSIX12_ENCODE;case 239:return H.TEXT_ENCODE;case 240:return H.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new E}}while(e.available()>0);return H.ASCII_ENCODE}static decodeC40Segment(e,t){let r=!1;const n=[];let i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),n);for(let e=0;e<3;e++){const o=n[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new E;{const e=this.C40_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}}break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new E}i=0;break;case 3:r?(t.append(String.fromCharCode(o+224)),r=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new E}}}while(e.available()>0)}static decodeTextSegment(e,t){let r=!1,n=[],i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),n);for(let e=0;e<3;e++){const o=n[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new E;{const e=this.TEXT_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}}break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new E}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new E;{const e=this.TEXT_SHIFT3_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e),i=0}break;default:throw new E}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const r=[];do{if(8===e.available())return;const n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),r);for(let e=0;e<3;e++){const n=r[e];switch(n){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(n<14)t.append(String.fromCharCode(n+44));else{if(!(n<40))throw new E;t.append(String.fromCharCode(n+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,r){let n=(e<<8)+t-1,i=Math.floor(n/1600);r[0]=i,n-=1600*i,i=Math.floor(n/40),r[1]=i,r[2]=n-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let r=e.readBits(6);if(31===r){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}32&r||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,r){let n=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),n++);let o;if(o=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),n++),o<0)throw new E;const a=new Uint8Array(o);for(let l=0;l<o;l++){if(e.available()<8)throw new E;a[l]=this.unrandomize255State(e.readBits(8),n++)}r.push(a);try{t.append(x.decode(a,A.ISO88591))}catch(s){throw new te("Platform does not support required encoding: "+s.message)}}static unrandomize255State(e,t){const r=e-(149*t%255+1);return r>=0?r:r+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class wt{constructor(){this.rsDecoder=new re(J.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),r=t.getVersion(),n=t.readCodewords(),i=pt.getDataBlocks(n,r);let o=0;for(let l of i)o+=l.getNumDataCodewords();const a=new Uint8Array(o),s=i.length;for(let l=0;l<s;l++){const e=i[l],t=e.getCodewords(),r=e.getNumDataCodewords();this.correctErrors(t,r);for(let n=0;n<r;n++)a[n*s+l]=t[n]}return mt.decode(a)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new h}for(let i=0;i<t;i++)e[i]=r[i]}}class yt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new k;t=this.shiftToModuleCenter(t);const r=t[0],n=t[1],i=t[2],o=t[3];let a=this.transitionsBetween(r,o)+1,s=this.transitionsBetween(i,o)+1;1&~a||(a+=1),1&~s||(s+=1),4*a<7*s&&4*s<7*a&&(a=s=Math.max(a,s));let l=yt.sampleGrid(this.image,r,n,i,o,a,s);return new le(l,[r,n,i,o])}static shiftPoint(e,t,r){let n=(t.getX()-e.getX())/(r+1),i=(t.getY()-e.getY())/(r+1);return new se(e.getX()+n,e.getY()+i)}static moveAway(e,t,r){let n=e.getX(),i=e.getY();return n<t?n-=1:n+=1,i<r?i-=1:i+=1,new se(n,i)}detectSolid1(e){let t=e[0],r=e[1],n=e[3],i=e[2],o=this.transitionsBetween(t,r),a=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,t),c=o,u=[i,t,r,n];return c>a&&(c=a,u[0]=t,u[1]=r,u[2]=n,u[3]=i),c>s&&(c=s,u[0]=r,u[1]=n,u[2]=i,u[3]=t),c>l&&(u[0]=n,u[1]=i,u[2]=t,u[3]=r),u}detectSolid2(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i),a=yt.shiftPoint(r,n,4*(o+1)),s=yt.shiftPoint(n,r,4*(o+1));return this.transitionsBetween(a,t)<this.transitionsBetween(s,i)?(e[0]=t,e[1]=r,e[2]=n,e[3]=i):(e[0]=r,e[1]=n,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i),a=this.transitionsBetween(r,i),s=yt.shiftPoint(t,r,4*(a+1)),l=yt.shiftPoint(n,r,4*(o+1));o=this.transitionsBetween(s,i),a=this.transitionsBetween(l,i);let c=new se(i.getX()+(n.getX()-r.getX())/(o+1),i.getY()+(n.getY()-r.getY())/(o+1)),u=new se(i.getX()+(t.getX()-r.getX())/(a+1),i.getY()+(t.getY()-r.getY())/(a+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(s,c)+this.transitionsBetween(l,c)>this.transitionsBetween(s,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,a=this.transitionsBetween(n,i)+1,s=yt.shiftPoint(t,r,4*a),l=yt.shiftPoint(n,r,4*o);o=this.transitionsBetween(s,i)+1,a=this.transitionsBetween(l,i)+1,1&~o||(o+=1),1&~a||(a+=1);let c,u,d=(t.getX()+r.getX()+n.getX()+i.getX())/4,h=(t.getY()+r.getY()+n.getY()+i.getY())/4;return t=yt.moveAway(t,d,h),r=yt.moveAway(r,d,h),n=yt.moveAway(n,d,h),i=yt.moveAway(i,d,h),s=yt.shiftPoint(t,r,4*a),s=yt.shiftPoint(s,i,4*o),c=yt.shiftPoint(r,t,4*a),c=yt.shiftPoint(c,n,4*o),l=yt.shiftPoint(n,i,4*a),l=yt.shiftPoint(l,r,4*o),u=yt.shiftPoint(i,n,4*a),u=yt.shiftPoint(u,t,4*o),[s,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,r,n,i,o,a){return pe.getInstance().sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(e,t){let r=Math.trunc(e.getX()),n=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.abs(o-n)>Math.abs(i-r);if(a){let e=r;r=n,n=e,e=i,i=o,o=e}let s=Math.abs(i-r),l=Math.abs(o-n),c=-s/2,u=n<o?1:-1,d=r<i?1:-1,h=0,f=this.image.get(a?n:r,a?r:n);for(let p=r,g=n;p!==i;p+=d){let e=this.image.get(a?g:p,a?p:g);if(e!==f&&(h++,f=e),c+=l,c>0){if(g===o)break;g+=u,c-=s}}return h}}class bt{constructor(){this.decoder=new wt}decode(e,t=null){let r,n;if(null!=t&&t.has(_.PURE_BARCODE)){const t=bt.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(t),n=bt.NO_POINTS}else{const t=new yt(e.getBlackMatrix()).detect();r=this.decoder.decode(t.getBits()),n=t.getPoints()}const i=r.getRawBytes(),o=new F(r.getText(),i,8*i.length,n,U.DATA_MATRIX,p.currentTimeMillis()),a=r.getByteSegments();null!=a&&o.putMetadata(X.BYTE_SEGMENTS,a);const s=r.getECLevel();return null!=s&&o.putMetadata(X.ERROR_CORRECTION_LEVEL,s),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new k;const n=this.moduleSize(t,e);let i=t[1];const o=r[1];let a=t[0];const s=(r[0]-a+1)/n,l=(o-i+1)/n;if(s<=0||l<=0)throw new k;const c=n/2;i+=c,a+=c;const u=new T(s,l);for(let d=0;d<l;d++){const t=i+d*n;for(let r=0;r<s;r++)e.get(a+r*n,t)&&u.set(r,d)}return u}static moduleSize(e,t){const r=t.getWidth();let n=e[0];const i=e[1];for(;n<r&&t.get(n,i);)n++;if(n===r)throw new k;const o=n-e[0];if(0===o)throw new k;return o}}bt.NO_POINTS=[];class vt extends L{constructor(e=500){super(new bt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(q||(q={}));class _t{constructor(e,t,r){this.value=e,this.stringValue=t,this.bits=r,_t.FOR_BITS.set(r,this),_t.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return _t.L;case"M":return _t.M;case"Q":return _t.Q;case"H":return _t.H;default:throw new c(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=_t.FOR_BITS.size)throw new u;return _t.FOR_BITS.get(e)}}_t.FOR_BITS=new Map,_t.FOR_VALUE=new Map,_t.L=new _t(q.L,"L",1),_t.M=new _t(q.M,"M",0),_t.Q=new _t(q.Q,"Q",3),_t.H=new _t(q.H,"H",2);class Et{constructor(e){this.errorCorrectionLevel=_t.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return y.bitCount(e^t)}static decodeFormatInformation(e,t){const r=Et.doDecodeFormatInformation(e,t);return null!==r?r:Et.doDecodeFormatInformation(e^Et.FORMAT_INFO_MASK_QR,t^Et.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let r=Number.MAX_SAFE_INTEGER,n=0;for(const i of Et.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new Et(i[1]);let a=Et.numBitsDiffering(e,o);a<r&&(n=i[1],r=a),e!==t&&(a=Et.numBitsDiffering(t,o),a<r&&(n=i[1],r=a))}return r<=3?new Et(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Et))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Et.FORMAT_INFO_MASK_QR=21522,Et.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class St{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const r of t)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ct{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xt{constructor(e,t,...r){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=r;let n=0;const i=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const a of o)n+=a.getCount()*(a.getDataCodewords()+i);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!=1)throw new E;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new E}}static getVersionForNumber(e){if(e<1||e>40)throw new u;return xt.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<xt.VERSION_DECODE_INFO.length;n++){const i=xt.VERSION_DECODE_INFO[n];if(i===e)return xt.getVersionForNumber(n+7);const o=Et.numBitsDiffering(e,i);o<t&&(r=n+7,t=o)}return t<=3?xt.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new T(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let n=0;n<r;n++){const e=this.alignmentPatternCenters[n]-2;for(let i=0;i<r;i++)0===n&&(0===i||i===r-1)||n===r-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}xt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),xt.VERSIONS=[new xt(1,new Int32Array(0),new St(7,new Ct(1,19)),new St(10,new Ct(1,16)),new St(13,new Ct(1,13)),new St(17,new Ct(1,9))),new xt(2,Int32Array.from([6,18]),new St(10,new Ct(1,34)),new St(16,new Ct(1,28)),new St(22,new Ct(1,22)),new St(28,new Ct(1,16))),new xt(3,Int32Array.from([6,22]),new St(15,new Ct(1,55)),new St(26,new Ct(1,44)),new St(18,new Ct(2,17)),new St(22,new Ct(2,13))),new xt(4,Int32Array.from([6,26]),new St(20,new Ct(1,80)),new St(18,new Ct(2,32)),new St(26,new Ct(2,24)),new St(16,new Ct(4,9))),new xt(5,Int32Array.from([6,30]),new St(26,new Ct(1,108)),new St(24,new Ct(2,43)),new St(18,new Ct(2,15),new Ct(2,16)),new St(22,new Ct(2,11),new Ct(2,12))),new xt(6,Int32Array.from([6,34]),new St(18,new Ct(2,68)),new St(16,new Ct(4,27)),new St(24,new Ct(4,19)),new St(28,new Ct(4,15))),new xt(7,Int32Array.from([6,22,38]),new St(20,new Ct(2,78)),new St(18,new Ct(4,31)),new St(18,new Ct(2,14),new Ct(4,15)),new St(26,new Ct(4,13),new Ct(1,14))),new xt(8,Int32Array.from([6,24,42]),new St(24,new Ct(2,97)),new St(22,new Ct(2,38),new Ct(2,39)),new St(22,new Ct(4,18),new Ct(2,19)),new St(26,new Ct(4,14),new Ct(2,15))),new xt(9,Int32Array.from([6,26,46]),new St(30,new Ct(2,116)),new St(22,new Ct(3,36),new Ct(2,37)),new St(20,new Ct(4,16),new Ct(4,17)),new St(24,new Ct(4,12),new Ct(4,13))),new xt(10,Int32Array.from([6,28,50]),new St(18,new Ct(2,68),new Ct(2,69)),new St(26,new Ct(4,43),new Ct(1,44)),new St(24,new Ct(6,19),new Ct(2,20)),new St(28,new Ct(6,15),new Ct(2,16))),new xt(11,Int32Array.from([6,30,54]),new St(20,new Ct(4,81)),new St(30,new Ct(1,50),new Ct(4,51)),new St(28,new Ct(4,22),new Ct(4,23)),new St(24,new Ct(3,12),new Ct(8,13))),new xt(12,Int32Array.from([6,32,58]),new St(24,new Ct(2,92),new Ct(2,93)),new St(22,new Ct(6,36),new Ct(2,37)),new St(26,new Ct(4,20),new Ct(6,21)),new St(28,new Ct(7,14),new Ct(4,15))),new xt(13,Int32Array.from([6,34,62]),new St(26,new Ct(4,107)),new St(22,new Ct(8,37),new Ct(1,38)),new St(24,new Ct(8,20),new Ct(4,21)),new St(22,new Ct(12,11),new Ct(4,12))),new xt(14,Int32Array.from([6,26,46,66]),new St(30,new Ct(3,115),new Ct(1,116)),new St(24,new Ct(4,40),new Ct(5,41)),new St(20,new Ct(11,16),new Ct(5,17)),new St(24,new Ct(11,12),new Ct(5,13))),new xt(15,Int32Array.from([6,26,48,70]),new St(22,new Ct(5,87),new Ct(1,88)),new St(24,new Ct(5,41),new Ct(5,42)),new St(30,new Ct(5,24),new Ct(7,25)),new St(24,new Ct(11,12),new Ct(7,13))),new xt(16,Int32Array.from([6,26,50,74]),new St(24,new Ct(5,98),new Ct(1,99)),new St(28,new Ct(7,45),new Ct(3,46)),new St(24,new Ct(15,19),new Ct(2,20)),new St(30,new Ct(3,15),new Ct(13,16))),new xt(17,Int32Array.from([6,30,54,78]),new St(28,new Ct(1,107),new Ct(5,108)),new St(28,new Ct(10,46),new Ct(1,47)),new St(28,new Ct(1,22),new Ct(15,23)),new St(28,new Ct(2,14),new Ct(17,15))),new xt(18,Int32Array.from([6,30,56,82]),new St(30,new Ct(5,120),new Ct(1,121)),new St(26,new Ct(9,43),new Ct(4,44)),new St(28,new Ct(17,22),new Ct(1,23)),new St(28,new Ct(2,14),new Ct(19,15))),new xt(19,Int32Array.from([6,30,58,86]),new St(28,new Ct(3,113),new Ct(4,114)),new St(26,new Ct(3,44),new Ct(11,45)),new St(26,new Ct(17,21),new Ct(4,22)),new St(26,new Ct(9,13),new Ct(16,14))),new xt(20,Int32Array.from([6,34,62,90]),new St(28,new Ct(3,107),new Ct(5,108)),new St(26,new Ct(3,41),new Ct(13,42)),new St(30,new Ct(15,24),new Ct(5,25)),new St(28,new Ct(15,15),new Ct(10,16))),new xt(21,Int32Array.from([6,28,50,72,94]),new St(28,new Ct(4,116),new Ct(4,117)),new St(26,new Ct(17,42)),new St(28,new Ct(17,22),new Ct(6,23)),new St(30,new Ct(19,16),new Ct(6,17))),new xt(22,Int32Array.from([6,26,50,74,98]),new St(28,new Ct(2,111),new Ct(7,112)),new St(28,new Ct(17,46)),new St(30,new Ct(7,24),new Ct(16,25)),new St(24,new Ct(34,13))),new xt(23,Int32Array.from([6,30,54,78,102]),new St(30,new Ct(4,121),new Ct(5,122)),new St(28,new Ct(4,47),new Ct(14,48)),new St(30,new Ct(11,24),new Ct(14,25)),new St(30,new Ct(16,15),new Ct(14,16))),new xt(24,Int32Array.from([6,28,54,80,106]),new St(30,new Ct(6,117),new Ct(4,118)),new St(28,new Ct(6,45),new Ct(14,46)),new St(30,new Ct(11,24),new Ct(16,25)),new St(30,new Ct(30,16),new Ct(2,17))),new xt(25,Int32Array.from([6,32,58,84,110]),new St(26,new Ct(8,106),new Ct(4,107)),new St(28,new Ct(8,47),new Ct(13,48)),new St(30,new Ct(7,24),new Ct(22,25)),new St(30,new Ct(22,15),new Ct(13,16))),new xt(26,Int32Array.from([6,30,58,86,114]),new St(28,new Ct(10,114),new Ct(2,115)),new St(28,new Ct(19,46),new Ct(4,47)),new St(28,new Ct(28,22),new Ct(6,23)),new St(30,new Ct(33,16),new Ct(4,17))),new xt(27,Int32Array.from([6,34,62,90,118]),new St(30,new Ct(8,122),new Ct(4,123)),new St(28,new Ct(22,45),new Ct(3,46)),new St(30,new Ct(8,23),new Ct(26,24)),new St(30,new Ct(12,15),new Ct(28,16))),new xt(28,Int32Array.from([6,26,50,74,98,122]),new St(30,new Ct(3,117),new Ct(10,118)),new St(28,new Ct(3,45),new Ct(23,46)),new St(30,new Ct(4,24),new Ct(31,25)),new St(30,new Ct(11,15),new Ct(31,16))),new xt(29,Int32Array.from([6,30,54,78,102,126]),new St(30,new Ct(7,116),new Ct(7,117)),new St(28,new Ct(21,45),new Ct(7,46)),new St(30,new Ct(1,23),new Ct(37,24)),new St(30,new Ct(19,15),new Ct(26,16))),new xt(30,Int32Array.from([6,26,52,78,104,130]),new St(30,new Ct(5,115),new Ct(10,116)),new St(28,new Ct(19,47),new Ct(10,48)),new St(30,new Ct(15,24),new Ct(25,25)),new St(30,new Ct(23,15),new Ct(25,16))),new xt(31,Int32Array.from([6,30,56,82,108,134]),new St(30,new Ct(13,115),new Ct(3,116)),new St(28,new Ct(2,46),new Ct(29,47)),new St(30,new Ct(42,24),new Ct(1,25)),new St(30,new Ct(23,15),new Ct(28,16))),new xt(32,Int32Array.from([6,34,60,86,112,138]),new St(30,new Ct(17,115)),new St(28,new Ct(10,46),new Ct(23,47)),new St(30,new Ct(10,24),new Ct(35,25)),new St(30,new Ct(19,15),new Ct(35,16))),new xt(33,Int32Array.from([6,30,58,86,114,142]),new St(30,new Ct(17,115),new Ct(1,116)),new St(28,new Ct(14,46),new Ct(21,47)),new St(30,new Ct(29,24),new Ct(19,25)),new St(30,new Ct(11,15),new Ct(46,16))),new xt(34,Int32Array.from([6,34,62,90,118,146]),new St(30,new Ct(13,115),new Ct(6,116)),new St(28,new Ct(14,46),new Ct(23,47)),new St(30,new Ct(44,24),new Ct(7,25)),new St(30,new Ct(59,16),new Ct(1,17))),new xt(35,Int32Array.from([6,30,54,78,102,126,150]),new St(30,new Ct(12,121),new Ct(7,122)),new St(28,new Ct(12,47),new Ct(26,48)),new St(30,new Ct(39,24),new Ct(14,25)),new St(30,new Ct(22,15),new Ct(41,16))),new xt(36,Int32Array.from([6,24,50,76,102,128,154]),new St(30,new Ct(6,121),new Ct(14,122)),new St(28,new Ct(6,47),new Ct(34,48)),new St(30,new Ct(46,24),new Ct(10,25)),new St(30,new Ct(2,15),new Ct(64,16))),new xt(37,Int32Array.from([6,28,54,80,106,132,158]),new St(30,new Ct(17,122),new Ct(4,123)),new St(28,new Ct(29,46),new Ct(14,47)),new St(30,new Ct(49,24),new Ct(10,25)),new St(30,new Ct(24,15),new Ct(46,16))),new xt(38,Int32Array.from([6,32,58,84,110,136,162]),new St(30,new Ct(4,122),new Ct(18,123)),new St(28,new Ct(13,46),new Ct(32,47)),new St(30,new Ct(48,24),new Ct(14,25)),new St(30,new Ct(42,15),new Ct(32,16))),new xt(39,Int32Array.from([6,26,54,82,110,138,166]),new St(30,new Ct(20,117),new Ct(4,118)),new St(28,new Ct(40,47),new Ct(7,48)),new St(30,new Ct(43,24),new Ct(22,25)),new St(30,new Ct(10,15),new Ct(67,16))),new xt(40,Int32Array.from([6,30,58,86,114,142,170]),new St(30,new Ct(19,118),new Ct(6,119)),new St(28,new Ct(18,47),new Ct(31,48)),new St(30,new Ct(34,24),new Ct(34,25)),new St(30,new Ct(20,15),new Ct(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(W||(W={}));class At{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let r=0;r<t;r++)for(let n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)}}At.values=new Map([[W.DATA_MASK_000,new At(W.DATA_MASK_000,(e,t)=>!(e+t&1))],[W.DATA_MASK_001,new At(W.DATA_MASK_001,(e,t)=>!(1&e))],[W.DATA_MASK_010,new At(W.DATA_MASK_010,(e,t)=>t%3==0)],[W.DATA_MASK_011,new At(W.DATA_MASK_011,(e,t)=>(e+t)%3==0)],[W.DATA_MASK_100,new At(W.DATA_MASK_100,(e,t)=>!(Math.floor(e/2)+Math.floor(t/3)&1))],[W.DATA_MASK_101,new At(W.DATA_MASK_101,(e,t)=>e*t%6==0)],[W.DATA_MASK_110,new At(W.DATA_MASK_110,(e,t)=>e*t%6<3)],[W.DATA_MASK_111,new At(W.DATA_MASK_111,(e,t)=>!(e+t+e*t%3&1))]]);class It{constructor(e){const t=e.getHeight();if(t<21||1!=(3&t))throw new E;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let r=0;const n=t-7;for(let i=t-1;i>=n;i--)r=this.copyBit(8,i,r);for(let i=t-8;i<t;i++)r=this.copyBit(i,8,r);if(this.parsedFormatInfo=Et.decodeFormatInformation(e,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new E}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return xt.getVersionForNumber(t);let r=0;const n=e-11;for(let o=5;o>=0;o--)for(let t=e-9;t>=n;t--)r=this.copyBit(t,o,r);let i=xt.decodeVersionInformation(r);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;r=0;for(let o=5;o>=0;o--)for(let t=e-9;t>=n;t--)r=this.copyBit(o,t,r);if(i=xt.decodeVersionInformation(r),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new E}copyBit(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),r=At.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);const i=t.buildFunctionPattern();let o=!0;const a=new Uint8Array(t.getTotalCodewords());let s=0,l=0,c=0;for(let u=n-1;u>0;u-=2){6===u&&u--;for(let e=0;e<n;e++){const t=o?n-1-e:e;for(let e=0;e<2;e++)i.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(a[s++]=l,c=0,l=0))}o=!o}if(s!==t.getTotalCodewords())throw new E;return a}remask(){if(null===this.parsedFormatInfo)return;const e=At.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,r=e.getWidth();t<r;t++)for(let n=t+1,i=e.getHeight();n<i;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))}}class Tt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,r){if(e.length!==t.getTotalCodewords())throw new u;const n=t.getECBlocksForLevel(r);let i=0;const o=n.getECBlocks();for(const u of o)i+=u.getCount();const a=new Array(i);let s=0;for(const u of o)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=n.getECCodewordsPerBlock()+e;a[s++]=new Tt(e,new Uint8Array(t))}const l=a[0].codewords.length;let c=a.length-1;for(;c>=0&&a[c].codewords.length!==l;)c--;c++;const d=l-n.getECCodewordsPerBlock();let h=0;for(let u=0;u<d;u++)for(let t=0;t<s;t++)a[t].codewords[u]=e[h++];for(let u=c;u<s;u++)a[u].codewords[d]=e[h++];const f=a[0].codewords.length;for(let u=d;u<f;u++)for(let t=0;t<s;t++){const r=t<c?u:u+1;a[t].codewords[r]=e[h++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(G||(G={}));class kt{constructor(e,t,r,n){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=n,kt.FOR_BITS.set(n,this),kt.FOR_VALUE.set(e,this)}static forBits(e){const t=kt.FOR_BITS.get(e);if(void 0===t)throw new u;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let r;return r=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof kt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}kt.FOR_BITS=new Map,kt.FOR_VALUE=new Map,kt.TERMINATOR=new kt(G.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),kt.NUMERIC=new kt(G.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),kt.ALPHANUMERIC=new kt(G.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),kt.STRUCTURED_APPEND=new kt(G.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),kt.BYTE=new kt(G.BYTE,"BYTE",Int32Array.from([8,16,16]),4),kt.ECI=new kt(G.ECI,"ECI",Int32Array.from([0,0,0]),7),kt.KANJI=new kt(G.KANJI,"KANJI",Int32Array.from([8,10,12]),8),kt.FNC1_FIRST_POSITION=new kt(G.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),kt.FNC1_SECOND_POSITION=new kt(G.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),kt.HANZI=new kt(G.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Rt{static decode(e,t,r,n){const i=new gt(e);let o=new I;const a=new Array;let s=-1,l=-1;try{let e,r=null,c=!1;do{if(i.available()<4)e=kt.TERMINATOR;else{const t=i.readBits(4);e=kt.forBits(t)}switch(e){case kt.TERMINATOR:break;case kt.FNC1_FIRST_POSITION:case kt.FNC1_SECOND_POSITION:c=!0;break;case kt.STRUCTURED_APPEND:if(i.available()<16)throw new E;s=i.readBits(8),l=i.readBits(8);break;case kt.ECI:const u=Rt.parseECIValue(i);if(r=S.getCharacterSetECIByValue(u),null===r)throw new E;break;case kt.HANZI:const d=i.readBits(4),h=i.readBits(e.getCharacterCountBits(t));d===Rt.GB2312_SUBSET&&Rt.decodeHanziSegment(i,o,h);break;default:const f=i.readBits(e.getCharacterCountBits(t));switch(e){case kt.NUMERIC:Rt.decodeNumericSegment(i,o,f);break;case kt.ALPHANUMERIC:Rt.decodeAlphanumericSegment(i,o,f,c);break;case kt.BYTE:Rt.decodeByteSegment(i,o,f,r,a,n);break;case kt.KANJI:Rt.decodeKanjiSegment(i,o,f);break;default:throw new E}}}while(e!==kt.TERMINATOR)}catch(c){throw new E}return new Y(e,o.toString(),0===a.length?null:a,null===r?null:r.toString(),s,l)}static decodeHanziSegment(e,t,r){if(13*r>e.available())throw new E;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const t=e.readBits(13);let o=t/96<<8&4294967295|t%96;o+=o<959?41377:42657,n[i]=o>>8&255,n[i+1]=255&o,i+=2,r--}try{t.append(x.decode(n,A.GB2312))}catch(o){throw new E(o)}}static decodeKanjiSegment(e,t,r){if(13*r>e.available())throw new E;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const t=e.readBits(13);let o=t/192<<8&4294967295|t%192;o+=o<7936?33088:49472,n[i]=o>>8,n[i+1]=o,i+=2,r--}try{t.append(x.decode(n,A.SHIFT_JIS))}catch(o){throw new E(o)}}static decodeByteSegment(e,t,r,n,i,o){if(8*r>e.available())throw new E;const a=new Uint8Array(r);for(let c=0;c<r;c++)a[c]=e.readBits(8);let s;s=null===n?A.guessEncoding(a,o):n.getName();try{t.append(x.decode(a,s))}catch(l){throw new E(l)}i.push(a)}static toAlphaNumericChar(e){if(e>=Rt.ALPHANUMERIC_CHARS.length)throw new E;return Rt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,r,n){const i=t.length();for(;r>1;){if(e.available()<11)throw new E;const n=e.readBits(11);t.append(Rt.toAlphaNumericChar(Math.floor(n/45))),t.append(Rt.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(e.available()<6)throw new E;t.append(Rt.toAlphaNumericChar(e.readBits(6)))}if(n)for(let o=i;o<t.length();o++)"%"===t.charAt(o)&&(o<t.length()-1&&"%"===t.charAt(o+1)?t.deleteCharAt(o+1):t.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(e,t,r){for(;r>=3;){if(e.available()<10)throw new E;const n=e.readBits(10);if(n>=1e3)throw new E;t.append(Rt.toAlphaNumericChar(Math.floor(n/100))),t.append(Rt.toAlphaNumericChar(Math.floor(n/10)%10)),t.append(Rt.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(e.available()<7)throw new E;const r=e.readBits(7);if(r>=100)throw new E;t.append(Rt.toAlphaNumericChar(Math.floor(r/10))),t.append(Rt.toAlphaNumericChar(r%10))}else if(1===r){if(e.available()<4)throw new E;const r=e.readBits(4);if(r>=10)throw new E;t.append(Rt.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if(!(128&t))return 127&t;if(128==(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192==(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new E}}Rt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Rt.GB2312_SUBSET=1;class Ot{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Nt{constructor(){this.rsDecoder=new re(J.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(T.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const r=new It(e);let n=null;try{return this.decodeBitMatrixParser(r,t)}catch(Bb){n=Bb}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const e=this.decodeBitMatrixParser(r,t);return e.setOther(new Ot(!0)),e}catch(Bb){if(null!==n)throw n;throw Bb}}decodeBitMatrixParser(e,t){const r=e.readVersion(),n=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=Tt.getDataBlocks(i,r,n);let a=0;for(const c of o)a+=c.getNumDataCodewords();const s=new Uint8Array(a);let l=0;for(const c of o){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let r=0;r<t;r++)s[l++]=e[r]}return Rt.decode(s,r,n,t)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new h}for(let i=0;i<t;i++)e[i]=r[i]}}class Dt extends se{constructor(e,t,r){super(e,t),this.estimatedModuleSize=r}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+r)/2;return new Dt(n,i,o)}}class Pt{constructor(e,t,r,n,i,o,a){this.image=e,this.startX=t,this.startY=r,this.width=n,this.height=i,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,r=e+this.width,n=this.startY+t/2,i=new Int32Array(3),o=this.image;for(let a=0;a<t;a++){const t=n+(1&a?-Math.floor((a+1)/2):Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;let s=e;for(;s<r&&!o.get(s,t);)s++;let l=0;for(;s<r;){if(o.get(s,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,s);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;s++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,r);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,r=t/2;for(let n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0}crossCheckVertical(e,t,r,n){const i=this.image,o=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let s=e;for(;s>=0&&i.get(t,s)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&!i.get(t,s)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=e+1;s<o&&i.get(t,s)&&a[1]<=r;)a[1]++,s++;if(s===o||a[1]>r)return NaN;for(;s<o&&!i.get(t,s)&&a[2]<=r;)a[2]++,s++;if(a[2]>r)return NaN;const l=a[0]+a[1]+a[2];return 5*Math.abs(l-n)>=2*n?NaN:this.foundPatternCross(a)?Pt.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,r){const n=e[0]+e[1]+e[2],i=Pt.centerFromEnd(e,r),o=this.crossCheckVertical(t,i,2*e[1],n);if(!isNaN(o)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,o,i))return e.combineEstimate(o,i,t);const r=new Dt(i,o,t);this.possibleCenters.push(r),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class Mt extends se{constructor(e,t,r,n){super(e,t),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=this.count+1,i=(this.count*this.getX()+t)/n,o=(this.count*this.getY()+e)/n,a=(this.count*this.estimatedModuleSize+r)/n;return new Mt(i,o,a,n)}}class Bt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!=e&&void 0!==e.get(_.TRY_HARDER),r=null!=e&&void 0!==e.get(_.PURE_BARCODE),n=this.image,i=n.getHeight(),o=n.getWidth();let a=Math.floor(3*i/(4*jt.MAX_MODULES));(a<jt.MIN_SKIP||t)&&(a=jt.MIN_SKIP);let s=!1;const l=new Int32Array(5);for(let u=a-1;u<i&&!s;u+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<o;t++)if(n.get(t,u))1&~e||e++,l[e]++;else if(1&e)l[e]++;else if(4===e)if(jt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(a=2,!0===this.hasSkipped)s=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-a,t=o-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;jt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,o,r)&&(a=l[0],this.hasSkipped&&(s=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return se.orderBestPatterns(c),new Bt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const r=e[i];if(0===r)return!1;t+=r}if(t<7)return!1;const r=t/7,n=r/2;return Math.abs(r-e[0])<n&&Math.abs(r-e[1])<n&&Math.abs(3*r-e[2])<3*n&&Math.abs(r-e[3])<n&&Math.abs(r-e[4])<n}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,r,n){const i=this.getCrossCheckStateCount();let o=0;const a=this.image;for(;e>=o&&t>=o&&a.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!a.get(t-o,e-o)&&i[1]<=r;)i[1]++,o++;if(e<o||t<o||i[1]>r)return!1;for(;e>=o&&t>=o&&a.get(t-o,e-o)&&i[0]<=r;)i[0]++,o++;if(i[0]>r)return!1;const s=a.getHeight(),l=a.getWidth();for(o=1;e+o<s&&t+o<l&&a.get(t+o,e+o);)i[2]++,o++;if(e+o>=s||t+o>=l)return!1;for(;e+o<s&&t+o<l&&!a.get(t+o,e+o)&&i[3]<r;)i[3]++,o++;if(e+o>=s||t+o>=l||i[3]>=r)return!1;for(;e+o<s&&t+o<l&&a.get(t+o,e+o)&&i[4]<r;)i[4]++,o++;if(i[4]>=r)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-n)<2*n&&jt.foundPatternCross(i)}crossCheckVertical(e,t,r,n){const i=this.image,o=i.getHeight(),a=this.getCrossCheckStateCount();let s=e;for(;s>=0&&i.get(t,s);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(t,s)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&i.get(t,s)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=e+1;s<o&&i.get(t,s);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(t,s)&&a[3]<r;)a[3]++,s++;if(s===o||a[3]>=r)return NaN;for(;s<o&&i.get(t,s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-n)>=2*n?NaN:jt.foundPatternCross(a)?jt.centerFromEnd(a,s):NaN}crossCheckHorizontal(e,t,r,n){const i=this.image,o=i.getWidth(),a=this.getCrossCheckStateCount();let s=e;for(;s>=0&&i.get(s,t);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(s,t)&&a[1]<=r;)a[1]++,s--;if(s<0||a[1]>r)return NaN;for(;s>=0&&i.get(s,t)&&a[0]<=r;)a[0]++,s--;if(a[0]>r)return NaN;for(s=e+1;s<o&&i.get(s,t);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(s,t)&&a[3]<r;)a[3]++,s++;if(s===o||a[3]>=r)return NaN;for(;s<o&&i.get(s,t)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-n)>=n?NaN:jt.foundPatternCross(a)?jt.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,r,n){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=jt.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(a)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),e[2],i),!isNaN(o)&&(!n||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),e[2],i)))){const e=i/7;let t=!1;const r=this.possibleCenters;for(let n=0,i=r.length;n<i;n++){const i=r[n];if(i.aboutEquals(e,a,o)){r[n]=i.combineEstimate(a,o,e),t=!0;break}}if(!t){const t=new Mt(o,a,e);r.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=jt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const r=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=jt.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const n=t/r;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-n);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new k;const t=this.possibleCenters;let r;if(e>3){let n=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();n+=t,i+=t*t}r=n/e;let o=Math.sqrt(i/e-r*r);t.sort((e,t)=>{const n=Math.abs(t.getEstimatedModuleSize()-r),i=Math.abs(e.getEstimatedModuleSize()-r);return n<i?-1:n>i?1:0});const a=Math.max(.2*r,o);for(let e=0;e<t.length&&t.length>3;e++){const n=t[e];Math.abs(n.getEstimatedModuleSize()-r)>a&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const r of t)e+=r.getEstimatedModuleSize();r=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const n=Math.abs(t.getEstimatedModuleSize()-r),i=Math.abs(e.getEstimatedModuleSize()-r);return n<i?1:n>i?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}jt.CENTER_QUORUM=2,jt.MIN_SKIP=3,jt.MAX_MODULES=57;class Lt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null==e?null:e.get(_.NEED_RESULT_POINT_CALLBACK);const t=new jt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),r=e.getTopRight(),n=e.getBottomLeft(),i=this.calculateModuleSize(t,r,n);if(i<1)throw new k("No pattern found in proccess finder.");const o=Lt.computeDimension(t,r,n,i),a=xt.getProvisionalVersionForDimension(o),s=a.getDimensionForVersion()-7;let l=null;if(a.getAlignmentPatternCenters().length>0){const e=r.getX()-t.getX()+n.getX(),o=r.getY()-t.getY()+n.getY(),a=1-3/s,c=Math.floor(t.getX()+a*(e-t.getX())),u=Math.floor(t.getY()+a*(o-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,c,u,t);break}catch(h){if(!(h instanceof k))throw h}}const c=Lt.createTransform(t,r,n,l,o),u=Lt.sampleGrid(this.image,c,o);let d;return d=null===l?[n,t,r]:[n,t,r,l],new le(u,d)}static createTransform(e,t,r,n,i){const o=i-3.5;let a,s,l,c;return null!==n?(a=n.getX(),s=n.getY(),l=o-3,c=l):(a=t.getX()-e.getX()+r.getX(),s=t.getY()-e.getY()+r.getY(),l=o,c=o),he.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,l,c,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),a,s,r.getX(),r.getY())}static sampleGrid(e,t,r){return pe.getInstance().sampleGridWithTransform(e,r,r,t)}static computeDimension(e,t,r,n){const i=ie.round(se.distance(e,t)/n),o=ie.round(se.distance(e,r)/n);let a=Math.floor((i+o)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new k("Dimensions could be not found.")}return a}calculateModuleSize(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,t){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,r,n){let i=this.sizeOfBlackWhiteBlackRun(e,t,r,n),o=1,a=e-(r-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let s=Math.floor(t-(n-t)*o);return o=1,s<0?(o=t/(t-s),s=0):s>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,a,s),i-1}sizeOfBlackWhiteBlackRun(e,t,r,n){const i=Math.abs(n-t)>Math.abs(r-e);if(i){let i=e;e=t,t=i,i=r,r=n,n=i}const o=Math.abs(r-e),a=Math.abs(n-t);let s=-o/2;const l=e<r?1:-1,c=t<n?1:-1;let u=0;const d=r+l;for(let h=e,f=t;h!==d;h+=l){const r=i?f:h,l=i?h:f;if(1===u===this.image.get(r,l)){if(2===u)return ie.distance(h,f,e,t);u++}if(s+=a,s>0){if(f===n)break;f+=c,s-=o}}return 2===u?ie.distance(r+l,n,e,t):NaN}findAlignmentInRegion(e,t,r,n){const i=Math.floor(n*e),o=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-o<3*e)throw new k("Alignment top exceeds estimated module size.");const s=Math.max(0,r-i),l=Math.min(this.image.getHeight()-1,r+i);if(l-s<3*e)throw new k("Alignment bottom exceeds estimated module size.");return new Pt(this.image,o,s,a-o,l-s,e,this.resultPointCallback).find()}}class Ft{constructor(){this.decoder=new Nt}getDecoder(){return this.decoder}decode(e,t){let r,n;if(null!=t&&void 0!==t.get(_.PURE_BARCODE)){const i=Ft.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,t),n=Ft.NO_POINTS}else{const i=new Lt(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(i.getBits(),t),n=i.getPoints()}r.getOther()instanceof Ot&&r.getOther().applyMirroredCorrection(n);const i=new F(r.getText(),r.getRawBytes(),void 0,n,U.QR_CODE,void 0),o=r.getByteSegments();null!==o&&i.putMetadata(X.BYTE_SEGMENTS,o);const a=r.getECLevel();return null!==a&&i.putMetadata(X.ERROR_CORRECTION_LEVEL,a),r.hasStructuredAppend()&&(i.putMetadata(X.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),i.putMetadata(X.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null===t||null===r)throw new k;const n=this.moduleSize(t,e);let i=t[1],o=r[1],a=t[0],s=r[0];if(a>=s||i>=o)throw new k;if(o-i!==s-a&&(s=a+(o-i),s>=e.getWidth()))throw new k;const l=Math.round((s-a+1)/n),c=Math.round((o-i+1)/n);if(l<=0||c<=0)throw new k;if(c!==l)throw new k;const u=Math.floor(n/2);i+=u,a+=u;const d=a+Math.floor((l-1)*n)-s;if(d>0){if(d>u)throw new k;a-=d}const h=i+Math.floor((c-1)*n)-o;if(h>0){if(h>u)throw new k;i-=h}const f=new T(l,c);for(let p=0;p<c;p++){const t=i+Math.floor(p*n);for(let r=0;r<l;r++)e.get(a+Math.floor(r*n),t)&&f.set(r,p)}return f}static moduleSize(e,t){const r=t.getHeight(),n=t.getWidth();let i=e[0],o=e[1],a=!0,s=0;for(;i<n&&o<r;){if(a!==t.get(i,o)){if(5===++s)break;a=!a}i++,o++}if(i===n||o===r)throw new k;return(i-e[0])/7}}Ft.NO_POINTS=new Array;class zt{PDF417Common(){}static getBitCountSum(e){return ie.sum(e)}static toIntArray(e){if(null==e||!e.length)return zt.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let r=0;for(const n of e)t[r++]=n;return t}static getCodeword(e){const t=w.binarySearch(zt.SYMBOL_TABLE,262143&e);return t<0?-1:(zt.CODEWORD_TABLE[t]-1)%zt.NUMBER_OF_CODEWORDS}}zt.NUMBER_OF_CODEWORDS=929,zt.MAX_CODEWORDS_IN_BARCODE=zt.NUMBER_OF_CODEWORDS-1,zt.MIN_ROWS_IN_BARCODE=3,zt.MAX_ROWS_IN_BARCODE=90,zt.MODULES_IN_CODEWORD=17,zt.MODULES_IN_STOP_PATTERN=18,zt.BARS_IN_MODULE=8,zt.EMPTY_INT_ARRAY=new Int32Array([]),zt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),zt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ut{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Vt{static detectMultiple(e,t,r){let n=e.getBlackMatrix(),i=Vt.detect(r,n);return i.length||(n=n.clone(),n.rotate180(),i=Vt.detect(r,n)),new Ut(n,i)}static detect(e,t){const r=new Array;let n=0,i=0,o=!1;for(;n<t.getHeight();){const a=Vt.findVertices(t,n,i);if(null!=a[0]||null!=a[3]){if(o=!0,r.push(a),!e)break;null!=a[2]?(i=Math.trunc(a[2].getX()),n=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY()))}else{if(!o)break;o=!1,i=0;for(const e of r)null!=e[1]&&(n=Math.trunc(Math.max(n,e[1].getY()))),null!=e[3]&&(n=Math.max(n,Math.trunc(e[3].getY())));n+=Vt.ROW_STEP}}return r}static findVertices(e,t,r){const n=e.getHeight(),i=e.getWidth(),o=new Array(8);return Vt.copyToResult(o,Vt.findRowsWithPattern(e,n,i,t,r,Vt.START_PATTERN),Vt.INDEXES_START_PATTERN),null!=o[4]&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),Vt.copyToResult(o,Vt.findRowsWithPattern(e,n,i,t,r,Vt.STOP_PATTERN),Vt.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,r){for(let n=0;n<r.length;n++)e[r[n]]=t[n]}static findRowsWithPattern(e,t,r,n,i,o){const a=new Array(4);let s=!1;const l=new Int32Array(o.length);for(;n<t;n+=Vt.ROW_STEP){let t=Vt.findGuardPattern(e,i,n,r,!1,o,l);if(null!=t){for(;n>0;){const a=Vt.findGuardPattern(e,i,--n,r,!1,o,l);if(null==a){n++;break}t=a}a[0]=new se(t[0],n),a[1]=new se(t[1],n),s=!0;break}}let c=n+1;if(s){let n=0,i=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;c<t;c++){const t=Vt.findGuardPattern(e,i[0],c,r,!1,o,l);if(null!=t&&Math.abs(i[0]-t[0])<Vt.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Vt.MAX_PATTERN_DRIFT)i=t,n=0;else{if(n>Vt.SKIPPED_ROW_COUNT_MAX)break;n++}}c-=n+1,a[2]=new se(i[0],c),a[3]=new se(i[1],c)}return c-n<Vt.BARCODE_MIN_HEIGHT&&w.fill(a,null),a}static findGuardPattern(e,t,r,n,i,o,a){w.fillWithin(a,0,a.length,0);let s=t,l=0;for(;e.get(s,r)&&s>0&&l++<Vt.MAX_PIXEL_DRIFT;)s--;let c=s,u=0,d=o.length;for(let h=i;c<n;c++)if(e.get(c,r)!==h)a[u]++;else{if(u===d-1){if(Vt.patternMatchVariance(a,o,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE)return new Int32Array([s,c]);s+=a[0]+a[1],p.arraycopy(a,2,a,0,u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,h=!h}return u===d-1&&Vt.patternMatchVariance(a,o,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE?new Int32Array([s,c-1]):null}static patternMatchVariance(e,t,r){let n=e.length,i=0,o=0;for(let l=0;l<n;l++)i+=e[l],o+=t[l];if(i<o)return 1/0;let a=i/o;r*=a;let s=0;for(let l=0;l<n;l++){let n=e[l],i=t[l]*a,o=n>i?n-i:i-n;if(o>r)return 1/0;s+=o}return s/i}}Vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Vt.MAX_AVG_VARIANCE=.42,Vt.MAX_INDIVIDUAL_VARIANCE=.8,Vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Vt.MAX_PIXEL_DRIFT=3,Vt.MAX_PATTERN_DRIFT=5,Vt.SKIPPED_ROW_COUNT_MAX=25,Vt.ROW_STEP=5,Vt.BARCODE_MIN_HEIGHT=10;class Ht{constructor(e,t){if(0===t.length)throw new u;this.field=e;let r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-e),p.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)t=this.field.add(this.field.multiply(e,t),this.coefficients[n]);return t}add(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let e=t;t=r,r=e}let n=new Int32Array(r.length),i=r.length-t.length;p.arraycopy(r,0,n,0,i);for(let o=i;o<r.length;o++)n[o]=this.field.add(t[o-i],r[o]);return new Ht(this.field,n)}subtract(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Ht?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Ht(this.field,new Int32Array([0]));let t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,o=new Int32Array(r+i-1);for(let a=0;a<r;a++){let e=t[a];for(let t=0;t<i;t++)o[a+t]=this.field.add(o[a+t],this.field.multiply(e,n[t]))}return new Ht(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new Ht(this.field,t)}multiplyScalar(e){if(0===e)return new Ht(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=this.field.multiply(this.coefficients[n],e);return new Ht(this.field,r)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return new Ht(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+e);for(let i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],t);return new Ht(this.field,n)}toString(){let e=new I;for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);0!==r&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),0!==t&&1===r||e.append(r),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class qt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}inverse(e){if(0===e)throw new Z;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Wt extends qt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let n=0;n<e;n++)this.expTable[n]=r,r=r*t%e;for(let n=0;n<e-1;n++)this.logTable[this.expTable[n]]=n;this.zero=new Ht(this,new Int32Array([0])),this.one=new Ht(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new Ht(this,r)}}Wt.PDF417_GF=new Wt(zt.NUMBER_OF_CODEWORDS,3);class Gt{constructor(){this.field=Wt.PDF417_GF}decode(e,t,r){let n=new Ht(this.field,e),i=new Int32Array(t),o=!1;for(let h=t;h>0;h--){let e=n.evaluateAt(this.field.exp(h));i[t-h]=e,0!==e&&(o=!0)}if(!o)return 0;let a=this.field.getOne();if(null!=r)for(const h of r){let t=this.field.exp(e.length-1-h),r=new Ht(this.field,new Int32Array([this.field.subtract(0,t),1]));a=a.multiply(r)}let s=new Ht(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),s,t),c=l[0],u=l[1],d=this.findErrorLocations(c),f=this.findErrorMagnitudes(u,c,d);for(let p=0;p<d.length;p++){let t=e.length-1-this.field.log(d[p]);if(t<0)throw h.getChecksumInstance();e[t]=this.field.subtract(e[t],f[p])}return d.length}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let r=e;e=t,t=r}let n=e,i=t,o=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(r/2);){let e=n,t=o;if(n=i,o=a,n.isZero())throw h.getChecksumInstance();i=e;let r=this.field.getZero(),s=n.getCoefficient(n.getDegree()),l=this.field.inverse(s);for(;i.getDegree()>=n.getDegree()&&!i.isZero();){let e=i.getDegree()-n.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);r=r.add(this.field.buildMonomial(e,t)),i=i.subtract(n.multiplyByMonomial(e,t))}a=r.multiply(o).subtract(t).negative()}let s=a.getCoefficient(0);if(0===s)throw h.getChecksumInstance();let l=this.field.inverse(s);return[a.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),r=new Int32Array(t),n=0;for(let i=1;i<this.field.getSize()&&n<t;i++)0===e.evaluateAt(i)&&(r[n]=this.field.inverse(i),n++);if(n!==t)throw h.getChecksumInstance();return r}findErrorMagnitudes(e,t,r){let n=t.getDegree(),i=new Int32Array(n);for(let l=1;l<=n;l++)i[n-l]=this.field.multiply(l,t.getCoefficient(l));let o=new Ht(this.field,i),a=r.length,s=new Int32Array(a);for(let l=0;l<a;l++){let t=this.field.inverse(r[l]),n=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(o.evaluateAt(t));s[l]=this.field.multiply(n,i)}return s}}class $t{constructor(e,t,r,n,i){e instanceof $t?this.constructor_2(e):this.constructor_1(e,t,r,n,i)}constructor_1(e,t,r,n,i){const o=null==t||null==r,a=null==n||null==i;if(o&&a)throw new k;o?(t=new se(0,n.getY()),r=new se(0,i.getY())):a&&(n=new se(e.getWidth()-1,t.getY()),i=new se(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=n,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new $t(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,r){let n=this.topLeft,i=this.bottomLeft,o=this.topRight,a=this.bottomRight;if(e>0){let t=r?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let a=new se(t.getX(),i);r?n=a:o=a}if(t>0){let e=r?this.bottomLeft:this.bottomRight,n=Math.trunc(e.getY()+t);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let o=new se(e.getX(),n);r?i=o:a=o}return new $t(this.image,n,i,o,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xt{constructor(e,t,r,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Yt{constructor(){this.buffer=""}static form(e,t){let r=-1;function n(e,n,i,o,a,s){if("%%"===e)return"%";if(void 0===t[++r])return;e=o?parseInt(o.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),d=i&&i[0]+""=="0"?"0":" ";for(;l.length<u;)l=void 0!==n?l+d:d+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,n)}format(e,...t){this.buffer+=Yt.form(e,t)}toString(){return this.buffer}}class Kt{constructor(e){this.boundingBox=new $t(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let r=1;r<Kt.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(e)-r;if(n>=0&&(t=this.codewords[n],null!=t))return t;if(n=this.imageRowToCodewordIndex(e)+r,n<this.codewords.length&&(t=this.codewords[n],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Yt;let t=0;for(const r of this.codewords)null!=r?e.format("%3d: %3d|%3d%n",t++,r.getRowNumber(),r.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Kt.MAX_NEARBY_DISTANCE=5;class Qt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[r,n]of this.values.entries()){const i={getKey:()=>r,getValue:()=>n};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return zt.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Zt extends Kt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=-1,l=1,c=0;for(let u=o;u<a;u++){if(null==t[u])continue;let r=t[u],n=r.getRowNumber()-s;if(0===n)c++;else if(1===n)l=Math.max(l,c),c=1,s=r.getRowNumber();else if(n<0||r.getRowNumber()>=e.getRowCount()||n>u)t[u]=null;else{let e;e=l>2?(l-2)*n:n;let i=e>=u;for(let r=1;r<=e&&!i;r++)i=null!=t[u-r];i?t[u]=null:(s=r.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(null!=r){let e=r.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),r=this._isLeft?t.getTopLeft():t.getTopRight(),n=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),a=this.getCodewords(),s=-1;for(let l=i;l<o;l++){if(null==a[l])continue;let t=a[l];t.setRowNumberAsRowIndicatorColumn();let r=t.getRowNumber()-s;0===r||(1===r?s=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?a[l]=null:s=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Qt,r=new Qt,n=new Qt,i=new Qt;for(let a of e){if(null==a)continue;a.setRowNumberAsRowIndicatorColumn();let e=a.getValue()%30,o=a.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:r.setValue(3*e+1);break;case 1:i.setValue(e/3),n.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===r.getValue().length||0===n.getValue().length||0===i.getValue().length||t.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<zt.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>zt.MAX_ROWS_IN_BARCODE)return null;let o=new Xt(t.getValue()[0],r.getValue()[0],n.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(null==e[r])continue;let i=n.getValue()%30,o=n.getRowNumber();if(o>t.getRowCount())e[r]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[r]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[r]=null);break;case 2:i+1!==t.getColumnCount()&&(e[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=zt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let r=0;r<e.length;r++)null!=e[r]&&(e[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(null!=e[r]&&null!=t[r]&&e[r].getRowNumber()===t[r].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let n=this.detectionResultColumns[t].getCodewords()[r];null!=n&&(n.setRowNumber(e[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let o=this.detectionResultColumns[t].getCodewords()[r];null!=o&&(i=Jt.adjustRowNumberIfValid(n,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let o=this.detectionResultColumns[t].getCodewords()[r];null!=o&&(i=Jt.adjustRowNumberIfValid(n,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,r){if(!this.detectionResultColumns[e-1])return;let n=r[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;null!=this.detectionResultColumns[e+1]&&(o=this.detectionResultColumns[e+1].getCodewords());let a=new Array(14);a[2]=i[t],a[3]=o[t],t>0&&(a[0]=r[t-1],a[4]=i[t-1],a[5]=o[t-1]),t>1&&(a[8]=r[t-2],a[10]=i[t-2],a[11]=o[t-2]),t<r.length-1&&(a[1]=r[t+1],a[6]=i[t+1],a[7]=o[t+1]),t<r.length-2&&(a[9]=r[t+2],a[12]=i[t+2],a[13]=o[t+2]);for(let s of a)if(Jt.adjustRowNumber(n,s))return}static adjustRowNumber(e,t){return!(null==t||!t.hasValidRowNumber()||t.getBucket()!==e.getBucket()||(e.setRowNumber(t.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Yt;for(let r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let n=this.detectionResultColumns[e].getCodewords()[r];null!=n?t.format(" %3d|%3d",n.getRowNumber(),n.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class er{constructor(e,t,r,n){this.rowNumber=er.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==er.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}er.BARCODE_ROW_UNKNOWN=-1;class tr{static initialize(){for(let e=0;e<zt.SYMBOL_TABLE.length;e++){let t=zt.SYMBOL_TABLE[e],r=1&t;for(let n=0;n<zt.BARS_IN_MODULE;n++){let i=0;for(;(1&t)===r;)i+=1,t>>=1;r=1&t,tr.RATIOS_TABLE[e]||(tr.RATIOS_TABLE[e]=new Array(zt.BARS_IN_MODULE)),tr.RATIOS_TABLE[e][zt.BARS_IN_MODULE-n-1]=Math.fround(i/zt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tr.getDecodedCodewordValue(tr.sampleBitCounts(e));return-1!==t?t:tr.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=ie.sum(e),r=new Int32Array(zt.BARS_IN_MODULE),n=0,i=0;for(let o=0;o<zt.MODULES_IN_CODEWORD;o++){let a=t/(2*zt.MODULES_IN_CODEWORD)+o*t/zt.MODULES_IN_CODEWORD;i+e[n]<=a&&(i+=e[n],n++),r[n]++}return r}static getDecodedCodewordValue(e){let t=tr.getBitValue(e);return-1===zt.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let r=0;r<e.length;r++)for(let n=0;n<e[r];n++)t=t<<1|(r%2==0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=ie.sum(e),r=new Array(zt.BARS_IN_MODULE);if(t>1)for(let o=0;o<r.length;o++)r[o]=Math.fround(e[o]/t);let n=oe.MAX_VALUE,i=-1;this.bSymbolTableReady||tr.initialize();for(let o=0;o<tr.RATIOS_TABLE.length;o++){let e=0,t=tr.RATIOS_TABLE[o];for(let i=0;i<zt.BARS_IN_MODULE;i++){let o=Math.fround(t[i]-r[i]);if(e+=Math.fround(o*o),e>=n)break}e<n&&(n=e,i=zt.SYMBOL_TABLE[o])}return i}}tr.bSymbolTableReady=!1,tr.RATIOS_TABLE=new Array(zt.SYMBOL_TABLE.length).map(e=>new Array(zt.BARS_IN_MODULE));class rr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class nr{static parseLong(e,t=void 0){return parseInt(e,t)}}class ir extends l{}ir.kind="NullPointerException";class or{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,r){if(null==e)throw new ir;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new g;if(0!==r)for(let n=0;n<r;n++)this.write(e[t+n])}flush(){}close(){}}class ar extends l{}class sr extends or{constructor(e=32){if(super(),this.count=0,e<0)throw new u("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new ar;t=y.MAX_VALUE}this.buf=w.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,r){if(t<0||t>e.length||r<0||t+r-e.length>0)throw new g;this.ensureCapacity(this.count+r),p.arraycopy(e,t,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return w.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function lr(){if("undefined"!=typeof window)return window.BigInt||null;if(void 0!==ae)return ae.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let cr;function ur(e){if(void 0===cr&&(cr=lr()),null===cr)throw new Error("BigInt is not supported!");return cr(e)}function dr(){let e=[];e[0]=ur(1);let t=ur(900);e[1]=t;for(let r=2;r<16;r++)e[r]=e[r-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}($||($={}));class hr{static decode(e,t){let r=new I(""),n=S.ISO8859_1;r.enableDecoding(n);let i=1,o=e[i++],a=new rr;for(;i<e[0];){switch(o){case hr.TEXT_COMPACTION_MODE_LATCH:i=hr.textCompaction(e,i,r);break;case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:i=hr.byteCompaction(o,e,n,i,r);break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[i++]);break;case hr.NUMERIC_COMPACTION_MODE_LATCH:i=hr.numericCompaction(e,i,r);break;case hr.ECI_CHARSET:S.getCharacterSetECIByValue(e[i++]);break;case hr.ECI_GENERAL_PURPOSE:i+=2;break;case hr.ECI_USER_DEFINED:i++;break;case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=hr.decodeMacroBlock(e,i,a);break;case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:throw new E;default:i--,i=hr.textCompaction(e,i,r)}if(!(i<e.length))throw E.getFormatInstance();o=e[i++]}if(0===r.length())throw E.getFormatInstance();let s=new Y(null,r.toString(),null,t);return s.setOther(a),s}static decodeMacroBlock(e,t,r){if(t+hr.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw E.getFormatInstance();let n=new Int32Array(hr.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<hr.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)n[a]=e[t];r.setSegmentIndex(y.parseInt(hr.decodeBase900toBase10(n,hr.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new I;t=hr.textCompaction(e,t,i),r.setFileId(i.toString());let o=-1;for(e[t]===hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new I;t=hr.textCompaction(e,t+1,n),r.setFileName(n.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new I;t=hr.textCompaction(e,t+1,i),r.setSender(i.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new I;t=hr.textCompaction(e,t+1,o),r.setAddressee(o.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new I;t=hr.numericCompaction(e,t+1,a),r.setSegmentCount(y.parseInt(a.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let s=new I;t=hr.numericCompaction(e,t+1,s),r.setTimestamp(nr.parseLong(s.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new I;t=hr.numericCompaction(e,t+1,l),r.setChecksum(y.parseInt(l.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new I;t=hr.numericCompaction(e,t+1,c),r.setFileSize(nr.parseLong(c.toString()));break;default:throw E.getFormatInstance()}break;case hr.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw E.getFormatInstance()}if(-1!==o){let n=t-o;r.isLastSegment()&&n--,r.setOptionalData(w.copyOfRange(e,o,o+n))}return t}static textCompaction(e,t,r){let n=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),o=0,a=!1;for(;t<e[0]&&!a;){let r=e[t++];if(r<hr.TEXT_COMPACTION_MODE_LATCH)n[o]=r/30,n[o+1]=r%30,o+=2;else switch(r){case hr.TEXT_COMPACTION_MODE_LATCH:n[o++]=hr.TEXT_COMPACTION_MODE_LATCH;break;case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[o]=hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=e[t++],i[o]=r,o++}}return hr.decodeTextCompaction(n,i,o,r),t}static decodeTextCompaction(e,t,r,n){let i=$.ALPHA,o=$.ALPHA,a=0;for(;a<r;){let r=e[a],s="";switch(i){case $.ALPHA:if(r<26)s=String.fromCharCode(65+r);else switch(r){case 26:s=" ";break;case hr.LL:i=$.LOWER;break;case hr.ML:i=$.MIXED;break;case hr.PS:o=i,i=$.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=$.ALPHA}break;case $.LOWER:if(r<26)s=String.fromCharCode(97+r);else switch(r){case 26:s=" ";break;case hr.AS:o=i,i=$.ALPHA_SHIFT;break;case hr.ML:i=$.MIXED;break;case hr.PS:o=i,i=$.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=$.ALPHA}break;case $.MIXED:if(r<hr.PL)s=hr.MIXED_CHARS[r];else switch(r){case hr.PL:i=$.PUNCT;break;case 26:s=" ";break;case hr.LL:i=$.LOWER;break;case hr.AL:i=$.ALPHA;break;case hr.PS:o=i,i=$.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=$.ALPHA}break;case $.PUNCT:if(r<hr.PAL)s=hr.PUNCT_CHARS[r];else switch(r){case hr.PAL:i=$.ALPHA;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=$.ALPHA}break;case $.ALPHA_SHIFT:if(i=o,r<26)s=String.fromCharCode(65+r);else switch(r){case 26:s=" ";break;case hr.TEXT_COMPACTION_MODE_LATCH:i=$.ALPHA}break;case $.PUNCT_SHIFT:if(i=o,r<hr.PAL)s=hr.PUNCT_CHARS[r];else switch(r){case hr.PAL:i=$.ALPHA;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[a]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=$.ALPHA}}""!==s&&n.append(s),a++}}static byteCompaction(e,t,r,n,i){let o=new sr,a=0,s=0,l=!1;switch(e){case hr.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),r=t[n++];for(;n<t[0]&&!l;)switch(e[a++]=r,s=900*s+r,r=t[n++],r){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(a%5==0&&a>0){for(let e=0;e<6;++e)o.write(Number(ur(s)>>ur(8*(5-e))));s=0,a=0}}n===t[0]&&r<hr.TEXT_COMPACTION_MODE_LATCH&&(e[a++]=r);for(let t=0;t<a;t++)o.write(e[t]);break;case hr.BYTE_COMPACTION_MODE_LATCH_6:for(;n<t[0]&&!l;){let e=t[n++];if(e<hr.TEXT_COMPACTION_MODE_LATCH)a++,s=900*s+e;else switch(e){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:n--,l=!0}if(a%5==0&&a>0){for(let e=0;e<6;++e)o.write(Number(ur(s)>>ur(8*(5-e))));s=0,a=0}}}return i.append(x.decode(o.toByteArray(),r)),n}static numericCompaction(e,t,r){let n=0,i=!1,o=new Int32Array(hr.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<hr.TEXT_COMPACTION_MODE_LATCH)o[n]=a,n++;else switch(a){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:t--,i=!0}(n%hr.MAX_NUMERIC_CODEWORDS===0||a===hr.NUMERIC_COMPACTION_MODE_LATCH||i)&&n>0&&(r.append(hr.decodeBase900toBase10(o,n)),n=0)}return t}static decodeBase900toBase10(e,t){let r=ur(0);for(let i=0;i<t;i++)r+=hr.EXP900[t-i-1]*ur(e[i]);let n=r.toString();if("1"!==n.charAt(0))throw new E;return n.substring(1)}}hr.TEXT_COMPACTION_MODE_LATCH=900,hr.BYTE_COMPACTION_MODE_LATCH=901,hr.NUMERIC_COMPACTION_MODE_LATCH=902,hr.BYTE_COMPACTION_MODE_LATCH_6=924,hr.ECI_USER_DEFINED=925,hr.ECI_GENERAL_PURPOSE=926,hr.ECI_CHARSET=927,hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,hr.MACRO_PDF417_TERMINATOR=922,hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,hr.MAX_NUMERIC_CODEWORDS=15,hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,hr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,hr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,hr.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,hr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,hr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,hr.PL=25,hr.LL=27,hr.AS=27,hr.ML=28,hr.AL=28,hr.PS=29,hr.PAL=29,hr.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",hr.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",hr.EXP900=lr()?dr():[],hr.NUMBER_OF_SEQUENCE_CODEWORDS=2;class fr{constructor(){}static decode(e,t,r,n,i,o,a){let s,l=new $t(e,t,r,n,i),c=null,u=null;for(let f=!0;;f=!1){if(null!=t&&(c=fr.getRowIndicatorColumn(e,l,t,!0,o,a)),null!=n&&(u=fr.getRowIndicatorColumn(e,l,n,!1,o,a)),s=fr.merge(c,u),null==s)throw k.getNotFoundInstance();let r=s.getBoundingBox();if(!f||null==r||!(r.getMinY()<l.getMinY()||r.getMaxY()>l.getMaxY()))break;l=r}s.setBoundingBox(l);let d=s.getBarcodeColumnCount()+1;s.setDetectionResultColumn(0,c),s.setDetectionResultColumn(d,u);let h=null!=c;for(let f=1;f<=d;f++){let t,r=h?f:d-f;if(void 0!==s.getDetectionResultColumn(r))continue;t=0===r||r===d?new Zt(l,0===r):new Kt(l),s.setDetectionResultColumn(r,t);let n=-1,i=n;for(let c=l.getMinY();c<=l.getMaxY();c++){if(n=fr.getStartColumn(s,r,c,h),n<0||n>l.getMaxX()){if(-1===i)continue;n=i}let u=fr.detectCodeword(e,l.getMinX(),l.getMaxX(),h,n,c,o,a);null!=u&&(t.setCodeword(c,u),i=n,o=Math.min(o,u.getWidth()),a=Math.max(a,u.getWidth()))}}return fr.createDecoderResult(s)}static merge(e,t){if(null==e&&null==t)return null;let r=fr.getBarcodeMetadata(e,t);if(null==r)return null;let n=$t.merge(fr.adjustBoundingBox(e),fr.adjustBoundingBox(t));return new Jt(r,n)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let r=fr.getMax(t),n=0;for(let a of t)if(n+=r-a,a>0)break;let i=e.getCodewords();for(let a=0;n>0&&null==i[a];a++)n--;let o=0;for(let a=t.length-1;a>=0&&(o+=r-t[a],!(t[a]>0));a--);for(let a=i.length-1;o>0&&null==i[a];a--)o--;return e.getBoundingBox().addMissingRows(n,o,e.isLeft())}static getMax(e){let t=-1;for(let r of e)t=Math.max(t,r);return t}static getBarcodeMetadata(e,t){let r,n;return null==e||null==(r=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(n=t.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(e,t,r,n,i,o){let a=new Zt(t,n);for(let s=0;s<2;s++){let l=0===s?1:-1,c=Math.trunc(Math.trunc(r.getX()));for(let s=Math.trunc(Math.trunc(r.getY()));s<=t.getMaxY()&&s>=t.getMinY();s+=l){let t=fr.detectCodeword(e,0,e.getWidth(),n,c,s,i,o);null!=t&&(a.setCodeword(s,t),c=n?t.getStartX():t.getEndX())}}return a}static adjustCodewordCount(e,t){let r=t[0][1],n=r.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-fr.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===n.length){if(i<1||i>zt.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();r.setValue(i)}else n[0]!==i&&r.setValue(i)}static createDecoderResult(e){let t=fr.createBarcodeMatrix(e);fr.adjustCodewordCount(e,t);let r=new Array,n=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let s=0;s<e.getBarcodeRowCount();s++)for(let a=0;a<e.getBarcodeColumnCount();a++){let l=t[s][a+1].getValue(),c=s*e.getBarcodeColumnCount()+a;0===l.length?r.push(c):1===l.length?n[c]=l[0]:(o.push(c),i.push(l))}let a=new Array(i.length);for(let s=0;s<a.length;s++)a[s]=i[s];return fr.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),n,zt.toIntArray(r),zt.toIntArray(o),a)}static createDecoderResultFromAmbiguousValues(e,t,r,n,i){let o=new Int32Array(n.length),a=100;for(;a-- >0;){for(let e=0;e<o.length;e++)t[n[e]]=i[e][o[e]];try{return fr.decodeCodewords(t,e,r)}catch(jb){if(!(jb instanceof h))throw jb}if(0===o.length)throw h.getChecksumInstance();for(let e=0;e<o.length;e++){if(o[e]<i[e].length-1){o[e]++;break}if(o[e]=0,e===o.length-1)throw h.getChecksumInstance()}}throw h.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let n=0;n<t.length;n++)for(let e=0;e<t[n].length;e++)t[n][e]=new Qt;let r=0;for(let n of e.getDetectionResultColumns()){if(null!=n)for(let e of n.getCodewords())if(null!=e){let n=e.getRowNumber();if(n>=0){if(n>=t.length)continue;t[n][r].setValue(e.getValue())}}r++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,r,n){let i=n?1:-1,o=null;if(fr.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(r)),null!=o)return n?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(r),null!=o)return n?o.getStartX():o.getEndX();if(fr.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(r)),null!=o)return n?o.getEndX():o.getStartX();let a=0;for(;fr.isValidBarcodeColumn(e,t-i);){t-=i;for(let r of e.getDetectionResultColumn(t).getCodewords())if(null!=r)return(n?r.getEndX():r.getStartX())+i*a*(r.getEndX()-r.getStartX());a++}return n?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,r,n,i,o,a,s){i=fr.adjustCodewordStartColumn(e,t,r,n,i,o);let l,c=fr.getModuleBitCount(e,t,r,n,i,o);if(null==c)return null;let u=ie.sum(c);if(n)l=i+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=i,i=l-u}if(!fr.checkCodewordSkew(u,a,s))return null;let d=tr.getDecodedValue(c),h=zt.getCodeword(d);return-1===h?null:new er(i,l,fr.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,r,n,i,o){let a=i,s=new Int32Array(8),l=0,c=n?1:-1,u=n;for(;(n?a<r:a>=t)&&l<s.length;)e.get(a,o)===u?(s[l]++,a+=c):(l++,u=!u);return l===s.length||a===(n?r:t)&&l===s.length-1?s:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,r,n,i,o){let a=i,s=n?-1:1;for(let l=0;l<2;l++){for(;(n?a>=t:a<r)&&n===e.get(a,o);){if(Math.abs(i-a)>fr.CODEWORD_SKEW_SIZE)return i;a+=s}s=-s,n=!n}return a}static checkCodewordSkew(e,t,r){return t-fr.CODEWORD_SKEW_SIZE<=e&&e<=r+fr.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,r){if(0===e.length)throw E.getFormatInstance();let n=1<<t+1,i=fr.correctErrors(e,r,n);fr.verifyCodewordCount(e,n);let o=hr.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(r.length),o}static correctErrors(e,t,r){if(null!=t&&t.length>r/2+fr.MAX_ERRORS||r<0||r>fr.MAX_EC_CODEWORDS)throw h.getChecksumInstance();return fr.errorCorrection.decode(e,r,t)}static verifyCodewordCount(e,t){if(e.length<4)throw E.getFormatInstance();let r=e[0];if(r>e.length)throw E.getFormatInstance();if(0===r){if(!(t<e.length))throw E.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),r=0,n=t.length-1;for(;!((1&e)!==r&&(r=1&e,n--,n<0));)t[n]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return fr.getCodewordBucketNumber(fr.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Yt;for(let r=0;r<e.length;r++){t.format("Row %2d: ",r);for(let n=0;n<e[r].length;n++){let i=e[r][n];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}fr.CODEWORD_SKEW_SIZE=2,fr.MAX_ERRORS=3,fr.MAX_EC_CODEWORDS=512,fr.errorCorrection=new Gt;class pr{decode(e,t=null){let r=pr.decode(e,t,!1);if(null==r||0===r.length||null==r[0])throw k.getNotFoundInstance();return r[0]}decodeMultiple(e,t=null){try{return pr.decode(e,t,!0)}catch(r){if(r instanceof E||r instanceof h)throw k.getNotFoundInstance();throw r}}static decode(e,t,r){const n=new Array,i=Vt.detectMultiple(e,t,r);for(const o of i.getPoints()){const e=fr.decode(i.getBits(),o[4],o[5],o[6],o[7],pr.getMinCodewordWidth(o),pr.getMaxCodewordWidth(o)),t=new F(e.getText(),e.getRawBytes(),void 0,o,U.PDF_417);t.putMetadata(X.ERROR_CORRECTION_LEVEL,e.getECLevel());const r=e.getOther();null!=r&&t.putMetadata(X.PDF417_EXTRA_METADATA,r),n.push(t)}return n.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?y.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(pr.getMaxWidth(e[0],e[4]),pr.getMaxWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.max(pr.getMaxWidth(e[1],e[5]),pr.getMaxWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(pr.getMinWidth(e[0],e[4]),pr.getMinWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.min(pr.getMinWidth(e[1],e[5]),pr.getMinWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}reset(){}}class gr extends l{}gr.kind="ReaderException";class mr{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!t(e)&&!0===e.get(_.TRY_HARDER),n=t(e)?null:e.get(_.POSSIBLE_FORMATS),i=new Array;if(!t(n)){const t=n.some(e=>e===U.UPC_A||e===U.UPC_E||e===U.EAN_13||e===U.EAN_8||e===U.CODABAR||e===U.CODE_39||e===U.CODE_93||e===U.CODE_128||e===U.ITF||e===U.RSS_14||e===U.RSS_EXPANDED);t&&!r&&i.push(new lt(e,this.verbose)),n.includes(U.QR_CODE)&&i.push(new Ft),n.includes(U.DATA_MATRIX)&&i.push(new bt),n.includes(U.AZTEC)&&i.push(new we),n.includes(U.PDF_417)&&i.push(new pr),t&&r&&i.push(new lt(e,this.verbose))}0===i.length&&(r||i.push(new lt(e,this.verbose)),i.push(new Ft),i.push(new bt),i.push(new we),i.push(new pr),r&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new gr("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(t){if(t instanceof gr)continue}throw new k("No MultiFormat Readers were able to detect the code.")}}class wr extends L{constructor(e=null,t=500){const r=new mr;r.setHints(e),super(r,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class yr extends L{constructor(e=500){super(new pr,e)}}class br extends L{constructor(e=500){super(new Ft,e)}}var vr;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(vr||(vr={}));var _r=vr;class Er{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Q(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let r=t[t.length-1];const n=this.field;for(let i=t.length;i<=e;i++){const e=r.multiply(new Q(n,Int32Array.from([1,n.exp(i-1+n.getGeneratorBase())])));t.push(e),r=e}}return t[e]}encode(e,t){if(0===t)throw new u("No error correction bytes");const r=e.length-t;if(r<=0)throw new u("No data bytes provided");const n=this.buildGenerator(t),i=new Int32Array(r);p.arraycopy(e,0,i,0,r);let o=new Q(this.field,i);o=o.multiplyByMonomial(t,1);const a=o.divide(n)[1].getCoefficients(),s=t-a.length;for(let l=0;l<s;l++)e[r+l]=0;p.arraycopy(a,0,e,r+s,a.length)}}class Sr{constructor(){}static applyMaskPenaltyRule1(e){return Sr.applyMaskPenaltyRule1Internal(e,!0)+Sr.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const e=r[o];for(let i=0;i<n-1;i++){const n=e[i];n===e[i+1]&&n===r[o+1][i]&&n===r[o+1][i+1]&&t++}}return Sr.N2*t}static applyMaskPenaltyRule3(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let e=0;e<n;e++){const a=r[o];e+6<n&&1===a[e]&&0===a[e+1]&&1===a[e+2]&&1===a[e+3]&&1===a[e+4]&&0===a[e+5]&&1===a[e+6]&&(Sr.isWhiteHorizontal(a,e-4,e)||Sr.isWhiteHorizontal(a,e+7,e+11))&&t++,o+6<i&&1===r[o][e]&&0===r[o+1][e]&&1===r[o+2][e]&&1===r[o+3][e]&&1===r[o+4][e]&&0===r[o+5][e]&&1===r[o+6][e]&&(Sr.isWhiteVertical(r,e,o-4,o)||Sr.isWhiteVertical(r,e,o+7,o+11))&&t++}return t*Sr.N3}static isWhiteHorizontal(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(let n=t;n<r;n++)if(1===e[n])return!1;return!0}static isWhiteVertical(e,t,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(let i=r;i<n;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let a=0;a<i;a++){const e=r[a];for(let r=0;r<n;r++)1===e[r]&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-o)/o)*Sr.N4}static getDataMaskBit(e,t,r){let n,i;switch(e){case 0:n=r+t&1;break;case 1:n=1&r;break;case 2:n=t%3;break;case 3:n=(r+t)%3;break;case 4:n=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:i=r*t,n=(1&i)+i%3;break;case 6:i=r*t,n=(1&i)+i%3&1;break;case 7:i=r*t,n=i%3+(r+t&1)&1;break;default:throw new u("Invalid mask pattern: "+e)}return 0===n}static applyMaskPenaltyRule1Internal(e,t){let r=0;const n=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let a=0;a<n;a++){let e=0,n=-1;for(let s=0;s<i;s++){const i=t?o[a][s]:o[s][a];i===n?e++:(e>=5&&(r+=Sr.N1+(e-5)),e=1,n=i)}e>=5&&(r+=Sr.N1+(e-5))}return r}}Sr.N1=3,Sr.N2=3,Sr.N3=40,Sr.N4=10;class Cr{constructor(e,t){this.width=e,this.height=t;const r=new Array(t);for(let n=0;n!==t;n++)r[n]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,r){this.bytes[t][e]=r}setBoolean(e,t,r){this.bytes[t][e]=r?1:0}clear(e){for(const t of this.bytes)w.fill(t,e)}equals(e){if(!(e instanceof Cr))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let r=0,n=this.height;r<n;++r){const e=this.bytes[r],n=t.bytes[r];for(let t=0,r=this.width;t<r;++t)if(e[t]!==n[t])return!1}return!0}toString(){const e=new I;for(let t=0,r=this.height;t<r;++t){const r=this.bytes[t];for(let t=0,n=this.width;t<n;++t)switch(r[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class xr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new I;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<xr.NUM_MASK_PATTERNS}}xr.NUM_MASK_PATTERNS=8;class Ar extends l{}Ar.kind="WriterException";class Ir{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,r,n,i){Ir.clearMatrix(i),Ir.embedBasicPatterns(r,i),Ir.embedTypeInfo(t,n,i),Ir.maybeEmbedVersionInfo(r,i),Ir.embedDataBits(e,n,i)}static embedBasicPatterns(e,t){Ir.embedPositionDetectionPatternsAndSeparators(t),Ir.embedDarkDotAtLeftBottomCorner(t),Ir.maybeEmbedPositionAdjustmentPatterns(e,t),Ir.embedTimingPatterns(t)}static embedTypeInfo(e,t,r){const n=new b;Ir.makeTypeInfoBits(e,t,n);for(let i=0,o=n.getSize();i<o;++i){const e=n.get(n.getSize()-1-i),t=Ir.TYPE_INFO_COORDINATES[i],o=t[0],a=t[1];if(r.setBoolean(o,a,e),i<8){const t=r.getWidth()-i-1,n=8;r.setBoolean(t,n,e)}else{const t=8,n=r.getHeight()-7+(i-8);r.setBoolean(t,n,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const r=new b;Ir.makeVersionInfoBits(e,r);let n=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const o=r.get(n);n--,t.setBoolean(i,t.getHeight()-11+e,o),t.setBoolean(t.getHeight()-11+e,i,o)}}static embedDataBits(e,t,r){let n=0,i=-1,o=r.getWidth()-1,a=r.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);a>=0&&a<r.getHeight();){for(let i=0;i<2;++i){const s=o-i;if(!Ir.isEmpty(r.get(s,a)))continue;let l;n<e.getSize()?(l=e.get(n),++n):l=!1,255!==t&&Sr.getDataMaskBit(t,s,a)&&(l=!l),r.setBoolean(s,a,l)}a+=i}i=-i,a+=i,o-=2}if(n!==e.getSize())throw new Ar("Not all bits consumed: "+n+"/"+e.getSize())}static findMSBSet(e){return 32-y.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new u("0 polynomial");const r=Ir.findMSBSet(t);for(e<<=r-1;Ir.findMSBSet(e)>=r;)e^=t<<Ir.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,t,r){if(!xr.isValidMaskPattern(t))throw new Ar("Invalid mask pattern");const n=e.getBits()<<3|t;r.appendBits(n,5);const i=Ir.calculateBCHCode(n,Ir.TYPE_INFO_POLY);r.appendBits(i,10);const o=new b;if(o.appendBits(Ir.TYPE_INFO_MASK_PATTERN,15),r.xor(o),15!==r.getSize())throw new Ar("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const r=Ir.calculateBCHCode(e.getVersionNumber(),Ir.VERSION_INFO_POLY);if(t.appendBits(r,12),18!==t.getSize())throw new Ar("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const r=(t+1)%2;Ir.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),Ir.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new Ar;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,r){for(let n=0;n<8;++n){if(!Ir.isEmpty(r.get(e+n,t)))throw new Ar;r.setNumber(e+n,t,0)}}static embedVerticalSeparationPattern(e,t,r){for(let n=0;n<7;++n){if(!Ir.isEmpty(r.get(e,t+n)))throw new Ar;r.setNumber(e,t+n,0)}}static embedPositionAdjustmentPattern(e,t,r){for(let n=0;n<5;++n){const i=Ir.POSITION_ADJUSTMENT_PATTERN[n];for(let o=0;o<5;++o)r.setNumber(e+o,t+n,i[o])}}static embedPositionDetectionPattern(e,t,r){for(let n=0;n<7;++n){const i=Ir.POSITION_DETECTION_PATTERN[n];for(let o=0;o<7;++o)r.setNumber(e+o,t+n,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Ir.POSITION_DETECTION_PATTERN[0].length;Ir.embedPositionDetectionPattern(0,0,e),Ir.embedPositionDetectionPattern(e.getWidth()-t,0,e),Ir.embedPositionDetectionPattern(0,e.getWidth()-t,e);const r=8;Ir.embedHorizontalSeparationPattern(0,r-1,e),Ir.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Ir.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const n=7;Ir.embedVerticalSeparationPattern(n,0,e),Ir.embedVerticalSeparationPattern(e.getHeight()-n-1,0,e),Ir.embedVerticalSeparationPattern(n,e.getHeight()-n,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,n=Ir.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let i=0,o=n.length;i!==o;i++){const e=n[i];if(e>=0)for(let r=0;r!==o;r++){const i=n[r];i>=0&&Ir.isEmpty(t.get(i,e))&&Ir.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}Ir.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ir.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ir.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ir.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ir.VERSION_INFO_POLY=7973,Ir.TYPE_INFO_POLY=1335,Ir.TYPE_INFO_MASK_PATTERN=21522;class Tr{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kr{constructor(){}static calculateMaskPenalty(e){return Sr.applyMaskPenaltyRule1(e)+Sr.applyMaskPenaltyRule2(e)+Sr.applyMaskPenaltyRule3(e)+Sr.applyMaskPenaltyRule4(e)}static encode(e,t,r=null){let n=kr.DEFAULT_BYTE_MODE_ENCODING;const i=null!==r&&void 0!==r.get(_r.CHARACTER_SET);i&&(n=r.get(_r.CHARACTER_SET).toString());const o=this.chooseMode(e,n),a=new b;if(o===kt.BYTE&&(i||kr.DEFAULT_BYTE_MODE_ENCODING!==n)){const e=S.getCharacterSetECIByName(n);void 0!==e&&this.appendECI(e,a)}this.appendModeInfo(o,a);const s=new b;let l;if(this.appendBytes(e,o,s,n),null!==r&&void 0!==r.get(_r.QR_VERSION)){const e=Number.parseInt(r.get(_r.QR_VERSION).toString(),10);l=xt.getVersionForNumber(e);const n=this.calculateBitsNeeded(o,a,s,l);if(!this.willFit(n,l,t))throw new Ar("Data too big for requested version")}else l=this.recommendVersion(t,o,a,s);const c=new b;c.appendBitArray(a);const u=o===kt.BYTE?s.getSizeInBytes():e.length;this.appendLengthInfo(u,l,o,c),c.appendBitArray(s);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,d.getNumBlocks()),p=new xr;p.setECLevel(t),p.setMode(o),p.setVersion(l);const g=l.getDimensionForVersion(),m=new Cr(g,g),w=this.chooseMaskPattern(f,t,l,m);return p.setMaskPattern(w),Ir.buildMatrix(f,t,l,w,m),p.setMatrix(m),p}static recommendVersion(e,t,r,n){const i=this.calculateBitsNeeded(t,r,n,xt.getVersionForNumber(1)),o=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,r,n,o);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,r,n){return t.getSize()+e.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(e){return e<kr.ALPHANUMERIC_TABLE.length?kr.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(S.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return kt.KANJI;let r=!1,n=!1;for(let i=0,o=e.length;i<o;++i){const t=e.charAt(i);if(kr.isDigit(t))r=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return kt.BYTE;n=!0}}return n?kt.ALPHANUMERIC:r?kt.NUMERIC:kt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=x.encode(e,S.SJIS)}catch(n){return!1}const r=t.length;if(r%2!=0)return!1;for(let i=0;i<r;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,r,n){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let a=0;a<xr.NUM_MASK_PATTERNS;a++){Ir.buildMatrix(e,t,r,a,n);let s=this.calculateMaskPenalty(n);s<i&&(i=s,o=a)}return o}static chooseVersion(e,t){for(let r=1;r<=40;r++){const n=xt.getVersionForNumber(r);if(kr.willFit(e,n,t))return n}throw new Ar("Data too big")}static willFit(e,t,r){return t.getTotalCodewords()-t.getECBlocksForLevel(r).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const r=8*e;if(t.getSize()>r)throw new Ar("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(let o=0;o<4&&t.getSize()<r;++o)t.appendBit(!1);const n=7&t.getSize();if(n>0)for(let o=n;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits(1&o?17:236,8);if(t.getSize()!==r)throw new Ar("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,r,n,i,o){if(n>=r)throw new Ar("Block ID too large");const a=e%r,s=r-a,l=Math.floor(e/r),c=l+1,u=Math.floor(t/r),d=u+1,h=l-u,f=c-d;if(h!==f)throw new Ar("EC bytes mismatch");if(r!==s+a)throw new Ar("RS blocks mismatch");if(e!==(u+h)*s+(d+f)*a)throw new Ar("Total bytes mismatch");n<s?(i[0]=u,o[0]=h):(i[0]=d,o[0]=f)}static interleaveWithECBytes(e,t,r,n){if(e.getSizeInBytes()!==r)throw new Ar("Number of bits and data bytes does not match");let i=0,o=0,a=0;const s=new Array;for(let c=0;c<n;++c){const l=new Int32Array(1),u=new Int32Array(1);kr.getNumDataBytesAndNumECBytesForBlockID(t,r,n,c,l,u);const d=l[0],h=new Uint8Array(d);e.toBytes(8*i,h,0,d);const f=kr.generateECBytes(h,u[0]);s.push(new Tr(h,f)),o=Math.max(o,d),a=Math.max(a,f.length),i+=l[0]}if(r!==i)throw new Ar("Data bytes does not match offset");const l=new b;for(let c=0;c<o;++c)for(const e of s){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<a;++c)for(const e of s){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new Ar("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const r=e.length,n=new Int32Array(r+t);for(let o=0;o<r;o++)n[o]=255&e[o];new Er(J.QR_CODE_FIELD_256).encode(n,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=n[r+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,r,n){const i=r.getCharacterCountBits(t);if(e>=1<<i)throw new Ar(e+" is bigger than "+((1<<i)-1));n.appendBits(e,i)}static appendBytes(e,t,r,n){switch(t){case kt.NUMERIC:kr.appendNumericBytes(e,r);break;case kt.ALPHANUMERIC:kr.appendAlphanumericBytes(e,r);break;case kt.BYTE:kr.append8BitBytes(e,r,n);break;case kt.KANJI:kr.appendKanjiBytes(e,r);break;default:throw new Ar("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=kr.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const i=kr.getDigit(e.charAt(n));if(n+2<r){const r=kr.getDigit(e.charAt(n+1)),o=kr.getDigit(e.charAt(n+2));t.appendBits(100*i+10*r+o,10),n+=3}else if(n+1<r){const r=kr.getDigit(e.charAt(n+1));t.appendBits(10*i+r,7),n+=2}else t.appendBits(i,4),n++}}static appendAlphanumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const i=kr.getAlphanumericCode(e.charCodeAt(n));if(-1===i)throw new Ar;if(n+1<r){const r=kr.getAlphanumericCode(e.charCodeAt(n+1));if(-1===r)throw new Ar;t.appendBits(45*i+r,11),n+=2}else t.appendBits(i,6),n++}}static append8BitBytes(e,t,r){let n;try{n=x.encode(e,r)}catch(i){throw new Ar(i)}for(let o=0,a=n.length;o!==a;o++){const e=n[o];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let r;try{r=x.encode(e,S.SJIS)}catch(i){throw new Ar(i)}const n=r.length;for(let o=0;o<n;o+=2){const e=(255&r[o])<<8&4294967295|255&r[o+1];let n=-1;if(e>=33088&&e<=40956?n=e-33088:e>=57408&&e<=60351&&(n=e-49472),-1===n)throw new Ar("Invalid byte sequence");const i=192*(n>>8)+(255&n);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(kt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}kr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kr.DEFAULT_BYTE_MODE_ENCODING=S.UTF8.getName();class Rr{write(e,t,r,n=null){if(0===e.length)throw new u("Found empty contents");if(t<0||r<0)throw new u("Requested dimensions are too small: "+t+"x"+r);let i=_t.L,o=Rr.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(_r.ERROR_CORRECTION)&&(i=_t.fromString(n.get(_r.ERROR_CORRECTION).toString())),void 0!==n.get(_r.MARGIN)&&(o=Number.parseInt(n.get(_r.MARGIN).toString(),10)));const a=kr.encode(e,i,n);return this.renderResult(a,t,r,o)}writeToDom(e,t,r,n,i=null){"string"==typeof e&&(e=document.querySelector(e));const o=this.write(t,r,n,i);e&&e.appendChild(o)}renderResult(e,t,r,n){const i=e.getMatrix();if(null===i)throw new te;const o=i.getWidth(),a=i.getHeight(),s=o+2*n,l=a+2*n,c=Math.max(t,s),u=Math.max(r,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),h=Math.floor((c-o*d)/2),f=Math.floor((u-a*d)/2),p=this.createSVGElement(c,u);for(let g=0,m=f;g<a;g++,m+=d)for(let e=0,t=h;e<o;e++,t+=d)if(1===i.get(e,g)){const e=this.createSvgRectElement(t,m,d,d);p.appendChild(e)}return p}createSVGElement(e,t){const r=document.createElementNS(Rr.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r}createSvgRectElement(e,t,r,n){const i=document.createElementNS(Rr.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Rr.QUIET_ZONE_SIZE=4,Rr.SVG_NS="http://www.w3.org/2000/svg";class Or{encode(e,t,r,n,i){if(0===e.length)throw new u("Found empty contents");if(t!==U.QR_CODE)throw new u("Can only encode QR_CODE, but got "+t);if(r<0||n<0)throw new u(`Requested dimensions are too small: ${r}x${n}`);let o=_t.L,a=Or.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(_r.ERROR_CORRECTION)&&(o=_t.fromString(i.get(_r.ERROR_CORRECTION).toString())),void 0!==i.get(_r.MARGIN)&&(a=Number.parseInt(i.get(_r.MARGIN).toString(),10)));const s=kr.encode(e,o,i);return Or.renderResult(s,r,n,a)}static renderResult(e,t,r,n){const i=e.getMatrix();if(null===i)throw new te;const o=i.getWidth(),a=i.getHeight(),s=o+2*n,l=a+2*n,c=Math.max(t,s),u=Math.max(r,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),h=Math.floor((c-o*d)/2),f=Math.floor((u-a*d)/2),p=new T(c,u);for(let g=0,m=f;g<a;g++,m+=d)for(let e=0,t=h;e<o;e++,t+=d)1===i.get(e,g)&&p.setRegion(t,m,d,d);return p}}Or.QUIET_ZONE_SIZE=4;class Nr{encode(e,t,r,n,i){let o;if(t!==U.QR_CODE)throw new u("No encoder available for format "+t);return o=new Or,o.encode(e,t,r,n,i)}}class Dr extends N{constructor(e,t,r,n,i,o,a,s){if(super(o,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=r,this.left=n,this.top=i,n+o>t||i+a>r)throw new u("Crop rectangle does not fit within image data.");s&&this.reverseHorizontal(o,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const r=this.getWidth();(null==t||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return p.arraycopy(this.yuvData,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const r=e*t,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return p.arraycopy(this.yuvData,i,n,0,r),n;for(let o=0;o<t;o++){const t=o*e;p.arraycopy(this.yuvData,i,n,t,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new Dr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,r,n,!1)}renderThumbnail(){const e=this.getWidth()/Dr.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Dr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*t),n=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const t=o*e;for(let o=0;o<e;o++){const e=255&n[i+o*Dr.THUMBNAIL_SCALE_FACTOR];r[t+o]=4278190080|65793*e}i+=this.dataWidth*Dr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/Dr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Dr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const r=this.yuvData;for(let n=0,i=this.top*this.dataWidth+this.left;n<t;n++,i+=this.dataWidth){const t=i+e/2;for(let n=i,o=i+e-1;n<t;n++,o--){const e=r[n];r[n]=r[o],r[o]=e}}}invert(){return new D(this)}}Dr.THUMBNAIL_SCALE_FACTOR=2;class Pr extends N{constructor(e,t,r,n,i,o,a){if(super(t,r),this.dataWidth=n,this.dataHeight=i,this.left=o,this.top=a,4===e.BYTES_PER_ELEMENT){const n=t*r,i=new Uint8ClampedArray(n);for(let t=0;t<n;t++){const r=e[t],n=r>>16&255,o=r>>7&510,a=255&r;i[t]=(n+o+a)/4&255}this.luminances=i}else this.luminances=e;if(void 0===n&&(this.dataWidth=t),void 0===i&&(this.dataHeight=r),void 0===o&&(this.left=0),void 0===a&&(this.top=0),this.left+t>this.dataWidth||this.top+r>this.dataHeight)throw new u("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const r=this.getWidth();(null==t||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return p.arraycopy(this.luminances,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const r=e*t,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return p.arraycopy(this.luminances,i,n,0,r),n;for(let o=0;o<t;o++){const t=o*e;p.arraycopy(this.luminances,i,n,t,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new Pr(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new D(this)}}class Mr extends S{static forName(e){return this.getCharacterSetECIByName(e)}}class Br{}Br.ISO_8859_1=S.ISO8859_1;class jr{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Lr{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Fr{constructor(e){this.previous=e}getPrevious(){return this.previous}}class zr extends Fr{constructor(e,t,r){super(e),this.value=t,this.bitCount=r}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new zr(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new zr(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+y.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ur extends zr{constructor(e,t,r){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=r}appendTo(e,t){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===r?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+r],8)}addBinaryShift(e,t){return new Ur(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vr(e,t,r){return new Ur(e,t,r)}function Hr(e,t,r){return new zr(e,t,r)}const qr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Wr=0,Gr=1,$r=2,Xr=3,Yr=4,Kr=new zr(null,0,0),Qr=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Zr(e){for(let t of e)w.fill(t,-1);return e[Wr][Yr]=0,e[Gr][Yr]=0,e[Gr][Wr]=28,e[Xr][Yr]=0,e[$r][Yr]=0,e[$r][Wr]=15,e}const Jr=Zr(w.createInt32Array(6,6));class en{constructor(e,t,r,n){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let r=this.bitCount,n=this.token;if(e!==this.mode){let t=Qr[this.mode][e];n=Hr(n,65535&t,t>>16),r+=t>>16}let i=e===$r?4:5;return n=Hr(n,t,i),new en(n,e,0,r+i)}shiftAndAppend(e,t){let r=this.token,n=this.mode===$r?4:5;return r=Hr(r,Jr[this.mode][e],n),r=Hr(r,t,5),new en(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(e){let t=this.token,r=this.mode,n=this.bitCount;if(this.mode===Yr||this.mode===$r){let e=Qr[r][Wr];t=Hr(t,65535&e,e>>16),n+=e>>16,r=Wr}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new en(t,r,this.binaryShiftByteCount+1,n+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Vr(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new en(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Qr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=en.calculateBinaryShiftCost(e)-en.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let n=this.endBinaryShift(e.length).token;null!==n;n=n.getPrevious())t.unshift(n);let r=new b;for(const n of t)n.appendTo(r,e);return r}toString(){return A.format("%s bits=%d bytes=%d",qr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function tn(e){const t=A.getCharCode(" "),r=A.getCharCode("."),n=A.getCharCode(",");e[Wr][t]=1;const i=A.getCharCode("Z"),o=A.getCharCode("A");for(let h=o;h<=i;h++)e[Wr][h]=h-o+2;e[Gr][t]=1;const a=A.getCharCode("z"),s=A.getCharCode("a");for(let h=s;h<=a;h++)e[Gr][h]=h-s+2;e[$r][t]=1;const l=A.getCharCode("9"),c=A.getCharCode("0");for(let h=c;h<=l;h++)e[$r][h]=h-c+2;e[$r][n]=12,e[$r][r]=13;const u=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""];for(let h=0;h<u.length;h++)e[Xr][A.getCharCode(u[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)A.getCharCode(d[h])>0&&(e[Yr][A.getCharCode(d[h])]=h);return e}en.INITIAL_STATE=new en(Kr,Wr,0,0);const rn=tn(w.createInt32Array(5,256));class nn{constructor(e){this.text=e}encode(){const e=A.getCharCode(" "),t=A.getCharCode("\n");let r=Lr.singletonList(en.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let i,o=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case A.getCharCode("\r"):i=o===t?2:0;break;case A.getCharCode("."):i=o===e?3:0;break;case A.getCharCode(","):i=o===e?4:0;break;case A.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(r=nn.updateStateListForPair(r,n,i),n++):r=this.updateStateListForChar(r,n)}return Lr.min(r,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const r=[];for(let n of e)this.updateStateForChar(n,t,r);return nn.simplifyStates(r)}updateStateForChar(e,t,r){let n=255&this.text[t],i=rn[e.getMode()][n]>0,o=null;for(let a=0;a<=Yr;a++){let s=rn[a][n];if(s>0){if(null==o&&(o=e.endBinaryShift(t)),!i||a===e.getMode()||a===$r){const e=o.latchAndAppend(a,s);r.push(e)}if(!i&&Jr[e.getMode()][a]>=0){const e=o.shiftAndAppend(a,s);r.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rn[e.getMode()][n]){let n=e.addBinaryShiftChar(t);r.push(n)}}static updateStateListForPair(e,t,r){const n=[];for(let i of e)this.updateStateForPair(i,t,r,n);return this.simplifyStates(n)}static updateStateForPair(e,t,r,n){let i=e.endBinaryShift(t);if(n.push(i.latchAndAppend(Yr,r)),e.getMode()!==Yr&&n.push(i.shiftAndAppend(Yr,r)),3===r||4===r){let e=i.latchAndAppend($r,16-r).latchAndAppend($r,1);n.push(e)}if(e.getBinaryShiftByteCount()>0){let r=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(r)}}static simplifyStates(e){let t=[];for(const r of e){let e=!0;for(const n of t){if(n.isBetterThanOrEqualTo(r)){e=!1;break}r.isBetterThanOrEqualTo(n)&&(t=t.filter(e=>e!==n))}e&&t.push(r)}return t}}class on{constructor(){}static encodeBytes(e){return on.encode(e,on.DEFAULT_EC_PERCENT,on.DEFAULT_AZTEC_LAYERS)}static encode(e,t,r){let n,i,o,a,s,l=new nn(e).encode(),c=y.truncDivision(l.getSize()*t,100)+11,d=l.getSize()+c;if(r!==on.DEFAULT_AZTEC_LAYERS){if(n=r<0,i=Math.abs(r),i>(n?on.MAX_NB_BITS_COMPACT:on.MAX_NB_BITS))throw new u(A.format("Illegal value %s for layers",r));o=on.totalBitsInLayer(i,n),a=on.WORD_SIZE[i];let e=o-o%a;if(s=on.stuffBits(l,a),s.getSize()+c>e)throw new u("Data to large for user specified layer");if(n&&s.getSize()>64*a)throw new u("Data to large for user specified layer")}else{a=0,s=null;for(let e=0;;e++){if(e>on.MAX_NB_BITS)throw new u("Data too large for an Aztec code");if(n=e<=3,i=n?e+1:e,o=on.totalBitsInLayer(i,n),d>o)continue;null!=s&&a===on.WORD_SIZE[i]||(a=on.WORD_SIZE[i],s=on.stuffBits(l,a));let t=o-o%a;if(!(n&&s.getSize()>64*a)&&s.getSize()+c<=t)break}}let h,f=on.generateCheckWords(s,o,a),p=s.getSize()/a,g=on.generateModeMessage(n,i,p),m=(n?11:14)+4*i,w=new Int32Array(m);if(n){h=m;for(let e=0;e<w.length;e++)w[e]=e}else{h=m+1+2*y.truncDivision(y.truncDivision(m,2)-1,15);let e=y.truncDivision(m,2),t=y.truncDivision(h,2);for(let r=0;r<e;r++){let n=r+y.truncDivision(r,15);w[e-r-1]=t-n-1,w[e+r]=t+n+1}}let b=new T(h);for(let u=0,y=0;u<i;u++){let e=4*(i-u)+(n?9:12);for(let t=0;t<e;t++){let r=2*t;for(let n=0;n<2;n++)f.get(y+r+n)&&b.set(w[2*u+n],w[2*u+t]),f.get(y+2*e+r+n)&&b.set(w[2*u+t],w[m-1-2*u-n]),f.get(y+4*e+r+n)&&b.set(w[m-1-2*u-n],w[m-1-2*u-t]),f.get(y+6*e+r+n)&&b.set(w[m-1-2*u-t],w[2*u+n])}y+=8*e}if(on.drawModeMessage(b,n,h,g),n)on.drawBullsEye(b,y.truncDivision(h,2),5);else{on.drawBullsEye(b,y.truncDivision(h,2),7);for(let e=0,t=0;e<y.truncDivision(m,2)-1;e+=15,t+=16)for(let r=1&y.truncDivision(h,2);r<h;r+=2)b.set(y.truncDivision(h,2)-t,r),b.set(y.truncDivision(h,2)+t,r),b.set(r,y.truncDivision(h,2)-t),b.set(r,y.truncDivision(h,2)+t)}let v=new jr;return v.setCompact(n),v.setSize(h),v.setLayers(i),v.setCodeWords(p),v.setMatrix(b),v}static drawBullsEye(e,t,r){for(let n=0;n<r;n+=2)for(let r=t-n;r<=t+n;r++)e.set(r,t-n),e.set(r,t+n),e.set(t-n,r),e.set(t+n,r);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)}static generateModeMessage(e,t,r){let n=new b;return e?(n.appendBits(t-1,2),n.appendBits(r-1,6),n=on.generateCheckWords(n,28,4)):(n.appendBits(t-1,5),n.appendBits(r-1,11),n=on.generateCheckWords(n,40,4)),n}static drawModeMessage(e,t,r,n){let i=y.truncDivision(r,2);if(t)for(let o=0;o<7;o++){let t=i-3+o;n.get(o)&&e.set(t,i-5),n.get(o+7)&&e.set(i+5,t),n.get(20-o)&&e.set(t,i+5),n.get(27-o)&&e.set(i-5,t)}else for(let o=0;o<10;o++){let t=i-5+o+y.truncDivision(o,5);n.get(o)&&e.set(t,i-7),n.get(o+10)&&e.set(i+7,t),n.get(29-o)&&e.set(t,i+7),n.get(39-o)&&e.set(i-7,t)}}static generateCheckWords(e,t,r){let n=e.getSize()/r,i=new Er(on.getGF(r)),o=y.truncDivision(t,r),a=on.bitsToWords(e,r,o);i.encode(a,o-n);let s=t%r,l=new b;l.appendBits(0,s);for(const c of Array.from(a))l.appendBits(c,r);return l}static bitsToWords(e,t,r){let n,i,o=new Int32Array(r);for(n=0,i=e.getSize()/t;n<i;n++){let r=0;for(let i=0;i<t;i++)r|=e.get(n*t+i)?1<<t-i-1:0;o[n]=r}return o}static getGF(e){switch(e){case 4:return J.AZTEC_PARAM;case 6:return J.AZTEC_DATA_6;case 8:return J.AZTEC_DATA_8;case 10:return J.AZTEC_DATA_10;case 12:return J.AZTEC_DATA_12;default:throw new u("Unsupported word size "+e)}}static stuffBits(e,t){let r=new b,n=e.getSize(),i=(1<<t)-2;for(let o=0;o<n;o+=t){let a=0;for(let r=0;r<t;r++)(o+r>=n||e.get(o+r))&&(a|=1<<t-1-r);(a&i)===i?(r.appendBits(a&i,t),o--):0===(a&i)?(r.appendBits(1|a,t),o--):r.appendBits(a,t)}return r}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}on.DEFAULT_EC_PERCENT=33,on.DEFAULT_AZTEC_LAYERS=0,on.MAX_NB_BITS=32,on.MAX_NB_BITS_COMPACT=4,on.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class an{encode(e,t,r,n){return this.encodeWithHints(e,t,r,n,null)}encodeWithHints(e,t,r,n,i){let o=Br.ISO_8859_1,a=on.DEFAULT_EC_PERCENT,s=on.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(_r.CHARACTER_SET)&&(o=Mr.forName(i.get(_r.CHARACTER_SET).toString())),i.has(_r.ERROR_CORRECTION)&&(a=y.parseInt(i.get(_r.ERROR_CORRECTION).toString())),i.has(_r.AZTEC_LAYERS)&&(s=y.parseInt(i.get(_r.AZTEC_LAYERS).toString()))),an.encodeLayers(e,t,r,n,o,a,s)}static encodeLayers(e,t,r,n,i,o,a){if(t!==U.AZTEC)throw new u("Can only encode AZTEC, but got "+t);let s=on.encode(A.getBytes(e,i),o,a);return an.renderResult(s,r,n)}static renderResult(e,t,r){let n=e.getMatrix();if(null==n)throw new te;let i=n.getWidth(),o=n.getHeight(),a=Math.max(t,i),s=Math.max(r,o),l=Math.min(a/i,s/o),c=(a-i*l)/2,u=(s-o*l)/2,d=new T(a,s);for(let h=0,f=u;h<o;h++,f+=l)for(let e=0,t=c;e<i;e++,t+=l)n.get(e,h)&&d.setRegion(t,f,l,l);return d}}e.AbstractExpandedDecoder=We,e.ArgumentException=c,e.ArithmeticException=Z,e.AztecCode=jr,e.AztecCodeReader=we,e.AztecCodeWriter=an,e.AztecDecoder=ne,e.AztecDetector=me,e.AztecDetectorResult=ce,e.AztecEncoder=on,e.AztecHighLevelEncoder=nn,e.AztecPoint=ge,e.BarcodeFormat=U,e.Binarizer=f,e.BinaryBitmap=d,e.BitArray=b,e.BitMatrix=T,e.BitSource=gt,e.BrowserAztecCodeReader=ye,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=L,e.BrowserDatamatrixCodeReader=vt,e.BrowserMultiFormatReader=wr,e.BrowserPDF417Reader=yr,e.BrowserQRCodeReader=br,e.BrowserQRCodeSvgWriter=Rr,e.CharacterSetECI=S,e.ChecksumException=h,e.Code128Reader=ve,e.Code39Reader=_e,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=bt,e.DecodeHintType=_,e.DecoderResult=Y,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Te,e.EncodeHintType=_r,e.Exception=l,e.FormatException=E,e.GenericGF=J,e.GenericGFPoly=Q,e.GlobalHistogramBinarizer=R,e.GridSampler=de,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=P,e.HybridBinarizer=O,e.ITFReader=Ee,e.IllegalArgumentException=u,e.IllegalStateException=te,e.InvertedLuminanceSource=D,e.LuminanceSource=N,e.MathUtils=ie,e.MultiFormatOneDReader=lt,e.MultiFormatReader=mr,e.MultiFormatWriter=Nr,e.NotFoundException=k,e.OneDReader=be,e.PDF417DecodedBitStreamParser=hr,e.PDF417DecoderErrorCorrection=Gt,e.PDF417Reader=pr,e.PDF417ResultMetadata=rr,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=Dr,e.QRCodeByteMatrix=Cr,e.QRCodeDataMask=At,e.QRCodeDecodedBitStreamParser=Rt,e.QRCodeDecoderErrorCorrectionLevel=_t,e.QRCodeDecoderFormatInformation=Et,e.QRCodeEncoder=kr,e.QRCodeEncoderQRCode=xr,e.QRCodeMaskUtil=Sr,e.QRCodeMatrixUtil=Ir,e.QRCodeMode=kt,e.QRCodeReader=Ft,e.QRCodeVersion=xt,e.QRCodeWriter=Or,e.RGBLuminanceSource=Pr,e.RSS14Reader=st,e.RSSExpandedReader=ot,e.ReaderException=gr,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=Er,e.ReedSolomonException=ee,e.Result=F,e.ResultMetadataType=X,e.ResultPoint=se,e.StringUtils=A,e.UnsupportedOperationException=C,e.VideoInputDevice=M,e.WhiteRectangleDetector=ue,e.WriterException=Ar,e.ZXingArrays=w,e.ZXingCharset=Mr,e.ZXingInteger=y,e.ZXingStandardCharsets=Br,e.ZXingStringBuilder=I,e.ZXingStringEncoding=x,e.ZXingSystem=p,e.createAbstractExpandedDecoder=rt,Object.defineProperty(e,"__esModule",{value:!0})}(Dy.exports);var Py=Dy.exports;const My=Ae({__proto__:null,default:se(Py)},[Py]);var By,jy,Ly=function(){function e(e,t,r){if(this.formatMap=new Map([[by.QR_CODE,Py.BarcodeFormat.QR_CODE],[by.AZTEC,Py.BarcodeFormat.AZTEC],[by.CODABAR,Py.BarcodeFormat.CODABAR],[by.CODE_39,Py.BarcodeFormat.CODE_39],[by.CODE_93,Py.BarcodeFormat.CODE_93],[by.CODE_128,Py.BarcodeFormat.CODE_128],[by.DATA_MATRIX,Py.BarcodeFormat.DATA_MATRIX],[by.MAXICODE,Py.BarcodeFormat.MAXICODE],[by.ITF,Py.BarcodeFormat.ITF],[by.EAN_13,Py.BarcodeFormat.EAN_13],[by.EAN_8,Py.BarcodeFormat.EAN_8],[by.PDF_417,Py.BarcodeFormat.PDF_417],[by.RSS_14,Py.BarcodeFormat.RSS_14],[by.RSS_EXPANDED,Py.BarcodeFormat.RSS_EXPANDED],[by.UPC_A,Py.BarcodeFormat.UPC_A],[by.UPC_E,Py.BarcodeFormat.UPC_E],[by.UPC_EAN_EXTENSION,Py.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!My)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var n=this.createZXingFormats(e),i=new Map;i.set(Py.DecodeHintType.POSSIBLE_FORMATS,n),i.set(Py.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,n){try{r(t.decode(e))}catch(i){n(i)}})},e.prototype.decode=function(e){var t=new Py.MultiFormatReader(this.verbose,this.hints),r=new Py.HTMLCanvasElementLuminanceSource(e),n=new Py.BinaryBitmap(new Py.HybridBinarizer(r)),i=t.decode(n);return{text:i.text,format:Ay.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Fy=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(Bb){o(Bb)}}function s(e){try{l(n.throw(e))}catch(Bb){o(Bb)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},zy=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(Bb){s=[6,Bb],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Uy=function(){function e(t,r,n){if(this.formatMap=new Map([[by.QR_CODE,"qr_code"],[by.AZTEC,"aztec"],[by.CODABAR,"codabar"],[by.CODE_39,"code_39"],[by.CODE_93,"code_93"],[by.CODE_128,"code_128"],[by.DATA_MATRIX,"data_matrix"],[by.ITF,"itf"],[by.EAN_13,"ean_13"],[by.EAN_8,"ean_8"],[by.PDF_417,"pdf417"],[by.UPC_A,"upc_a"],[by.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&void 0!==new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return Fy(this,void 0,void 0,function(){var t,r;return zy(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=n.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(t)).rawValue,format:Ay.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,n=0,i=e;n<i.length;n++){var o=i[n],a=o.boundingBox.width*o.boundingBox.height;a>r&&(r=a,t=o)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,n){e.set(t,r)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Vy=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(Bb){o(Bb)}}function s(e){try{l(n.throw(e))}catch(Bb){o(Bb)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},Hy=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(Bb){s=[6,Bb],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},qy=function(){function e(e,t,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&Uy.isSupported()?(this.primaryDecoder=new Uy(e,r,n),this.secondaryDecoder=new Ly(e,r,n)):this.primaryDecoder=new Ly(e,r,n)}return e.prototype.decodeAsync=function(e){return Vy(this,void 0,void 0,function(){var t;return Hy(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return Vy(this,void 0,void 0,function(){var t,r;return Hy(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++)e+=r[t];var n=e/this.executionResults.length;console.log("".concat(n," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Wy=(By=function(e,t){return By=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},By(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}By(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Gy=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(Bb){o(Bb)}}function s(e){try{l(n.throw(e))}catch(Bb){o(Bb)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},$y=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(Bb){s=[6,Bb],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Xy=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),Yy=function(e){function t(t,r){return e.call(this,t,r)||this}return Wy(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Xy),Ky=function(e){function t(t){return e.call(this,"zoom",t)||this}return Wy(t,e),t}(Yy),Qy=function(e){function t(t){return e.call(this,"torch",t)||this}return Wy(t,e),t}(Xy),Zy=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new Ky(this.track)},e.prototype.torchFeature=function(){return new Qy(this.track)},e}(),Jy=function(){function e(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return Gy(this,void 0,void 0,function(){var o,a;return $y(this,function(s){switch(s.label){case 0:return o=new e(t,r,i),n.aspectRatio?(a={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:s.sent(),s.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return Gy(this,void 0,void 0,function(){return $y(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var n=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(r){e.mediaStream.removeTrack(r),r.stop(),++i>=n&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new Zy(this.getFirstTrackOrFail())},e}(),eb=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,r){return Gy(this,void 0,void 0,function(){return $y(this,function(n){return[2,Jy.create(e,this.mediaStream,t,r)]})})},e.create=function(t){return Gy(this,void 0,void 0,function(){var r;return $y(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return[2,new e(n.sent())]}})})},e}(),tb=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(Bb){o(Bb)}}function s(e){try{l(n.throw(e))}catch(Bb){o(Bb)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},rb=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(Bb){s=[6,Bb],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},nb=function(){function e(){}return e.failIfNotSupported=function(){return tb(this,void 0,void 0,function(){return rb(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return tb(this,void 0,void 0,function(){return rb(this,function(t){return[2,eb.create(e)]})})},e}(),ib=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(Bb){o(Bb)}}function s(e){try{l(n.throw(e))}catch(Bb){o(Bb)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},ob=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(Bb){s=[6,Bb],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},ab=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Oy.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Oy.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return ib(this,void 0,void 0,function(){var e,t,r,n,i,o,a;return ob(this,function(s){switch(s.label){case 0:return e=function(e){for(var t=0,r=e.getVideoTracks();t<r.length;t++){var n=r[t];n.enabled=!1,n.stop(),e.removeTrack(n)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=s.sent(),n=[],i=0,o=r;i<o.length;i++)"videoinput"===(a=o[i]).kind&&n.push({id:a.deviceId,label:a.label});return e(t),[2,n]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n];"video"===o.kind&&r.push({id:o.id,label:o.label})}e(r)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(jy||(jy={}));var sb,lb=function(){function e(){this.state=jy.NOT_STARTED,this.onGoingTransactionNewState=jy.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===jy.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=jy.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===jy.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=jy.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==jy.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case jy.UNKNOWN:throw"Transition from unknown is not allowed";case jy.NOT_STARTED:this.failIfNewStateIs(e,[jy.PAUSED]);case jy.SCANNING:case jy.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var r=0,n=t;r<n.length;r++)if(e===n[r])throw"Cannot transition from ".concat(this.state," to ").concat(e)},e}(),cb=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===jy.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==jy.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===jy.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===jy.PAUSED},e}(),ub=function(){function e(){}return e.create=function(){return new cb(new lb)},e}(),db=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return db(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(xy),fb=function(){function e(e,t){this.logger=t,this.fps=hb.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=hb.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ny.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ry(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),pb=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var r;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(r=t,this.verbose=!0===r.verbose,r.experimentalFeatures),this.logger=new ky(this.verbose),this.qrcode=new qy(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ub.create()}return e.prototype.start=function(e,t,r,n){var i,o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";i=n||(this.verbose?this.logger.log:function(){});var a=fb.create(t,this.logger);this.clearElement();var s=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=s,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:hb.DEFAULT_WIDTH,c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,d=this.stateManagerProxy.startTransition(jy.SCANNING);return new Promise(function(t,n){var s=l?a.videoConstraints:u.createVideoConstraints(e);if(!s)return d.cancel(),void n("videoConstraints should be defined");var c={};l&&!a.aspectRatio||(c.aspectRatio=a.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,a),u.isScanning=!0,u.foreverScan(a,r,i)}};nb.failIfNotSupported().then(function(e){e.create(s).then(function(e){return e.render(o.element,c,h).then(function(e){u.renderedCamera=e,d.execute(),t(null)}).catch(function(e){d.cancel(),n(e)})}).catch(function(e){d.cancel(),n(Oy.errorGettingUserMedia(e))})}).catch(function(e){d.cancel(),n(Oy.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(jy.PAUSED),this.showPausedState(),(Ry(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(jy.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(jy.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=this;return this.renderedCamera.close().then(function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),function(){if(e.element){var t=document.getElementById(hb.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),t.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var r=this;if(!(e&&e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ry(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var e=o.width,a=o.height,s=document.getElementById(r.elementId),l=s.clientWidth?s.clientWidth:hb.DEFAULT_WIDTH,c=Math.max(s.clientHeight?s.clientHeight:a,hb.FILE_SCAN_MIN_HEIGHT),u=r.computeCanvasDrawConfig(e,a,l,c);if(t){var d=r.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",s.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(o,0,0,e,a,u.x,u.y,u.width,u.height)}var f=hb.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(o.width,u.width),g=Math.max(o.height,u.height),m=p+2*f,w=g+2*f,y=r.createCanvasElement(m,w);s.appendChild(y);var b=y.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=m,b.canvas.height=w,b.drawImage(o,0,0,e,a,f,f,p,g);try{r.qrcode.decodeRobustlyAsync(y).then(function(e){n(Iy.createFromQrcodeResult(e))}).catch(i)}catch(v){i("QR code parse error, error = ".concat(v))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return ab.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!Ny.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[by.QR_CODE,by.AZTEC,by.CODABAR,by.CODE_39,by.CODE_93,by.CODE_128,by.DATA_MATRIX,by.MAXICODE,by.ITF,by.EAN_13,by.EAN_8,by.PDF_417,by.RSS_14,by.RSS_EXPANDED,by.UPC_A,by.UPC_E,by.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,i=e.formatsToSupport;n<i.length;n++){var o=i[n];Sy(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ry(e))return!0;if(!Ry(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(Ry(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!Ry(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,r){var n=this,i=r.qrbox;this.validateQrboxConfig(i);var o,a=this.toQrdimensions(e,t,i),s=function(e){if(e<hb.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(hb.MIN_QR_BOX_SIZE,"px.")};s(a.width),s(a.height),a.width=((o=a.width)>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),o=e),o)},e.prototype.validateQrboxConfig=function(e){if("number"!=typeof e&&"function"!=typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return r},e.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var n=Ry(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(e,t,n);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&i.height<=t,a={x:0,y:0,width:e,height:t},s=o?this.getShadedRegionBounds(e,t,i):a,l=this.createCanvasElement(s.width,s.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=s.width,c.canvas.height=s.height,this.element.append(l),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=s,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Oy.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,Iy.createFromQrcodeResult(t)),r.possiblyUpdateShaders(!0),!0}).catch(function(e){r.possiblyUpdateShaders(!1);var n=Oy.codeParseError(e);return t(n,Ty.createFrom(n)),!1})},e.prototype.foreverScan=function(e,t,r){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,a=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*o,l=this.qrRegion.height*a,c=this.qrRegion.x*o,u=this.qrRegion.y*a;this.context.drawImage(i,c,u,s,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(e,t,r)},n.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(i){i||!0===e.disableFlip?d():(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,r).finally(function(){d()}))}).catch(function(e){n.logger.logError("Error happend while scanning context",e),d()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",r="deviceId",n={user:!0,environment:!0},i="exact",o=function(e){if(e in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var s=Object.keys(e)[0];if(s!==t&&s!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(s!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(o(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(i in c))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(o(c["".concat(i)]))return{facingMode:{exact:c["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,r,n){if(e<=r&&t<=n)return{x:(r-e)/2,y:(n-t)/2,width:e,height:t};var i=e,o=t;return e>r&&(t*=r/e,e=r),t>n&&(e*=n/t,t=n),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(o)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,n)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?hb.BORDER_SHADER_MATCH_COLOR:hb.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,r){var n=e,i=t,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=Ry(r)?"qr-canvas":r,o},e.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(e,t,r,n){if(!(t-n.width<1||r-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-n.width)/2,a=(r-n.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(hb.SHADED_REGION_ELEMENT_ID),t-n.width<11||r-n.height<11)this.hasBorderShaders=!1;else{var s=40;this.insertShaderBorders(i,s,5,-5,null,0,!0),this.insertShaderBorders(i,s,5,-5,null,0,!1),this.insertShaderBorders(i,s,5,null,-5,0,!0),this.insertShaderBorders(i,s,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,r,n,i,o,a){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=hb.BORDER_SHADER_DEFAULT_COLOR,s.style.width="".concat(t,"px"),s.style.height="".concat(r,"px"),null!==n&&(s.style.top="".concat(n,"px")),null!==i&&(s.style.bottom="".concat(i,"px")),a?s.style.left="".concat(o,"px"):s.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),e.appendChild(s)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(sb||(sb={}));const gb=({onClose:e})=>{const t=oe(),[r,n]=re.useState(!1),[i,a]=re.useState(""),s=re.useRef(null),u="qr-reader";re.useEffect(()=>(d(),()=>{f()}),[]);const d=async()=>{try{n(!0),a("");const e=new pb(u);s.current=e,await e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},p,g)}catch(jb){console.error("Error starting scanner:",jb),a("Unable to access camera. Please check permissions."),n(!1)}},f=async()=>{if(s.current)try{await s.current.stop(),s.current.clear()}catch(jb){console.error("Error stopping scanner:",jb)}},p=r=>{console.log("QR Code detected:",r);let n="";if(r.startsWith("artifact:"))n=r.replace("artifact:","");else if(r.includes("/artifact/")){const e=r.match(/\/artifact\/(\d+)/);e&&(n=e[1])}else/^\d+$/.test(r)&&(n=r);n?(f(),e(),t.push(`/artifact/${n}`)):a("Invalid QR code. Please scan a museum artifact QR code.")},g=e=>{},m=async()=>{await f(),e()};return o.jsx("div",{className:"qr-scanner-overlay",children:o.jsxs("div",{className:"qr-scanner-container",children:[o.jsxs("div",{className:"qr-scanner-header",children:[o.jsx("h2",{children:"Scan Artifact QR Code"}),o.jsx(l,{fill:"clear",onClick:m,children:o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>"})})]}),o.jsx("div",{id:u,className:"qr-reader"}),i&&o.jsx("div",{className:"qr-scanner-error",children:o.jsx(h,{color:"danger",children:o.jsx("p",{children:i})})}),o.jsxs("div",{className:"qr-scanner-instructions",children:[o.jsx(c,{icon:gy,className:"scan-icon"}),o.jsx("p",{children:"Point your camera at the QR code"}),o.jsx("p",{className:"small-text",children:"Make sure the QR code is well lit and centered"})]}),o.jsx(l,{expand:"block",color:"light",onClick:m,children:"Cancel"})]})})},mb=({src:e,alt:t,className:r,style:n,onClick:i})=>{const[a,s]=re.useState(!1),[l,c]=re.useState(!1),u=re.useRef(null);return re.useEffect(()=>{if(!u.current)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(c(!0),e.disconnect())})},{rootMargin:"50px"});return e.observe(u.current),()=>{e.disconnect()}},[]),o.jsxs("div",{ref:u,className:r,style:{...n,position:"relative",overflow:"hidden",backgroundColor:"#f0f0f0"},onClick:i,children:[!a&&o.jsx("div",{className:"skeleton skeleton-image",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),l&&o.jsx("img",{src:e,alt:t,loading:"lazy",onLoad:()=>s(!0),style:{width:"100%",height:"100%",objectFit:"cover",opacity:a?1:0,transition:"opacity 0.3s ease-in-out"}})]})},wb=()=>{const[e,t]=re.useState([]);return re.useEffect(()=>{const e=localStorage.getItem("favorites");if(e)try{t(JSON.parse(e))}catch(r){console.error("Error loading favorites:",r)}},[]),{favorites:e,toggleFavorite:e=>{t(t=>{const r=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem("favorites",JSON.stringify(r)),r})},isFavorite:t=>e.includes(t)}},yb=()=>{const e=oe(),{t:t,i18n:r}=he(),[n,i]=re.useState(!1),[h,f]=re.useState(""),[p,P]=re.useState("all"),{toggleFavorite:M,isFavorite:B}=wb(),[j,L]=re.useState([]),[F,z]=re.useState(!0),[U,V]=re.useState(null),H=r.language||"en",q=async()=>{z(!0),V(null);try{const e=await(async()=>{if(!ty())return console.warn("Supabase is not configured. Using fallback data."),[];try{const{data:e,error:t}=await ey.from("artifacts").select("*").order("created_at",{ascending:!1});return t?(console.error("Error fetching artifacts:",t),[]):e||[]}catch(U){return console.error("Error fetching artifacts:",U),[]}})();L(e)}catch(jb){console.error("Error loading artifacts:",jb),V("Failed to load artifacts")}finally{z(!1)}};re.useEffect(()=>{q()},[]);const W=j.map(e=>({id:e.id,title:e[`name_${H}`]||e.name_en,description:e[`description_${H}`]||e.description_en,type:e.type,src:e.image_url})).filter(e=>{const t=e.title.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()),r="all"===p||"images"===p&&"image"===e.type||"videos"===p&&"video"===e.type||"favorites"===p&&B(e.id);return t&&r});return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(b,{})}),o.jsx(v,{children:t("museumGallery")})]})}),o.jsxs(s,{fullscreen:!0,children:[o.jsx(_,{slot:"fixed",onIonRefresh:async e=>{await q(),e.detail.complete()},children:o.jsx(E,{})}),o.jsx(m,{collapse:"condense",children:o.jsx(w,{children:o.jsx(v,{size:"large",children:"Gallery"})})}),o.jsx("div",{style:{padding:"16px 16px 0 16px"},children:o.jsx(S,{value:h,onIonInput:e=>f(e.detail.value),placeholder:t("searchArtifacts"),animated:!0})}),o.jsx("div",{style:{padding:"0 16px 16px 16px"},children:o.jsxs(C,{value:p,onIonChange:e=>P(e.detail.value),children:[o.jsx(x,{value:"all",children:o.jsx(A,{children:t("all")})}),o.jsx(x,{value:"favorites",children:o.jsx(A,{children:t("favorites")})}),o.jsx(x,{value:"images",children:o.jsx(A,{children:t("images")})}),o.jsx(x,{value:"videos",children:o.jsx(A,{children:t("videos")})})]})}),F&&o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:o.jsx(g,{name:"crescent"})}),U&&o.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--ion-color-danger)"},children:[o.jsx("p",{children:U}),o.jsx(l,{onClick:q,children:t("retry")||"Retry"})]}),!F&&!U&&o.jsx(I,{children:o.jsx(T,{children:0===W.length?o.jsx(k,{size:"12",children:o.jsx("div",{style:{textAlign:"center",padding:"40px 20px"},children:o.jsx("p",{children:t("noArtifactsFound")})})}):W.map(t=>o.jsx(k,{size:"12",sizeMd:"6",children:o.jsxs(u,{className:"gallery-card",children:[o.jsx(R,{children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx(O,{onClick:()=>e.push(`/tabs/artifact/${t.id}`),style:{cursor:"pointer",flex:1},children:t.title}),o.jsx(l,{fill:"clear",onClick:e=>{e.stopPropagation(),M(t.id)},children:o.jsx(c,{icon:B(t.id)?sy:ly,color:B(t.id)?"danger":"medium"})})]})}),o.jsxs(d,{children:["image"===t.type?o.jsx(mb,{src:t.src,alt:t.title,className:"gallery-media",onClick:()=>e.push(`/tabs/artifact/${t.id}`)}):o.jsx("div",{onClick:()=>e.push(`/tabs/artifact/${t.id}`),children:o.jsxs("video",{className:"gallery-media",controls:!0,playsInline:!0,children:[o.jsx("source",{src:t.src,type:"video/mp4"}),"Your browser does not support the video tag."]})}),o.jsx("p",{style:{marginTop:"12px",cursor:"pointer"},onClick:()=>e.push(`/tabs/artifact/${t.id}`),children:t.description})]})]})},t.id))})}),o.jsx(N,{vertical:"bottom",horizontal:"end",slot:"fixed",children:o.jsx(D,{onClick:()=>i(!0),children:o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='336' y='336' width='80' height='80' rx='8' ry='8'/><rect x='272' y='272' width='64' height='64' rx='8' ry='8'/><rect x='416' y='416' width='64' height='64' rx='8' ry='8'/><rect x='432' y='272' width='48' height='48' rx='8' ry='8'/><rect x='272' y='432' width='48' height='48' rx='8' ry='8'/><path d='M448 32H304a32 32 0 00-32 32v144a32 32 0 0032 32h144a32 32 0 0032-32V64a32 32 0 00-32-32zm-32 136a8 8 0 01-8 8h-64a8 8 0 01-8-8v-64a8 8 0 018-8h64a8 8 0 018 8zM208 32H64a32 32 0 00-32 32v144a32 32 0 0032 32h144a32 32 0 0032-32V64a32 32 0 00-32-32zm-32 136a8 8 0 01-8 8h-64a8 8 0 01-8-8v-64a8 8 0 018-8h64a8 8 0 018 8zM208 272H64a32 32 0 00-32 32v144a32 32 0 0032 32h144a32 32 0 0032-32V304a32 32 0 00-32-32zm-32 136a8 8 0 01-8 8h-64a8 8 0 01-8-8v-64a8 8 0 018-8h64a8 8 0 018 8z'/></svg>"})})}),n&&o.jsx(gb,{onClose:()=>i(!1)})]})]})};let bb=null,vb=!1;const _b=()=>{const{t:e,i18n:r}=he(),n=re.useRef(null),[i,l]=re.useState(""),[c,h]=re.useState(!0),[p,_]=re.useState([]),[E,S]=re.useState(!0),C=re.useRef(null),x=re.useRef(null),I=r.language||"en";re.useEffect(()=>{(async()=>{S(!0);try{const e=await(async()=>{if(!ty())return console.warn("Supabase is not configured. Using fallback data."),[];try{const{data:e,error:t}=await ey.from("exhibits_3d").select("*").order("created_at",{ascending:!0});return t?(console.error("Error fetching 3D exhibits:",t),[]):e&&0!==e.length?e||[]:(console.warn("No 3D exhibits in database, using fallback data"),[{id:"fallback-1",name_en:"Ancient Globe",name_it:"Globo Antico",name_es:"Globo Antiguo",name_fr:"Globe Ancien",description_en:"A spherical artifact",description_it:"Un artefatto sferico",description_es:"Un artefacto esfrico",description_fr:"Un artefact sphrique",model_type:"primitive",model_data:{shape:"sphere",color:"#8B7355",size:2}},{id:"fallback-2",name_en:"Stone Cube",name_it:"Cubo di Pietra",name_es:"Cubo de Piedra",name_fr:"Cube de Pierre",description_en:"Carved stone cube",description_it:"Cubo di pietra scolpito",description_es:"Cubo de piedra tallado",description_fr:"Cube de pierre sculpt",model_type:"primitive",model_data:{shape:"box",color:"#696969",size:2}}])}catch(e){return console.error("Error fetching 3D exhibits:",e),[]}})();_(e),e.length>0&&!i&&l(e[0].id)}catch(jb){console.error("Error loading exhibits:",jb)}finally{S(!1)}})()},[]),re.useEffect(()=>{n.current&&!E&&(async()=>{const e=await(async()=>(bb||(h(!0),bb=await M(()=>t.import("./babylon-vendor-legacy-BOVKMfoT.js").then(e=>e.i),void 0),vb||(await M(()=>t.import("./babylon-vendor-legacy-BOVKMfoT.js").then(e=>e.d),void 0),vb=!0),h(!1)),bb))();if(!n.current)return;const r=new e.Engine(n.current,!0,{preserveDrawingBuffer:!0,stencil:!0,adaptToDeviceRatio:!0});C.current=r,r.setHardwareScalingLevel(1/window.devicePixelRatio);const o=new e.Scene(r);x.current=o,o.clearColor=new e.Color4(.1,.1,.15,1);const a=new e.ArcRotateCamera("camera",Math.PI/2,Math.PI/2.5,4,e.Vector3.Zero(),o);a.attachControl(n.current,!0),a.lowerRadiusLimit=2,a.upperRadiusLimit=10,new e.HemisphericLight("light",new e.Vector3(0,1,0),o).intensity=.7,new e.DirectionalLight("dirLight",new e.Vector3(-1,-2,-1),o).intensity=.5,k(i,o),r.runRenderLoop(()=>{o.render()}),setTimeout(()=>{r.resize()},100);const s=()=>{r.resize()};window.addEventListener("resize",s)})()},[E]),re.useEffect(()=>{if(x.current&&i){x.current.meshes.forEach(e=>{"camera"!==e.name&&e.dispose()});const r=p.find(e=>e.id===i);var e,t;r&&("gltf"===r.model_type&&null!==(e=r.model_data)&&void 0!==e&&e.url?T(r.model_data.url,x.current):"primitive"===r.model_type&&null!==(t=r.model_data)&&void 0!==t&&t.shape&&k(r.model_data.shape,x.current))}},[i,p]);const T=async(e,t)=>{if(bb)try{const r=await bb.SceneLoader.ImportMeshAsync("","",e,t);if(r.meshes.length>0){const e=r.meshes[0],n=e.getHierarchyBoundingVectors(),i=n.max.subtract(n.min),o=2/Math.max(i.x,i.y,i.z);e.scaling=new bb.Vector3(o,o,o),e.position=bb.Vector3.Zero(),t.registerBeforeRender(()=>{e.rotation.y+=.005})}}catch(r){console.error("Error loading model:",r),k("sphere",t)}},k=(e,t)=>{if(!bb)return;let r;switch(e){case"sphere":r=bb.MeshBuilder.CreateSphere("sphere",{diameter:2,segments:32},t);break;case"box":r=bb.MeshBuilder.CreateBox("box",{size:2},t);break;case"cylinder":r=bb.MeshBuilder.CreateCylinder("cylinder",{height:3,diameter:1},t);break;default:r=bb.MeshBuilder.CreateSphere("sphere",{diameter:2},t)}const n=new bb.StandardMaterial("material",t);return n.diffuseColor=new bb.Color3(.8,.7,.5),n.specularColor=new bb.Color3(.2,.2,.2),n.emissiveColor=new bb.Color3(.1,.1,.1),r.material=n,t.registerBeforeRender(()=>{r.rotation.y+=.005}),r};return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(b,{})}),o.jsx(v,{children:e("exhibits3d")})]})}),o.jsxs(s,{fullscreen:!0,children:[o.jsx(m,{collapse:"condense",children:o.jsx(w,{children:o.jsx(v,{size:"large",children:"3D Exhibits"})})}),o.jsx("div",{className:"exhibits-container",children:E?o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:o.jsx(g,{name:"crescent"})}):o.jsxs(o.Fragment,{children:[o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("interactive3dViewer")})}),o.jsxs(d,{children:[c&&o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:o.jsx(g,{name:"crescent"})}),o.jsx("canvas",{ref:n,className:"babylon-canvas",style:{width:"100%",height:"400px",borderRadius:"8px",touchAction:"none",display:c?"none":"block"}}),o.jsx("p",{style:{marginTop:"12px",textAlign:"center"},children:e("useMouseToRotate")||"Use mouse/touch to rotate and zoom"})]})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("selectExhibit")})}),o.jsx(d,{children:0===p.length?o.jsx("p",{style:{textAlign:"center",padding:"20px"},children:e("noExhibitsFound")||"No exhibits found"}):o.jsx(P,{children:p.map(e=>{const t=e[`name_${I}`]||e.name_en,r=e[`description_${I}`]||e.description_en;return o.jsx(f,{button:!0,onClick:()=>l(e.id),color:i===e.id?"primary":"",children:o.jsxs(A,{children:[o.jsx("h2",{children:t}),o.jsx("p",{children:r})]})},e.id)})})})]})]})})]})]})},Eb=()=>{const{t:e}=he(),t=re.useRef(null),[r,n]=re.useState(!1),[i,p]=re.useState(!1),g=re.useRef(null),_=re.useRef(null);re.useEffect(()=>{if(E(),!t.current)return;const e=new me(t.current,!0);g.current=e;const r=new we(e);_.current=r,r.clearColor=new ye(.05,.05,.1,1),new be("camera",Math.PI/2,Math.PI/2.5,5,ve.Zero(),r).attachControl(t.current,!0),new _e("light",new ve(0,1,0),r).intensity=.8;const n=Ee.CreateTorusKnot("artifact",{radius:.5,tube:.2,radialSegments:128,tubularSegments:64},r),i=new Se("artifactMat",r);i.diffuseColor=new Ce(.9,.7,.3),i.specularColor=new Ce(1,1,1),i.specularPower=32,n.material=i,r.registerBeforeRender(()=>{n.rotation.y+=.01}),e.runRenderLoop(()=>{r.render()});const o=()=>{e.resize()};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),r.dispose(),e.dispose()}},[]);const E=async()=>{if("xr"in navigator)try{const e=await navigator.xr.isSessionSupported("immersive-ar");n(e)}catch(e){console.log("AR not supported:",e),n(!1)}else n(!1)};return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(b,{})}),o.jsx(v,{children:e("arView")})]})}),o.jsxs(s,{fullscreen:!0,children:[o.jsx(m,{collapse:"condense",children:o.jsx(w,{children:o.jsx(v,{size:"large",children:"AR View"})})}),o.jsxs("div",{className:"ar-container",children:[o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:"Augmented Reality Viewer"})}),o.jsxs(d,{children:[o.jsx("canvas",{ref:t,className:"ar-canvas",style:{width:"100%",height:"400px",borderRadius:"8px",touchAction:"none"}}),o.jsx("div",{style:{marginTop:"16px",textAlign:"center"},children:r?o.jsxs(l,{expand:"block",onClick:async()=>{if(_.current&&r)try{const e=await _.current.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar"}});e.baseExperience&&(p(!0),await e.baseExperience.enterXRAsync("immersive-ar","unbounded",e.renderTarget),e.baseExperience.onStateChangedObservable.add(e=>{e===xe.NOT_IN_XR&&p(!1)}))}catch(e){console.error("Error starting AR session:",e),alert("Could not start AR session. Make sure you are using HTTPS and have camera permissions.")}else alert("AR is not supported on this device/browser")},disabled:i,children:[o.jsx(c,{slot:"start",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='272' r='64'/><path d='M432 144h-59c-3 0-6.72-1.94-9.62-5l-25.94-40.94a15.52 15.52 0 00-1.37-1.85C327.11 85.76 315 80 302 80h-92c-13 0-25.11 5.76-34.07 16.21a15.52 15.52 0 00-1.37 1.85l-25.94 41c-2.22 2.42-5.34 5-8.62 5v-8a16 16 0 00-16-16h-24a16 16 0 00-16 16v8h-4a48.05 48.05 0 00-48 48V384a48.05 48.05 0 0048 48h352a48.05 48.05 0 0048-48V192a48.05 48.05 0 00-48-48zM256 368a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>"}),i?"AR Session Active":"Start AR Experience"]}):o.jsx(h,{color:"warning",children:o.jsxs("p",{children:[o.jsx(c,{icon:uy})," AR is not supported on this device/browser"]})})})]})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:"AR Requirements"})}),o.jsx(d,{children:o.jsxs(P,{children:[o.jsx(f,{children:o.jsxs(A,{children:[o.jsx("h3",{children:"HTTPS Required"}),o.jsx("p",{children:"AR features require a secure connection (HTTPS)"})]})}),o.jsx(f,{children:o.jsxs(A,{children:[o.jsx("h3",{children:"Camera Permission"}),o.jsx("p",{children:"Allow camera access when prompted"})]})}),o.jsx(f,{children:o.jsxs(A,{children:[o.jsx("h3",{children:"Compatible Device"}),o.jsx("p",{children:"AR works on ARCore (Android) and ARKit (iOS) devices"})]})}),o.jsx(f,{children:o.jsxs(A,{children:[o.jsx("h3",{children:"Modern Browser"}),o.jsx("p",{children:"Chrome, Safari, or Edge with WebXR support"})]})})]})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:"How to Use AR"})}),o.jsx(d,{children:o.jsxs("ol",{children:[o.jsx("li",{children:'Click "Start AR Experience" button'}),o.jsx("li",{children:"Grant camera permissions when prompted"}),o.jsx("li",{children:"Point your camera at a flat surface"}),o.jsx("li",{children:"The 3D artifact will appear in your space"}),o.jsx("li",{children:"Walk around to view from different angles"})]})})]})]})]})]})},Sb=()=>{const{t:e,i18n:t}=he(),[r,n]=re.useState([]),[i,h]=re.useState(!0),[p,_]=re.useState(0),[E,S]=re.useState(null),[C,x]=re.useState(0),[I,T]=re.useState(!1),[k,N]=re.useState([]),[D,P]=re.useState(!1),M=t.language||"en";re.useEffect(()=>{(async()=>{h(!0);try{const e=await(async()=>{if(!ty())return console.warn("Supabase is not configured. Using fallback data."),[];try{const{data:e,error:t}=await ey.from("quiz_questions").select("*").eq("is_active",!0).order("order_index",{ascending:!0});return t?(console.error("Error fetching quiz questions:",t),[]):e||[]}catch(e){return console.error("Error fetching quiz questions:",e),[]}})();n(e),N(new Array(e.length).fill(!1))}catch(jb){console.error("Error loading quiz questions:",jb)}finally{h(!1)}})()},[]);const z=()=>{const t=C/r.length*100;return 100===t?{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 80h-60.1a4 4 0 01-4-4V63.92a32 32 0 00-32-31.92l-223.79.26a32 32 0 00-31.94 31.93V76a4 4 0 01-4 4H48a16 16 0 00-16 16v16c0 54.53 30 112.45 76.52 125.35a7.82 7.82 0 015.55 5.9c5.77 26.89 23.52 52.5 51.41 73.61 20.91 15.83 45.85 27.5 68.27 32.48a8 8 0 016.25 7.8V444a4 4 0 01-4 4h-59.55c-8.61 0-16 6.62-16.43 15.23A16 16 0 00176 480h159.55c8.61 0 16-6.62 16.43-15.23A16 16 0 00336 448h-60a4 4 0 01-4-4v-86.86a8 8 0 016.25-7.8c22.42-5 47.36-16.65 68.27-32.48 27.89-21.11 45.64-46.72 51.41-73.61a7.82 7.82 0 015.55-5.9C450 224.45 480 166.53 480 112V96a16 16 0 00-16-16zM112 198.22a4 4 0 01-6 3.45c-10.26-6.11-17.75-15.37-22.14-21.89-11.91-17.69-19-40.67-19.79-63.63a4 4 0 014-4.15h40a4 4 0 014 4c-.02 27.45-.07 58.87-.07 82.22zm316.13-18.44c-4.39 6.52-11.87 15.78-22.13 21.89a4 4 0 01-6-3.46c0-26.51 0-56.63-.05-82.21a4 4 0 014-4h40a4 4 0 014 4.15c-.79 22.96-7.9 45.94-19.81 63.63z'/></svg>",color:"warning",text:e("perfectScore")}:t>=80?{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M394 480a16 16 0 01-9.39-3L256 383.76 127.39 477a16 16 0 01-24.55-18.08L153 310.35 23 221.2a16 16 0 019-29.2h160.38l48.4-148.95a16 16 0 0130.44 0l48.4 149H480a16 16 0 019.05 29.2L359 310.35l50.13 148.53A16 16 0 01394 480z'/></svg>",color:"success",text:e("excellent")}:t>=60?{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M269 335.61q-6.33.47-12.78.47c-5.23 0-10.4-.24-15.51-.69a176.11 176.11 0 01-127.67-72.94 4 4 0 00-6.77.35l-72 129.4c-2.74 5-3.17 11-.28 15.88A16.78 16.78 0 0048.22 416h78a15.28 15.28 0 0113.62 7.33L178.5 488a16.26 16.26 0 0013.75 8c5.94-.33 12.09-4.19 14.56-9.6l66.11-145.15a4 4 0 00-3.92-5.64zM477.64 391.88l-71.53-129.17a4 4 0 00-6.74-.36 176.5 176.5 0 01-78.31 61.42 16.09 16.09 0 00-8.72 8.25l-36.86 81.1a7.92 7.92 0 000 6.6l30.27 66.59c2.45 5.41 8.59 9.36 14.52 9.69a16.3 16.3 0 0013.7-8.12l38.53-64.58c2.89-4.85 8.13-7.33 13.78-7.3h78.77c6.67 0 11.72-3.48 14-10a16.92 16.92 0 00-1.41-14.12z'/><ellipse cx='256.26' cy='160' rx='48.01' ry='48'/><path d='M256.26 16c-79.42 0-144 64.59-144 144s64.61 144 144 144 144-64.6 144-144-64.59-144-144-144zm0 224a80 80 0 1180-80 80.1 80.1 0 01-80 80z'/></svg>",color:"primary",text:e("goodJob")}:{icon:iy,color:"medium",text:e("keepLearning")}},U=(p+1)/r.length;if(i)return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(b,{})}),o.jsx(v,{children:e("museumQuiz")})]})}),o.jsx(s,{children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:o.jsx(g,{name:"crescent"})})})]});if(0===r.length)return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(b,{})}),o.jsx(v,{children:e("museumQuiz")})]})}),o.jsx(s,{children:o.jsx("div",{style:{textAlign:"center",padding:"40px"},children:o.jsx("p",{children:e("noQuestionsFound")||"No quiz questions available"})})})]});const V=r[p],H=V[`question_${M}`]||V.question_en,q=[V[`option1_${M}`]||V.option1_en,V[`option2_${M}`]||V.option2_en,V[`option3_${M}`]||V.option3_en,V[`option4_${M}`]||V.option4_en],W=V[`explanation_${M}`]||V.explanation_en;return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(b,{})}),o.jsx(v,{children:e("museumQuiz")})]})}),o.jsx(s,{fullscreen:!0,children:o.jsx("div",{className:"quiz-container",children:I?o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{style:{textAlign:"center"},children:e("quizComplete")})}),o.jsx(d,{children:o.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[o.jsx(c,{icon:z().icon,style:{fontSize:"80px"},color:z().color}),o.jsx("h2",{children:z().text}),o.jsxs("h1",{style:{fontSize:"48px",margin:"20px 0"},children:[C," / ",r.length]}),o.jsxs("p",{style:{fontSize:"18px",color:"var(--ion-color-medium)"},children:[e("youScored")," ",Math.round(C/r.length*100),"%"]}),o.jsxs("div",{style:{marginTop:"30px"},children:[o.jsx("h3",{children:e("yourBadges")}),o.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[C>=3&&o.jsx(F,{color:"primary",style:{padding:"10px 15px",fontSize:"14px"},children:e("scholarBadge")}),C>=4&&o.jsx(F,{color:"success",style:{padding:"10px 15px",fontSize:"14px"},children:e("expertBadge")}),5===C&&o.jsx(F,{color:"warning",style:{padding:"10px 15px",fontSize:"14px"},children:e("masterBadge")})]})]}),o.jsx(l,{expand:"block",onClick:()=>{_(0),S(null),x(0),T(!1),N(new Array(r.length).fill(!1)),P(!1)},style:{marginTop:"30px"},children:e("tryAgain")})]})})]}):o.jsxs(o.Fragment,{children:[o.jsx(u,{children:o.jsxs(d,{children:[o.jsxs("div",{style:{marginBottom:"8px",display:"flex",justifyContent:"space-between"},children:[o.jsxs("span",{children:[e("question")," ",p+1," ",e("of")," ",r.length]}),o.jsxs("span",{children:[e("score"),": ",C]})]}),o.jsx(B,{value:U})]})}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:H})}),o.jsxs(d,{children:[o.jsx(j,{value:E,onIonChange:e=>{return t=e.detail.value,void S(t);var t},children:q.map((e,t)=>o.jsxs(f,{lines:"none",children:[o.jsx(L,{slot:"start",value:t,disabled:D}),o.jsx(A,{className:"ion-text-wrap",children:e}),D&&t===V.correct_answer&&o.jsx(c,{icon:iy,color:"success",slot:"end"}),D&&t===E&&t!==V.correct_answer&&o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>",color:"danger",slot:"end"})]},t))}),D&&o.jsx("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"var(--ion-color-light)",borderRadius:"8px"},children:o.jsxs("p",{style:{margin:0},children:[o.jsxs("strong",{children:[e("explanation"),":"]})," ",W]})}),o.jsx("div",{style:{marginTop:"20px",display:"flex",gap:"10px"},children:D?o.jsx(l,{expand:"block",onClick:()=>{P(!1),S(null),p<r.length-1?_(p+1):T(!0)},style:{flex:1},children:p<r.length-1?e("nextQuestion"):e("viewResults")}):o.jsx(l,{expand:"block",onClick:()=>{if(null===E)return;E===r[p].correct_answer&&x(C+1);const e=[...k];e[p]=!0,N(e),P(!0)},disabled:null===E,style:{flex:1},children:e("submitAnswer")})})]})]})]})})})]})},Cb=({audioUrl:e="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",title:t="Audio Guide"})=>{const r=re.useRef(null),[n,i]=re.useState(!1),[a,s]=re.useState(0),[f,p]=re.useState(0),[g,m]=re.useState(1),[w,y]=re.useState(!1);re.useEffect(()=>{const e=r.current;if(!e)return;const t=()=>s(e.currentTime),n=()=>p(e.duration),o=()=>i(!1);return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",n),e.addEventListener("ended",o),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",n),e.removeEventListener("ended",o)}},[]);const b=e=>isNaN(e)?"0:00":`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return o.jsxs(u,{className:"audio-guide-card",children:[o.jsx(R,{children:o.jsxs(O,{children:[" ",t]})}),o.jsxs(d,{children:[o.jsx("audio",{ref:r,src:e,preload:"metadata"}),o.jsxs("div",{className:"audio-controls",children:[o.jsx(l,{fill:"solid",size:"large",onClick:()=>{const e=r.current;e&&(n?e.pause():e.play(),i(!n))},className:"play-button",children:o.jsx(c,{icon:n?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M208 432h-48a16 16 0 01-16-16V96a16 16 0 0116-16h48a16 16 0 0116 16v320a16 16 0 01-16 16zM352 432h-48a16 16 0 01-16-16V96a16 16 0 0116-16h48a16 16 0 0116 16v320a16 16 0 01-16 16z'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z'/></svg>"})}),o.jsxs("div",{className:"audio-progress",children:[o.jsxs("div",{className:"time-display",children:[o.jsx(h,{children:b(a)}),o.jsx(h,{children:b(f)})]}),o.jsx(z,{min:0,max:f||100,value:a,onIonInput:e=>(e=>{const t=r.current;t&&(t.currentTime=e,s(e))})(e.detail.value),className:"progress-bar"})]}),o.jsxs("div",{className:"volume-control",children:[o.jsx(l,{fill:"clear",onClick:()=>{const e=r.current;e&&(w?(e.volume=g||.5,y(!1)):(e.volume=0,y(!0)))},children:o.jsx(c,{icon:w?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-miterlimit='10' d='M416 432L64 80' class='ionicon-fill-none ionicon-stroke-width'/><path d='M243.33 98.86a23.89 23.89 0 00-25.55 1.82l-.66.51-28.52 23.35a8 8 0 00-.59 11.85l54.33 54.33a8 8 0 0013.66-5.66v-64.49a24.51 24.51 0 00-12.67-21.71zM251.33 335.29L96.69 180.69A16 16 0 0085.38 176H56a24 24 0 00-24 24v112a24 24 0 0024 24h69.76l92 75.31a23.9 23.9 0 0025.87 1.69A24.51 24.51 0 00256 391.45v-44.86a16 16 0 00-4.67-11.3zM352 256c0-24.56-5.81-47.87-17.75-71.27a16 16 0 10-28.5 14.55C315.34 218.06 320 236.62 320 256q0 4-.31 8.13a8 8 0 002.32 6.25l14.36 14.36a8 8 0 0013.55-4.31A146 146 0 00352 256zM416 256c0-51.18-13.08-83.89-34.18-120.06a16 16 0 00-27.64 16.12C373.07 184.44 384 211.83 384 256c0 23.83-3.29 42.88-9.37 60.65a8 8 0 001.9 8.26L389 337.4a8 8 0 0013.13-2.79C411 311.76 416 287.26 416 256z'/><path d='M480 256c0-74.25-20.19-121.11-50.51-168.61a16 16 0 10-27 17.22C429.82 147.38 448 189.5 448 256c0 46.19-8.43 80.27-22.43 110.53a8 8 0 001.59 9l11.92 11.92a8 8 0 0012.92-2.16C471.6 344.9 480 305 480 256z'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z'/><path d='M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z'/><path d='M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z'/></svg>"})}),o.jsx(z,{min:0,max:1,step:.1,value:w?0:g,onIonInput:e=>(e=>{const t=r.current;t&&(t.volume=e,m(e),y(0===e))})(e.detail.value),className:"volume-slider"})]})]}),o.jsx("div",{className:"audio-info",children:o.jsx("p",{children:o.jsx("small",{children:"Listen to the audio guide to learn more about this artifact's history, significance, and the story behind its discovery."})})})]})]})},xb=()=>{const[e,t]=re.useState(!1);re.useEffect(()=>{const e=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches,i="dark"===e||!e&&n;t(i),r(i);const o=window.matchMedia("(prefers-color-scheme: dark)"),a=e=>{localStorage.getItem("theme")||(t(e.matches),r(e.matches))};return o.addEventListener("change",a),()=>o.removeEventListener("change",a)},[]);const r=e=>{document.body.classList.toggle("dark",e)};return o.jsx(l,{fill:"clear",onClick:()=>{const n=!e;t(n),r(n),localStorage.setItem("theme",n?"dark":"light")},title:e?"Switch to light mode":"Switch to dark mode",children:o.jsx(c,{icon:e?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 118a22 22 0 01-22-22V48a22 22 0 0144 0v48a22 22 0 01-22 22zM256 486a22 22 0 01-22-22v-48a22 22 0 0144 0v48a22 22 0 01-22 22zM369.14 164.86a22 22 0 01-15.56-37.55l33.94-33.94a22 22 0 0131.11 31.11l-33.94 33.94a21.93 21.93 0 01-15.55 6.44zM108.92 425.08a22 22 0 01-15.55-37.56l33.94-33.94a22 22 0 1131.11 31.11l-33.94 33.94a21.94 21.94 0 01-15.56 6.45zM464 278h-48a22 22 0 010-44h48a22 22 0 010 44zM96 278H48a22 22 0 010-44h48a22 22 0 010 44zM403.08 425.08a21.94 21.94 0 01-15.56-6.45l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.55 37.56zM142.86 164.86a21.89 21.89 0 01-15.55-6.44l-33.94-33.94a22 22 0 0131.11-31.11l33.94 33.94a22 22 0 01-15.56 37.55zM256 358a102 102 0 11102-102 102.12 102.12 0 01-102 102z'/></svg>":"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M264 480A232 232 0 0132 248c0-94 54-178.28 137.61-214.67a16 16 0 0121.06 21.06C181.07 76.43 176 104.66 176 136c0 110.28 89.72 200 200 200 31.34 0 59.57-5.07 81.61-14.67a16 16 0 0121.06 21.06C442.28 426 358 480 264 480z'/></svg>"})})},Ab=()=>{const{i18n:e}=he();return o.jsxs(U,{value:e.language,onIonChange:t=>{return r=t.detail.value,e.changeLanguage(r),void localStorage.setItem("language",r);var r},interface:"popover",style:{minWidth:"80px"},children:[o.jsx(V,{value:"en",children:" EN"}),o.jsx(V,{value:"it",children:" IT"}),o.jsx(V,{value:"es",children:" ES"}),o.jsx(V,{value:"fr",children:" FR"})]})},Ib=()=>{const{id:e}=le(),{t:t,i18n:r}=he(),n=oe(),{toggleFavorite:i,isFavorite:h}=wb(),[f,p]=re.useState(null),[b,_]=re.useState(!0),[E,S]=re.useState(null),C=r.language||"en";if(re.useEffect(()=>{(async()=>{if(e){_(!0),S(null);try{const t=await(async e=>{if(!ty())return console.warn("Supabase is not configured."),null;try{const{data:t,error:r}=await ey.from("artifacts").select("*").eq("id",e).single();return r?(console.error("Error fetching artifact:",r),null):t}catch(E){return console.error("Error fetching artifact:",E),null}})(e);t?p(t):S("Artifact not found")}catch(jb){console.error("Error loading artifact:",jb),S("Failed to load artifact")}finally{_(!1)}}})()},[e]),b)return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(H,{defaultHref:"/gallery"})}),o.jsx(v,{children:t("artifactDetails")})]})}),o.jsx(s,{children:o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:o.jsx(g,{name:"crescent"})})})]});if(E||!f)return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(H,{defaultHref:"/gallery"})}),o.jsx(v,{children:"Artifact Not Found"})]})}),o.jsx(s,{children:o.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[o.jsx("p",{children:E||"Sorry, this artifact could not be found."}),o.jsx(l,{onClick:()=>n.push("/gallery"),children:t("backToGallery")||"Back to Gallery"})]})})]});const x=f[`name_${C}`]||f.name_en,A=f[`description_${C}`]||f.description_en;return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsx(y,{slot:"start",children:o.jsx(H,{defaultHref:"/gallery"})}),o.jsx(v,{children:t("artifactDetails")}),o.jsxs(y,{slot:"end",children:[o.jsx(l,{onClick:()=>i(f.id),children:o.jsx(c,{icon:h(f.id)?sy:ly,color:h(f.id)?"danger":"medium"})}),o.jsx(l,{onClick:async()=>{if(navigator.share)try{await navigator.share({title:x,text:A,url:window.location.href})}catch(jb){console.log("Error sharing:",jb)}},children:o.jsx(c,{icon:my})}),o.jsx(Ab,{}),o.jsx(xb,{})]})]})}),o.jsx(s,{fullscreen:!0,children:o.jsxs("div",{className:"artifact-detail-container",children:[o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:x})}),o.jsx(d,{children:"image"===f.type?o.jsx("img",{src:f.image_url,alt:x,className:"artifact-detail-image"}):o.jsxs("video",{controls:!0,className:"artifact-detail-video",children:[o.jsx("source",{src:f.image_url,type:"video/mp4"}),"Your browser does not support the video tag."]})})]}),f.audio_guide_url&&o.jsx(Cb,{title:"Audio Guide",audioUrl:f.audio_guide_url}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsxs(O,{children:[o.jsx(c,{icon:uy})," Description"]})}),o.jsx(d,{children:o.jsx("p",{className:"detailed-description",children:A})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:"Artifact Information"})}),o.jsx(d,{children:o.jsxs("div",{className:"info-section",children:[f.period&&o.jsxs("div",{className:"info-item",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M480 128a64 64 0 00-64-64h-16V48.45c0-8.61-6.62-16-15.23-16.43A16 16 0 00368 48v16H144V48.45c0-8.61-6.62-16-15.23-16.43A16 16 0 00112 48v16H96a64 64 0 00-64 64v12a4 4 0 004 4h440a4 4 0 004-4zM32 416a64 64 0 0064 64h320a64 64 0 0064-64V179a3 3 0 00-3-3H35a3 3 0 00-3 3zm344-208a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm-80-80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm-80-80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24zm-80-80a24 24 0 11-24 24 24 24 0 0124-24zm0 80a24 24 0 11-24 24 24 24 0 0124-24z'/></svg>",className:"info-icon"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Period:"}),o.jsx("p",{children:f.period})]})]}),f.origin&&o.jsxs("div",{className:"info-item",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='192' r='32'/><path d='M256 32c-88.22 0-160 68.65-160 153 0 40.17 18.31 93.59 54.42 158.78 29 52.34 62.55 99.67 80 123.22a31.75 31.75 0 0051.22 0c17.42-23.55 51-70.88 80-123.22C397.69 278.61 416 225.19 416 185c0-84.35-71.78-153-160-153zm0 224a64 64 0 1164-64 64.07 64.07 0 01-64 64z'/></svg>",className:"info-icon"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Origin:"}),o.jsx("p",{children:f.origin})]})]}),f.material&&o.jsxs("div",{className:"info-item",children:[o.jsx("strong",{children:"Material:"}),o.jsx("p",{children:f.material})]}),f.dimensions&&o.jsxs("div",{className:"info-item",children:[o.jsx("strong",{children:"Dimensions:"}),o.jsx("p",{children:f.dimensions})]}),f.discovered&&o.jsxs("div",{className:"info-item",children:[o.jsx("strong",{children:"Discovered:"}),o.jsx("p",{children:f.discovered})]}),f.condition&&o.jsxs("div",{className:"info-item",children:[o.jsx("strong",{children:"Condition:"}),o.jsx("p",{children:f.condition})]})]})})]})]})})]})},Tb=()=>{const{t:e}=he();return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsxs(y,{slot:"start",children:[o.jsx(b,{}),o.jsx(H,{defaultHref:"/gallery"})]}),o.jsx(v,{children:e("help")})]})}),o.jsx(s,{fullscreen:!0,className:"help-content",children:o.jsxs("div",{className:"help-container",children:[o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("helpWelcome")})}),o.jsx(d,{children:o.jsx("p",{children:e("helpIntro")})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("helpFeatures")})}),o.jsx(d,{children:o.jsxs(P,{children:[o.jsxs(f,{children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M432 112V96a48.14 48.14 0 00-48-48H64a48.14 48.14 0 00-48 48v256a48.14 48.14 0 0048 48h16' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='128' width='400' height='336' rx='45.99' ry='45.99' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><ellipse cx='372.92' cy='219.64' rx='30.77' ry='30.55' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M342.15 372.17L255 285.78a30.93 30.93 0 00-42.18-1.21L96 387.64M265.23 464l118.59-117.73a31 31 0 0141.46-1.87L496 402.91' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",slot:"start",color:"primary"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpGalleryTitle")}),o.jsx("p",{children:e("helpGalleryDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:ay,slot:"start",color:"secondary"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("help3DTitle")}),o.jsx("p",{children:e("help3DDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='336' y='336' width='80' height='80' rx='8' ry='8'/><rect x='272' y='272' width='64' height='64' rx='8' ry='8'/><rect x='416' y='416' width='64' height='64' rx='8' ry='8'/><rect x='432' y='272' width='48' height='48' rx='8' ry='8'/><rect x='272' y='432' width='48' height='48' rx='8' ry='8'/><rect x='336' y='96' width='80' height='80' rx='8' ry='8'/><rect x='288' y='48' width='176' height='176' rx='16' ry='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='96' width='80' height='80' rx='8' ry='8'/><rect x='48' y='48' width='176' height='176' rx='16' ry='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='96' y='336' width='80' height='80' rx='8' ry='8'/><rect x='48' y='288' width='176' height='176' rx='16' ry='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",slot:"start",color:"tertiary"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpQRTitle")}),o.jsx("p",{children:e("helpQRDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M350.54 148.68l-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 00-32 32v192a32 32 0 0032 32h352a32 32 0 0032-32V192a32 32 0 00-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='272' r='80' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M124 158v-22h-24v22' class='ionicon-fill-none ionicon-stroke-width'/></svg>",slot:"start",color:"success"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpARTitle")}),o.jsx("p",{children:e("helpARDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 00352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 00-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88 26 9 49.25-9.61 71.27-37 25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16 41.02-14.01 40.44-79.13 21.43-165.04z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='292' cy='224' r='20'/><path d='M336 288a20 20 0 1120-19.95A20 20 0 01336 288z'/><circle cx='336' cy='180' r='20'/><circle cx='380' cy='224' r='20'/><path stroke-linecap='round' stroke-linejoin='round' d='M160 176v96M208 224h-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",slot:"start",color:"warning"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpQuizTitle")}),o.jsx("p",{children:e("helpQuizDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:ly,slot:"start",color:"danger"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpFavoritesTitle")}),o.jsx("p",{children:e("helpFavoritesDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M338.29 338.29L448 448' class='ionicon-fill-none ionicon-stroke-width'/></svg>",slot:"start",color:"medium"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpSearchTitle")}),o.jsx("p",{children:e("helpSearchDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:my,slot:"start",color:"primary"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpShareTitle")}),o.jsx("p",{children:e("helpShareDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:dy,slot:"start",color:"secondary"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpLanguageTitle")}),o.jsx("p",{children:e("helpLanguageDesc")})]})]}),o.jsxs(f,{children:[o.jsx(c,{icon:py,slot:"start",color:"tertiary"}),o.jsxs(A,{children:[o.jsx("h2",{children:e("helpThemeTitle")}),o.jsx("p",{children:e("helpThemeDesc")})]})]})]})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("helpTips")})}),o.jsx(d,{children:o.jsxs("ul",{className:"help-tips-list",children:[o.jsx("li",{children:e("helpTip1")}),o.jsx("li",{children:e("helpTip2")}),o.jsx("li",{children:e("helpTip3")}),o.jsx("li",{children:e("helpTip4")}),o.jsx("li",{children:e("helpTip5")})]})})]})]})})]})},kb=()=>{const{t:e}=he();return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsxs(y,{slot:"start",children:[o.jsx(b,{}),o.jsx(H,{defaultHref:"/gallery"})]}),o.jsx(v,{children:e("about")})]})}),o.jsx(s,{fullscreen:!0,className:"about-content",children:o.jsxs("div",{className:"about-container",children:[o.jsxs(u,{className:"about-hero",children:[o.jsxs(R,{children:[o.jsx("div",{className:"about-logo",children:""}),o.jsx(O,{className:"about-title",children:e("aboutAppName")}),o.jsx("p",{className:"about-version",children:e("aboutVersion")})]}),o.jsx(d,{children:o.jsx("p",{className:"about-description",children:e("aboutDescription")})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("aboutFeatures")})}),o.jsx(d,{children:o.jsxs("div",{className:"features-grid",children:[o.jsxs("div",{className:"feature-item",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 48c-58.07 0-112.67 93.13-112.67 208S197.93 464 256 464s112.67-93.13 112.67-208S314.07 48 256 48z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M117.33 117.33c38.24 27.15 86.38 43.34 138.67 43.34s100.43-16.19 138.67-43.34M394.67 394.67c-38.24-27.15-86.38-43.34-138.67-43.34s-100.43 16.19-138.67 43.34' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-miterlimit='10' d='M256 48v416M464 256H48' class='ionicon-fill-none ionicon-stroke-width'/></svg>",color:"primary"}),o.jsx("h3",{children:e("aboutFeature1Title")}),o.jsx("p",{children:e("aboutFeature1Desc")})]}),o.jsxs("div",{className:"feature-item",children:[o.jsx(c,{icon:ay,color:"secondary"}),o.jsx("h3",{children:e("aboutFeature2Title")}),o.jsx("p",{children:e("aboutFeature2Desc")})]}),o.jsxs("div",{className:"feature-item",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='128' y='16' width='256' height='480' rx='48' ry='48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M176 16h24a8 8 0 018 8h0a16 16 0 0016 16h64a16 16 0 0016-16h0a8 8 0 018-8h24' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",color:"tertiary"}),o.jsx("h3",{children:e("aboutFeature3Title")}),o.jsx("p",{children:e("aboutFeature3Desc")})]}),o.jsxs("div",{className:"feature-item",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M93.72 183.25C49.49 198.05 16 233.1 16 288c0 66 54 112 120 112h184.37M467.82 377.74C485.24 363.3 496 341.61 496 312c0-59.82-53-85.76-96-88-8.89-89.54-71-144-144-144-26.16 0-48.79 6.93-67.6 18.14' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M448 448L64 64' class='ionicon-fill-none ionicon-stroke-width'/></svg>",color:"success"}),o.jsx("h3",{children:e("aboutFeature4Title")}),o.jsx("p",{children:e("aboutFeature4Desc")})]})]})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("aboutTechnology")})}),o.jsx(d,{children:o.jsxs("div",{className:"tech-stack",children:[o.jsxs(q,{color:"primary",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M410.66 180.72q-7.67-2.62-15.45-4.88 1.29-5.25 2.38-10.56c11.7-56.9 4.05-102.74-22.06-117.83-25-14.48-66 .61-107.36 36.69q-6.1 5.34-11.95 11-3.9-3.76-8-7.36c-43.35-38.58-86.8-54.83-112.88-39.69-25 14.51-32.43 57.6-21.9 111.53q1.58 8 3.55 15.93a320.85 320.85 0 00-17.77 5.6C48.46 198.9 16 226.73 16 255.59c0 29.82 34.84 59.72 87.77 77.85q6.44 2.19 13 4.07-2.13 8.49-3.77 17.17c-10 53-2.2 95.07 22.75 109.49 25.77 14.89 69-.41 111.14-37.31q5-4.38 10-9.25 6.32 6.11 13 11.86c40.8 35.18 81.09 49.39 106 34.93 25.75-14.94 34.12-60.14 23.25-115.13q-1.25-6.3-2.88-12.86 4.56-1.35 8.93-2.79c55-18.27 90.83-47.81 90.83-78-.02-29-33.52-57.01-85.36-74.9zm-129-81.08c35.43-30.91 68.55-43.11 83.65-34.39 16.07 9.29 22.32 46.75 12.22 95.88q-1 4.8-2.16 9.57a487.83 487.83 0 00-64.18-10.16 481.27 481.27 0 00-40.57-50.75q5.38-5.22 11.02-10.15zM157.73 280.25q6.51 12.6 13.61 24.89 7.23 12.54 15.07 24.71a435.28 435.28 0 01-44.24-7.13c4.24-13.72 9.46-27.97 15.56-42.47zm0-48.33c-6-14.19-11.08-28.15-15.25-41.63 13.7-3.07 28.3-5.58 43.52-7.48q-7.65 11.94-14.72 24.23t-13.58 24.88zm10.9 24.17q9.48-19.77 20.42-38.78 10.93-19 23.27-37.13c14.28-1.08 28.92-1.65 43.71-1.65s29.52.57 43.79 1.66q12.21 18.09 23.13 37t20.69 38.6Q334 275.63 323 294.73q-10.91 19-23 37.24c-14.25 1-29 1.55-44 1.55s-29.47-.47-43.46-1.38q-12.43-18.19-23.46-37.29t-20.48-38.76zM340.75 305q7.25-12.58 13.92-25.49a440.41 440.41 0 0116.12 42.32 434.44 434.44 0 01-44.79 7.65q7.62-12.09 14.75-24.48zm13.72-73.07q-6.64-12.65-13.81-25-7-12.18-14.59-24.06c15.31 1.94 30 4.52 43.77 7.67a439.89 439.89 0 01-15.37 41.39zm-98.24-107.45a439.75 439.75 0 0128.25 34.18q-28.35-1.35-56.74 0c9.33-12.34 18.88-23.79 28.49-34.18zM145.66 65.86c16.06-9.32 51.57 4 89 37.27 2.39 2.13 4.8 4.36 7.2 6.67A491.37 491.37 0 00201 160.51a499.12 499.12 0 00-64.06 10q-1.83-7.36-3.3-14.82c-9.05-46.23-3.06-81.08 12.02-89.83zm-23.41 251.85q-6-1.71-11.85-3.71c-23.4-8-42.73-18.44-56-29.81-11.88-10.19-17.9-20.36-17.9-28.6 0-17.51 26.06-39.85 69.52-55q8.19-2.85 16.52-5.21a493.54 493.54 0 0023.4 60.75 502.46 502.46 0 00-23.69 61.58zm111.13 93.67c-18.63 16.32-37.29 27.89-53.74 33.72-14.78 5.23-26.55 5.38-33.66 1.27-15.14-8.75-21.44-42.54-12.85-87.86q1.53-8 3.5-16a480.85 480.85 0 0064.69 9.39 501.2 501.2 0 0041.2 51c-2.98 2.93-6.03 5.75-9.14 8.48zm23.42-23.22c-9.72-10.51-19.42-22.14-28.88-34.64q13.79.54 28.08.54c9.78 0 19.46-.21 29-.64a439.33 439.33 0 01-28.2 34.74zm124.52 28.59c-2.86 15.44-8.61 25.74-15.72 29.86-15.13 8.78-47.48-2.63-82.36-32.72-4-3.44-8-7.13-12.07-11a484.54 484.54 0 0040.23-51.2 477.84 477.84 0 0065-10.05q1.47 5.94 2.6 11.64c4.81 24.3 5.5 46.28 2.32 63.47zm17.4-102.64c-2.62.87-5.32 1.71-8.06 2.53a483.26 483.26 0 00-24.31-60.94 481.52 481.52 0 0023.36-60.06c4.91 1.43 9.68 2.93 14.27 4.52 44.42 15.32 71.52 38 71.52 55.43 0 18.6-29.27 42.74-76.78 58.52z'/><path d='M256 298.55a43 43 0 10-42.86-43 42.91 42.91 0 0042.86 43z'/></svg>"}),o.jsx(A,{children:"React 19"})]}),o.jsxs(q,{color:"primary",children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M73.6 256c0-100.737 81.663-182.4 182.4-182.4 40.552 0 77.992 13.212 108.286 35.603 7.946-18.702 23.958-33.15 43.67-38.976C366.589 36.357 313.656 16 256 16 123.451 16 16 123.452 16 256s107.451 240 240 240c132.548 0 239.999-107.452 239.999-240 0-27.741-4.718-54.427-13.407-79.269-11.824 15.985-30.428 26.649-51.564 27.742 4.795 16.319 7.371 33.605 7.371 51.527 0 100.737-81.663 182.4-182.399 182.4-100.737 0-182.4-81.663-182.4-182.4z'/><path d='M491.065 207.374a238.383 238.383 0 00-8.473-30.643c-11.823 15.984-30.428 26.649-51.564 27.742a181.577 181.577 0 016.719 35.964c22.259-2.737 41.5-15.226 53.318-33.063zM256 361.001c57.853 0 105-47.057 105-105 0-57.854-47.057-105-105-105s-105 47.146-105 105c0 57.853 47.147 105 105 105zM413.5 166c28.995 0 52.5-23.505 52.5-52.5S442.495 61 413.5 61 361 84.505 361 113.5s23.505 52.5 52.5 52.5z'/></svg>"}),o.jsx(A,{children:"Ionic Framework"})]}),o.jsx(q,{color:"secondary",children:o.jsx(A,{children:"TypeScript"})}),o.jsx(q,{color:"secondary",children:o.jsx(A,{children:"Babylon.js"})}),o.jsx(q,{color:"tertiary",children:o.jsx(A,{children:"i18next"})}),o.jsx(q,{color:"tertiary",children:o.jsx(A,{children:"Vite"})}),o.jsx(q,{color:"success",children:o.jsx(A,{children:"PWA"})}),o.jsx(q,{color:"success",children:o.jsx(A,{children:"Supabase"})})]})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("aboutContact")})}),o.jsxs(d,{children:[o.jsx("p",{children:e("aboutContactDesc")}),o.jsxs("div",{className:"contact-info",children:[o.jsxs("p",{children:[o.jsxs("strong",{children:[e("aboutDeveloper"),":"]})," Museum App Team"]}),o.jsxs("p",{children:[o.jsxs("strong",{children:[e("aboutWebsite"),":"]})," https://gfq40.github.io/museum-app/"]}),o.jsxs("p",{children:[o.jsxs("strong",{children:[e("aboutEmail"),":"]})," info@museumapp.example"]})]})]})]}),o.jsx(u,{children:o.jsxs(d,{className:"about-footer",children:[o.jsx("p",{children:e("aboutCopyright")}),o.jsx("p",{children:e("aboutLicense")})]})})]})})]})},Rb=()=>{const{t:e}=he(),t=e=>{window.open(e,"_blank")};return o.jsxs(a,{children:[o.jsx(m,{children:o.jsxs(w,{children:[o.jsxs(y,{slot:"start",children:[o.jsx(b,{}),o.jsx(H,{defaultHref:"/gallery"})]}),o.jsx(v,{children:e("credits")})]})}),o.jsx(s,{fullscreen:!0,className:"credits-content",children:o.jsxs("div",{className:"credits-container",children:[o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("creditsThankYou")})}),o.jsx(d,{children:o.jsx("p",{children:e("creditsIntro")})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsxs(O,{children:[o.jsx(c,{icon:oy})," ",e("creditsLibraries")]})}),o.jsx(d,{children:o.jsxs(P,{children:[o.jsxs(f,{button:!0,onClick:()=>t("https://react.dev/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"React"}),o.jsx("p",{children:e("creditsReactDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]}),o.jsxs(f,{button:!0,onClick:()=>t("https://ionicframework.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Ionic Framework"}),o.jsx("p",{children:e("creditsIonicDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]}),o.jsxs(f,{button:!0,onClick:()=>t("https://www.babylonjs.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Babylon.js"}),o.jsx("p",{children:e("creditsBabylonDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]}),o.jsxs(f,{button:!0,onClick:()=>t("https://www.i18next.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"i18next"}),o.jsx("p",{children:e("creditsI18nDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]}),o.jsxs(f,{button:!0,onClick:()=>t("https://vitejs.dev/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Vite"}),o.jsx("p",{children:e("creditsViteDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]}),o.jsxs(f,{button:!0,onClick:()=>t("https://supabase.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Supabase"}),o.jsx("p",{children:e("creditsSupabaseDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]}),o.jsxs(f,{button:!0,onClick:()=>t("https://github.com/mebjas/html5-qrcode"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"html5-qrcode"}),o.jsx("p",{children:e("creditsQRDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]})]})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsxs(O,{children:[o.jsx(c,{icon:cy})," ",e("creditsImages")]})}),o.jsxs(d,{children:[o.jsx(P,{children:o.jsxs(f,{button:!0,onClick:()=>t("https://unsplash.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Unsplash"}),o.jsx("p",{children:e("creditsUnsplashDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]})}),o.jsxs("div",{className:"credits-photographers",children:[o.jsx("p",{children:o.jsxs("strong",{children:[e("creditsPhotographers"),":"]})}),o.jsxs("ul",{children:[o.jsx("li",{children:"Europeana (Ancient Pottery)"}),o.jsx("li",{children:"Birmingham Museums Trust (Historical Artifacts)"}),o.jsx("li",{children:"Europeana (Medieval Manuscript)"}),o.jsx("li",{children:"Europeana (Renaissance Painting)"}),o.jsx("li",{children:"Europeana (Ancient Sculpture)"})]})]})]})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsxs(O,{children:[o.jsx(c,{icon:oy})," ",e("credits3DModels")]})}),o.jsx(d,{children:o.jsxs(P,{children:[o.jsxs(f,{button:!0,onClick:()=>t("https://sketchfab.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Sketchfab"}),o.jsx("p",{children:e("creditsSketchfabDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]}),o.jsxs(f,{button:!0,onClick:()=>t("https://www.babylonjs.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Babylon.js Playground"}),o.jsx("p",{children:e("creditsBabylonPlaygroundDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]})]})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsxs(O,{children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M192 218v-6c0-14.84 10-27 24.24-30.59l174.59-46.68A20 20 0 01416 154v22' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M416 295.94v80c0 13.91-8.93 25.59-22 30l-22 8c-25.9 8.72-52-10.42-52-38h0a33.37 33.37 0 0123-32l51-18.15c13.07-4.4 22-15.94 22-29.85V58a10 10 0 00-12.6-9.61L204 102a16.48 16.48 0 00-12 16v226c0 13.91-8.93 25.6-22 30l-52 18c-13.88 4.68-22 17.22-22 32h0c0 27.58 26.52 46.55 52 38l22-8c13.07-4.4 22-16.08 22-30v-80' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>"})," ",e("creditsAudio")]})}),o.jsx(d,{children:o.jsx(P,{children:o.jsxs(f,{button:!0,onClick:()=>t("https://www.soundhelix.com/"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"SoundHelix"}),o.jsx("p",{children:e("creditsSoundHelixDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]})})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsxs(O,{children:[o.jsx(c,{icon:cy})," ",e("creditsIcons")]})}),o.jsx(d,{children:o.jsx(P,{children:o.jsxs(f,{button:!0,onClick:()=>t("https://ionic.io/ionicons"),children:[o.jsxs(A,{children:[o.jsx("h2",{children:"Ionicons"}),o.jsx("p",{children:e("creditsIoniconsDesc")})]}),o.jsx(c,{icon:hy,slot:"end"})]})})})]}),o.jsxs(u,{children:[o.jsx(R,{children:o.jsx(O,{children:e("creditsSpecialThanks")})}),o.jsxs(d,{children:[o.jsx("p",{children:e("creditsSpecialThanksDesc")}),o.jsxs("ul",{className:"credits-thanks-list",children:[o.jsx("li",{children:e("creditsThanks1")}),o.jsx("li",{children:e("creditsThanks2")}),o.jsx("li",{children:e("creditsThanks3")}),o.jsx("li",{children:e("creditsThanks4")})]})]})]}),o.jsx(u,{children:o.jsx(d,{className:"credits-footer",children:o.jsx("p",{children:e("creditsFooter")})})})]})})]})},Ob=()=>o.jsxs(W,{children:[o.jsxs(G,{children:[o.jsx(ce,{exact:!0,path:"/tabs/gallery",children:o.jsx(yb,{})}),o.jsx(ce,{exact:!0,path:"/tabs/artifact/:id",children:o.jsx(Ib,{})}),o.jsx(ce,{exact:!0,path:"/tabs/exhibits",children:o.jsx(_b,{})}),o.jsx(ce,{path:"/tabs/ar",children:o.jsx(Eb,{})}),o.jsx(ce,{path:"/tabs/quiz",children:o.jsx(Sb,{})}),o.jsx(ce,{exact:!0,path:"/tabs/help",children:o.jsx(Tb,{})}),o.jsx(ce,{exact:!0,path:"/tabs/about",children:o.jsx(kb,{})}),o.jsx(ce,{exact:!0,path:"/tabs/credits",children:o.jsx(Rb,{})}),o.jsx(ce,{exact:!0,path:"/tabs",children:o.jsx(ue,{to:"/tabs/gallery"})})]}),o.jsxs($,{slot:"bottom",children:[o.jsxs(X,{tab:"gallery",href:"/tabs/gallery",children:[o.jsx(c,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M450.29 112H142c-34 0-62 27.51-62 61.33v245.34c0 33.82 28 61.33 62 61.33h308c34 0 62-26.18 62-60V173.33c0-33.82-27.68-61.33-61.71-61.33zm-77.15 61.34a46 46 0 11-46.28 46 46.19 46.19 0 0146.28-46.01zm-231.55 276c-17 0-29.86-13.75-29.86-30.66v-64.83l90.46-80.79a46.54 46.54 0 0163.44 1.83L328.27 337l-113 112.33zM480 418.67a30.67 30.67 0 01-30.71 30.66H259L376.08 333a46.24 46.24 0 0159.44-.16L480 370.59z'/><path d='M384 32H64A64 64 0 000 96v256a64.11 64.11 0 0048 62V152a72 72 0 0172-72h326a64.11 64.11 0 00-62-48z'/></svg>"}),o.jsx(A,{children:"Gallery"})]}),o.jsxs(X,{tab:"exhibits",href:"/tabs/exhibits",children:[o.jsx(c,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M440.9 136.3a4 4 0 000-6.91L288.16 40.65a64.14 64.14 0 00-64.33 0L71.12 129.39a4 4 0 000 6.91L254 243.88a4 4 0 004.06 0zM54 163.51a4 4 0 00-6 3.49v173.89a48 48 0 0023.84 41.39L234 479.51a4 4 0 006-3.46V274.3a4 4 0 00-2-3.46zM272 275v201a4 4 0 006 3.46l162.15-97.23A48 48 0 00464 340.89V167a4 4 0 00-6-3.45l-184 108a4 4 0 00-2 3.45z'/></svg>"}),o.jsx(A,{children:"3D Exhibits"})]}),o.jsxs(X,{tab:"ar",href:"/tabs/ar",children:[o.jsx(c,{"aria-hidden":"true",icon:gy}),o.jsx(A,{children:"AR View"})]}),o.jsxs(X,{tab:"quiz",href:"/tabs/quiz",children:[o.jsx(c,{"aria-hidden":"true",icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 368a16 16 0 01-7.94-2.11L108 285.84a8 8 0 00-12 6.94V368a16 16 0 008.23 14l144 80a16 16 0 0015.54 0l144-80a16 16 0 008.23-14v-75.22a8 8 0 00-12-6.94l-140.06 80.05A16 16 0 01256 368z'/><path d='M495.92 190.5v-.11a16 16 0 00-8-12.28l-224-128a16 16 0 00-15.88 0l-224 128a16 16 0 000 27.78l224 128a16 16 0 0015.88 0L461 221.28a2 2 0 013 1.74v144.53c0 8.61 6.62 16 15.23 16.43A16 16 0 00496 368V192a14.76 14.76 0 00-.08-1.5z'/></svg>"}),o.jsx(A,{children:"Quiz"})]})]})]}),Nb=()=>{const[e,t]=re.useState(navigator.onLine),[r,n]=re.useState(!1);return re.useEffect(()=>{const e=()=>{t(!0),n(!0)},r=()=>{t(!1),n(!0)};return window.addEventListener("online",e),window.addEventListener("offline",r),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}},[]),o.jsx(o.Fragment,{children:o.jsx(Y,{isOpen:r,onDidDismiss:()=>n(!1),message:e?" Back online! Content will sync automatically.":" You are offline. Cached content is still available.",duration:3e3,color:e?"success":"warning",position:"top"})})},Db=()=>{const{t:e,i18n:t}=he(),r=oe(),[n,i]=de.useState(document.body.classList.contains("dark")),a=e=>{r.push(e);const t=document.querySelector("ion-menu");null==t||t.close()};return o.jsxs(K,{contentId:"main-content",type:"overlay",children:[o.jsx(m,{children:o.jsx(w,{color:"primary",children:o.jsx(v,{children:e("menu")})})}),o.jsx(s,{children:o.jsxs(P,{children:[o.jsxs(Q,{children:[o.jsx(c,{icon:dy,slot:"start"}),o.jsx(A,{children:e("language")})]}),o.jsx(f,{children:o.jsxs(U,{value:t.language,onIonChange:e=>{return r=e.detail.value,void t.changeLanguage(r);var r},interface:"popover",children:[o.jsx(V,{value:"en",children:" English"}),o.jsx(V,{value:"it",children:" Italiano"}),o.jsx(V,{value:"es",children:" Espaol"}),o.jsx(V,{value:"fr",children:" Franais"})]})}),o.jsxs(Q,{children:[o.jsx(c,{icon:n?py:wy,slot:"start"}),o.jsx(A,{children:e("theme")})]}),o.jsxs(f,{children:[o.jsx(c,{icon:wy,slot:"start"}),o.jsx(A,{children:e("lightMode")}),o.jsx(Z,{checked:n,onIonChange:e=>{return t=e.detail.checked,i(t),document.body.classList.toggle("dark",t),void localStorage.setItem("theme",t?"dark":"light");var t},slot:"end"}),o.jsx(c,{icon:py,slot:"end",style:{marginLeft:"8px"}})]}),o.jsx(Q,{style:{marginTop:"20px"},children:o.jsx(A,{children:e("information")})}),o.jsxs(f,{button:!0,onClick:()=>a("/tabs/help"),children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 80a176 176 0 10176 176A176 176 0 00256 80z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45 10 4.76 29.47 16.38 29.47 41.09 0 26-17 37.81-36.37 50.8S251 281.43 251 296' stroke-linecap='round' stroke-miterlimit='10' stroke-width='28' class='ionicon-fill-none'/><circle cx='250' cy='348' r='20'/></svg>",slot:"start"}),o.jsx(A,{children:e("help")})]}),o.jsxs(f,{button:!0,onClick:()=>a("/tabs/about"),children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M248 64C146.39 64 64 146.39 64 248s82.39 184 184 184 184-82.39 184-184S349.61 64 248 64z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M220 220h32v116' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M208 340h88' class='ionicon-fill-none ionicon-stroke-width'/><path d='M248 130a26 26 0 1026 26 26 26 0 00-26-26z'/></svg>",slot:"start"}),o.jsx(A,{children:e("about")})]}),o.jsxs(f,{button:!0,onClick:()=>a("/tabs/credits"),children:[o.jsx(c,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='160' r='128' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M143.65 227.82L48 400l86.86-.42a16 16 0 0113.82 7.8L192 480l88.33-194.32' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M366.54 224L464 400l-86.86-.42a16 16 0 00-13.82 7.8L320 480l-64-140.8' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='256' cy='160' r='64' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",slot:"start"}),o.jsx(A,{children:e("credits")})]})]})})]})};fe.use(pe).use(ge).init({resources:{en:{translation:{gallery:"Gallery",exhibits3d:"3D Exhibits",arView:"AR View",artifactDetails:"Artifact Details",virtualMuseum:"Virtual Museum",exploreHistory:"Explore History in Your Hands",continueWithGoogle:"Continue with Google",continueWithApple:"Continue with Apple",continueWithEmail:"Continue with Email",continueAsGuest:"Continue as Guest",or:"or",login:"Login",signUp:"Sign Up",email:"Email",password:"Password",pleaseEnterEmailPassword:"Please enter email and password",checkEmailVerification:"Please check your email to verify your account",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",back:"Back",welcomeFooter:"Discover ancient artifacts, explore 3D exhibits, and test your knowledge",guestModeActive:"You're browsing as guest",loginToSaveFavorites:"Login to save favorites",loginToTrackProgress:"Login to track your progress",logout:"Logout",museumGallery:"Museum Gallery",searchArtifacts:"Search artifacts...",all:"All",favorites:" Favorites",images:"Images",videos:"Videos",noArtifactsFound:"No artifacts found matching your search.",ancientPottery:"Ancient Pottery",ancientPotteryDesc:"Ancient pottery from the Bronze Age",historicalArtifacts:"Historical Artifacts",historicalArtifactsDesc:"Collection of historical artifacts",museumTour:"Museum Tour",museumTourDesc:"Virtual tour of the museum",ancientSculpture:"Ancient Sculpture",ancientSculptureDesc:"Classical sculpture from ancient Greece",audioGuide:"Audio Guide",description:"Description",artifactInformation:"Artifact Information",period:"Period",origin:"Origin",material:"Material",dimensions:"Dimensions",discovered:"Discovered",condition:"Condition",interactive3dViewer:"Interactive 3D Viewer",selectExhibit:"Select an exhibit to view in 3D",useMouseToRotate:"Use mouse/touch to rotate and zoom",ancientGlobe:"Ancient Globe",ancientGlobeDesc:"A spherical artifact",stoneCube:"Stone Cube",stoneCubeDesc:"Carved stone cube",columnFragment:"Column Fragment",columnFragmentDesc:"Ancient column piece",skullModel:"Skull Model",skullModelDesc:"3D scanned skull artifact",damagedHelmet:"Damaged Helmet",damagedHelmetDesc:"Battle-worn ancient helmet",augmentedReality:"Augmented Reality",arNotSupported:"AR not supported",arNotSupportedDesc:"Your device does not support WebXR AR.",startAr:"Start AR Experience",requirements:"Requirements",httpsRequired:"HTTPS connection required",arCapableDevice:"AR-capable device (ARCore/ARKit)",cameraPermission:"Camera permission",modernBrowser:"Modern browser with WebXR support",scanArtifactQr:"Scan Artifact QR Code",pointCamera:"Point your camera at the QR code",qrWellLit:"Make sure the QR code is well lit and centered",cancel:"Cancel",audioGuideDesc:"Listen to the audio guide to learn more about this artifact's history, significance, and the story behind its discovery.",backOnline:" Back online! Content will sync automatically.",offline:" You are offline. Cached content is still available.",switchToDark:"Switch to dark mode",switchToLight:"Switch to light mode",museumQuiz:"Museum Quiz",question:"Question",of:"of",score:"Score",submitAnswer:"Submit Answer",nextQuestion:"Next Question",viewResults:"View Results",explanation:"Explanation",quizComplete:"Quiz Complete!",youScored:"You scored",yourBadges:"Your Badges:",tryAgain:"Try Again",perfectScore:" Perfect Score!",excellent:" Excellent!",goodJob:" Good Job!",keepLearning:" Keep Learning!",scholarBadge:" Scholar",expertBadge:" Expert",masterBadge:" Master",q1Question:"What period is the Ancient Pottery from?",q1Option1:"Iron Age",q1Option2:"Bronze Age",q1Option3:"Stone Age",q1Option4:"Medieval Period",q1Explanation:"The Ancient Pottery dates back to the Bronze Age, approximately 3000-1200 BCE.",q2Question:"Where was the Ancient Sculpture discovered?",q2Option1:"Rome",q2Option2:"Athens",q2Option3:"Egypt",q2Option4:"Mesopotamia",q2Explanation:"The Ancient Sculpture is a classical piece from ancient Greece, discovered in Athens.",q3Question:"What material is the Ancient Pottery made from?",q3Option1:"Bronze",q3Option2:"Marble",q3Option3:"Terracotta",q3Option4:"Gold",q3Explanation:"Ancient pottery was typically made from terracotta, a type of fired clay.",q4Question:"Which civilization is known for creating the first museums?",q4Option1:"Romans",q4Option2:"Greeks",q4Option3:"Egyptians",q4Option4:"Chinese",q4Explanation:'The ancient Greeks created the first museums, called "Mouseion" (temples of the Muses).',q5Question:"What is the primary purpose of museum conservation?",q5Option1:"To make artifacts look new",q5Option2:"To preserve artifacts for future generations",q5Option3:"To increase artifact value",q5Option4:"To clean artifacts regularly",q5Explanation:"Conservation aims to preserve artifacts in their current state for future generations to study and enjoy.",menu:"Menu",language:"Language",theme:"Theme",lightMode:"Light Mode",darkMode:"Dark Mode",information:"Information",help:"Help",about:"About",credits:"Credits",helpWelcome:"Welcome to Museum App",helpIntro:"This guide will help you navigate and make the most of all the features available in the Museum App.",helpFeatures:"Features",helpGalleryTitle:"Gallery",helpGalleryDesc:"Browse through our collection of artifacts with search and filter options.",help3DTitle:"3D Exhibits",help3DDesc:"View interactive 3D models of artifacts. Rotate, zoom, and explore from all angles.",helpQRTitle:"QR Scanner",helpQRDesc:"Scan QR codes at the museum to get instant information about artifacts.",helpARTitle:"AR View",helpARDesc:"Experience artifacts in augmented reality using your device camera.",helpQuizTitle:"Quiz",helpQuizDesc:"Test your knowledge about museum artifacts and history.",helpFavoritesTitle:"Favorites",helpFavoritesDesc:"Save your favorite artifacts for quick access later.",helpSearchTitle:"Search & Filter",helpSearchDesc:"Find specific artifacts using search and category filters.",helpShareTitle:"Share",helpShareDesc:"Share interesting artifacts with friends and family.",helpLanguageTitle:"Multi-Language",helpLanguageDesc:"Switch between English, Italian, Spanish, and French.",helpThemeTitle:"Dark Mode",helpThemeDesc:"Toggle between light and dark themes for comfortable viewing.",helpTips:"Tips & Tricks",helpTip1:"Pull down on the Gallery page to refresh content",helpTip2:"Tap the heart icon to add artifacts to your favorites",helpTip3:"Use pinch gestures to zoom in on 3D models",helpTip4:"The app works offline - cached content is always available",helpTip5:"Complete the quiz to earn badges and test your knowledge",aboutAppName:"Museum App",aboutVersion:"Version 1.0.0",aboutDescription:"An interactive museum experience featuring 3D exhibits, AR viewing, multilingual support, and educational quizzes. Explore artifacts from around the world with cutting-edge technology.",aboutFeatures:"Key Features",aboutFeature1Title:"Multilingual",aboutFeature1Desc:"4 languages supported",aboutFeature2Title:"3D & AR",aboutFeature2Desc:"Interactive viewing",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Optimized for mobile",aboutFeature4Title:"Offline Mode",aboutFeature4Desc:"Works without internet",aboutTechnology:"Built With",aboutContact:"Contact",aboutContactDesc:"Have questions or feedback? We'd love to hear from you!",aboutDeveloper:"Developer",aboutWebsite:"Website",aboutEmail:"Email",aboutCopyright:" 2024 Museum App. All rights reserved.",aboutLicense:"Open source software built with modern web technologies.",creditsThankYou:"Thank You",creditsIntro:"This app was made possible thanks to these amazing open source projects and resources.",creditsLibraries:"Open Source Libraries",creditsReactDesc:"JavaScript library for building user interfaces",creditsIonicDesc:"Mobile-first UI component library",creditsBabylonDesc:"3D rendering engine for the web",creditsI18nDesc:"Internationalization framework",creditsViteDesc:"Next generation frontend tooling",creditsSupabaseDesc:"Open source Firebase alternative",creditsQRDesc:"QR code scanning library",creditsImages:"Images & Media",creditsUnsplashDesc:"Beautiful free images and photos",creditsPhotographers:"Photographers",credits3DModels:"3D Models",creditsSketchfabDesc:"Platform for 3D and AR content",creditsBabylonPlaygroundDesc:"Sample 3D models and scenes",creditsAudio:"Audio",creditsSoundHelixDesc:"Royalty-free music and audio",creditsIcons:"Icons",creditsIoniconsDesc:"Premium designed icons for web and mobile",creditsSpecialThanks:"Special Thanks",creditsSpecialThanksDesc:"Special thanks to everyone who contributed to making this app possible:",creditsThanks1:"The open source community for amazing tools and libraries",creditsThanks2:"Museums and cultural institutions for preserving history",creditsThanks3:"Photographers and 3D artists for sharing their work",creditsThanks4:"You, for using this app and supporting digital museums",creditsFooter:"Made with  for museum enthusiasts everywhere"}},it:{translation:{gallery:"Galleria",exhibits3d:"Mostre 3D",arView:"Vista AR",artifactDetails:"Dettagli Reperto",virtualMuseum:"Museo Virtuale",exploreHistory:"Esplora la Storia nelle Tue Mani",continueWithGoogle:"Continua con Google",continueWithApple:"Continua con Apple",continueWithEmail:"Continua con Email",continueAsGuest:"Continua come Ospite",or:"oppure",login:"Accedi",signUp:"Registrati",email:"Email",password:"Password",pleaseEnterEmailPassword:"Inserisci email e password",checkEmailVerification:"Controlla la tua email per verificare il tuo account",alreadyHaveAccount:"Hai gi un account?",dontHaveAccount:"Non hai un account?",back:"Indietro",welcomeFooter:"Scopri antichi reperti, esplora mostre 3D e metti alla prova le tue conoscenze",guestModeActive:"Stai navigando come ospite",loginToSaveFavorites:"Accedi per salvare i preferiti",loginToTrackProgress:"Accedi per tracciare i tuoi progressi",logout:"Esci",museumGallery:"Galleria del Museo",searchArtifacts:"Cerca reperti...",all:"Tutti",favorites:" Preferiti",images:"Immagini",videos:"Video",noArtifactsFound:"Nessun reperto trovato corrispondente alla tua ricerca.",ancientPottery:"Ceramica Antica",ancientPotteryDesc:"Ceramica antica dell'et del bronzo",historicalArtifacts:"Reperti Storici",historicalArtifactsDesc:"Collezione di reperti storici",museumTour:"Tour del Museo",museumTourDesc:"Tour virtuale del museo",ancientSculpture:"Scultura Antica",ancientSculptureDesc:"Scultura classica dell'antica Grecia",audioGuide:"Guida Audio",description:"Descrizione",artifactInformation:"Informazioni sul Reperto",period:"Periodo",origin:"Origine",material:"Materiale",dimensions:"Dimensioni",discovered:"Scoperto",condition:"Condizione",interactive3dViewer:"Visualizzatore 3D Interattivo",selectExhibit:"Seleziona una mostra da visualizzare in 3D",useMouseToRotate:"Usa il mouse/tocco per ruotare e ingrandire",ancientGlobe:"Globo Antico",ancientGlobeDesc:"Un artefatto sferico",stoneCube:"Cubo di Pietra",stoneCubeDesc:"Cubo di pietra scolpito",columnFragment:"Frammento di Colonna",columnFragmentDesc:"Pezzo di colonna antica",skullModel:"Modello di Cranio",skullModelDesc:"Cranio scansionato in 3D",damagedHelmet:"Elmo Danneggiato",damagedHelmetDesc:"Elmo antico consumato dalla battaglia",augmentedReality:"Realt Aumentata",arNotSupported:"AR non supportata",arNotSupportedDesc:"Il tuo dispositivo non supporta WebXR AR.",startAr:"Avvia Esperienza AR",requirements:"Requisiti",httpsRequired:"Connessione HTTPS richiesta",arCapableDevice:"Dispositivo compatibile AR (ARCore/ARKit)",cameraPermission:"Permesso fotocamera",modernBrowser:"Browser moderno con supporto WebXR",scanArtifactQr:"Scansiona Codice QR Reperto",pointCamera:"Punta la fotocamera sul codice QR",qrWellLit:"Assicurati che il codice QR sia ben illuminato e centrato",cancel:"Annulla",audioGuideDesc:"Ascolta la guida audio per saperne di pi sulla storia di questo reperto, il suo significato e la storia della sua scoperta.",backOnline:" Sei di nuovo online! Il contenuto si sincronizzer automaticamente.",offline:" Sei offline. Il contenuto memorizzato  ancora disponibile.",switchToDark:"Passa alla modalit scura",switchToLight:"Passa alla modalit chiara",museumQuiz:"Quiz del Museo",question:"Domanda",of:"di",score:"Punteggio",submitAnswer:"Invia Risposta",nextQuestion:"Prossima Domanda",viewResults:"Visualizza Risultati",explanation:"Spiegazione",quizComplete:"Quiz Completato!",youScored:"Hai ottenuto",yourBadges:"I Tuoi Badge:",tryAgain:"Riprova",perfectScore:" Punteggio Perfetto!",excellent:" Eccellente!",goodJob:" Ottimo Lavoro!",keepLearning:" Continua ad Imparare!",scholarBadge:" Studioso",expertBadge:" Esperto",masterBadge:" Maestro",q1Question:"Da quale periodo proviene la Ceramica Antica?",q1Option1:"Et del Ferro",q1Option2:"Et del Bronzo",q1Option3:"Et della Pietra",q1Option4:"Periodo Medievale",q1Explanation:"La Ceramica Antica risale all'Et del Bronzo, circa 3000-1200 a.C.",q2Question:"Dove  stata scoperta la Scultura Antica?",q2Option1:"Roma",q2Option2:"Atene",q2Option3:"Egitto",q2Option4:"Mesopotamia",q2Explanation:"La Scultura Antica  un pezzo classico dell'antica Grecia, scoperto ad Atene.",q3Question:"Di quale materiale  fatta la Ceramica Antica?",q3Option1:"Bronzo",q3Option2:"Marmo",q3Option3:"Terracotta",q3Option4:"Oro",q3Explanation:"La ceramica antica era tipicamente fatta di terracotta, un tipo di argilla cotta.",q4Question:"Quale civilt  nota per aver creato i primi musei?",q4Option1:"Romani",q4Option2:"Greci",q4Option3:"Egiziani",q4Option4:"Cinesi",q4Explanation:'Gli antichi Greci crearono i primi musei, chiamati "Mouseion" (templi delle Muse).',q5Question:"Qual  lo scopo principale della conservazione museale?",q5Option1:"Far sembrare nuovi i reperti",q5Option2:"Preservare i reperti per le generazioni future",q5Option3:"Aumentare il valore dei reperti",q5Option4:"Pulire regolarmente i reperti",q5Explanation:"La conservazione mira a preservare i reperti nel loro stato attuale per le generazioni future da studiare e apprezzare.",menu:"Menu",language:"Lingua",theme:"Tema",lightMode:"Modalit Chiara",darkMode:"Modalit Scura",information:"Informazioni",help:"Aiuto",about:"Info",credits:"Crediti",helpWelcome:"Benvenuto in Museum App",helpIntro:"Questa guida ti aiuter a navigare e sfruttare al meglio tutte le funzionalit disponibili nell'App del Museo.",helpFeatures:"Funzionalit",helpGalleryTitle:"Galleria",helpGalleryDesc:"Sfoglia la nostra collezione di reperti con opzioni di ricerca e filtro.",help3DTitle:"Mostre 3D",help3DDesc:"Visualizza modelli 3D interattivi di reperti. Ruota, ingrandisci ed esplora da tutte le angolazioni.",helpQRTitle:"Scanner QR",helpQRDesc:"Scansiona i codici QR al museo per ottenere informazioni istantanee sui reperti.",helpARTitle:"Vista AR",helpARDesc:"Sperimenta i reperti in realt aumentata usando la fotocamera del tuo dispositivo.",helpQuizTitle:"Quiz",helpQuizDesc:"Metti alla prova le tue conoscenze sui reperti museali e sulla storia.",helpFavoritesTitle:"Preferiti",helpFavoritesDesc:"Salva i tuoi reperti preferiti per un accesso rapido in seguito.",helpSearchTitle:"Ricerca e Filtro",helpSearchDesc:"Trova reperti specifici usando la ricerca e i filtri per categoria.",helpShareTitle:"Condividi",helpShareDesc:"Condividi reperti interessanti con amici e familiari.",helpLanguageTitle:"Multilingua",helpLanguageDesc:"Passa tra inglese, italiano, spagnolo e francese.",helpThemeTitle:"Modalit Scura",helpThemeDesc:"Passa tra temi chiari e scuri per una visualizzazione confortevole.",helpTips:"Suggerimenti e Trucchi",helpTip1:"Trascina verso il basso nella pagina Galleria per aggiornare i contenuti",helpTip2:"Tocca l'icona del cuore per aggiungere reperti ai tuoi preferiti",helpTip3:"Usa i gesti di pizzico per ingrandire i modelli 3D",helpTip4:"L'app funziona offline - i contenuti memorizzati sono sempre disponibili",helpTip5:"Completa il quiz per guadagnare badge e testare le tue conoscenze",aboutAppName:"Museum App",aboutVersion:"Versione 1.0.0",aboutDescription:"Un'esperienza museale interattiva con mostre 3D, visualizzazione AR, supporto multilingue e quiz educativi. Esplora reperti da tutto il mondo con tecnologia all'avanguardia.",aboutFeatures:"Caratteristiche Principali",aboutFeature1Title:"Multilingua",aboutFeature1Desc:"4 lingue supportate",aboutFeature2Title:"3D e AR",aboutFeature2Desc:"Visualizzazione interattiva",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Ottimizzato per mobile",aboutFeature4Title:"Modalit Offline",aboutFeature4Desc:"Funziona senza internet",aboutTechnology:"Costruito Con",aboutContact:"Contatti",aboutContactDesc:"Hai domande o feedback? Ci piacerebbe sentirti!",aboutDeveloper:"Sviluppatore",aboutWebsite:"Sito Web",aboutEmail:"Email",aboutCopyright:" 2024 Museum App. Tutti i diritti riservati.",aboutLicense:"Software open source costruito con moderne tecnologie web.",creditsThankYou:"Grazie",creditsIntro:"Questa app  stata resa possibile grazie a questi fantastici progetti e risorse open source.",creditsLibraries:"Librerie Open Source",creditsReactDesc:"Libreria JavaScript per costruire interfacce utente",creditsIonicDesc:"Libreria di componenti UI mobile-first",creditsBabylonDesc:"Motore di rendering 3D per il web",creditsI18nDesc:"Framework di internazionalizzazione",creditsViteDesc:"Strumenti frontend di nuova generazione",creditsSupabaseDesc:"Alternativa open source a Firebase",creditsQRDesc:"Libreria per la scansione di codici QR",creditsImages:"Immagini e Media",creditsUnsplashDesc:"Bellissime immagini e foto gratuite",creditsPhotographers:"Fotografi",credits3DModels:"Modelli 3D",creditsSketchfabDesc:"Piattaforma per contenuti 3D e AR",creditsBabylonPlaygroundDesc:"Modelli e scene 3D di esempio",creditsAudio:"Audio",creditsSoundHelixDesc:"Musica e audio royalty-free",creditsIcons:"Icone",creditsIoniconsDesc:"Icone premium progettate per web e mobile",creditsSpecialThanks:"Ringraziamenti Speciali",creditsSpecialThanksDesc:"Un ringraziamento speciale a tutti coloro che hanno contribuito a rendere possibile questa app:",creditsThanks1:"La comunit open source per strumenti e librerie fantastici",creditsThanks2:"Musei e istituzioni culturali per preservare la storia",creditsThanks3:"Fotografi e artisti 3D per condividere il loro lavoro",creditsThanks4:"Tu, per aver usato questa app e supportato i musei digitali",creditsFooter:"Fatto con  per gli appassionati di musei ovunque"}},es:{translation:{gallery:"Galera",exhibits3d:"Exhibiciones 3D",arView:"Vista AR",artifactDetails:"Detalles del Artefacto",virtualMuseum:"Museo Virtual",exploreHistory:"Explora la Historia en Tus Manos",continueWithGoogle:"Continuar con Google",continueWithApple:"Continuar con Apple",continueWithEmail:"Continuar con Email",continueAsGuest:"Continuar como Invitado",or:"o",login:"Iniciar Sesin",signUp:"Registrarse",email:"Email",password:"Contrasea",pleaseEnterEmailPassword:"Por favor ingresa email y contrasea",checkEmailVerification:"Por favor revisa tu email para verificar tu cuenta",alreadyHaveAccount:"Ya tienes una cuenta?",dontHaveAccount:"No tienes una cuenta?",back:"Atrs",welcomeFooter:"Descubre artefactos antiguos, explora exhibiciones 3D y pon a prueba tus conocimientos",guestModeActive:"Ests navegando como invitado",loginToSaveFavorites:"Inicia sesin para guardar favoritos",loginToTrackProgress:"Inicia sesin para rastrear tu progreso",logout:"Cerrar Sesin",museumGallery:"Galera del Museo",searchArtifacts:"Buscar artefactos...",all:"Todos",favorites:" Favoritos",images:"Imgenes",videos:"Videos",noArtifactsFound:"No se encontraron artefactos que coincidan con tu bsqueda.",ancientPottery:"Cermica Antigua",ancientPotteryDesc:"Cermica antigua de la Edad del Bronce",historicalArtifacts:"Artefactos Histricos",historicalArtifactsDesc:"Coleccin de artefactos histricos",museumTour:"Tour del Museo",museumTourDesc:"Tour virtual del museo",ancientSculpture:"Escultura Antigua",ancientSculptureDesc:"Escultura clsica de la antigua Grecia",audioGuide:"Gua de Audio",description:"Descripcin",artifactInformation:"Informacin del Artefacto",period:"Perodo",origin:"Origen",material:"Material",dimensions:"Dimensiones",discovered:"Descubierto",condition:"Condicin",interactive3dViewer:"Visor 3D Interactivo",selectExhibit:"Selecciona una exhibicin para ver en 3D",useMouseToRotate:"Usa el ratn/tctil para rotar y hacer zoom",ancientGlobe:"Globo Antiguo",ancientGlobeDesc:"Un artefacto esfrico",stoneCube:"Cubo de Piedra",stoneCubeDesc:"Cubo de piedra tallado",columnFragment:"Fragmento de Columna",columnFragmentDesc:"Pieza de columna antigua",skullModel:"Modelo de Crneo",skullModelDesc:"Crneo escaneado en 3D",damagedHelmet:"Casco Daado",damagedHelmetDesc:"Casco antiguo desgastado por la batalla",augmentedReality:"Realidad Aumentada",arNotSupported:"AR no compatible",arNotSupportedDesc:"Tu dispositivo no es compatible con WebXR AR.",startAr:"Iniciar Experiencia AR",requirements:"Requisitos",httpsRequired:"Conexin HTTPS requerida",arCapableDevice:"Dispositivo compatible con AR (ARCore/ARKit)",cameraPermission:"Permiso de cmara",modernBrowser:"Navegador moderno con soporte WebXR",scanArtifactQr:"Escanear Cdigo QR del Artefacto",pointCamera:"Apunta tu cmara al cdigo QR",qrWellLit:"Asegrate de que el cdigo QR est bien iluminado y centrado",cancel:"Cancelar",audioGuideDesc:"Escucha la gua de audio para aprender ms sobre la historia de este artefacto, su significado y la historia detrs de su descubrimiento.",backOnline:" De vuelta en lnea! El contenido se sincronizar automticamente.",offline:" Ests sin conexin. El contenido en cach an est disponible.",switchToDark:"Cambiar a modo oscuro",switchToLight:"Cambiar a modo claro",museumQuiz:"Quiz del Museo",question:"Pregunta",of:"de",score:"Puntuacin",submitAnswer:"Enviar Respuesta",nextQuestion:"Siguiente Pregunta",viewResults:"Ver Resultados",explanation:"Explicacin",quizComplete:"Quiz Completado!",youScored:"Obtuviste",yourBadges:"Tus Insignias:",tryAgain:"Intentar de Nuevo",perfectScore:" Puntuacin Perfecta!",excellent:" Excelente!",goodJob:" Buen Trabajo!",keepLearning:" Sigue Aprendiendo!",scholarBadge:" Erudito",expertBadge:" Experto",masterBadge:" Maestro",q1Question:"De qu perodo es la Cermica Antigua?",q1Option1:"Edad del Hierro",q1Option2:"Edad del Bronce",q1Option3:"Edad de Piedra",q1Option4:"Perodo Medieval",q1Explanation:"La Cermica Antigua se remonta a la Edad del Bronce, aproximadamente 3000-1200 a.C.",q2Question:"Dnde se descubri la Escultura Antigua?",q2Option1:"Roma",q2Option2:"Atenas",q2Option3:"Egipto",q2Option4:"Mesopotamia",q2Explanation:"La Escultura Antigua es una pieza clsica de la antigua Grecia, descubierta en Atenas.",q3Question:"De qu material est hecha la Cermica Antigua?",q3Option1:"Bronce",q3Option2:"Mrmol",q3Option3:"Terracota",q3Option4:"Oro",q3Explanation:"La cermica antigua se haca tpicamente de terracota, un tipo de arcilla cocida.",q4Question:"Qu civilizacin es conocida por crear los primeros museos?",q4Option1:"Romanos",q4Option2:"Griegos",q4Option3:"Egipcios",q4Option4:"Chinos",q4Explanation:'Los antiguos griegos crearon los primeros museos, llamados "Mouseion" (templos de las Musas).',q5Question:"Cul es el propsito principal de la conservacin musestica?",q5Option1:"Hacer que los artefactos parezcan nuevos",q5Option2:"Preservar artefactos para generaciones futuras",q5Option3:"Aumentar el valor de los artefactos",q5Option4:"Limpiar artefactos regularmente",q5Explanation:"La conservacin tiene como objetivo preservar los artefactos en su estado actual para que las generaciones futuras los estudien y disfruten.",menu:"Men",language:"Idioma",theme:"Tema",lightMode:"Modo Claro",darkMode:"Modo Oscuro",information:"Informacin",help:"Ayuda",about:"Acerca de",credits:"Crditos",helpWelcome:"Bienvenido a Museum App",helpIntro:"Esta gua te ayudar a navegar y aprovechar al mximo todas las funciones disponibles en la App del Museo.",helpFeatures:"Caractersticas",helpGalleryTitle:"Galera",helpGalleryDesc:"Explora nuestra coleccin de artefactos con opciones de bsqueda y filtro.",help3DTitle:"Exposiciones 3D",help3DDesc:"Ver modelos 3D interactivos de artefactos. Rotar, ampliar y explorar desde todos los ngulos.",helpQRTitle:"Escner QR",helpQRDesc:"Escanea cdigos QR en el museo para obtener informacin instantnea sobre artefactos.",helpARTitle:"Vista AR",helpARDesc:"Experimenta artefactos en realidad aumentada usando la cmara de tu dispositivo.",helpQuizTitle:"Cuestionario",helpQuizDesc:"Pon a prueba tus conocimientos sobre artefactos musesticos e historia.",helpFavoritesTitle:"Favoritos",helpFavoritesDesc:"Guarda tus artefactos favoritos para acceso rpido ms tarde.",helpSearchTitle:"Buscar y Filtrar",helpSearchDesc:"Encuentra artefactos especficos usando bsqueda y filtros de categora.",helpShareTitle:"Compartir",helpShareDesc:"Comparte artefactos interesantes con amigos y familiares.",helpLanguageTitle:"Multiidioma",helpLanguageDesc:"Cambia entre ingls, italiano, espaol y francs.",helpThemeTitle:"Modo Oscuro",helpThemeDesc:"Alterna entre temas claros y oscuros para una visualizacin cmoda.",helpTips:"Consejos y Trucos",helpTip1:"Desliza hacia abajo en la pgina de Galera para actualizar el contenido",helpTip2:"Toca el cono del corazn para agregar artefactos a tus favoritos",helpTip3:"Usa gestos de pellizco para acercar modelos 3D",helpTip4:"La app funciona sin conexin - el contenido en cach siempre est disponible",helpTip5:"Completa el cuestionario para ganar insignias y probar tus conocimientos",aboutAppName:"Museum App",aboutVersion:"Versin 1.0.0",aboutDescription:"Una experiencia musestica interactiva con exposiciones 3D, visualizacin AR, soporte multiidioma y cuestionarios educativos.",aboutFeatures:"Caractersticas Clave",aboutFeature1Title:"Multiidioma",aboutFeature1Desc:"4 idiomas soportados",aboutFeature2Title:"3D y AR",aboutFeature2Desc:"Visualizacin interactiva",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Optimizado para mvil",aboutFeature4Title:"Modo Sin Conexin",aboutFeature4Desc:"Funciona sin internet",aboutTechnology:"Construido Con",aboutContact:"Contacto",aboutContactDesc:"Tienes preguntas o comentarios? Nos encantara saber de ti!",aboutDeveloper:"Desarrollador",aboutWebsite:"Sitio Web",aboutEmail:"Correo",aboutCopyright:" 2024 Museum App. Todos los derechos reservados.",aboutLicense:"Software de cdigo abierto construido con tecnologas web modernas.",creditsThankYou:"Gracias",creditsIntro:"Esta app fue posible gracias a estos increbles proyectos y recursos de cdigo abierto.",creditsLibraries:"Bibliotecas de Cdigo Abierto",creditsReactDesc:"Biblioteca JavaScript para construir interfaces de usuario",creditsIonicDesc:"Biblioteca de componentes UI mobile-first",creditsBabylonDesc:"Motor de renderizado 3D para la web",creditsI18nDesc:"Framework de internacionalizacin",creditsViteDesc:"Herramientas frontend de prxima generacin",creditsSupabaseDesc:"Alternativa de cdigo abierto a Firebase",creditsQRDesc:"Biblioteca de escaneo de cdigos QR",creditsImages:"Imgenes y Medios",creditsUnsplashDesc:"Hermosas imgenes y fotos gratuitas",creditsPhotographers:"Fotgrafos",credits3DModels:"Modelos 3D",creditsSketchfabDesc:"Plataforma para contenido 3D y AR",creditsBabylonPlaygroundDesc:"Modelos y escenas 3D de muestra",creditsAudio:"Audio",creditsSoundHelixDesc:"Msica y audio libre de regalas",creditsIcons:"Iconos",creditsIoniconsDesc:"Iconos premium diseados para web y mvil",creditsSpecialThanks:"Agradecimientos Especiales",creditsSpecialThanksDesc:"Agradecimientos especiales a todos los que contribuyeron a hacer posible esta app:",creditsThanks1:"La comunidad de cdigo abierto por herramientas y bibliotecas increbles",creditsThanks2:"Museos e instituciones culturales por preservar la historia",creditsThanks3:"Fotgrafos y artistas 3D por compartir su trabajo",creditsThanks4:"T, por usar esta app y apoyar los museos digitales",creditsFooter:"Hecho con  para entusiastas de museos en todas partes"}},fr:{translation:{gallery:"Galerie",exhibits3d:"Expositions 3D",arView:"Vue AR",artifactDetails:"Dtails de l'Artefact",virtualMuseum:"Muse Virtuel",exploreHistory:"Explorez l'Histoire dans Vos Mains",continueWithGoogle:"Continuer avec Google",continueWithApple:"Continuer avec Apple",continueWithEmail:"Continuer avec Email",continueAsGuest:"Continuer en tant qu'Invit",or:"ou",login:"Connexion",signUp:"S'inscrire",email:"Email",password:"Mot de passe",pleaseEnterEmailPassword:"Veuillez entrer email et mot de passe",checkEmailVerification:"Veuillez vrifier votre email pour vrifier votre compte",alreadyHaveAccount:"Vous avez dj un compte?",dontHaveAccount:"Vous n'avez pas de compte?",back:"Retour",welcomeFooter:"Dcouvrez des artefacts anciens, explorez des expositions 3D et testez vos connaissances",guestModeActive:"Vous naviguez en tant qu'invit",loginToSaveFavorites:"Connectez-vous pour sauvegarder les favoris",loginToTrackProgress:"Connectez-vous pour suivre vos progrs",logout:"Dconnexion",museumGallery:"Galerie du Muse",searchArtifacts:"Rechercher des artefacts...",all:"Tous",favorites:" Favoris",images:"Images",videos:"Vidos",noArtifactsFound:"Aucun artefact trouv correspondant  votre recherche.",ancientPottery:"Poterie Ancienne",ancientPotteryDesc:"Poterie ancienne de l'ge du bronze",historicalArtifacts:"Artefacts Historiques",historicalArtifactsDesc:"Collection d'artefacts historiques",museumTour:"Visite du Muse",museumTourDesc:"Visite virtuelle du muse",ancientSculpture:"Sculpture Ancienne",ancientSculptureDesc:"Sculpture classique de la Grce antique",audioGuide:"Guide Audio",description:"Description",artifactInformation:"Informations sur l'Artefact",period:"Priode",origin:"Origine",material:"Matriau",dimensions:"Dimensions",discovered:"Dcouvert",condition:"tat",interactive3dViewer:"Visionneuse 3D Interactive",selectExhibit:"Slectionnez une exposition  voir en 3D",useMouseToRotate:"Utilisez la souris/tactile pour faire pivoter et zoomer",ancientGlobe:"Globe Ancien",ancientGlobeDesc:"Un artefact sphrique",stoneCube:"Cube de Pierre",stoneCubeDesc:"Cube de pierre sculpt",columnFragment:"Fragment de Colonne",columnFragmentDesc:"Morceau de colonne ancienne",skullModel:"Modle de Crne",skullModelDesc:"Crne scann en 3D",damagedHelmet:"Casque Endommag",damagedHelmetDesc:"Casque ancien us par la bataille",augmentedReality:"Ralit Augmente",arNotSupported:"AR non pris en charge",arNotSupportedDesc:"Votre appareil ne prend pas en charge WebXR AR.",startAr:"Dmarrer l'Exprience AR",requirements:"Exigences",httpsRequired:"Connexion HTTPS requise",arCapableDevice:"Appareil compatible AR (ARCore/ARKit)",cameraPermission:"Permission de camra",modernBrowser:"Navigateur moderne avec support WebXR",scanArtifactQr:"Scanner le Code QR de l'Artefact",pointCamera:"Pointez votre camra sur le code QR",qrWellLit:"Assurez-vous que le code QR est bien clair et centr",cancel:"Annuler",audioGuideDesc:"coutez le guide audio pour en savoir plus sur l'histoire de cet artefact, sa signification et l'histoire de sa dcouverte.",backOnline:" De retour en ligne ! Le contenu se synchronisera automatiquement.",offline:" Vous tes hors ligne. Le contenu en cache est toujours disponible.",switchToDark:"Passer en mode sombre",switchToLight:"Passer en mode clair",museumQuiz:"Quiz du Muse",question:"Question",of:"de",score:"Score",submitAnswer:"Soumettre la Rponse",nextQuestion:"Question Suivante",viewResults:"Voir les Rsultats",explanation:"Explication",quizComplete:"Quiz Termin !",youScored:"Vous avez obtenu",yourBadges:"Vos Badges :",tryAgain:"Ressayer",perfectScore:" Score Parfait !",excellent:" Excellent !",goodJob:" Bon Travail !",keepLearning:" Continuez  Apprendre !",scholarBadge:" rudit",expertBadge:" Expert",masterBadge:" Matre",q1Question:"De quelle priode provient la Poterie Ancienne ?",q1Option1:"ge du Fer",q1Option2:"ge du Bronze",q1Option3:"ge de Pierre",q1Option4:"Priode Mdivale",q1Explanation:"La Poterie Ancienne remonte  l'ge du Bronze, environ 3000-1200 avant J.-C.",q2Question:"O la Sculpture Ancienne a-t-elle t dcouverte ?",q2Option1:"Rome",q2Option2:"Athnes",q2Option3:"gypte",q2Option4:"Msopotamie",q2Explanation:"La Sculpture Ancienne est une pice classique de la Grce antique, dcouverte  Athnes.",q3Question:"De quel matriau est faite la Poterie Ancienne ?",q3Option1:"Bronze",q3Option2:"Marbre",q3Option3:"Terre Cuite",q3Option4:"Or",q3Explanation:"La poterie ancienne tait gnralement faite de terre cuite, un type d'argile cuite.",q4Question:"Quelle civilisation est connue pour avoir cr les premiers muses ?",q4Option1:"Romains",q4Option2:"Grecs",q4Option3:"gyptiens",q4Option4:"Chinois",q4Explanation:'Les anciens Grecs ont cr les premiers muses, appels "Mouseion" (temples des Muses).',q5Question:"Quel est le but principal de la conservation musale ?",q5Option1:"Faire paratre les artefacts neufs",q5Option2:"Prserver les artefacts pour les gnrations futures",q5Option3:"Augmenter la valeur des artefacts",q5Option4:"Nettoyer rgulirement les artefacts",q5Explanation:"La conservation vise  prserver les artefacts dans leur tat actuel pour que les gnrations futures puissent les tudier et en profiter.",menu:"Menu",language:"Langue",theme:"Thme",lightMode:"Mode Clair",darkMode:"Mode Sombre",information:"Information",help:"Aide",about:" propos",credits:"Crdits",helpWelcome:"Bienvenue dans Museum App",helpIntro:"Ce guide vous aidera  naviguer et  tirer le meilleur parti de toutes les fonctionnalits disponibles dans l'App du Muse.",helpFeatures:"Fonctionnalits",helpGalleryTitle:"Galerie",helpGalleryDesc:"Parcourez notre collection d'artefacts avec des options de recherche et de filtre.",help3DTitle:"Expositions 3D",help3DDesc:"Visualisez des modles 3D interactifs d'artefacts. Faites pivoter, zoomez et explorez sous tous les angles.",helpQRTitle:"Scanner QR",helpQRDesc:"Scannez les codes QR au muse pour obtenir des informations instantanes sur les artefacts.",helpARTitle:"Vue AR",helpARDesc:"Dcouvrez les artefacts en ralit augmente en utilisant la camra de votre appareil.",helpQuizTitle:"Quiz",helpQuizDesc:"Testez vos connaissances sur les artefacts musaux et l'histoire.",helpFavoritesTitle:"Favoris",helpFavoritesDesc:"Enregistrez vos artefacts prfrs pour un accs rapide ultrieur.",helpSearchTitle:"Recherche et Filtre",helpSearchDesc:"Trouvez des artefacts spcifiques en utilisant la recherche et les filtres de catgorie.",helpShareTitle:"Partager",helpShareDesc:"Partagez des artefacts intressants avec vos amis et votre famille.",helpLanguageTitle:"Multilingue",helpLanguageDesc:"Basculez entre l'anglais, l'italien, l'espagnol et le franais.",helpThemeTitle:"Mode Sombre",helpThemeDesc:"Basculez entre les thmes clairs et sombres pour un affichage confortable.",helpTips:"Conseils et Astuces",helpTip1:"Tirez vers le bas sur la page Galerie pour actualiser le contenu",helpTip2:"Appuyez sur l'icne du cur pour ajouter des artefacts  vos favoris",helpTip3:"Utilisez les gestes de pincement pour zoomer sur les modles 3D",helpTip4:"L'application fonctionne hors ligne - le contenu en cache est toujours disponible",helpTip5:"Compltez le quiz pour gagner des badges et tester vos connaissances",aboutAppName:"Museum App",aboutVersion:"Version 1.0.0",aboutDescription:"Une exprience musale interactive avec des expositions 3D, une visualisation AR, un support multilingue et des quiz ducatifs.",aboutFeatures:"Caractristiques Cls",aboutFeature1Title:"Multilingue",aboutFeature1Desc:"4 langues supportes",aboutFeature2Title:"3D et AR",aboutFeature2Desc:"Visualisation interactive",aboutFeature3Title:"Mobile First",aboutFeature3Desc:"Optimis pour mobile",aboutFeature4Title:"Mode Hors Ligne",aboutFeature4Desc:"Fonctionne sans internet",aboutTechnology:"Construit Avec",aboutContact:"Contact",aboutContactDesc:"Vous avez des questions ou des commentaires? Nous aimerions vous entendre!",aboutDeveloper:"Dveloppeur",aboutWebsite:"Site Web",aboutEmail:"Email",aboutCopyright:" 2024 Museum App. Tous droits rservs.",aboutLicense:"Logiciel open source construit avec des technologies web modernes.",creditsThankYou:"Merci",creditsIntro:"Cette application a t rendue possible grce  ces incroyables projets et ressources open source.",creditsLibraries:"Bibliothques Open Source",creditsReactDesc:"Bibliothque JavaScript pour construire des interfaces utilisateur",creditsIonicDesc:"Bibliothque de composants UI mobile-first",creditsBabylonDesc:"Moteur de rendu 3D pour le web",creditsI18nDesc:"Framework d'internationalisation",creditsViteDesc:"Outils frontend de nouvelle gnration",creditsSupabaseDesc:"Alternative open source  Firebase",creditsQRDesc:"Bibliothque de scan de codes QR",creditsImages:"Images et Mdias",creditsUnsplashDesc:"Belles images et photos gratuites",creditsPhotographers:"Photographes",credits3DModels:"Modles 3D",creditsSketchfabDesc:"Plateforme pour contenu 3D et AR",creditsBabylonPlaygroundDesc:"Modles et scnes 3D d'exemple",creditsAudio:"Audio",creditsSoundHelixDesc:"Musique et audio libres de droits",creditsIcons:"Icnes",creditsIoniconsDesc:"Icnes premium conues pour le web et le mobile",creditsSpecialThanks:"Remerciements Spciaux",creditsSpecialThanksDesc:"Remerciements spciaux  tous ceux qui ont contribu  rendre cette application possible:",creditsThanks1:"La communaut open source pour des outils et bibliothques incroyables",creditsThanks2:"Les muses et institutions culturelles pour prserver l'histoire",creditsThanks3:"Les photographes et artistes 3D pour partager leur travail",creditsThanks4:"Vous, pour utiliser cette application et soutenir les muses numriques",creditsFooter:"Fait avec  pour les passionns de muses partout"}}},fallbackLng:"en",interpolation:{escapeValue:!1}}),J();const Pb=()=>(re.useEffect(()=>{"serviceWorker"in navigator&&"https:"===window.location.protocol&&navigator.serviceWorker.register("/museum-app/sw.js").then(e=>{console.log("Service Worker registered:",e)},e=>{console.log("Service Worker registration failed:",e)})},[]),o.jsx(ee,{children:o.jsxs(ny,{children:[o.jsx(Nb,{}),o.jsxs(te,{basename:"/museum-app",children:[o.jsx(Db,{}),o.jsxs(G,{id:"main-content",children:[o.jsx(ce,{exact:!0,path:"/welcome",children:o.jsx(yy,{})}),o.jsx(ce,{path:"/tabs",children:o.jsx(Ob,{})}),o.jsx(ce,{exact:!0,path:"/",children:o.jsx(ue,{to:"/welcome"})})]})]})]})})),Mb=document.getElementById("root");Qf.createRoot(Mb).render(o.jsx(de.StrictMode,{children:o.jsx(Pb,{})}))}}});
