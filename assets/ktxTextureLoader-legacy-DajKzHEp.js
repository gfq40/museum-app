System.register(["./index-legacy-BEHu2smx.js"],function(e,r){"use strict";var t,a,n;return{setters:[e=>{t=e.z,a=e.A,n=e.B}],execute:function(){e("_KTXTextureLoader",class{constructor(){this.supportCascades=!1}loadCubeData(e,r,a,n){if(Array.isArray(e))return;r._invertVScale=!r.invertY;const s=r.getEngine(),i=new t(e,6),u=i.numberOfMipmapLevels>1&&r.generateMipMaps;s._unpackFlipY(!0),i.uploadLevels(r,r.generateMipMaps),r.width=i.pixelWidth,r.height=i.pixelHeight,s._setCubeMapTextureParams(r,u,i.numberOfMipmapLevels-1),r.isReady=!0,r.onLoadedObservable.notifyObservers(r),r.onLoadedObservable.clear(),n&&n()}loadData(e,r,s,i){if(t.IsValid(e)){r._invertVScale=!r.invertY;const a=new t(e,1),n=function(e){switch(e){case 35916:return 33776;case 35918:return 33778;case 35919:return 33779;case 37493:return 37492;case 37497:return 37496;case 37495:return 37494;case 37840:return 37808;case 36493:return 36492}return null}(a.glInternalFormat);n?(r.format=n,r._useSRGBBuffer=r.getEngine()._getUseSRGBBuffer(!0,r.generateMipMaps),r._gammaSpace=!0):r.format=a.glInternalFormat,s(a.pixelWidth,a.pixelHeight,r.generateMipMaps,!0,()=>{a.uploadLevels(r,r.generateMipMaps)},a.isInvalid)}else a.IsValid(e)?new a(r.getEngine())._uploadAsync(e,r,i).then(()=>{s(r.width,r.height,r.generateMipMaps,!0,()=>{},!1)},e=>{n.Warn(`Failed to load KTX2 texture data: ${e.message}`),s(0,0,!1,!1,()=>{},!0)}):(n.Error("texture missing KTX identifier"),s(0,0,!1,!1,()=>{},!0))}})}}});
